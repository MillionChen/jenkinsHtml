(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1412:function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:!0}),e.postPointSet=function(t,e){return function(a){return(0,o.default)({url:u,data:t}).then((function(t){e&&e(t),console.log(t.data),a({type:"POINT_SET",data:t.data})}))}},e.excl=function(t){return console.log(t),function(e){return(0,o.default)({url:r,data:t}).then((function(t){"1000"==t.code&&i.default.success(t.data)}))}},e.postPointEdit=function(t){return console.log(t),function(e){return(0,o.default)({url:c,data:t}).then((function(t){"1000"==t.code&&i.default.success("保存成功！")}))}},e.getPointTable=function(t){return console.log(t),function(e){return(0,o.default)({url:f,data:t}).then((function(t){e({type:"POINT_TABLE",data:t})}))}},e.postPointShelf=function(t,e,a){return console.log(t),function(e){return(0,o.default)({url:d,data:t}).then((function(t){e({type:"POINT_DETAILED",data:t}),a&&a()}))}},e.postPointShelves=function(t,e,a){return console.log(t),function(e){return(0,o.default)({url:s,data:t}).then((function(t){e({type:"POINT_DETAILED",data:t}),a&&a()}))}},e.postPointAdd=function(t,e,a){return console.log(t),function(e){return(0,o.default)({url:p,data:t}).then((function(t){e({type:"POINT_DETAILED",data:t}),a&&a()}))}},e.postPointModify=function(t,e,a){return console.log(t),function(e){return(0,o.default)({url:m,data:t}).then((function(t){e({type:"POINT_DETAILED",data:t}),a&&a()}))}},e.getPointDetailed=function(t){return console.log(t),function(e){return(0,o.default)({url:v,data:t}).then((function(t){e({type:"POINT_DETAILED",data:t})}))}},e.pointActivityDel=function(t,e){return console.log(t),function(a){return(0,o.default)({url:h,data:t}).then((function(t){e(t)}))}},e.POINT_DETAILED=e.POINT_TABLE=e.POINT_SET=void 0,a(61);var i=n(a(62)),o=n(a(78)),l=n(a(1413));e.POINT_SET="POINT_SET";e.POINT_TABLE="POINT_TABLE";e.POINT_DETAILED="POINT_DETAILED";var u=l.default.postPointSetApi,r=l.default.exclApi,c=l.default.postPointEditApi,f=l.default.getPointTableApi,d=l.default.postPointShelfApi,s=l.default.postPointShelvesApi,p=l.default.postPointAddApi,m=l.default.postPointModifyApi,v=l.default.getPointDetailedApi,h=l.default.pointActivityDelApi},1413:function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a(63)),o={postPointSetApi:"GET ".concat(i.default.webManage,"/point/strategy/view"),exclApi:"POST ".concat(i.default.webManage,"/point/import"),postPointEditApi:"POST ".concat(i.default.webManage,"/point/strategy/update"),getPointTableApi:"GET ".concat(i.default.webManage,"/activity/list"),postPointShelfApi:"POST ".concat(i.default.webManage,"/activity/enabled"),postPointShelvesApi:"POST ".concat(i.default.webManage,"/activity/disabled"),postPointAddApi:"POST ".concat(i.default.webManage,"/activity/insert"),postPointModifyApi:"POST ".concat(i.default.webManage,"/activity/update"),getPointDetailedApi:"GET ".concat(i.default.webManage,"/point/details/list"),pointActivityDelApi:"POST ".concat(i.default.webManage,"/activity/delete")};e.default=o},1801:function(t,e,a){"use strict";var n=a(0);a(44),a(103),a(20),a(34),a(35),a(23),a(53),a(151),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a(146);var i=n(a(150));a(549);var o=n(a(544));a(140);var l=n(a(535));a(564);var u=n(a(563));a(590);var r=n(a(591));a(61);var c=n(a(62)),f=n(a(29)),d=n(a(30)),s=n(a(59)),p=n(a(32)),m=n(a(33)),v=n(a(31)),h=n(a(2));a(540);var g=n(a(539));a(537);var y=n(a(536)),P=n(a(1)),S=a(65),T=n(a(226)),E=n(a(223)),b=a(52),N=a(1412),A=n(a(1802)),D=n(a(1803));function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var O=y.default.Search,_=(g.default.Item,location.pathname.split("/")[1]),I=location.pathname.split("/")[2],M=function(t){(0,p.default)(n,t);var e,a=(e=n,function(){var t,a=(0,v.default)(e);if(w()){var n=(0,v.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.default)(this,t)});function n(){var t;(0,f.default)(this,n);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t=a.call.apply(a,[this].concat(i)),(0,h.default)((0,s.default)(t),"state",{visible:!1,record:null,current:"1",pageSize:"10",type:"",values:""}),(0,h.default)((0,s.default)(t),"onSearch",(function(e){if(t.setState({values:e}),/[@#\$%\^&\*{}|\\]+/g.test(e))return c.default.warning("不能输入特殊字符！");t.setState({activityName:e},(function(){t.props.getPointTable({activityName:e})}))})),(0,h.default)((0,s.default)(t),"onShelf",(function(e){var a=t.state,n=a.current,i=a.pageSize;t.props.postPointShelf({id:e.id},{pageNo:n,pageSize:i},(function(){t.props.getPointTable({pageNo:n,pageSize:i,activityName:t.state.values})}))})),(0,h.default)((0,s.default)(t),"onShelves",(function(e){var a=t.state,n=a.current,i=a.pageSize;t.props.postPointShelves({id:e.id},{pageNo:n,pageSize:i},(function(){t.props.getPointTable({pageNo:n,pageSize:i,activityName:t.state.values})}))})),(0,h.default)((0,s.default)(t),"showModal",(function(){t.setState({visible:!0,type:"add"})})),(0,h.default)((0,s.default)(t),"handleCancel",(function(){t.setState({visible:!1,record:null})})),(0,h.default)((0,s.default)(t),"handleCreate",(function(){var e=t.state,a=e.current,n=e.pageSize,i=e.record,o=e.type,l=(e.activityName,t.formRef.props.form);l.validateFields((function(e,u){e||("look"!=o&&(i?t.props.postPointModify({id:i.id,activityName:u.activityName,multiple:u.multiple,startTime:u.time[0],endTime:u.time[1]},{pageNo:a,pageSize:n},(function(){t.props.getPointTable({activityName:t.state.values,pageNo:a,pageSize:n})})):t.props.postPointAdd({activityName:u.activityName,multiple:u.multiple,startTime:u.time[0],endTime:u.time[1]},{pageNo:a,pageSize:n},(function(){t.props.getPointTable({activityName:t.state.values,pageNo:a,pageSize:n})}))),l.resetFields(),t.setState({visible:!1,record:null}))}))})),(0,h.default)((0,s.default)(t),"saveFormRef",(function(e){t.formRef=e})),(0,h.default)((0,s.default)(t),"handleEdit",(function(e,a){t.setState({visible:!0,record:e,type:a})})),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.getPointTable({pageNo:1,pageSize:20})}},{key:"render",value:function(){var t=this,e=this,a=this.state,n=(a.current,a.pageSize,a.activityName,this.props),f=n.table,d=n.getPointTable,s=[{title:"活动策略名称",dataIndex:"activityName",key:"activityName",width:300,render:function(t){return P.default.createElement("span",{title:t,style:{display:"block",width:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"default"}},t)}},{title:"积分倍数",dataIndex:"multiple",key:"multiple",width:200,render:function(t){return P.default.createElement("span",null,"1"==t?"否":t)}},{title:"发放有效期",dataIndex:"time",key:"time",width:400,render:function(t,e){return P.default.createElement("span",null,(0,E.default)(e.startTime).format("YYYY-MM-DD HH:mm:ss")," ~"," ",(0,E.default)(e.endTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",width:300,render:function(e,a,n){return P.default.createElement("span",null,"2"==a.state?P.default.createElement("a",{onClick:function(){return t.handleEdit(a,"look")}},"查看"):P.default.createElement("a",{onClick:function(){return t.handleEdit(a,"edit")}},"修改"),P.default.createElement(r.default,{type:"vertical"}),"2"==a.state?P.default.createElement("a",{onClick:function(){return t.onShelves(a)}},"下架"):"1"==a.state||"3"==a.state?P.default.createElement("a",{onClick:function(){return t.onShelf(a)}},"上架"):"",P.default.createElement(r.default,{type:"vertical"}),P.default.createElement(S.Link,{to:{pathname:"/"+_+"/"+I+"/index/manager/point/Detailed-option",state:{record:a}}},"积分明细"),P.default.createElement(r.default,{type:"vertical"}),P.default.createElement(u.default,{title:"确定要删除吗?",okText:"确定",cancelText:"取消",onConfirm:function(){return t.props.pointActivityDel({id:a.id},(function(e){"1000"===e.code?(c.default.success("删除成功"),t.props.getPointTable({activityName:t.state.values,pageNo:t.state.current,pageSize:t.state.pageSize})):c.default.error("删除失败")}))}},P.default.createElement("a",{href:"#"},"删除")))}}],p={showQuickJumper:!0,showSizeChanger:!0,total:f&&f.page.pageTotal,showTotal:function(t){return"共 ".concat(f.page.pageTotal," 条")},pageSize:f&&f.page.pageSize,onShowSizeChange:function(t,a){d({pageNo:t,pageSize:a}),e.setState({current:t,pageSize:a})},onChange:function(t,a){d({pageNo:t,pageSize:a}),e.setState({current:t,pageSize:a})}};return P.default.createElement("div",{className:A.default.list},P.default.createElement(T.default,{title:"活动策略设置"}),P.default.createElement("div",{className:A.default.listBtn},P.default.createElement("div",{style:{float:"left"}},P.default.createElement(l.default,{type:"primary",onClick:this.showModal},"创建活动策略")),P.default.createElement("div",{style:{float:"right"}},P.default.createElement(O,{placeholder:"请输入活动策略名称",enterButton:!0,onSearch:this.onSearch}))),f?P.default.createElement(o.default,{columns:s,dataSource:f.data,pagination:p,rowKey:function(t){return t.id}}):P.default.createElement(i.default,{className:"cred-spin"}),P.default.createElement(D.default,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate,record:this.state.record,type:this.state.type}))}}]),n}(P.default.Component);var k=(0,b.connect)((function(t,e){return{table:t.point.table}}),(function(t){return{getPointTable:function(e){return t((0,N.getPointTable)(e))},postPointShelf:function(e,a,n){return t((0,N.postPointShelf)(e,a,n))},postPointShelves:function(e,a,n){return t((0,N.postPointShelves)(e,a,n))},postPointAdd:function(e,a,n){return t((0,N.postPointAdd)(e,a,n))},postPointModify:function(e,a,n){return t((0,N.postPointModify)(e,a,n))},pointActivityDel:function(e,a){return t((0,N.pointActivityDel)(e,a))}}}))(M);e.default=k},1802:function(t,e,a){t.exports={list:"list__1d8OG",listBtn:"listBtn__1UOhj","tool-content":"tool-content__3TFKQ","tool-cont":"tool-cont__3P3D4"}},1803:function(t,e,a){"use strict";var n=a(0);a(20),a(34),a(23),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a(224);var i=n(a(225));a(616);var o=n(a(617)),l=n(a(98));a(537);var u=n(a(536)),r=n(a(29)),c=n(a(30)),f=n(a(32)),d=n(a(33)),s=n(a(31));a(540);var p=n(a(539));a(592);var m=n(a(566)),v=n(a(1)),h=n(a(223));function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var y=m.default.RangePicker,P=p.default.Item,S=function(t){(0,f.default)(n,t);var e,a=(e=n,function(){var t,a=(0,s.default)(e);if(g()){var n=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,d.default)(this,t)});function n(){return(0,r.default)(this,n),a.apply(this,arguments)}return(0,c.default)(n,[{key:"render",value:function(){var t=this.props,e=t.visible,a=t.onCancel,n=t.onCreate,r=t.form,c=t.record,f=t.type,d=r.getFieldDecorator,s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return v.default.createElement(i.default,{visible:e,title:"创建活动策略",okText:"确定",onCancel:a,onOk:n,destroyOnClose:!0},v.default.createElement(p.default,null,v.default.createElement(P,(0,l.default)({},s,{label:"活动名称"}),d("activityName",{initialValue:c&&c.activityName,rules:[{required:!0,message:"请输入活动名称"},{max:200,message:"活动名称不能超过200个字符！"}]})(v.default.createElement(u.default,{placeholder:"请输入活动名称",disabled:"look"==f}))),v.default.createElement(P,(0,l.default)({},s,{label:"积分翻倍"}),d("multiple",{initialValue:c&&c.multiple,rules:[{required:!0,message:"请输入翻倍数"}]})(v.default.createElement(o.default,{min:2,disabled:"look"==f}))),v.default.createElement(P,(0,l.default)({},s,{label:"活动时间"}),d("time",{initialValue:c&&[(0,h.default)(c.startTime),(0,h.default)(c.endTime)],rules:[{type:"array",required:!0,message:"请输入活动时间！"}]})(v.default.createElement(y,{placeholder:["开始时间","结束时间"],ranges:{"今天":[(0,h.default)(),(0,h.default)().endOf("month")],"这个月":[(0,h.default)().startOf("month"),(0,h.default)().endOf("month")]},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",onOk:this.onRangePicker,disabled:"look"==f})))))}}]),n}(v.default.Component),T=p.default.create()(S);e.default=T},535:function(t,e,a){t.exports=a(11)(70)},536:function(t,e,a){t.exports=a(11)(166)},539:function(t,e,a){t.exports=a(11)(821)},540:function(t,e,a){"use strict";a.r(e);a(26),a(577),a(584)},544:function(t,e,a){t.exports=a(11)(846)},563:function(t,e,a){t.exports=a(11)(837)},564:function(t,e,a){"use strict";a.r(e);a(26),a(581),a(140)},566:function(t,e,a){t.exports=a(11)(817)},577:function(t,e,a){},581:function(t,e,a){"use strict";a.r(e);a(26),a(585)},585:function(t,e,a){},590:function(t,e,a){"use strict";a.r(e);a(26),a(597)},591:function(t,e,a){t.exports=a(11)(819)},597:function(t,e,a){},616:function(t,e,a){"use strict";a.r(e);a(26),a(652)},617:function(t,e,a){t.exports=a(11)(824)},652:function(t,e,a){}}]);