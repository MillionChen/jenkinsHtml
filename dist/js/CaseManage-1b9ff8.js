(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1304:function(e,t,a){"use strict";var n=a(4),c=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.authlist=t.anthinsert=t.caseModify=t.batchExport=t.selectionListexport=t.commentdownloadList=t.commentdelete=t.commentputDown=t.commentrelease=t.commentList=t.caseManageDel=t.caseManageDown=t.caseManageUp=t.caseManageView=t.caseManageList=void 0,a(61);var r=c(a(62)),o=c(a(76)),u=c(a(1305)),s=n(a(254)),l=u.default.caseManage,i=l.caseListUrl,d=l.caseUpUrl,f=l.caseDownUrl,m=l.caseDelUrl,p=l.caseExportUrl,h=l.batchExportUrl,g=l.caseModifyUrl,y=l.caseViewUrl,w=l.authorizeListUrl,b=l.authorizeInsertUrl,v=l.commentListUrl,E=l.commentDownUrl,M=l.commentUpUrl,x=l.commentDelUrl,_=l.commentDownloadUrl;t.caseManageList=function(e,t){return function(a){return(0,o.default)({url:i,data:e}).then((function(e){1e3==e.code?(a({type:s.CASE_MANAGE_LIST,data:e.data}),t&&t(e)):r.default.error(e.subMsg)}))}};t.caseManageView=function(e,t){return function(a){return(0,o.default)({url:y,data:e}).then((function(e){t&&t(e)}))}};t.caseManageUp=function(e,t){return function(a){return(0,o.default)({url:d,data:e}).then((function(e){t&&t(e)}))}};t.caseManageDown=function(e,t){return function(a){return(0,o.default)({url:f,data:e}).then((function(e){t&&t(e)}))}};t.caseManageDel=function(e,t){return function(a){return(0,o.default)({url:m,data:e}).then((function(e){t&&t(e)}))}};t.commentList=function(e,t){return function(a){return(0,o.default)({url:v,data:e}).then((function(e){t&&t(e)}))}};t.commentrelease=function(e,t){return function(a){return(0,o.default)({url:M,data:e}).then((function(e){t&&t(e)}))}};t.commentputDown=function(e,t){return function(a){return(0,o.default)({url:E,data:e}).then((function(e){t&&t(e)}))}};t.commentdelete=function(e,t){return function(a){return(0,o.default)({url:x,data:e}).then((function(e){t&&t(e)}))}};t.commentdownloadList=function(e,t){return function(a){return(0,o.default)({url:_,data:e}).then((function(e){t&&t(e)}))}};t.selectionListexport=function(e,t){return function(a){return(0,o.default)({url:p,data:e}).then((function(e){t&&t(e)}))}};t.batchExport=function(e,t){return function(a){return(0,o.default)({url:h,data:e}).then((function(e){t&&t(e)}))}};t.caseModify=function(e,t){return function(a){return(0,o.default)({url:g,data:e}).then((function(e){t&&t(e)}))}};t.anthinsert=function(e,t){return function(a){return(0,o.default)({url:b,data:e}).then((function(e){t&&t(e)}))}};t.authlist=function(e,t){return function(a){return(0,o.default)({url:w,data:e}).then((function(e){t&&t(e)}))}}},1305:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(63)),r={caseManage:{caseListUrl:"GET ".concat(c.default.webManage,"/studentCase/selectionList"),caseUpUrl:"GET ".concat(c.default.webManage,"/studentCase/release"),caseDownUrl:"GET ".concat(c.default.webManage,"/studentCase/putDown"),caseDelUrl:"GET ".concat(c.default.webManage,"/studentCase/delete"),caseExportUrl:"GET ".concat(c.default.webManage,"/studentCase/selectionList/export"),batchExportUrl:"POST ".concat(c.default.webManage,"/studentCase/batchExport"),caseModifyUrl:"POST ".concat(c.default.webManage,"/studentCase/modify/submit"),caseViewUrl:"GET ".concat(c.default.webManage,"/studentCase/view"),authorizeListUrl:"GET ".concat(c.default.webManage,"/studentCase/authorize/list"),authorizeInsertUrl:"POST ".concat(c.default.webManage,"/studentCase/authorize/insert"),commentListUrl:"GET ".concat(c.default.webManage,"/caseLibrary/comment/list"),commentDownUrl:"GET ".concat(c.default.webManage,"/caseLibrary/comment/putDown"),commentDelUrl:"GET ".concat(c.default.webManage,"/caseLibrary/comment/delete"),commentDownloadUrl:"GET ".concat(c.default.webManage,"/caseLibrary/comment/downloadList"),commentUpUrl:"GET ".concat(c.default.webManage,"/caseLibrary/comment/release")}};t.default=r},1354:function(e,t,a){e.exports={case_management_body:"case_management_body__1Aq0Q",head_search:"head_search__1jUY0",head_btns:"head_btns__3npDk",case_detail_body:"case_detail_body__12Wzk",case_classify_name:"case_classify_name__29wP8",case_comment_body:"case_comment_body__CWfjb"}},1698:function(e,t,a){"use strict";var n=a(4),c=a(0);a(7),a(44),a(3),a(5),a(43),a(143),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(53),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var r=c(a(544));a(140);var o=c(a(535));a(537);var u=c(a(536));a(564);var s=c(a(563));a(61);var l=c(a(62)),i=c(a(29)),d=c(a(30)),f=c(a(59)),m=c(a(32)),p=c(a(33)),h=c(a(31)),g=c(a(2));a(554);var y=c(a(550));a(540);var w=c(a(539)),b=n(a(1)),v=a(636),E=c(a(223)),M=c(a(1354)),x=c(a(226)),_=a(52),C=a(1304);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=w.default.Item,S=y.default.Option,N=location.pathname.split("/")[1],T=location.pathname.split("/")[2],O={margin:"0 5px"},P=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(L()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,p.default)(this,e)});function n(e){var t;return(0,i.default)(this,n),t=a.call(this,e),(0,g.default)((0,f.default)(t),"handlePageChange",(function(e,a){console.log(e);var n=(0,f.default)(t);t.setState({pageNo:e,pageSize:a},(function(){n.list()}))})),(0,g.default)((0,f.default)(t),"handleSearch",(function(){t.props.form.validateFields((function(e,a){if(console.log("Received values of form: ",a),!e){t.setState({studentCaseName:a.name,accountName:a.title,state:a.status});var n={studentCaseName:a.name,accountName:a.title,state:a.status};t.list(n)}}))})),t.state={pageNo:1,pageSize:10,data:[],totalsur:0,studentCaseName:"",accountName:"",state:"",selectedRowKeys:[]},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.list()}},{key:"list",value:function(e){var t=this,a={studentCaseName:e?e.studentCaseName:"",accountName:e?e.accountName:"",state:e?e.state:"",pageNo:this.state.pageNo,pageSize:this.state.pageSize};this.props.caseManageList(a,(function(e){var a=t.props.CaseList,n=void 0===a?{}:a;t.setState({data:n.records||[],totalsur:n.total||0})}))}},{key:"go",value:function(e,t,a){2==e?this.props.history.push({pathname:"/".concat(N,"/").concat(T,"/index/online/case/casemanage/comment/").concat(t),state:{type:e,id:t}}):1==e?this.props.history.push({pathname:"/".concat(N,"/").concat(T,"/index/online/case/casemanage/edit/").concat(t),state:{type:e,id:t,look:a}}):this.props.history.push({pathname:"/".concat(N,"/").concat(T,"/index/online/case/casemanage/look/").concat(t),state:{type:e,id:t,look:a}})}},{key:"up",value:function(e,t){var a=this,n={studentCaseId:t};1==e?this.props.caseManageUp(n,(function(e){1e3==e.code&&(l.default.success("上架成功"),a.handleSearch())})):2==e?this.props.caseManageDown(n,(function(e){1e3==e.code&&(l.default.success("下架成功"),a.handleSearch())})):this.props.caseManageDel(n,(function(e){1e3==e.code&&(l.default.success("删除成功"),a.handleSearch())}))}},{key:"idlist",value:function(e){console.log("arr",e);var t=[];return e&&e.map((function(e,a){t.push(e.id)})),t}},{key:"export",value:function(e){var t=this;if(1==e){var a={studentCaseName:this.state.studentCaseName,accountName:this.state.accountName,state:this.state.state};this.props.selectionListexport(a,(function(e){1e3==e.code&&l.default.success(e.data)}))}else{var n={idList:this.idlist(this.state.selectedRows)};this.props.batchExport(n,(function(e){1e3==e.code&&(l.default.success(e.data),t.setState({selectedRowKeys:[]}))}))}}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.data,c=a.selectedRowKeys;console.log("this.state=case==",this.state),console.log("this.props=case==",this.props);var l=[{title:"名称",dataIndex:"tittle",key:"tittle",ellipsis:!0,render:function(e,t){return b.default.createElement("span",{title:e},e.length<=20?e:e.slice(0,20)+"...")}},{title:"所属原创活动",dataIndex:"caseLibraryName",key:"caseLibraryName",ellipsis:!0},{title:"用户名",dataIndex:"accountName",key:"accountName",ellipsis:!0},{title:"作者",dataIndex:"accountFullName",key:"accountFullName",ellipsis:!0},{title:"提交时间",dataIndex:"submitTime",key:"submitTime",render:function(e,t){return b.default.createElement("span",null,(0,E.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"得分",dataIndex:"score",key:"score",ellipsis:!0,render:function(e,t){return 4===t.scoreRule?t.dimensionScore:t.score}},{title:"状态",dataIndex:"state",key:"state",ellipsis:!0},{title:"操作",dataIndex:"id",key:"id",width:"250px",render:function(t,a){return b.default.createElement("div",null,"已上架"==a.state?b.default.createElement("div",null,b.default.createElement("a",{onClick:function(){return e.go(3,t,!0)}},"查看"),b.default.createElement(s.default,{title:"确定要下架吗？",okText:"是",cancelText:"否",onConfirm:function(){return e.up(2,a.id)}},b.default.createElement("a",{style:D({},O)},"下架")),b.default.createElement("a",{onClick:function(){return e.go(2,t)},style:D({},O)},"评论管理")):b.default.createElement("div",null,b.default.createElement("a",{onClick:function(){return e.go(1,t)},style:D({},O)},"修改"),b.default.createElement(s.default,{title:"确定要上架吗？",okText:"是",cancelText:"否",onConfirm:function(){return e.up(1,a.id)}},b.default.createElement("a",{style:D({},O)},"上架")," "),b.default.createElement(s.default,{title:"确定要删除吗？",okText:"是",cancelText:"否",onConfirm:function(){return e.up(3,a.id)}},b.default.createElement("a",{style:D({},O)},"删除")),b.default.createElement("a",{onClick:function(){return e.go(2,t)},style:D({},O)},"评论管理")))}}],i={selectedRowKeys:c,onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.setState({selectedRows:a,selectedRowKeys:t})}};return b.default.createElement("div",{className:M.default.case_management_body},b.default.createElement(x.default,{title:"作品管理"}),b.default.createElement(w.default,{className:M.default.head_search,onSubmit:this.handleSearch,layout:"inline"},b.default.createElement(k,{label:"作品关键字"},t("name")(b.default.createElement(u.default,{placeholder:"请输入作品名称"}))),b.default.createElement(k,{label:"用户关键字"},t("title")(b.default.createElement(u.default,{placeholder:"请输入作者、用户名搜索作品"}))),b.default.createElement(k,{label:"状态："},t("status",{initialValue:""})(b.default.createElement(y.default,{style:{width:120,zIndex:1}},b.default.createElement(S,{value:""},"全部"),b.default.createElement(S,{value:2},"已上架"),b.default.createElement(S,{value:3},"已下架")))),b.default.createElement("span",null,b.default.createElement(o.default,{type:"primary",style:{marginTop:"4px"},onClick:this.handleSearch},"查询"))),b.default.createElement("div",{className:M.default.head_btns},b.default.createElement(o.default,{type:"primary",style:{marginRight:"20px"},onClick:function(){return e.export(2)}}," ","导出作品"),b.default.createElement(o.default,{type:"primary",onClick:function(){return e.export(1)}}," ","导出报表")),b.default.createElement("div",null,b.default.createElement(r.default,{rowKey:function(e){return e.id},rowSelection:i,columns:l,dataSource:n,pagination:{total:this.state.totalsur,showTotal:function(){return"共计 "+e.state.totalsur+"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:this.state.pageNo,onChange:this.handlePageChange,onShowSizeChange:this.handlePageChange,showQuickJumper:!0,size:"small"}})))}}]),n}(b.Component);var R=(0,_.connect)((function(e,t){return{CaseList:e.caseManageReducer.caseList}}),(function(e){return{caseManageList:function(t,a){return e((0,C.caseManageList)(t,a))},caseManageUp:function(t,a){return e((0,C.caseManageUp)(t,a))},caseManageDown:function(t,a){return e((0,C.caseManageDown)(t,a))},caseManageDel:function(t,a){return e((0,C.caseManageDel)(t,a))},selectionListexport:function(t,a){return e((0,C.selectionListexport)(t,a))},batchExport:function(t,a){return e((0,C.batchExport)(t,a))}}}))((0,v.withRouter)(w.default.create()(P)));t.default=R},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},577:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},636:function(e,t,a){e.exports=a(46)(174)}}]);