(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1293:function(e,t,a){},1324:function(e,t,a){"use strict";var l=a(4),n=a(0);a(35),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.gclfetch=function(e,t){var a=c.default.gclfetch;return function(l){return(0,d.default)({url:a,data:e}).then((function(a){var n=a.data,i=n.records,r=[];if(null!==i){for(var c=0;c<i.length;c++)r.push({code:i[c].code,id:i[c].id,key:c+1+e.pageSize*(e.pageNo-1),url:i[c].logourl,title:i[c].title,time:i[c].createTime,state:i[c].status,total:n.total,createByName:i[c].createByName,templateImage:i[c].templateImage,grantNum:i[c].grantNum,relationNum:i[c].relationNum});t&&t()}console.log(r),l({type:s.GET_CRED_LIST,data:r}),l({type:s.GET_CRED_DETAILS,data:{}})}))}},t.gcsfetch=function(e,t){var a=c.default.gcsfetch;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){l({type:s.CUT_CRED_BOARD,data:e.data}),t&&t(),4e3==e.code&&i.default.error(e.subMsg),l({type:s.CUT_CRED_BOARD,data:e.data})}))}},t.ccfetch=function(e,t){var a=c.default.ccfetch;return function(l){return(0,d.default)({url:a,data:e}).then((function(a){l({type:s.ADD_CRED_BOARD,data:e}),t&&t()}))}},t.getfetch=function(e,t){return function(a){if("new"!==e.id){var l=c.default.getfetch;return(0,d.default)({url:l,data:e}).then((function(e){var l=e.data;switch(a({type:s.GET_CRED_DETAILS,data:l}),l.type){case 0:a({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!0}});break;case 1:a({type:s.GET_TIME_RADIO,data:{rstate1:!1,rstate2:!0}});break;case 2:a({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!1}});break;default:a({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!0}})}a({type:s.GET_TAGS,data:null!==l.tags?l.tags.split(","):null}),t&&t()}))}a({type:s.GET_CRED_DETAILS,data:{}}),a({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!0}})}},t.ucfetch=function(e,t){var a=c.default.ucfetch;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?(i.default.success("修改成功"),t&&t()):i.default.error("修改失败，请重新尝试...")}))}},t.unfetch=function(e){var t=c.default.unfetch;return function(a){return(0,d.default)({url:t,data:e}).then((function(e){if("1000"===e.code)return i.default.success("创建成功"),e;i.default.error("创建失败，请重新尝试...")}))}},t.gcbfetch=function(e){var t=c.default.gcbfetch;return function(a){return(0,d.default)({url:t}).then((function(t){console.log("jjjjjjj",t.data),a({type:s.GET_CRED_BOARD,data:t.data}),e&&e()}))}},t.cutfetch=function(e){var t=c.default.gcbfetch;return function(a){return(0,d.default)({url:t,data:e}).then((function(e){a({type:s.CUT_CRED_BOARD,data:e.data})}))}},t.analysisfetch=function(e,t){return function(a){return(0,d.default)({url:c.default.analysisfetch,data:e}).then((function(e){"1000"===e.code?(a({type:s.ADD_CRED_BOARD,data:e.data}),t&&t(),i.default.success("上传成功")):i.default.error("解析失败，请重新尝试...")}))}},t.addfetch=function(e,t){return function(a){a({type:ADD_CRED_BOARD,data:e}),t&&t()}},t.gtimeradio=function(e){return function(t){switch(e){case 0:t({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!0}});break;case 1:t({type:s.GET_TIME_RADIO,data:{rstate1:!1,rstate2:!0}});break;case 2:t({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!1}});break;default:t({type:s.GET_TIME_RADIO,data:{rstate1:!0,rstate2:!0}})}}},t.getClassifyList=function(e){var t=c.default.getClassifyList;return function(a){return(0,d.default)({url:t}).then((function(t){"1000"===t.code?(a({type:"CRED_CLASSIFY_LIST",data:t.data}),e&&e()):i.default.error(t.subMsg)}))}},t.delClassify=function(e,t){var a=c.default.delClassify;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?t&&t(e):i.default.error(e.subMsg)}))}},t.createClassify=function(e,t){var a=c.default.createClassify;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?t&&t(e):i.default.error(e.subMsg)}))}},t.updateClassify=function(e,t){var a=c.default.updateClassify;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?t&&t(e):i.default.error(e.subMsg)}))}},t.getActivityList=function(e,t){var a=c.default.getActivityList;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?(l({type:"CRED_ACTIVITY_LIST",data:e.data}),t&&t()):i.default.error(e.subMsg)}))}},t.listExport=function(e,t){var a=c.default.listExport;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?t&&t(e):i.default.error(e.subMsg)}))}},t.reportListByCred=function(e,t){var a=c.default.reportListByCred;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?(l({type:"CRED_REPORT_LIST_BY_CRED",data:e.data}),t&&t(e)):i.default.error(e.subMsg)}))}},t.exportReportListByCred=function(e,t){var a=a.exportReportListByCred;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?t&&t(e):i.default.error(e.subMsg)}))}},t.getCertificateList=function(e,t){var a=c.default.getCertificateList;return function(l){return(0,d.default)({url:a,data:e}).then((function(e){"1000"===e.code?(l({type:"CRED_LIST_RAW",data:e.data}),t&&t(e)):i.default.error(e.subMsg)}))}},a(61);var i=n(a(62)),r=a(233),s=(a(636),l(a(1325))),c=n(a(1326)),d=n(a(78));location.pathname.split("/")[1],location.pathname.split("/")[2],(0,r.createAction)(s.GET_CRED_LIST),(0,r.createAction)(s.GET_CRED_STATE),(0,r.createAction)(s.COPY_CRED),(0,r.createAction)(s.UPDATE_CRED),(0,r.createAction)(s.NEW_CRED),(0,r.createAction)(s.GET_UPLOAD_PARAM),(0,r.createAction)(s.GET_CRED_BOARD),(0,r.createAction)(s.GET_TIME_RADIO),(0,r.createAction)(s.GET_TAGS)},1325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GET_TAGS=t.GET_TIME_RADIO=t.ADD_CRED_BOARD=t.CUT_CRED_BOARD=t.GET_CRED_BOARD=t.GET_UPLOAD_PARAM=t.CRED_CHART_EXPORT=t.GET_CRED_CHART=t.UPDATE_CRED=t.COPY_CRED=t.NEW_CRED=t.GET_CRED_DETAILS=t.GET_CRED_STATE=t.GET_CRED_LIST=void 0;t.GET_CRED_LIST="GET_CRED_LIST";t.GET_CRED_STATE="GET_CRED_STATE";t.GET_CRED_DETAILS="GET_CRED_DETAILS";t.NEW_CRED="NEW_CRED";t.COPY_CRED="COPY_CRED";t.UPDATE_CRED="UPDATE_CRED";t.GET_CRED_CHART="GET_CRED_CHART";t.CRED_CHART_EXPORT="CRED_CHART_EXPORT";t.GET_UPLOAD_PARAM="GET_UPLOAD_PARAM";t.GET_CRED_BOARD="GET_CRED_BOARD";t.CUT_CRED_BOARD="CUT_CRED_BOARD";t.ADD_CRED_BOARD="ADD_CRED_BOARD";t.GET_TIME_RADIO="GET_TIME_RADIO";t.GET_TAGS="GET_TAGS"},1326:function(e,t,a){"use strict";var l=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(63)),i={gclfetch:"GET ".concat(n.default.webManage,"/certificate/list"),gcsfetch:"POST ".concat(n.default.webManage,"/certificate/enable"),ccfetch:"POST ".concat(n.default.webManage,"/certificate/copy"),getfetch:"GET ".concat(n.default.webManage,"/certificate/get"),ucfetch:"POST ".concat(n.default.webManage,"/certificate/update"),unfetch:"POST ".concat(n.default.webManage,"/certificate/save"),gcbfetch:"GET ".concat(n.default.webManage,"/certificate/template"),analysisfetch:"GET ".concat(n.default.webManage,"/certificate/analysis"),getClassifyList:"GET ".concat(n.default.webManage,"/certificate/classify/list"),delClassify:"GET ".concat(n.default.webManage,"/certificate/classify/delete"),createClassify:"POST ".concat(n.default.webManage,"/certificate/classify/insert"),updateClassify:"POST ".concat(n.default.webManage,"/certificate/classify/update"),getActivityList:"GET ".concat(n.default.webManage,"/certificate/getRelationActivities"),listExport:"GET ".concat(n.default.webManage,"/certificate/list/export"),reportListByCred:"GET ".concat(n.default.webManage,"/report/certificate/certificateList"),exportReportListByCred:"GET ".concat(n.default.webManage,"/report/certificate/certificateStatisticsExport"),getCertificateList:"GET ".concat(n.default.webManage,"/certificate/list")};t.default=i},2114:function(e,t,a){"use strict";var l=a(4),n=a(0);a(7),a(154),a(3),a(5),a(40),a(143),a(51),a(620),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(53),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var i=n(a(225));a(807);var r=n(a(808));a(569);var s=n(a(558));a(549);var c=n(a(544));a(146);var d=n(a(150));a(140);var u=n(a(535));a(554);var o=n(a(550));a(99);var f=n(a(100));a(564);var y=n(a(563));a(61);var p=n(a(62)),h=n(a(29)),E=n(a(30)),_=n(a(59)),g=n(a(32)),m=n(a(33)),C=n(a(31)),v=n(a(2));a(537);var T=n(a(536));a(719);var D=n(a(622)),b=l(a(1)),I=a(65),S=a(52),L=(n(a(223)),n(a(141))),A=n(a(226)),R=a(1324),N=n(a(2115));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=location.pathname.split("/")[1],x=location.pathname.split("/")[2],P=D.default.TreeNode,M=T.default.TextArea,B={overflow:"hidden",WebkitBoxOrient:"vertical",MozBoxOrient:"vertical",textOverflow:"ellipsis",OTextOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,wordBreak:"break-all",cursor:"pointer"},V=function(e){(0,g.default)(l,e);var t,a=(t=l,function(){var e,a=(0,C.default)(t);if(G()){var l=(0,C.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function l(e){var t;return(0,h.default)(this,l),t=a.call(this,e),(0,v.default)((0,_.default)(t),"reGetClassifyList",(function(){var e=(0,_.default)(t);t.props.getClassifyList((function(){var t=e.props.classifyList;e.setState({rawClassifyList:t}),e.reBuildData(JSON.parse(JSON.stringify(t)))}))})),(0,v.default)((0,_.default)(t),"reBuildData",(function(e){var a=(0,_.default)(t),l=[];e.map((function(e,t){e.children&&e.children.length>0&&e.children.map((function(t,a){e.children[a]={title:t.name,key:t.id,children:t.children,level:t.level,parentId:e.id,description:t.description,code:t.code,name:t.name},t.children&&t.children.length>0&&t.children.map((function(a,l){t.children[l]={title:a.name,key:a.id,level:a.level,parentId:t.id,grandId:e.id,description:a.description,code:a.code,name:a.name}}))})),l.push({title:e.code+"--"+e.name,key:e.id,children:e.children,level:e.level,description:e.description,code:e.code,name:e.name})})),l.push({title:"未分类",level:1,key:-1,name:"未分类"}),console.log("reClassifyList==",l),a.setState({reClassifyList:l})})),(0,v.default)((0,_.default)(t),"reBuildDataForCascader",(function(e){var a=(0,_.default)(t),l=t.state.selectedOptionsId,n=[];e.map((function(e,t){e.children&&e.children.length>0&&e.children.map((function(t,a){e.children[a]={label:t.name,value:t.id,level:t.level,parentId:e.id,disabled:t.id==l[l.length-1]}})),n.push({label:e.name,value:e.id,children:e.children,level:e.level,disabled:e.id==l[l.length-1]})})),console.log("reClassifyListForCascader==",n),a.setState({reClassifyListForCascader:n})})),(0,v.default)((0,_.default)(t),"editClassify",(function(e){t.setState({editeClassifyVS:!0,editType:e}),3!=e&&t.setState({classifyDesc:"",classifyName:""}),t.reBuildDataForCascader(JSON.parse(JSON.stringify(t.state.rawClassifyList)))})),(0,v.default)((0,_.default)(t),"saveClassify",(function(){var e=(0,_.default)(t),a=t.state,l=a.classifyName,n=a.classifyDesc,i=a.classifyId,r=a.parentClassifyId,s=a.classifyLevel,c=a.editType,d=a.selectedOptionsId,u=a.grandId,o=a.supLevel;if(l.length<1)p.default.warn("请输入分类名称");else if(3==c){var f={name:l,id:i,description:n,parentId:r,rootId:u,level:o};t.props.updateClassify(f,(function(){p.default.success("修改成功！"),e.closeAddClassify(),e.reGetClassifyList(),e.initParam()}))}else{2==c&&(s+=1),1==c&&(s=1);var y={level:s,name:l,parentId:d[d.length-1],description:n};t.props.createClassify(y,(function(){p.default.success("分类创建成功！"),e.closeAddClassify(),e.reGetClassifyList(),e.initParam()}))}})),(0,v.default)((0,_.default)(t),"initParam",(function(){t.setState({classifyId:"",parentClassifyId:"",grandId:"",classifyDesc:"",classifyName:"",reClassifyListForCascader:[],selectedOptionsId:[],classifyLevel:1,supLevel:1})})),(0,v.default)((0,_.default)(t),"closeAddClassify",(function(){(0,_.default)(t);t.setState({editeClassifyVS:!1,classifyNameTooLong:!1,classifyDescTooLong:!1})})),(0,v.default)((0,_.default)(t),"classifyNameChange",(function(e){var a=e.target.value.toString();a.length>20?t.setState({classifyNameTooLong:!0}):(t.setState({classifyNameTooLong:!1}),t.setState({classifyName:a}))})),(0,v.default)((0,_.default)(t),"classifyDescChange",(function(e){var a=e.target.value.toString();a.length>50?t.setState({classifyDescTooLong:!0}):(t.setState({classifyDescTooLong:!1}),t.setState({classifyDesc:a}))})),(0,v.default)((0,_.default)(t),"treeSelect",(function(e,a){var l=(0,_.default)(t);console.log("selectedKeys==",e,"e==",a),console.log("ref",a.node.props.dataRef);var n=a.node.props.dataRef;t.setState({classifyId:e[0],parentClassifyId:n.parentId,classifyLevel:n.level,grandId:n.grandId&&n.grandId,selectedOptionsId:n.grandId?[n.grandId,n.parentId,e[0]]:n.parentId?[n.parentId,e[0]]:[e[0]],classifyDesc:n.description,classifyName:n.name,supLevel:n.level},(function(){l.handleSearch()}))})),(0,v.default)((0,_.default)(t),"treeSelectSpecial",(function(){t.setState({classifyId:-1})})),(0,v.default)((0,_.default)(t),"classifySelectChange",(function(e,a){console.log("value, selectedOptions=",e,a),t.setState({parentClassifyId:a[e.length-1].value,supLevel:a[e.length-1].level+1,selectedOptionsId:e,grandId:a[0].value,classifyLevel:a[e.length-1].level})})),(0,v.default)((0,_.default)(t),"delClassify",(function(){var e=(0,_.default)(t);t.props.delClassify({id:t.state.classifyId},(function(){p.default.success("删除成功！"),e.setState({classifyId:""}),e.reGetClassifyList()}))})),(0,v.default)((0,_.default)(t),"getActivityList",(function(e){var a=(0,_.default)(t);t.setState({relationActivityVS:!0}),t.props.getActivityList({certificateId:e},(function(){var e=a.props.activityList;if(console.log("li ok",e),e.length>0)for(var t=0;t<e.length;t++)e[t].keyNum=t+1;a.setState({activityList:e})}))})),(0,v.default)((0,_.default)(t),"relationActivityClose",(function(){t.setState({relationActivityVS:!1})})),(0,v.default)((0,_.default)(t),"preLook",(function(e){console.log("--------record--------"),t.setState({preLookVS:!0,record:e})})),(0,v.default)((0,_.default)(t),"cancelPreLook",(function(){t.setState({preLookVS:!1})})),(0,v.default)((0,_.default)(t),"listExport",(function(){var e=t.state.paramForExportList;t.props.listExport(e,(function(e){p.default.success(e.data+"，请至“任务管理”中耐心等待")}))})),(0,v.default)((0,_.default)(t),"editCred",(function(e){console.log("--------record--------"),console.log(e,"--------record--------"),Number(e.relationNum)>0?(t.getActivityList(e.id),t.setState({editCredFlag:!0,record:e})):(console.log(e,"--------record--------"),t.setState({record:e},(function(){t.gotoEditCred()})))})),(0,v.default)((0,_.default)(t),"continueEditCred",(function(){t.setState({editCredFlag:!1,relationActivityVS:!1}),t.gotoEditCred()})),(0,v.default)((0,_.default)(t),"gotoEditCred",(function(){var e=t.state.record;t.props.history.push("/"+L.default.companyCode+"/"+L.default.siteCode+"/index/tool/cred/edit/"+e.id+"/"+e.state)})),t.state={value:"",state:"",page:1,status:"2",classifyId:"",parentClassifyId:"",editeClassifyVS:!1,preLookVS:!1,record:null,classifyDesc:"",classifyName:"",reClassifyList:[],rawClassifyList:[],reClassifyListForCascader:[],supLevel:1,classifyLevel:1,editType:1,selectedOptionsId:[],relationActivityVS:!1,grandId:"",activityList:[],classifyDescTooLong:!1,classifyNameTooLong:!1,editCredFlag:!1,paramForExportList:{title:"",status:"",classifyId:""}},t.handleGetValue=t.handleGetValue.bind((0,_.default)(t)),t.handleGetState=t.handleGetState.bind((0,_.default)(t)),t.handleSearch=t.handleSearch.bind((0,_.default)(t)),t.confirmState=t.confirmState.bind((0,_.default)(t)),t.confirmCopy=t.confirmCopy.bind((0,_.default)(t)),t.handlePageChange=t.handlePageChange.bind((0,_.default)(t)),t.handlePageSizeChange=t.handlePageSizeChange.bind((0,_.default)(t)),t}return(0,E.default)(l,[{key:"componentDidMount",value:function(){this.props.onGetList({pageNo:1,pageSize:""}),this.reGetClassifyList()}},{key:"handleGetValue",value:function(e){this.setState({value:e.target.value})}},{key:"handleGetState",value:function(e){this.setState({state:e})}},{key:"handleSearch",value:function(){var e=this,t=this.state,a=t.value,l=t.state,n=t.classifyId;this.props.onGetList({title:a,status:l,pageNo:1,pageSize:"",classifyId:n},(function(){e.setState({paramForExportList:{title:a,status:l,classifyId:n}})}))}},{key:"confirmState",value:function(e){var t=this,a=this.state;a.value,a.state;this.props.onGetState({id:e.id,status:0==e.state?1:0},(function(){t.handleSearch(),t.setState({status:"1"})})),this.handleSearch()}},{key:"confirmCopy",value:function(e){var t=this;this.props.onCopy({id:e},(function(){t.handleSearch()})),this.handleSearch()}},{key:"showTotal",value:function(e){return"共计 ".concat(e," 条")}},{key:"handlePageChange",value:function(e,t){this.setState({page:e});var a=this.state,l=a.value,n=a.state;this.props.onGetList({pageNo:e,pageSize:t,title:l,status:n})}},{key:"handlePageSizeChange",value:function(e,t){var a=this.state,l=a.page,n=a.value,i=a.state;console.log(l,t),this.props.onGetList({pageNo:l,pageSize:t,title:n,status:i})}},{key:"render",value:function(){var e=this,t=this.props.list,a=this.state,l=a.editType,n=a.classifyLevel,p=a.selectedOptionsId,h=a.grandId,E=a.parentClassifyId,_=a.classifyId,g=a.supLevel,m={grandId:h,parentClassifyId:E,classifyId:_};console.log("thie.state==",this.state),console.log("thie.props==",this.props);var C=[{title:"序号",dataIndex:"key",key:"key"},{title:b.default.createElement("div",{style:{width:60,textAlign:"center"}},"缩略图"),dataIndex:"url",key:"url",render:function(e,t){return b.default.createElement("span",null,b.default.createElement("img",{alt:"缩略图",src:t.url,style:{width:60,height:"auto"}}))},width:60},{title:"证书编码",dataIndex:"code",key:"code",render:function(e,t){return b.default.createElement("span",{title:e,style:k({},B)},e)},width:140},{title:"证书名称",dataIndex:"title",key:"title",render:function(e,t){return b.default.createElement("span",{title:e,style:k({},B)},e)},width:140},{title:"创建人",dataIndex:"createByName",key:"createByName",render:function(e,t){return b.default.createElement("span",{title:e,style:k({},B)},e)},width:90},{title:"获证人数",dataIndex:"grantNum",key:"grantNum",render:function(e,t){return b.default.createElement("div",{style:{textAlign:"center"}},e)}},{title:"关联活动数",dataIndex:"relationNum",key:"relationNum",render:function(e,t){return b.default.createElement("div",{style:{textAlign:"center"}},e)}},{title:"状态",dataIndex:"state",key:"state",render:function(e,t){return b.default.createElement("span",null,0==t.state?"下架":"上架")}},{title:"操作",dataIndex:"action",key:"action",render:function(t,a){return b.default.createElement("div",{className:N.default.red_list_btns},b.default.createElement(y.default,{title:"确定".concat(0===a.state?"上架":"下架","当前证书"),okText:"确定",cancelText:"取消",onConfirm:function(){return e.confirmState(a)}},b.default.createElement("a",{className:N.default.cred_list_btn,href:"#"},0==a.state?"上架":"下架")),b.default.createElement(I.Link,{to:"/"+w+"/"+x+"/index/tool/cred/edit/"+a.id+"/look"},b.default.createElement("span",{className:N.default.cred_list_btn,href:"#"},"查看")),b.default.createElement("a",{className:N.default.cred_list_btn,onClick:function(){return e.editCred(a)}},"修改"),b.default.createElement("br",null),b.default.createElement(y.default,{title:"确定复制当前证书?",okText:"确定",cancelText:"取消",onConfirm:function(){return e.confirmCopy(a.id)}},b.default.createElement("a",{className:N.default.cred_list_btn,href:"#"},"复制")),b.default.createElement("a",{className:N.default.cred_list_btn,href:"javascript:void(0)",onClick:function(){return e.preLook(a)}},"预览"),b.default.createElement("br",null),b.default.createElement("a",{className:N.default.cred_list_btn,href:"javascript:void(0)",onClick:function(){return e.getActivityList(a.id)}},"查看关联活动"))},width:150}],v=[{title:"序号",dataIndex:"keyNum",key:"keyNum"},{title:"关联活动类型",dataIndex:"bizdType",key:"bizdType",render:function(e,t){return b.default.createElement("div",null,0==e?"培训项目":"课程")}},{title:"关联活动名称",dataIndex:"bizdName",key:"bizdName",render:function(e,t){return b.default.createElement("div",null,0==t.bizdType?b.default.createElement("span",null,t.bizdName+"/"+t.tpPlanName):b.default.createElement("span",null,t.bizdName))}}];f.default;return t?b.default.createElement("div",{className:N.default.cred},b.default.createElement(A.default,{title:"证书管理"}),b.default.createElement("div",{className:N.default.cred_btns},b.default.createElement("span",null,"关键字（词）："),b.default.createElement(T.default,{className:N.default.cred_btn1,placeholder:"请输入证书名称、自定义关键词",onChange:this.handleGetValue}),b.default.createElement("div",{className:N.default.cred_btn2},"状态：",b.default.createElement(o.default,{defaultValue:"",style:{width:120},onChange:this.handleGetState},b.default.createElement(o.default.Option,{key:1,value:""},"全部"),b.default.createElement(o.default.Option,{key:2,value:1},"上架"),b.default.createElement(o.default.Option,{key:3,value:0},"下架"))),b.default.createElement(u.default,{className:N.default.cred_btn3,type:"primary",onClick:this.handleSearch},"查询")),b.default.createElement("div",{className:N.default.cred_bnts_list},b.default.createElement(u.default,{type:"primary",onClick:function(){return e.editClassify(1)}},"添加一级分类"),b.default.createElement(u.default,{type:"primary",disabled:!(Number(this.state.classifyId)>0)||3==n,onClick:function(){return e.editClassify(2)}},"添加子分类"),b.default.createElement(u.default,{type:"primary",disabled:!(Number(this.state.classifyId)>0),onClick:function(){return e.editClassify(3)}},"修改分类"),b.default.createElement(u.default,{type:"primary",disabled:!(Number(this.state.classifyId)>0),onClick:this.delClassify},"删除分类"),b.default.createElement(I.Link,{to:{pathname:"/"+w+"/"+x+"/index/tool/cred/edit/new/0",query:m}},b.default.createElement(u.default,{type:"primary",disabled:!(Number(this.state.classifyId)>0)},"新增证书")),b.default.createElement(u.default,{type:"primary",onClick:this.listExport},"导出证书清单")),b.default.createElement("div",{className:N.default.tree},b.default.createElement("div",{className:N.default.tree_top}),b.default.createElement(D.default,{onSelect:function(t,a){return e.treeSelect(t,a)}},function e(t){return t.map((function(t){return t.children&&t.children.length?b.default.createElement(P,{title:t.title,key:t.key,dataRef:t},e(t.children)):b.default.createElement(P,{key:t.key,title:t.title,dataRef:t})}))}(this.state.reClassifyList))),b.default.createElement("div",{className:N.default.cred_list},null===t?b.default.createElement(d.default,{className:N.default.cred_spin}):b.default.createElement("div",null,b.default.createElement(c.default,{style:{background:"white"},size:"default",columns:C,dataSource:t,loading:null===t,pagination:!1,rowKey:"id"}),b.default.createElement(s.default,{hideOnSinglePage:!0,className:N.default.cred_list_pagination,size:"small",total:0!=t.length?t[0].total:0,showTotal:this.showTotal,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","30","40"],onChange:this.handlePageChange,onShowSizeChange:this.handlePageSizeChange}))),b.default.createElement(i.default,{title:1==l?"添加一级分类":2==l?"添加子分类":"修改分类",visible:this.state.editeClassifyVS,onCancel:this.closeAddClassify,onOk:this.saveClassify,destroyOnClose:!0,footer:b.default.createElement("div",null,b.default.createElement(u.default,{onClick:this.closeAddClassify},"取消"),b.default.createElement(u.default,{type:"primary",onClick:this.saveClassify,disabled:this.state.classifyNameTooLong||this.state.classifyDescTooLong},"确认"))},2==l||3==l&&1!=g?b.default.createElement("div",null,b.default.createElement("span",null,b.default.createElement("span",{style:{color:"red"}},"*")," 上级分类名称："),b.default.createElement(r.default,{style:{width:"76%"},options:this.state.reClassifyListForCascader,onChange:this.classifySelectChange,placeholder:"请选择上级分类",changeOnSelect:!0,defaultValue:3==l?p.slice(0,p.length-1):p})):"",b.default.createElement("div",{style:{margin:"10px 0"},className:this.state.classifyNameTooLong?"classifyNameTooLong":""},1==l||3==l&&1==g?b.default.createElement("span",null,b.default.createElement("span",{style:{color:"red"}},"*")," 一级分类名称："):b.default.createElement("span",null,b.default.createElement("span",{style:{color:"red"}},"*")," 子级分类名称："),b.default.createElement(T.default,{placeholder:"请输入分类名称",style:{width:"76%"},onChange:this.classifyNameChange,value:this.state.classifyName}),b.default.createElement("div",{style:{display:this.state.classifyNameTooLong?"block":"none",color:"red",marginLeft:120}},"最多支持输入20个字符以内")),b.default.createElement("div",{className:this.state.classifyDescTooLong?"classifyDescTooLong":""},b.default.createElement("span",{style:{float:"left"}},"          分类描述："),b.default.createElement(M,{placeholder:"请输入分类描述",style:{width:"76%"},onChange:this.classifyDescChange,value:this.state.classifyDesc}),b.default.createElement("div",{style:{display:this.state.classifyDescTooLong?"block":"none",color:"red",marginLeft:120}},"最多支持输入50个字符以内"))),b.default.createElement(i.default,{className:N.default.pre_look,visible:this.state.preLookVS,width:680,footer:null,onCancel:this.cancelPreLook,closable:!1},b.default.createElement("img",{style:{width:680},onClick:this.cancelPreLook,src:this.state.record&&this.state.record.templateImage,alt:""})),b.default.createElement(i.default,{className:N.default.relationActivity,visible:this.state.relationActivityVS,width:680,onCancel:this.relationActivityClose,footer:b.default.createElement("div",{style:{display:this.state.editCredFlag?"block":"none"}},b.default.createElement(u.default,{onClick:this.relationActivityClose},"取消"),b.default.createElement(u.default,{type:"primary",onClick:this.continueEditCred},"继续"))},b.default.createElement("div",{style:{display:this.state.editCredFlag?"block":"none",fontSize:18,textAlign:"center",margin:10,fontWeight:600}},"该证书已关联以下活动，是否继续？"),b.default.createElement(c.default,{size:"default",columns:v,dataSource:this.state.activityList,pagination:!1,rowKey:"id"}))):b.default.createElement("spin",null)}}]),l}(b.Component);var j=(0,S.connect)((function(e,t){return{list:e.credential.list,state:e.credential.state,copy:e.credential.copy,classifyList:e.credential.classifyList,activityList:e.credential.activityList}}),(function(e){return{onGetList:function(t,a){return e((0,R.gclfetch)(t,a))},onGetState:function(t,a){return e((0,R.gcsfetch)(t,a))},onCopy:function(t,a){return e((0,R.ccfetch)(t,a))},getClassifyList:function(t,a){return e((0,R.getClassifyList)(t,a))},delClassify:function(t,a){return e((0,R.delClassify)(t,a))},createClassify:function(t,a){return e((0,R.createClassify)(t,a))},updateClassify:function(t,a){return e((0,R.updateClassify)(t,a))},getActivityList:function(t,a){return e((0,R.getActivityList)(t,a))},listExport:function(t,a){return e((0,R.listExport)(t,a))}}}))((0,I.withRouter)(V));t.default=j},2115:function(e,t,a){e.exports={cred:"cred__1pQAS",cred_btns:"cred_btns__1V4BU",cred_btn1:"cred_btn1__1LRws",cred_btn2:"cred_btn2__1yZIi",cred_btn3:"cred_btn3__won48","cred-btn4":"cred-btn4__2QHNf",cred_list:"cred_list__1BVTX",cred_list_btn:"cred_list_btn__1u8ER",cred_spin:"cred_spin__3MU70",cred_list_pagination:"cred_list_pagination__1syBW",cred_bnts_list:"cred_bnts_list__1pl8t",tree:"tree__lL2IV",tree_top:"tree_top__1jJCV",pre_look:"pre_look__3LIdK",classifyDescTooLong:"classifyDescTooLong__pbcDp",classifyNameTooLong:"classifyNameTooLong__1dEtd"}},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},558:function(e,t,a){e.exports=a(11)(251)},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},620:function(e,t,a){"use strict";var l=a(19),n=a(16),i=a(85),r=a(36),s=a(21),c=a(45),d=a(153),u=a(83),o=a(14),f=a(66),y=a(80).f,p=a(49).f,h=a(22).f,E=a(236).trim,_=n.Number,g=_.prototype,m="Number"==c(f(g)),C=function(e){var t,a,l,n,i,r,s,c,d=u(e,!1);if("string"==typeof d&&d.length>2)if(43===(t=(d=E(d)).charCodeAt(0))||45===t){if(88===(a=d.charCodeAt(2))||120===a)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:l=2,n=49;break;case 79:case 111:l=8,n=55;break;default:return+d}for(r=(i=d.slice(2)).length,s=0;s<r;s++)if((c=i.charCodeAt(s))<48||c>n)return NaN;return parseInt(i,l)}return+d};if(i("Number",!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var v,T=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof T&&(m?o((function(){g.valueOf.call(a)})):"Number"!=c(a))?d(new _(C(t)),a,T):C(t)},D=l?y(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;D.length>b;b++)s(_,v=D[b])&&!s(T,v)&&h(T,v,p(_,v));T.prototype=g,g.constructor=T,r(n,"Number",T)}},622:function(e,t,a){e.exports=a(11)(854)},636:function(e,t,a){e.exports=a(46)(174)},719:function(e,t,a){"use strict";a.r(t);a(26),a(1293)},807:function(e,t,a){"use strict";a.r(t);a(26),a(809),a(655),a(537)},808:function(e,t,a){e.exports=a(11)(815)},809:function(e,t,a){}}]);