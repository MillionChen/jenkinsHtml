(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1329:function(e,t,a){"use strict";var n=a(4),r=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(569);var o=r(a(558));a(549);var u=r(a(544)),l=r(a(98)),i=r(a(237)),c=r(a(29)),s=r(a(30)),d=r(a(32)),f=r(a(33)),p=r(a(31)),m=n(a(1));function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=a(1361),y=function(e){(0,d.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(g()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,f.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),(t=a.call(this,e)).state={columns:[]},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.columns,a=void 0===t?[]:t,n=e.tableData,r=void 0===n?[]:n,c=e.dataTotal,s=void 0===c?0:c,d=e.showPagination,f=void 0===d||d,p=(e.paginationFloat,e.paginationStyle),g=void 0===p?{}:p,y=(0,i.default)(e,["columns","tableData","dataTotal","showPagination","paginationFloat","paginationStyle"]);return m.default.createElement("div",{style:{width:this.props.width||"100%"}},m.default.createElement(u.default,(0,l.default)({},y,{rowKey:this.props.rowKey?this.props.rowKey:"id",columns:a,dataSource:r,onChange:function(){},pagination:!1})),f&&m.default.createElement("div",{style:{textAlign:"center"}}," ",m.default.createElement(o.default,(0,l.default)({className:h.paginations},g,{total:s,showTotal:function(e){return"共有".concat(e,"条")},showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:10,defaultCurrent:1,pageSizeOptions:["10","20","50","100"],onChange:this.props.changePageNo||null,onShowSizeChange:this.props.onShowSizeChange||null})),m.default.createElement("p",{style:{clear:"both"}})))}}]),n}(m.Component);t.default=y},1356:function(e,t,a){"use strict";var n=a(4),r=a(0);a(7),a(3),a(5),a(43),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(229),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var o=r(a(535));a(554);var u=r(a(550));a(537);var l=r(a(536)),i=r(a(238));a(61);var c=r(a(62));a(239);var s=r(a(240)),d=r(a(29)),f=r(a(30)),p=r(a(59)),m=r(a(32)),g=r(a(33)),h=r(a(31)),y=r(a(2));a(575);var b=r(a(568)),v=n(a(1)),S=a(52),R=n(a(1357)),C=r(a(1359));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=b.default.TabPane,D=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(w()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,y.default)((0,p.default)(t),"usersColumns",[{title:"序号",dataIndex:"num",key:"num"},{title:"用户名",dataIndex:"name",key:"name",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"姓名",dataIndex:"fullName",key:"fullName",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"手机号",dataIndex:"mobile",key:"mobile"},{title:"职位",dataIndex:"position",key:"position",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}}]),(0,y.default)((0,p.default)(t),"contentColumns",[{title:"序号",dataIndex:"num",key:"num"},{title:"内容编号",dataIndex:"code",key:"code"},{title:"内容类型",dataIndex:"business",key:"business"},{title:"内容名称",dataIndex:"content",key:"content",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}}]),(0,y.default)((0,p.default)(t),"queryData",function(){var e=(0,s.default)(i.default.mark((function e(a,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state.tabsKey,o=(0,p.default)(t),1==r?(console.log(t.props.rulesLook,"推荐管理"),t.props.rulesLook?t.props.getVisibleRangeToContent(O({id:o.props.id},a),(function(e){1e3==e.code?o.setState({rangeToContent:e.data,rangeToContentPage:e.page,pageNo:n}):c.default.error(e.data.subMsg)})):t.props.getVisibleRangeToUser(O({id:o.props.id},a),(function(e){1e3==e.code?t.setState({rangeToUser:e.data,rangeToUserPage:e.page,pageNo:n}):c.default.error(e.data.subMsg)}))):(console.log(t.props.rulesLook,"规则管理"),t.props.rulesLook?t.props.recommendRuleStrategyPage(O({ruleId:t.props.id},a),(function(e){1e3==e.code?t.setState({rangeToContent:e.data,rangeToContentPage:e.page,pageNo:n}):c.default.error(e.data.subMsg)})):t.props.getRecommendStrategyContent(O({id:t.props.id},a),(function(e){1e3==e.code?t.setState({rangeToContent:e.data,rangeToContentPage:e.page,pageNo:n}):c.default.error(e.data.subMsg)})));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),(0,y.default)((0,p.default)(t),"search",(function(){var e=t.state,a=e.keyword,n=e.pageNo,r=e.pageSize,o=e.business;e.tabsKey;t.queryData({keyword:a,pageNo:n,pageSize:r,business:o})})),(0,y.default)((0,p.default)(t),"onChange",(function(e){t.setState({keyword:e.target.value})})),(0,y.default)((0,p.default)(t),"onChangePageSize",(function(e,a){var n={pageNo:e,pageSize:a,keyword:t.state.keyword};t.setState({pageSize:a},(function(){return t.queryData(n)}))})),(0,y.default)((0,p.default)(t),"onChangePage",(function(e,a){var n={pageNo:e,pageSize:a,keyword:t.state.keyword};t.queryData(n)})),(0,y.default)((0,p.default)(t),"changeTags",(function(e){t.setState({tabsKey:e},(function(){2==e&&t.props.rulesGetInitJson((function(e){1e3==e.code?t.setState({fList:Object.keys(e.data.business),classifyList:e.data.business}):c.default.error(e.subMsg)})),t.queryData({keyword:"",pageSize:20})}))})),(0,y.default)((0,p.default)(t),"onSecondChange",(function(e){console.log(e),t.setState({business:e})})),t.state={pageNo:1,pageSize:20,tabsKey:1,rangeToUser:[],rangeToUserPage:{},rangeToContent:[],rangeToContentPage:{},keyword:"",fList:[],classifyList:{},business:""},t}return(0,f.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.queryData({keyword:"",pageSize:20}),this.props.rulesLook&&this.props.rulesGetInitJson((function(t){1e3==t.code?e.setState({fList:Object.keys(t.data.business),classifyList:t.data.business}):c.default.error(t.subMsg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.tabsKey,n=t.rangeToUser,r=t.rangeToUserPage,i=t.rangeToContent,c=t.rangeToContentPage,s=t.fList,d=t.classifyList;return console.log(a,"rangeToContentPage"),v.default.createElement("div",{style:{padding:"2%"}},v.default.createElement("div",null,v.default.createElement("span",null,"关键字："," ",v.default.createElement(l.default,{onChange:this.onChange,style:{width:"250px"},placeholder:1!=a||this.props.rulesLook?"请输入内容编码、名称":"请输入用户名/姓名/手机号"})),(1!=a||this.props.rulesLook)&&v.default.createElement("span",{style:{marginLeft:"20px"}},"内容类型：",v.default.createElement(u.default,{onChange:function(t){return e.onSecondChange(t)},style:{width:"250px",marginRight:"10px"},placeholder:"全部",allowClear:!0},s.map((function(e){return v.default.createElement(u.default.Option,{key:e},d[e])})))),v.default.createElement(o.default,{style:{marginLeft:"20px"},onClick:this.search,type:"primary"},"查询")),this.props.rulesLook?v.default.createElement(C.default,{rowKey:this.props.id,columns:this.contentColumns,onChangePage:this.onChangePage,onChangePageSize:this.onChangePageSize,page:c,dataSource:i}):v.default.createElement(b.default,{defaultActiveKey:"1",onChange:this.changeTags},v.default.createElement(k,{tab:"用户",key:"1"},v.default.createElement(C.default,{rowKey:this.props.id,onChangePage:this.onChangePage,onChangePageSize:this.onChangePageSize,page:r,columns:this.usersColumns,dataSource:n})),v.default.createElement(k,{tab:"内容",key:"2"},v.default.createElement(C.default,{rowKey:this.props.id,columns:this.contentColumns,onChangePage:this.onChangePage,onChangePageSize:this.onChangePageSize,page:c,dataSource:i}))))}}]),n}(v.Component),T=(0,S.connect)((function(e){return e}),O({},R))(D);t.default=T},1357:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.rulesGetInitJson=function(e){return function(t){return(0,r.default)({url:u}).then((function(t){"1000"===t.code&&e&&e(t)}))}},t.getVisibleRangeToContent=function(e,t){return function(a){return(0,r.default)({url:l,data:e}).then((function(e){"1000"===e.code&&t&&t(e)}))}},t.recommendRuleGetVisibleRangeToUser=function(e,t){return function(a){return(0,r.default)({url:i,data:e}).then((function(e){"1000"===e.code&&t&&t(e)}))}},t.getVisibleRangeToUser=function(e,t){return function(a){return(0,r.default)({url:c,data:e}).then((function(e){"1000"===e.code&&t&&t(e)}))}},t.recommendRuleStrategyPage=function(e,t){return function(a){return(0,r.default)({url:s,data:e}).then((function(e){"1000"===e.code&&t&&t(e)}))}},t.getRecommendStrategyContent=function(e,t){return function(a){return(0,r.default)({url:d,data:e}).then((function(e){"1000"===e.code&&t&&t(e)}))}};var r=n(a(76)),o=n(a(1358)),u=o.default.rulesGetInitJsonApi,l=o.default.getVisibleRangeToContentApi,i=o.default.recommendRuleGetVisibleRangeToUserApi,c=o.default.getVisibleRangeToUserApi,s=o.default.recommendRuleStrategyPageApi,d=o.default.getRecommendStrategyContentApi},1358:function(e,t,a){"use strict";var n=a(0);a(44),a(20),a(86),Object.defineProperty(t,"__esModule",{value:!0}),t.rulesGetInitJson=function(e){return fetch("/rules/manage/recommendRule/getJson?companyCode=".concat(companyCode,"&siteCode=").concat(siteCode),e)},t.default=void 0;var r=n(a(63)),o={rulesGetInitJsonApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/getJson"),getVisibleRangeToContentApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/content/range/page"),recommendRuleGetVisibleRangeToUserApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/getVisibleRangeToUser"),getVisibleRangeToUserApi:"GET ".concat(r.default.base,"/rules/manage/recommendStrategy/getVisibleRangeToUser"),recommendRuleStrategyPageApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/strategy/page"),getRecommendStrategyContentApi:"GET ".concat(r.default.base,"/rules/manage/recommendStrategy/content/range/page")};t.default=o},1359:function(e,t,a){"use strict";var n=a(4),r=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var o=r(a(544));a(569);var u=r(a(558)),l=r(a(29)),i=r(a(30)),c=r(a(32)),s=r(a(33)),d=r(a(31)),f=n(a(1));function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,c.default)(n,e);var t,a=(t=n,function(){var e,a=(0,d.default)(t);if(p()){var n=(0,d.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,s.default)(this,e)});function n(e){var t;return(0,l.default)(this,n),(t=a.call(this,e)).state={current:1},t}return(0,i.default)(n,[{key:"render",value:function(){var e=this;return f.default.createElement(o.default,{columns:this.props.columns,rowKey:function(t){return t.id||e.props.rowKey||"id"},dataSource:this.props.dataSource||[],rowSelection:this.props.rowSelection,pagination:!1,title:this.props.header,footer:function(){return f.default.createElement("div",{style:{textAlign:"center"}},f.default.createElement(u.default,{defaultPageSize:e.props.defaultPageSize||20,current:e.props.page&&e.props.page.pageNo||1,showQuickJumper:!0,pageSizeOptions:e.props.pageSizeOptions||["20","50","100"],bordered:!0,total:e.props.page&&e.props.page.pageTotal,showTotal:function(e){return"总共".concat(e,"条")},onChange:function(t,a){return e.props.onChangePage(t,a)},showSizeChanger:!0,onShowSizeChange:function(t,a){return e.props.onChangePageSize(t,a)}}))}})}}]),n}(f.Component);t.default=m},1361:function(e,t,a){e.exports={paginations:"paginations__f66HM",colors:"colors__1nXFg"}},1386:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.recommendRulePage=function(e,t){return function(a){return(0,r.default)({url:u,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleCopy=function(e,t){return function(a){return(0,r.default)({url:l,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleDelete=function(e,t){return function(a){return(0,r.default)({url:i,data:e}).then((function(e){t&&t(e)}))}},t.getVisibleRangeToContent=function(e,t){return function(a){return(0,r.default)({url:c,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleGetVisibleRangeToUser=function(e,t){return function(a){return(0,r.default)({url:s,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleStrategyPage=function(e,t){return function(a){return(0,r.default)({url:d,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleIdsGet=function(e,t){return function(a){return(0,r.default)({url:f,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleTemplateSave=function(e,t){return function(a){return(0,r.default)({url:p,data:e}).then((function(e){t&&t(e)}))}};var r=n(a(76)),o=n(a(1476)),u=o.default.recommendRulePageApi,l=o.default.recommendRuleCopyApi,i=o.default.recommendRuleDeleteApi,c=o.default.getVisibleRangeToContentApi,s=o.default.recommendRuleGetVisibleRangeToUserApi,d=o.default.recommendRuleStrategyPageApi,f=o.default.recommendRuleIdsGetApi,p=o.default.recommendRuleTemplateSaveApi},1476:function(e,t,a){"use strict";var n=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.recommendRuleTemplateSave=function(e){return post("/rules/manage/recommendRule/template/save?companyCode=".concat(companyCode,"&siteCode=").concat(siteCode),e)},t.default=void 0;var r=n(a(63)),o={recommendRulePageApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/page"),recommendRuleCopyApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/copy"),recommendRuleDeleteApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/delete"),getVisibleRangeToContentApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/content/range/page"),recommendRuleGetVisibleRangeToUserApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/getVisibleRangeToUser"),recommendRuleStrategyPageApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/strategy/page"),recommendRuleIdsGetApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/ids/get"),recommendRuleTemplateSaveApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/template/save")};t.default=o},1477:function(e,t,a){"use strict";var n=a(4),r=a(0);a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var o=r(a(225));a(140);var u=r(a(535));a(537);var l=r(a(536)),i=r(a(238));a(239);var c=r(a(240)),s=r(a(29)),d=r(a(30)),f=r(a(59)),p=r(a(32)),m=r(a(33)),g=r(a(31)),h=r(a(2));a(540);var y=r(a(539)),b=n(a(1)),v=r(a(1329)),S=a(52),R=n(a(1386));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=y.default.Item,w=function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(P()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,s.default)(this,n),t=a.call(this,e),(0,h.default)((0,f.default)(t),"columns",[{title:"序号",dataIndex:"id",render:function(e,a,n){return(t.state.pageNo-1)*t.state.pageSize+n+1}},{title:"策略名称",dataIndex:"name",render:function(e){return b.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}}]),(0,h.default)((0,f.default)(t),"queryData",(0,c.default)(i.default.mark((function e(){var a,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={ruleId:t.props.lookDataId,name:t.state.name,pageNo:t.state.pageNo,pageSize:t.state.pageSize},n=(0,f.default)(t),t.props.recommendRuleStrategyPage(a,(function(e){1e3==e.code&&n.setState({tableData:e.data,dataTotal:e.page.pageTotal})}));case 3:case"end":return e.stop()}}),e)})))),(0,h.default)((0,f.default)(t),"changePageNo",(function(e){t.setState({pageNo:e},(function(){t.queryData()}))})),(0,h.default)((0,f.default)(t),"onShowSizeChange",(function(e,a){t.setState({pageNo:e,pageSize:a},(function(){t.queryData()}))})),(0,h.default)((0,f.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){e||t.setState({pageNo:1,name:a.keyword},(function(){t.queryData()}))}))})),t.state={cacheList:[],contentVisible:!1,tableData:[],dataTotal:0,name:"",resData:{},pageNo:1,pageSize:10},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.queryData()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.tableData,r=a.dataTotal;return b.default.createElement(o.default,{onCancel:function(){return e.props.handleCancel(0)},footer:null,width:1e3,title:"关联活动",visible:this.props.modalVisible},b.default.createElement(y.default,{onSubmit:this.handleSubmit},b.default.createElement(O,{style:{marginBottom:"6px"}},"关键字：",t("keyword")(b.default.createElement(l.default,{size:"small",placeholder:"请输入关联活动名称",style:{width:"200px"}})),b.default.createElement(u.default,{size:"small",style:{marginLeft:"8px"},htmlType:"submit",type:"primary"},"搜索"))),b.default.createElement("p",{style:{fontSize:"16px"}},"推荐策略"),b.default.createElement(v.default,{rowKey:"num",style:{border:"1px solid #fff"},size:"middle",columns:this.columns,tableData:n,dataTotal:r,paginationStyle:{style:{float:"none",margin:"20px auto",marginLeft:"50%",transform:"translateX(-44%)"},size:"small"},changePageNo:this.changePageNo,onShowSizeChange:this.onShowSizeChange}))}}]),n}(b.Component),k=(0,S.connect)((function(e){return e}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},R))(y.default.create()(w));t.default=k},1542:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.recommendRulePage=function(e,t){return function(a){return(0,r.default)({url:u,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleCopy=function(e,t){return function(a){return(0,r.default)({url:l,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleDelete=function(e,t){return function(a){return(0,r.default)({url:i,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleIdsGet=function(e,t){return function(a){return(0,r.default)({url:c,data:e}).then((function(e){t&&t(e)}))}},t.recommendRuleTemplateSave=function(e,t){return function(a){return(0,r.default)({url:s,data:e}).then((function(e){t&&t(e)}))}};var r=n(a(76)),o=n(a(1813)),u=o.default.recommendRulePageApi,l=o.default.recommendRuleCopyApi,i=o.default.recommendRuleDeleteApi,c=o.default.recommendRuleIdsGetApi,s=o.default.recommendRuleTemplateSaveApi},1811:function(e,t,a){"use strict";var n=a(4),r=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var o=r(a(225));a(569);var u=r(a(558));a(549);var l=r(a(544));a(140);var i=r(a(535));a(537);var c=r(a(536));a(61);var s=r(a(62)),d=r(a(238));a(239);var f=r(a(240));a(564);var p=r(a(563)),m=r(a(29)),g=r(a(30)),h=r(a(59)),y=r(a(32)),b=r(a(33)),v=r(a(31)),S=r(a(2));a(592);var R=r(a(566));a(540);var C=r(a(539)),P=n(a(1)),O=(a(636),r(a(226))),w=r(a(1812)),k=r(a(1356)),D=r(a(1477)),T=r(a(223)),E=a(52),j=n(a(1542));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var z=C.default.Item,I=(R.default.RangePicker,function(e){(0,y.default)(n,e);var t,a=(t=n,function(){var e,a=(0,v.default)(t);if(V()){var n=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,b.default)(this,e)});function n(e){var t;return(0,m.default)(this,n),t=a.call(this,e),(0,S.default)((0,h.default)(t),"columns",[{title:"序号",dataIndex:"id",render:function(e,a,n){return(t.state.pageNo-1)*t.state.pageSize+n+1}},{title:"规则名称",dataIndex:"name",render:function(e){return P.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"创建时间",dataIndex:"createTime",width:300,render:function(e,t){return P.default.createElement("span",null,(0,T.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",dataIndex:"action",render:function(e,a){return P.default.createElement("span",null,P.default.createElement(p.default,{style:{minWidth:"180px"},title:"确定复制？",onConfirm:function(){return t.handleCopyRow(a.id)}},P.default.createElement("a",{href:"#"},"复制")),P.default.createElement("a",{onClick:function(e){return t.editModal(e,a)},style:{marginLeft:"10px"}},"修改"),P.default.createElement("a",{style:{marginLeft:"10px"},onClick:function(){return t.handleLookScope(a)}},"查看规则范围"),P.default.createElement("a",{style:{marginLeft:"10px"},onClick:function(){return t.handleLookActivity(a)}},"查看关联活动"),P.default.createElement(p.default,{style:{minWidth:"180px"},title:"确定删除？",onConfirm:function(){return t.handleDeleteRow(a.id)}},P.default.createElement("a",{href:"#",style:{marginLeft:"10px"}},"删除")))}}]),(0,S.default)((0,h.default)(t),"queryData",(0,f.default)(d.default.mark((function e(){var a,n;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props.form.getFieldValue("ruleName"),n={name:a||"",pageNo:t.state.pageNo,pageSize:t.state.pageSize,type:"1"},t.props.recommendRulePage(n,(function(e){t.setState({tableData:e.data,dataTotal:e.page.pageTotal}),console.log("666",e)}));case 3:case"end":return e.stop()}}),e)})))),(0,S.default)((0,h.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.setState({pageNo:1},(function(){t.queryData()}))})),(0,S.default)((0,h.default)(t),"changePageNo",(function(e){t.setState({pageNo:e},(function(){t.queryData()}))})),(0,S.default)((0,h.default)(t),"onShowSizeChange",(function(e,a){t.setState({pageNo:e,pageSize:a},(function(){t.queryData()}))})),(0,S.default)((0,h.default)(t),"handleModal",(function(){t.setState({lookDataId:"",modalVisible:!0})})),(0,S.default)((0,h.default)(t),"handleCopyRow",function(){var e=(0,f.default)(d.default.mark((function e(a){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.recommendRuleCopy({id:a},(function(e){1e3==e.code?(s.default.success("复制成功"),t.queryData()):s.default.error("复制失败")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,S.default)((0,h.default)(t),"lookModal",(function(e,a){e.preventDefault(),t.setState({lookDataId:a.id,modalVisible:!0})})),(0,S.default)((0,h.default)(t),"editModal",(function(e,a){e.preventDefault(),t.setState({editOrNo:!0,lookDataId:a.id,modalVisible:!0})})),(0,S.default)((0,h.default)(t),"handleLookScope",(function(e){t.setState({lookDataId:e.id,lookScopeVisible:!0})})),(0,S.default)((0,h.default)(t),"handleLookActivity",(function(e){t.setState({lookDataId:e.id,lookCorrelateionVisible:!0})})),(0,S.default)((0,h.default)(t),"handleDeleteRow",function(){var e=(0,f.default)(d.default.mark((function e(a){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.recommendRuleDelete({id:a},(function(e){if(1e3==e.code)if(e.subCode)s.default.info(e.subMsg);else{s.default.success("删除成功");var a=t.state,n=a.tableData,r=a.pageNo;1==n.length&&1!=r?t.setState({pageNo:r-1},(function(){t.queryData()})):t.queryData()}else s.default.error("删除失败")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,S.default)((0,h.default)(t),"handleOk",(function(){t.handleCancel()})),(0,S.default)((0,h.default)(t),"handleCancel",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;1==e&&t.queryData(),t.setState({modalVisible:!1,editOrNo:!1,lookScopeVisible:!1,lookCorrelateionVisible:!1})})),t.state={modalVisible:!1,lookScopeVisible:!1,lookCorrelateionVisible:!1,tableData:[],dataTotal:0,pageNo:1,pageSize:10,lookDataId:"",editOrNo:!1},t}return(0,g.default)(n,[{key:"componentDidMount",value:function(){this.queryData()}},{key:"render",value:function(){var e=this,t=this.state.tableData,a=this.props.form.getFieldDecorator;return P.default.createElement("div",{style:{padding:"2%"}},P.default.createElement(O.default,{title:"内容规则"}),P.default.createElement("div",{className:"header-rules--search"},P.default.createElement(C.default,{layout:"inline",onSubmit:this.handleSubmit,style:{paddingBottom:30}},P.default.createElement(z,{label:"规则名称："},a("ruleName")(P.default.createElement(c.default,{style:{width:"250px"},placeholder:"请输入规则名称"}))),P.default.createElement(z,null,P.default.createElement(i.default,{type:"primary",htmlType:"submit"},"查询"),P.default.createElement(i.default,{style:{marginLeft:"16px"},onClick:this.handleModal,type:"primary"},"新建规则")))),P.default.createElement(l.default,{rowKey:"id",columns:this.columns,dataSource:t||[],onChange:function(){},pagination:!1}),P.default.createElement(u.default,{style:{float:"right",marginTop:"20px",marginBottom:"20px"},total:this.state.dataTotal,showTotal:function(e){return"共有".concat(e,"条")},showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:10,pageSizeOptions:["10","20","50","100"],onChange:this.changePageNo,onShowSizeChange:this.onShowSizeChange}),this.state.modalVisible&&P.default.createElement(w.default,{editOrNo:this.state.editOrNo,lookDataId:this.state.lookDataId,modalVisible:this.state.modalVisible,handleOk:this.handleOk,handleCancel:this.handleCancel}),P.default.createElement(o.default,{title:"规则范围",width:"80%",visible:this.state.lookScopeVisible,footer:null,destroyOnClose:!0,onCancel:function(){return e.setState({lookScopeVisible:!1})}},P.default.createElement(k.default,{rulesLook:!0,id:this.state.lookDataId})),this.state.lookCorrelateionVisible&&P.default.createElement(D.default,{lookDataId:this.state.lookDataId,modalVisible:this.state.lookCorrelateionVisible,handleCancel:this.handleCancel}))}}]),n}(P.Component)),A=(0,E.connect)((function(e){return e}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,S.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},j))(C.default.create({})(I));t.default=A},1812:function(e,t,a){"use strict";var n=a(4),r=a(0);a(7),a(44),a(3),a(5),a(43),a(51),a(9),a(10),a(8),a(20),a(34),a(23),a(228),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var o=r(a(225)),u=r(a(98));a(537);var l=r(a(536));a(61);var i=r(a(62)),c=r(a(238));a(239);var s=r(a(240)),d=r(a(29)),f=r(a(30)),p=r(a(59)),m=r(a(32)),g=r(a(33)),h=r(a(31)),y=r(a(2));a(540);var b=r(a(539)),v=n(a(1)),S=r(a(1541)),R=a(52),C=n(a(1542));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=b.default.Item,D={labelCol:{xs:{span:12},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},T=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(w()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,y.default)((0,p.default)(t),"queryData",function(){var e=(0,s.default)(c.default.mark((function e(a){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[a],t.props.recommendRuleIdsGet([].concat(n),(function(e){1e3==e.code&&(t.props.form.setFieldsValue({name:e.data[a].name}),t.setState({resData:e.data[a],cacheList:e.data[a].list},(function(){t.setState({contentVisible:!0})})))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,y.default)((0,p.default)(t),"handleSubmit",(function(e){e.preventDefault();var a=!1;t.props.form.validateFields((function(e,n){if(!e){var r=t.state.resData,o=t.addRef.state.formSelect.map((function(e,t){return"all"==e.property||e.value&&e.value.trim()||(i.default.error("请填写完整内容规则条件"),a=!0),O({},e,{sort:t+1})}));if(!a){var u={name:n.name,list:o,template:!1,type:1,sort:1};t.props.lookDataId&&(r.list=o,r.sort=1,r.id=t.props.lookDataId,r.name=n.name,u=r),t.props.recommendRuleTemplateSave(u,(function(e){1e3==e.code?(i.default.success("保存成功"),t.props.handleCancel(1)):i.default.error("保存失败")}))}}}))})),t.state={cacheList:[],contentVisible:!1,resData:{}},t}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.props.lookDataId?this.queryData(this.props.lookDataId):this.setState({contentVisible:!0})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.lookDataId,r=a.editOrNo,i=n?r?"修改内容规则":"查看内容规则":"新建内容规则",c=v.default.createElement(b.default,(0,u.default)({},D,{onSubmit:this.handleSubmit}),v.default.createElement(k,{label:"内容名称"},t("name",{rules:[{required:!0,message:"请输入内容名称"}]})(v.default.createElement(l.default,{placeholder:"请输入规则名称(50字内)",maxLength:50,disabled:!!n&&!r,style:{width:"300px"}}))),v.default.createElement(k,(0,u.default)({},D,{label:"内容规则",required:!0}),v.default.createElement("div",null,this.state.contentVisible&&v.default.createElement(S.default,{width:"100%",editOrNo:!!n&&!r,cacheList:this.state.cacheList,wrappedComponentRef:function(t){return e.addRef=t}}))));return n?r?v.default.createElement(o.default,{onCancel:this.props.handleCancel,onOk:this.handleSubmit,width:"80%",title:i,visible:this.props.modalVisible},c):v.default.createElement(o.default,{onCancel:this.props.handleCancel,footer:null,onOk:this.handleSubmit,width:"80%",title:i,visible:this.props.modalVisible},c):v.default.createElement(o.default,{onCancel:this.props.handleCancel,onOk:this.handleSubmit,width:"80%",title:i,visible:this.props.modalVisible},c)}}]),n}(v.Component),E=(0,R.connect)((function(e){return e}),O({},C))(b.default.create()(T));t.default=E},1813:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),o={recommendRulePageApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/page"),recommendRuleCopyApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/copy"),recommendRuleDeleteApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/delete"),getVisibleRangeToContentApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/content/range/page"),recommendRuleGetVisibleRangeToUserApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/getVisibleRangeToUser"),recommendRuleStrategyPageApi:"GET ".concat(r.default.base,"/rules/manage/recommendRule/strategy/page"),recommendRuleIdsGetApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/ids/get"),recommendRuleTemplateSaveApi:"POST ".concat(r.default.base,"/rules/manage/recommendRule/template/save")};t.default=o},568:function(e,t,a){e.exports=a(11)(333)},575:function(e,t,a){"use strict";a.r(t);a(26),a(623)},623:function(e,t,a){}}]);