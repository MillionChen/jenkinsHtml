(window.webpackJsonp=window.webpackJsonp||[]).push([[55,10],{1008:function(e,t,a){},1023:function(e,t,a){"use strict";var l=a(4),n=a(0);a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var r=n(a(225));a(580);var u=n(a(571));a(99);var o=n(a(100));a(140);var s=n(a(535));a(61);var i=n(a(62)),c=n(a(29)),d=n(a(30)),f=n(a(59)),p=n(a(32)),m=n(a(33)),h=n(a(31)),y=n(a(2));a(554);var g=n(a(550));a(540);var v=n(a(539)),C=l(a(1)),E=a(561),S=a(618),R=a(52);function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=v.default.Item,k=(g.default.Option,function(e){(0,p.default)(l,e);var t,a=(t=l,function(){var e,a=(0,h.default)(t);if(b()){var l=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function l(e){var t;return(0,c.default)(this,l),t=a.call(this,e),(0,y.default)((0,f.default)(t),"beforeUpload",(function(e,a){if(!/(xls|xlsx)$/g.test(e.name))return t.props.form.resetFields(""),t.setState({fileList:[]}),i.default.error("文件类型不对，参照格式上传"),!1;if(console.log(e.type),a.length>1)return i.default.error("一次只能导入一个文件"),void t.setState({fileList:[]});t.setState({fileList:a});var l=t.props.param;t.setState({uploadParams:{Filename:l.dir+"/"+e.name,key:l.dir+"/"+e.name,policy:l.policy,OSSAccessKeyId:l.accessid,success_action_status:"200",signature:l.signature},uploadAction:l.host,originalFile:e.name,originalFileUrl:l.host+"/"+l.dir+"/"+e.name})})),(0,y.default)((0,f.default)(t),"handleChange",(function(e){console.log(t.state),console.log(e);var a=e.fileList;a=a.slice(-1),e.file.status,"done"===e.file.status&&t.setState({fileList:a}),"error"===e.file.status&&(i.default.error("上传失败，请重新尝试"),t.setState({fileList:[]}))})),(0,y.default)((0,f.default)(t),"normFile",(function(e){return Array.isArray(e)?e:e&&t.state.fileList})),(0,y.default)((0,f.default)(t),"toUpload",(function(){t.props.gupfetch(),t.setState({vsb:!0})})),(0,y.default)((0,f.default)(t),"closeMode",(function(){t.setState({vsb:!1})})),(0,y.default)((0,f.default)(t),"handleSubmit",(function(){var e=t.state.originalFileUrl,a=t.props,l=a.scopeId,n=a.urlParameter;t.props.form.validateFields((function(a,r){if(console.log(r),a)console.log(a);else{if(!r.upload)return i.default.info("请导入表格"),!1;var u={ossUrl:e,bizdId:l};t.props.importUsers(n,u,(function(e){1e3==+e.code?(i.default.success("已成功创建导入任务，任务编号".concat(e.data,"请至任务中查看完成情况")),t.closeMode()):i.default.error(e.subMsg)}))}}))})),t.state={uploadParams:{},uploadAction:{},originalFile:"",originalFileUrl:"",fileList:[],key:""},t}return(0,d.default)(l,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.uploadAction,l=t.uploadParams,n=(this.props.handleCancel,this.props.form.getFieldDecorator);return C.default.createElement("div",{key:this.state.key},C.default.createElement("a",{onClick:this.toUpload},"导入可见范围"),this.state.vsb&&C.default.createElement(r.default,{title:"导入可见范围",visible:this.state.vsb,onOk:this.closeMode,onCancel:this.closeMode,footer:null},C.default.createElement(v.default,null,C.default.createElement("div",{style:{display:"block",textAlign:"center"}},C.default.createElement(w,{extra:"请上传资源附件（附件格式：xls,xlsx）"},n("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(C.default.createElement("span",null,C.default.createElement(s.default,{style:{fontSize:"12px",marginRight:"20px",border:"1px solid #1890ff",color:"#1890ff"},href:this.props.downUrl?this.props.downUrl:"https://customproject.oss-cn-shanghai.aliyuncs.com/template/account_import_template.xlsx"},"下载用户模板"),0===this.state.fileList.length?C.default.createElement(u.default,{style:{display:"inline-block"},headers:{"X-Requested-With":null},beforeUpload:this.beforeUpload,action:a,data:l,onChange:this.handleChange,onRemove:function(){return e.setState({fileList:[]})}},C.default.createElement("a",{type:"primary"},C.default.createElement(o.default,{type:"upload"})," 导入可见范围")):C.default.createElement(u.default,{style:{display:"inline-block"},headers:{"X-Requested-With":null},beforeUpload:this.beforeUpload,action:a,data:l,onChange:this.handleChange,onRemove:function(){return e.setState({fileList:[]})}},C.default.createElement("a",{type:"primary",disabled:!0},C.default.createElement(o.default,{type:"upload"})," 导入可见范围"))))))),C.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},C.default.createElement(s.default,{type:"default",style:{marginRight:"16px"},onClick:function(){e.closeMode()}},"取消"),C.default.createElement(s.default,{type:"primary",style:{marginLeft:"32px"},onClick:this.handleSubmit},"确定"))))}}]),l}(C.Component));var I=(0,R.connect)((function(e,t){return{param:e.uploadParam.param,list:e.materialReducer.list,details:e.materialReducer.details,type:e.materialReducer.type}}),(function(e){return{gupfetch:function(){return e((0,E.gupfetch)())},importUsers:function(t,a,l){return e((0,S.importUsers)(t,a,l))}}}))(v.default.create()(k));t.default=I},1294:function(e,t,a){"use strict";var l=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(63)),r={courseManagement:{courseList:"GET ".concat(n.default.webManage,"/course/list"),courseClassifyList:"GET ".concat(n.default.webManage,"/classify/list"),batchClassifyUrl:"POST ".concat(n.default.webManage,"/course/bath/edit/classify"),batchShelvesUrl:"POST ".concat(n.default.webManage,"/course/bath/edit/shelves"),courseCheckRelationUrl:"POST ".concat(n.default.webManage,"/course/bath/edit/shelves/check"),batchStrategyUrl:"POST ".concat(n.default.webManage,"/course/bath/edit/strategy"),courseCheckStatusUrl:"POST ".concat(n.default.webManage,"/course/bath/edit/strategy/check"),courseUpUrl:"POST ".concat(n.default.webManage,"/course/up"),courseDownUrl:"POST ".concat(n.default.webManage,"/course/down"),courseDelUrl:"POST ".concat(n.default.webManage,"/course/delete"),courseExportUrl:"GET ".concat(n.default.webManage,"/course/list/export"),courseVsRangeUrl:"GET ".concat(n.default.webManage,"/course/coursrAccount/list"),courseSaveRangeUrl:"POST ".concat(n.default.webManage,"/course/coursrAccount/save"),courseDataUrl:"GET ".concat(n.default.webManage,"/document/query/ByRelationId"),coursDataDelUrl:"POST ".concat(n.default.webManage,"/documentRelation/delete"),courseDataMoveUrl:"POST ".concat(n.default.webManage,"/documentRelation/move"),queryDataUrl:"POST ".concat(n.default.webManage,"/document/query/onCondition"),dataSaveUrl:"POST ".concat(n.default.webManage,"/documentRelation/batch/save"),DataClassifyUrl:"GET ".concat(n.default.webManage,"/DocumentClassify/query"),commentListUrl:"GET ".concat(n.default.webManage,"/comment/list"),replyListUrl:"GET ".concat(n.default.webManage,"/comment/reply/list"),auditCommentUrl:"POST ".concat(n.default.webManage,"/comment/auditComment"),auditReplyUrl:"POST ".concat(n.default.webManage,"/comment/auditReply"),commentExportUrl:"GET ".concat(n.default.webManage,"/comment/list/export"),commentUpUrl:"GET ".concat(n.default.webManage,"/comment/up"),commentDownUrl:"GET ".concat(n.default.webManage,"/comment/down")}};t.default=r},1391:function(e,t,a){"use strict";var l=a(4),n=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(564);var r=n(a(563));a(61);var u=n(a(62)),o=n(a(29)),s=n(a(30)),i=n(a(32)),c=n(a(33)),d=n(a(31)),f=l(a(1)),p=a(618),m=a(52);function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,i.default)(l,e);var t,a=(t=l,function(){var e,a=(0,d.default)(t);if(h()){var l=(0,d.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function l(e){var t;return(0,o.default)(this,l),(t=a.call(this,e)).state={btnName:"导出可见范围"},t}return(0,s.default)(l,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"changeUpDown",value:function(){var e,t=this.props,a=t.urlParameter,l=t.scopeId;switch(a){case"assignment":e={assignmentId:l};break;case"exam":e={examId:l};break;case"course":e={courseId:l};break;case"research":e={researchId:l};break;case"vote":e={voteId:l};break;case"live":e={liveId:l};break;case"trainingProject":e={trainingProjectId:l};break;case"experiencePool":e={poolId:l};break;case"caseLibrary":e={caseLibraryId:l}}this.props.exportUsers(a,e,(function(e){1e3==e.code?u.default.success("导出成功：任务编号"+e.data):u.default.error("导出失败")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;this.state.btnName,this.props.urlParameter;return f.default.createElement("span",{className:"exportBtn-box"},f.default.createElement(r.default,{title:"是否导出",onConfirm:function(){return e.changeUpDown()}},f.default.createElement("a",{className:"marr20",href:"void(0)"},this.state.btnName)))}}]),l}(f.Component),g=(0,m.connect)(null,(function(e){return{exportUsers:function(t,a,l){return e((0,p.exportUsers)(t,a,l))}}}))(y);t.default=g},1392:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),a(40),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(569);var r=n(a(558));a(549);var u=n(a(544));a(140);var o=n(a(535)),s=n(a(29)),i=n(a(30)),c=n(a(59)),d=n(a(32)),f=n(a(33)),p=n(a(31)),m=n(a(2));a(764);var h=n(a(765));a(540);var y=n(a(539));a(554);var g=n(a(550));a(537);var v=n(a(536)),C=l(a(1)),E=(a(636),n(a(141)),n(a(223)),a(52)),S=a(906),R=n(a(1393));function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.default.Search,g.default.Option,y.default.Item,h.default.TreeNode;var w=function(e){(0,d.default)(l,e);var t,a=(t=l,function(){var e,a=(0,p.default)(t);if(b()){var l=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,f.default)(this,e)});function l(){var e;(0,s.default)(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,m.default)((0,c.default)(e),"autoAddEllipsis",(function(e,t){for(var a=0,l="",n="",r=0,u=e.length;a<u;a++){if((l=e.charCodeAt(a))>=1&&l<=126||65376<=l&&l<=65439?r++:r+=2,r>=t){n=e.substr(0,a)+"...";break}n+=e.charAt(a)}return n})),(0,m.default)((0,c.default)(e),"requestCourseResource",(function(t,a,l){var n=e.state.relationType;e.props.getCourseResourceById({relationId:t,relationType:n,pageNo:a,pageSize:l},(function(){var n=e.props.courseResource.records,r=e.props.courseResource.total;n.map((function(e,t){e.key=e.no})),e.setState({relationId:t,pageNo:a,pageSize:l,relationResourceList:n,total:r,deleteModalVisible:!1,deleteItemId:0})}))})),(0,m.default)((0,c.default)(e),"checkResourceType",(function(e){var t="";switch(parseInt(e)){case 1:t="文档";break;case 2:t="图片";break;case 3:t="音频";break;case 4:t="视频";break;case 5:t="其它"}return t})),(0,m.default)((0,c.default)(e),"showDeleteView",(function(t){e.setState({deleteItemId:t.documentRelationId,deleteModalVisible:!0})})),(0,m.default)((0,c.default)(e),"deleteResource",(function(){var t=e.state.deleteItemId;e.props.deleteCourseResource({id:t},(function(){e.requestCourseResource(e.state.relationId,e.state.pageNo,e.state.pageSize)}))})),(0,m.default)((0,c.default)(e),"moveResource",(function(t,a){e.props.moveCourseResource({id:t.documentRelationId,moveUp:a,relationType:e.state.relationType,relationId:e.state.relationId},(function(){e.requestCourseResource(e.state.relationId,e.state.pageNo,e.state.pageSize)}))})),(0,m.default)((0,c.default)(e),"closeCourseResView",(function(){e.setState({courseResourceVisible:!1,relationId:0,relationResourceList:[],pageNo:1,total:0})})),(0,m.default)((0,c.default)(e),"handleCRPageChange",(function(t,a){e.setState({pageNo:t}),e.requestCourseResource(e.state.relationId,t,a)})),(0,m.default)((0,c.default)(e),"handleCRPageSizeChange",(function(t,a){e.setState({pageSize:a,pageNo:1},(function(){e.requestCourseResource(e.state.relationId,e.state.pageNo,a)}))})),(0,m.default)((0,c.default)(e),"cancelDelete",(function(){e.setState({deleteModalVisible:!1})})),(0,m.default)((0,c.default)(e),"closeCourseResView",(function(){e.setState({courseResourceVisible:!1,courseRelationId:0,courseResourceList:[],courseRelationNo:1,courseResourceTotal:0})})),e.state={relationId:"",relationResourceList:[],total:0,pageNo:1,pageSize:10,deleteItemId:0,deleteModalVisible:!1},e.courseResColumns=[{title:"序号",dataIndex:"key",className:"column-key",key:"key"},{title:"资料名称",dataIndex:"name",className:"column-name",key:"name",render:function(t){return C.default.createElement("div",{className:"name-text",style:{width:"360px"}},e.autoAddEllipsis(t,108))}},{title:"资料编码",dataIndex:"codeName",className:"column-id",key:"codeName"},{title:"资料类型",dataIndex:"type",className:"column-type",key:"type",render:function(t,a){return e.checkResourceType(t)}},{title:"资料大小",dataIndex:"fileSizeName",className:"column-size",key:"fileSizeName",render:function(e){return e+""}},{title:"排序",dataIndex:"action1",className:"column-up-down",key:"action1",render:function(t,a){return C.default.createElement("div",null,C.default.createElement("div",null,C.default.createElement("a",{onClick:function(){return e.moveResource(a,!0)},disabled:1==a.key},"上移")),C.default.createElement("div",null,C.default.createElement("a",{onClick:function(){return e.moveResource(a,!1)},disabled:a.key==e.state.total},"下移")))}},{title:"操作",dataIndex:"action2",className:"column-delete",key:"action2",render:function(t,a){return C.default.createElement("div",null,C.default.createElement(R.default,{content:"确定删除该课程资料，删除后不可恢复",visible:e.state.deleteModalVisible,onOk:e.deleteResource,onCancel:function(){return e.setState({deleteModalVisible:!1})},title:"删除提醒"},C.default.createElement("a",{onClick:function(){e.showDeleteView(a)}},"删除")))}}],e}return(0,i.default)(l,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=(t.relationId,t.pageNo),l=t.pageSize;this.setState({relationId:this.props.relationId,relationType:this.props.relationType},(function(){e.requestCourseResource(e.props.relationId,a,l)}))}},{key:"render",value:function(){var e=this;return C.default.createElement("div",null,C.default.createElement("div",{className:"courseResourceModal"},C.default.createElement(o.default,{type:"primary",className:"courseResource-add",onClick:this.props.openAddResourceView},"添加资料"),C.default.createElement(u.default,{rowKey:function(e){return e.no},className:"courseResource-table",columns:this.courseResColumns,dataSource:this.state.relationResourceList,pagination:!1}),C.default.createElement(r.default,{className:"material-list-pagination",size:"small",current:this.state.pageNo,total:this.state.total,showTotal:function(){return"共计 "+e.state.total+"条"},defaultPageSize:this.state.pageSize,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","30"],onChange:this.handleCRPageChange,onShowSizeChange:this.handleCRPageSizeChange})))}}]),l}(C.Component);var k=(0,E.connect)((function(e,t){return{courseResource:e.courseManagementReducer.courseResource}}),(function(e){return{getCourseResourceById:function(t,a){return e((0,S.getCourseResourceById)(t,a))},deleteCourseResource:function(t,a){return e((0,S.deleteCourseResource)(t,a))},moveCourseResource:function(t,a){return e((0,S.moveCourseResource)(t,a))}}}))(y.default.create()(w));t.default=k},1393:function(e,t,a){"use strict";var l=a(4),n=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var r=n(a(225));a(140);var u=n(a(535));a(99);var o=n(a(100)),s=n(a(29)),i=n(a(30)),c=n(a(32)),d=n(a(33)),f=n(a(31)),p=l(a(1)),m=n(a(1394));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,c.default)(l,e);var t,a=(t=l,function(){var e,a=(0,f.default)(t);if(h()){var l=(0,f.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function l(){return(0,s.default)(this,l),a.apply(this,arguments)}return(0,i.default)(l,[{key:"render",value:function(){return p.default.createElement("span",null,this.props.children?this.props.children:null,p.default.createElement(r.default,{width:this.props.width?this.props.width:300,visible:!!this.props.visible&&this.props.visible,title:this.props.title?this.props.title:"",onCancel:this.props.onCancel,footer:null,maskStyle:{backgroundColor:"rgba(55, 55, 55, 0.2)"}},p.default.createElement("div",{className:m.default.publicModalContainer},p.default.createElement("p",{className:m.default.infoCircle},p.default.createElement(o.default,{type:"info-circle",className:m.default.flagIcon})),p.default.createElement("p",{className:m.default.infoCircle},this.props.content?this.props.content:""),p.default.createElement("div",{className:m.default.infoCircle},p.default.createElement(u.default,{style:{marginRight:"16px"},onClick:this.props.onCancel},"取消"),p.default.createElement(u.default,{type:"primary",onClick:this.props.onOk},"1确定")))))}}]),l}(p.Component);t.default=y},1394:function(e,t,a){e.exports={publicModalContainer:"publicModalContainer__2ETrM",infoCircle:"infoCircle__2YdFG",flagIcon:"flagIcon__1iGV2"}},1395:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),a(40),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(569);var r=n(a(558));a(549);var u=n(a(544));a(140);var o=n(a(535)),s=n(a(29)),i=n(a(30)),c=n(a(59)),d=n(a(32)),f=n(a(33)),p=n(a(31)),m=n(a(2));a(764);var h=n(a(765));a(540);var y=n(a(539));a(554);var g=n(a(550));a(537);var v=n(a(536)),C=l(a(1)),E=(a(636),n(a(141)),n(a(223)),n(a(1396))),S=a(52),R=a(906);function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.default.Search;var w=g.default.Option,k=(y.default.Item,h.default.TreeNode,function(e){(0,d.default)(l,e);var t,a=(t=l,function(){var e,a=(0,p.default)(t);if(b()){var l=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,f.default)(this,e)});function l(){var e;(0,s.default)(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,m.default)((0,c.default)(e),"autoAddEllipsis",(function(e,t){for(var a=0,l="",n="",r=0,u=e.length;a<u;a++){if((l=e.charCodeAt(a))>=1&&l<=126||65376<=l&&l<=65439?/^[A-Z]+$/.test(e.charAt(a))?r+=2:r++:r+=2,r>=t){n=e.substr(0,a)+"...";break}n+=e.charAt(a)}return n})),(0,m.default)((0,c.default)(e),"dateFormat",(function(t){var a=new Date;return a.setTime(t),a.getFullYear()+"-"+e.getMonth(a)+"-"+e.getDay(a)+"   "+e.getHours(a)+":"+e.getMinutes(a)+":"+e.getSeconds(a)})),(0,m.default)((0,c.default)(e),"getMonth",(function(e){var t="";return(t=e.getMonth()+1)<10&&(t="0"+t),t})),(0,m.default)((0,c.default)(e),"getDay",(function(e){var t="";return(t=e.getDate())<10&&(t="0"+t),t})),(0,m.default)((0,c.default)(e),"getHours",(function(e){var t="";return(t=e.getHours())<10&&(t="0"+t),t})),(0,m.default)((0,c.default)(e),"getMinutes",(function(e){var t="";return(t=e.getMinutes())<10&&(t="0"+t),t})),(0,m.default)((0,c.default)(e),"getSeconds",(function(e){var t="";return(t=e.getSeconds())<10&&(t="0"+t),t})),(0,m.default)((0,c.default)(e),"checkResourceType",(function(e){var t="";switch(parseInt(e)){case 1:t="文档";break;case 2:t="图片";break;case 3:t="音频";break;case 4:t="视频";break;case 5:t="其它"}return t})),(0,m.default)((0,c.default)(e),"reqestResourceByRelation",(function(t){var a=e.state,l=a.courseRelationId,n=a.resourceViewSize,r=a.selectObj,u=a.relationType,o={classifyId:r.classId,enableFilter:!0,name:r.id,pageNo:t,pageSize:n,relationId:l,relationType:u,type:r.type};e.props.getResourceByRelationId(o,(function(){var t=e.props.resourceByRelation.records;t.map((function(e,t){e.key=e.no}));var a=e.props.resourceByRelation.total;e.setState({resourceViewList:t,resourceViewVisible:!0,courseResourceVisible:!1,resourceViewTotal:a})})),e.props.getResourceClassify(!0,(function(){var t=e.state.resourceClassify;t=e.checkTreeSelectData(e.props.resourceClassify),e.setState({resourceClassList:t})}))})),(0,m.default)((0,c.default)(e),"checkTreeSelectData",(function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.title=a.classifyVo.codeName,a.value=a.classifyVo.id,a.key=a.classifyVo.id,a.children&&a.children.length>0)for(var l=0;l<a.children.length;l++){var n=a.children[l];if(n.title=n.classifyVo.codeName,n.value=n.classifyVo.id,n.key=n.classifyVo.id,n.children&&n.children.length>0)for(var r=0;r<n.children.length;r++){var u=n.children[r];u.title=u.classifyVo.codeName,u.value=u.classifyVo.id,u.key=u.classifyVo.id}}}return console.log("list:___"+JSON.stringify(e)),e})),(0,m.default)((0,c.default)(e),"onNameChange",(function(t){console.log(t.currentTarget.value);var a=e.state.selectObj;a.id=t.currentTarget.value,e.setState({selectObj:a})})),(0,m.default)((0,c.default)(e),"onTypeChange",(function(t){console.log(t);var a=e.state.selectObj;a.type=t,e.setState({selectObj:a})})),(0,m.default)((0,c.default)(e),"onClassChange",(function(t){t||(t=null),console.log(t);var a=e.state.selectObj;a.classId=t,e.setState({selectObj:a})})),(0,m.default)((0,c.default)(e),"handleSearchSubmit",(function(t){t.preventDefault(),e.setState({resourceViewNo:1},(function(){e.reqestResourceByRelation(e.state.resourceViewNo)}))})),(0,m.default)((0,c.default)(e),"addResource",(function(){e.setState({addLoading:!0});var t=e.state,a=t.selectedResourceKeys,l=t.courseRelationId,n=t.relationType;e.props.addResourceByRelation({documentIds:a,relationType:n,relationId:l},(function(){var t=e.state.selectObj;t.classId=null,t.type=null,t.name=null,e.setState({selectedResourceKeys:[],selectObj:t,resourceViewList:[],addLoading:!1,courseResourceNo:1,resourceViewNo:1},(function(){e.props.openResource(e.state.courseRelationId)}))}))})),(0,m.default)((0,c.default)(e),"onSelectChange",(function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedResourceKeys:t})})),(0,m.default)((0,c.default)(e),"handleRVPageChange",(function(t,a){e.setState({resourceViewNo:t}),e.reqestResourceByRelation(t)})),(0,m.default)((0,c.default)(e),"closeResourceView",(function(){e.setState({courseRelationId:0,resourceClassList:[],resourceViewList:[],resourceViewNo:1,resourceViewTotal:0})})),e.state={courseRelationId:"",relationType:0,resourceViewVisible:!1,resourceViewList:[],resourceViewTotal:0,resourceViewNo:1,resourceViewSize:10,resourceClassList:[],selectObj:{id:null,type:null,classId:null},selectedResourceKeys:[],addLoading:!1},e.resourceColumns=[{title:"资料编码",dataIndex:"codeName",className:"column-index",key:"codeName"},{title:"资料名称",dataIndex:"name",className:"column-name",key:"name",render:function(t){return C.default.createElement("div",null,e.autoAddEllipsis(t,60))}},{title:"资料类型",dataIndex:"type",className:"column-type",key:"type",render:function(t,a){return e.checkResourceType(t)}},{title:"资料大小",dataIndex:"fileSizeName",className:"column-size",key:"fileSizeName",render:function(e){return e+""}},{title:"上传/更新时间",dataIndex:"updateTime",className:"column-up-down",key:"updateTime",render:function(t){return e.dateFormat(t)}}],e}return(0,i.default)(l,[{key:"componentDidMount",value:function(){var e=this;console.log("relationID:"+this.props.courseRelationId),this.setState({courseRelationId:this.props.courseRelationId,relationType:this.props.relationType},(function(){e.reqestResourceByRelation(e.state.resourceViewNo)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedResourceKeys,l=t.addLoading,n={selectedResourceKeys:a,onChange:this.onSelectChange},s=a.length>0;return C.default.createElement("div",{className:E.default.data_source_modal},C.default.createElement("div",{className:E.default.head_search},C.default.createElement("label",null,C.default.createElement("span",{className:E.default.item_pre},"资料名称/编码"),C.default.createElement(v.default,{type:"text",style:{width:200},className:"resourceId",placeholder:"请输入资料名称或编码",onChange:this.onNameChange})),C.default.createElement("label",null,C.default.createElement("span",{className:E.default.item_pre},"资料类型"),C.default.createElement(g.default,{defaultValue:"null",style:{width:100},onChange:this.onTypeChange},C.default.createElement(w,{value:"null"},"全部"),C.default.createElement(w,{value:"1"},"文档"),C.default.createElement(w,{value:"2"},"图片"),C.default.createElement(w,{value:"3"},"音频"),C.default.createElement(w,{value:"4"},"视频"),C.default.createElement(w,{value:"5"},"其它"))),C.default.createElement("label",null,C.default.createElement("span",{className:E.default.item_pre},"资源分类名称"),C.default.createElement(h.default,{showSearch:!0,style:{width:122,height:33},value:this.state.selectObj.classId,dropdownStyle:{maxHeight:200,overflow:"auto"},placeholder:"全部",allowClear:!0,treeDefaultExpandAll:!0,onChange:this.onClassChange,treeData:this.state.resourceClassList})),C.default.createElement("span",null,C.default.createElement(o.default,{onClick:this.handleSearchSubmit,type:"primary",className:"resourceView-search"},"查询"))),C.default.createElement(o.default,{type:"primary",className:E.default.my_button,onClick:this.addResource,disabled:!s,loading:l},"添加"),C.default.createElement(u.default,{rowKey:function(e){return e.id},rowSelection:n,columns:this.resourceColumns,dataSource:this.state.resourceViewList,pagination:!1}),C.default.createElement(r.default,{className:E.default.my_pagination,size:"small",total:this.state.resourceViewTotal,current:this.state.resourceViewNo,showTotal:function(){return"共计 "+e.state.resourceViewTotal+"条"},defaultPageSize:this.state.resourceViewSize,showQuickJumper:!0,onChange:this.handleRVPageChange}))}}]),l}(C.Component));var I=(0,S.connect)((function(e,t){return{resourceClassify:e.courseManagementReducer.resourceClassify,resourceByRelation:e.courseManagementReducer.resourceByRelation}}),(function(e){return{getResourceClassify:function(t,a){return e((0,R.getResourceClassify)(t,a))},getResourceByRelationId:function(t,a){return e((0,R.getResourceByRelationId)(t,a))},addResourceByRelation:function(t,a){return e((0,R.addResourceByRelation)(t,a))}}}))(y.default.create()(k));t.default=I},1396:function(e,t,a){e.exports={data_source_modal:"data_source_modal__Vl7wu",head_search:"head_search__hW2Wi",item_pre:"item_pre__2f7AY",my_button:"my_button__CGy99",my_pagination:"my_pagination__1HB6L"}},1644:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),a(3),a(68),a(103),a(227),a(40),a(51),a(20),a(34),a(23),a(905),a(71),a(148),a(228),a(151),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(540);var r=n(a(539));a(224);var u=n(a(225));a(549);var o=n(a(544));a(140);var s=n(a(535));a(764);var i=n(a(765));a(537);var c=n(a(536)),d=n(a(81));a(564);var f=n(a(563));a(61);var p=n(a(62)),m=n(a(29)),h=n(a(30)),y=n(a(59)),g=n(a(32)),v=n(a(33)),C=n(a(31)),E=n(a(2));a(554);var S=n(a(550)),R=l(a(1)),b=n(a(226)),w=a(65),k=n(a(141)),I=n(a(223)),x=n(a(1645)),L=a(52),T=n(a(624)),V=n(a(1391)),N=n(a(1023)),P=n(a(1392)),D=n(a(1395)),U=n(a(1646)),O=a(906);function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=S.default.Option,F=function(e){(0,g.default)(l,e);var t,a=(t=l,function(){var e,a=(0,C.default)(t);if(_()){var l=(0,C.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,v.default)(this,e)});function l(e){var t;return(0,m.default)(this,l),t=a.call(this,e),(0,E.default)((0,y.default)(t),"reGetCourseList",(function(){var e=(0,y.default)(t),a=t.state,l=a.keyword,n=void 0===l?"":l,r=a.pageNo,u=a.pageSize,o=a.classifyId,s=a.courseStatus,i={name:n,courseType:a.courseType,classifyId:o,shelves:s,pageNo:r,pageSize:u,type:1};t.props.getCourseList(i,(function(){var t=e.props.courseList,a=void 0===t?{}:t;e.setState({courseListRecords:a.records||[],courseListTotal:a.total||0})}))})),(0,E.default)((0,y.default)(t),"keywordChange",(function(e){t.setState({keyword:e.target.value.trim()})})),(0,E.default)((0,y.default)(t),"courseTypeChange",(function(e,a){t.setState({courseType:e})})),(0,E.default)((0,y.default)(t),"courseStatusChange",(function(e,a){t.setState({courseStatus:e})})),(0,E.default)((0,y.default)(t),"courseClassifyChange",(function(e,a,l){t.setState({classifyId:e})})),(0,E.default)((0,y.default)(t),"pageChange",(function(e,a){t.setState({pageNo:e,pageSize:a},(function(){t.reGetCourseList()}))})),(0,E.default)((0,y.default)(t),"exportCourseListFun",(function(){var e=t.state,a=e.keyword,l=void 0===a?"":a,n=e.classifyId,r=e.courseStatus,u={name:l,courseType:e.courseType,classifyId:n,shelves:r};t.props.exportCourseList(u,(function(e){1e3==e.code?p.default.success(e.data):p.default.error(e.subMsg)}))})),(0,E.default)((0,y.default)(t),"closeCourseViewRange",(function(){t.setState({courseViewVisible:!1})})),(0,E.default)((0,y.default)(t),"saveCourseViewRange",(function(){var e,a=t.state.courseViewData;e=a.length&&a.map((function(e){return{courseId:t.state.courseId,relationId:e.id,type:e.type,name:e.name}})),t.props.setCourseViewRange(e,(function(){t.closeCourseViewRange()}))})),(0,E.default)((0,y.default)(t),"setCourseViewRange",(function(e){t.props.getCourseRange(e.id,(function(){t.setState({courseViewData:t.props.courseRange.map((function(e){return{id:e.relationId,name:e.name,type:e.type,fullName:e.fullName,workNum:e.workNum}})),courseViewVisible:!0,courseId:e.id,randomNum:(new Date).getTime()})}))})),(0,E.default)((0,y.default)(t),"getViewData",(function(e){t.setState({courseViewData:e})})),(0,E.default)((0,y.default)(t),"closeCourseResView",(function(){t.setState({courseResourceVisible:!1})})),(0,E.default)((0,y.default)(t),"closeResourceView",(function(){t.setState({resourceViewVisible:!1})})),(0,E.default)((0,y.default)(t),"openAddResourceView",(function(){t.setState({courseResourceVisible:!1,resourceViewVisible:!0})})),(0,E.default)((0,y.default)(t),"clickBatch",(function(){!t.state.checkArrForBatch.length>0?p.default.warn("请先选择课程"):t.setState({batchVisible:!0})})),(0,E.default)((0,y.default)(t),"closeBatch",(function(){t.setState({batchVisible:!1,selectedRowKeys:[],checkArr:[],checkArrForBatch:[]}),t.reGetCourseList()})),t.state={value:"",filteredInfo:{},selectedRowKeys:[],checkArr:[],checkArrForBatch:[],createCourseVisible:!1,pageNo:1,pageSize:20,randomNum:"",courseViewVisible:!1,courseViewData:[],courseRelationId:"",relationType:1,courseResourceVisible:!1,resourceViewVisible:!1,batchVisible:!1,courseListRecords:[],courseListTotal:0,keyword:"",courseType:"",courseStatus:""},t.handleSearch=t.handleSearch.bind((0,y.default)(t)),t.createCourse=t.createCourse.bind((0,y.default)(t)),t.closeCreateCourse=t.closeCreateCourse.bind((0,y.default)(t)),t.handleDeleteRows=t.handleDeleteRows.bind((0,y.default)(t)),t.openResource=t.openResource.bind((0,y.default)(t)),t.columns=[{title:"课程编码",dataIndex:"code",ellipsis:!0,maxWith:100},{title:"课程名称",dataIndex:"name",ellipsis:!0,maxWith:300,render:function(e){return R.default.createElement("span",{title:e},e)}},{title:"课程类型",dataIndex:"courseType",width:100,render:function(e){return R.default.createElement("span",{style:{width:80,display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"pointer"}},e?"Scorm课程":"一般课程")}},{title:"课程状态",dataIndex:"shelves",render:function(e,t){return R.default.createElement("span",null,0===t.shelves&&R.default.createElement("span",null,"已下架"),1===t.shelves&&R.default.createElement("span",null,"已上架"),2===t.shelves&&R.default.createElement("span",null,"草稿"))}},{title:"是否过期",dataIndex:"valid",render:function(e,t){return R.default.createElement("span",null,0===t.valid&&R.default.createElement("span",null,"已过期"),1===t.valid&&R.default.createElement("span",null,"未过期"))}},{title:"创建时间",dataIndex:"createTime",render:function(e,t){return R.default.createElement("span",null,(0,I.default)(t.createTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",dataIndex:"action",width:140,render:function(e,a){return R.default.createElement("span",null,R.default.createElement("div",null,1===a.shelves&&R.default.createElement(w.Link,{to:{pathname:"/"+k.default.companyCode+"/"+k.default.siteCode+"/index/online/management/course-management/look/".concat(a.id)}},"查看"),1!==a.shelves&&R.default.createElement(w.Link,{to:{pathname:"/"+k.default.companyCode+"/"+k.default.siteCode+"/index/online/management/course-management/edit/".concat(a.id,"/").concat(a.source,"/").concat(a.valid)}},"修改"),"  ",1===a.shelves&&R.default.createElement(f.default,{title:"确定执行此操作？",onConfirm:function(){return t.handleDown(a.id)}},R.default.createElement("a",null,"下架")),1!==a.shelves&&R.default.createElement(f.default,{title:"确定执行此操作？",onConfirm:function(){return t.handleUp(a)}},R.default.createElement("a",null,"上架")),"  ",R.default.createElement("a",{onClick:function(){return t.openResource(a.id)}},"资料"),"  "),R.default.createElement(w.Link,{to:{pathname:"/".concat(k.default.companyCode,"/").concat(k.default.siteCode,"/index/online/management/comment/").concat(a.id,"/").concat(a.name)}},"评论管理"),"  ",R.default.createElement("br",null),2==+a.scope?R.default.createElement("a",{onClick:function(){return t.setCourseViewRange(a)}},"指定用户"):null,2===a.scope?R.default.createElement("span",null,R.default.createElement(N.default,{urlParameter:"course",scopeId:a&&a.id}),R.default.createElement(V.default,{urlParameter:"course",scopeId:a&&a.id})):null)}}],t}return(0,h.default)(l,[{key:"componentDidMount",value:function(){this.reGetCourseList(),this.props.getClassifyList({pageNo:1,pageSize:1e4,isStartHQ:!1})}},{key:"handleSearch",value:function(){this.reGetCourseList()}},{key:"handleUp",value:function(e){var t=this;return 0===e.valid?(p.default.error("该课程已过期，不能上架"),!1):e.classifyId?void this.props.up({id:e.id},(function(e){t.reGetCourseList()})):(p.default.error("该课程未添加分类，不能上架"),!1)}},{key:"handleDown",value:function(e){var t=this;this.props.down({id:e},(function(e){t.reGetCourseList()}))}},{key:"handleDeleteRows",value:function(){for(var e=this,t=this.state.checkArr,a=[],l=0;l<t.length;l++)a.push(t[l].id);!t.length>0?p.default.warn("请选择要删除的课程"):this.props.delete({ids:a.join(",")},(function(t){e.reGetCourseList(),"1000"===t.code?p.default.success("删除成功"):p.default.error(t.subMsg),e.setState({selectedRowKeys:[]})}))}},{key:"createCourse",value:function(){this.setState({createCourseVisible:!0})}},{key:"closeCreateCourse",value:function(){this.setState({createCourseVisible:!1})}},{key:"openResource",value:function(e){this.setState({courseRelationId:e,courseResourceVisible:!0,resourceViewVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.courseList,t.courseClassifyList),l=void 0===a?[]:a,n=this.state,r=n.selectedRowKeys;n.pageNo;l[0]&&"全部"!==l[0].title&&l.unshift({title:"全部",value:"全部",id:"0"}),console.log("this.state==cl",this.state),console.log("this.props==cl",this.props);var p={selectedRowKeys:r,onChange:function(t,a){var l=(0,d.default)(new Set([].concat((0,d.default)(e.state.checkArrForBatch),(0,d.default)(a)))).filter((function(e){return t.includes(e.id)}));e.setState({selectedRowKeys:t,checkArr:a,checkArrForBatch:l})},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}};return R.default.createElement("div",{className:x.default.course_management_content},R.default.createElement(b.default,{title:"课程管理"}),R.default.createElement("div",{className:x.default.search_box},R.default.createElement("label",{className:x.default.search_item},R.default.createElement("span",null,"关键字（词）："),R.default.createElement(c.default,{placeholder:"请输入课程名称、课程编码、自定义关键词",onChange:this.keywordChange,value:this.state.keyword,style:{width:"calc(100% - 98px)",minWidth:80,fontSize:12}})),R.default.createElement("label",{className:x.default.search_item},R.default.createElement("span",null,"课程类型："),R.default.createElement(S.default,{style:{fontSize:12,width:"calc(100% - 70px)"},onChange:this.courseTypeChange,value:this.state.courseType,dropdownMatchSelectWidth:!1},R.default.createElement(M,{value:""},"所有"),R.default.createElement(M,{value:0},"一般课程"),R.default.createElement(M,{value:1},"Scorm课程"))),R.default.createElement("label",{className:x.default.search_item},R.default.createElement("span",null,"课程分类："),R.default.createElement(i.default,{style:{width:"calc(100% - 70px)",minWidth:130,fontSize:12},dropdownStyle:{width:200},treeData:l,placeholder:"请选择课程分类",onChange:this.courseClassifyChange,className:"classify_treeSelect",getPopupContainer:function(){return document.querySelector(".classify_treeSelect")}})),R.default.createElement("label",{className:x.default.search_item},R.default.createElement("span",null,"课程状态："),R.default.createElement(S.default,{style:{width:74,fontSize:12},onChange:this.courseStatusChange,value:this.state.courseStatus},R.default.createElement(M,{value:""},"全部"),R.default.createElement(M,{value:2},"草稿"),R.default.createElement(M,{value:1},"已上架"),R.default.createElement(M,{value:0},"已下架"))),R.default.createElement("span",{className:x.default.search_item},R.default.createElement(s.default,{type:"primary",onClick:this.handleSearch},"查询"))),R.default.createElement("div",{className:x.default.head_btns},R.default.createElement(w.Link,{to:"/"+k.default.companyCode+"/"+k.default.siteCode+"/index/online/management/course-management/create"},R.default.createElement(s.default,{type:"primary",className:"material-btn"},"创建课程")),R.default.createElement(s.default,{className:x.default.ant_btn,type:"primary",onClick:this.handleDeleteRows},"删除"),R.default.createElement(s.default,{type:"primary",onClick:this.clickBatch},"批量处理"),R.default.createElement(f.default,{title:"确定导出课程清单？",onConfirm:this.exportCourseListFun},R.default.createElement(s.default,{type:"primary",style:{float:"right"}},"导出课程清单"))),R.default.createElement("div",{className:"course-list"},R.default.createElement(o.default,(0,E.default)({rowSelection:p,columns:this.columns,dataSource:this.state.courseListRecords||[],pagination:!1,rowKey:function(e){return e.id}},"pagination",{total:this.state.courseListTotal,showTotal:function(){return"共计 "+e.state.courseListTotal+"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:this.state.pageNo,onChange:this.pageChange,onShowSizeChange:this.pageChange,showQuickJumper:!0,size:"small"}))),R.default.createElement(u.default,{width:940,height:550,destroyOnClose:!0,className:"courseResourceModal",visible:this.state.courseResourceVisible,footer:null,onCancel:this.closeCourseResView},R.default.createElement("div",{className:"courseResource-title"},"课程资料管理"),R.default.createElement(P.default,{relationId:this.state.courseRelationId,relationType:this.state.relationType,openAddResourceView:this.openAddResourceView})),R.default.createElement(u.default,{width:940,height:650,visible:this.state.resourceViewVisible,footer:null,onCancel:this.closeResourceView,destroyOnClose:!0},R.default.createElement(D.default,{courseRelationId:this.state.courseRelationId,relationType:this.state.relationType,openResource:this.openResource})),R.default.createElement(u.default,{onOk:this.saveCourseViewRange,onCancel:this.closeCourseViewRange,width:1160,visible:this.state.courseViewVisible},R.default.createElement(T.default,{types:"course",groupTypes:"course",key:this.state.randomNum,initData:this.state.courseViewData,getData:this.getViewData,invisible:!1})),R.default.createElement(u.default,{width:940,destroyOnClose:!0,className:"batchModal",visible:this.state.batchVisible,footer:null,onCancel:this.closeBatch},R.default.createElement("div",{className:"batchModal-title",style:{fontSize:"22px"}},"批量处理"),R.default.createElement(U.default,{data:this.state.checkArrForBatch,closeBatch:this.closeBatch})))}}]),l}(R.Component);var A=(0,L.connect)((function(e,t){return{courseList:e.courseManagementReducer.courseList,courseClassifyList:e.courseManagementReducer.courseClassifyList,courseRange:e.courseManagementReducer.courseRange}}),(function(e){return{getCourseList:function(t,a){return e((0,O.getCourseList)(t,a))},getClassifyList:function(t){return e((0,O.getClassifyList)(t))},up:function(t,a){return e((0,O.upCourse)(t,a))},down:function(t,a){return e((0,O.downCourse)(t,a))},delete:function(t,a){return e((0,O.deleteCourse)(t,a))},exportCourseList:function(t,a){return e((0,O.exportCourseList)(t,a))},getCourseRange:function(t,a){return e((0,O.getCourseRange)(t,a))},setCourseViewRange:function(t,a){return e((0,O.setCourseViewRange)(t,a))}}}))((0,w.withRouter)(r.default.create()(F)));t.default=A},1645:function(e,t,a){e.exports={course_management_content:"course_management_content__2Ty0W",search_box:"search_box__1j9eU",search_item:"search_item__2-fEw",head_btns:"head_btns__1R4Xo",ant_btn:"ant_btn__1foh0"}},1646:function(e,t,a){"use strict";var l=a(4),n=a(0);a(40),a(107),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var r=n(a(535)),u=n(a(98));a(807);var o=n(a(808));a(549);var s=n(a(544));a(224);var i=n(a(225));a(61);var c=n(a(62)),d=n(a(29)),f=n(a(30)),p=n(a(59)),m=n(a(32)),h=n(a(33)),y=n(a(31)),g=n(a(2));a(556);var v=n(a(553));a(554);var C=n(a(550));a(540);var E=n(a(539));a(575);var S=n(a(568)),R=l(a(1)),b=a(52),w=a(906),k=n(a(624));function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=S.default.TabPane,L=E.default.Item,T=(C.default.Option,v.default.Group);var V=function(e){(0,m.default)(l,e);var t,a=(t=l,function(){var e,a=(0,y.default)(t);if(I()){var l=(0,y.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function l(e){var t;return(0,d.default)(this,l),t=a.call(this,e),(0,g.default)((0,p.default)(t),"switchTab",(function(e){console.log(e),t.setState({tabKey:e,viewRangeInfo:[],courseViewData:[]})})),(0,g.default)((0,p.default)(t),"closeBatch",(function(){t.props.closeBatch(),t.setState({total:0,data:[],dataIdList:[]})})),(0,g.default)((0,p.default)(t),"changeClassfy",(function(){var e=t.state.dataIdList;t.props.form.validateFields((function(a,l){if(!a&&(console.log("Received values of form: ",l),l.classify)){var n={editFields:{classifyId:l.classify[l.classify.length-1]},editObject:e};console.log("param==",n),t.props.batchClassify(n,(function(){c.default.success("批量分类成功"),t.closeBatch()}))}}))})),(0,g.default)((0,p.default)(t),"changeStatus",(function(){var e=t.state.dataIdList,a=(0,p.default)(t);t.props.form.validateFields((function(l,n){if(!l&&(console.log("Received values of form: ",n),1==n.shelves||0==n.shelves)){var r={editFields:{shelves:n.shelves},editObject:e};console.log("shelvesParam==",r),t.setState({shelvesParam:r}),r&&t.props.courseCheckRelation(r,(function(){console.log("检查关联ok"),console.log("this.props==",t.props);var e=[];if(a.props.courseRelationCode.length>0){for(var l=0;l<a.props.courseRelationCode.length;l++)e.push(a.props.courseRelationCode[l].code);a.setState({courseRelationCode:e,courseRelationVisible:!0,shelvesCheck:n.shelves}),console.log("codeList===",e)}else a.handleShelve(r)}))}}))})),(0,g.default)((0,p.default)(t),"handleShelve",(function(e){var a=e||t.state.shelvesParam;a&&t.props.batchShelves(a,(function(){console.log("上下架ok"),1==a.editFields.shelves?c.default.success("批量上架成功"):c.default.success("批量下架成功"),t.closeBatch()}))})),(0,g.default)((0,p.default)(t),"doContinue",(function(){t.setState({courseRelationVisible:!1}),t.handleShelve()})),(0,g.default)((0,p.default)(t),"handleCancel",(function(){t.setState({courseRelationVisible:!1,courseStatusVisible:!1})})),(0,g.default)((0,p.default)(t),"closeCourseViewRange",(function(){t.setState({courseViewVisible:!1})})),(0,g.default)((0,p.default)(t),"selectVisibleRange",(function(e){t.setState({visibleRange:e.target.value})})),(0,g.default)((0,p.default)(t),"selectVisibleRange1",(function(e){t.setState({visibleRange1:e.target.value})})),(0,g.default)((0,p.default)(t),"getViewData",(function(e){t.setState({courseViewData:e}),console.log("courseViewList=data=",e)})),(0,g.default)((0,p.default)(t),"saveCourseViewRange",(function(){var e=t.state.courseViewData.map((function(e){return{relationId:e.id,type:e.type,name:e.name,fullName:e.fullName,workNum:e.workNum}}));t.setState({courseViewVisible:!1,viewRangeInfo:e}),console.log("CourseViewRangeInfo==",e)})),(0,g.default)((0,p.default)(t),"setCourseViewRange",(function(){t.setState({courseViewVisible:!0,randomNum:(new Date).getTime()})})),(0,g.default)((0,p.default)(t),"handleSetScope",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList,l=e.viewRangeInfo;t.props.form.validateFields((function(e,n){if(!e)if(console.log("Received values of form: ",n),1==n.setScope){var r={editFields:{scope:n.setScope},editObject:a,courseType:0};t.setState({strategyParam:r}),t.courseCheckStatus(r)}else if(2==n.setScope){var u={courseAccounts:l,editFields:{scope:n.setScope},editObject:a,courseType:0};t.setState({strategyParam:u}),t.courseCheckStatus(u)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetScope1",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList,l=e.viewRangeInfo;t.props.form.validateFields((function(e,n){if(!e)if(console.log("Received values of form: ",n),1==n.setScope1){var r={editFields:{scope:n.setScope1},editObject:a,courseType:1};t.setState({strategyParam:r}),t.courseCheckStatus(r)}else if(2==n.setScope1){var u={courseAccounts:l,editFields:{scope:n.setScope1},editObject:a,courseType:1};t.setState({strategyParam:u}),t.courseCheckStatus(u)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetComment",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),0==l.setComment||1==l.setComment){var n={editFields:{commentEnable:l.setComment},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetComment1",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),0==l.setComment1||1==l.setComment1){var n={editFields:{commentEnable:l.setComment1},editObject:a,courseType:1};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetGrade",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.setGrade||0==l.setGrade){var n={editFields:{gradeEnable:l.setGrade},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetGrade1",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.setGrade1||0==l.setGrade1){var n={editFields:{gradeEnable:l.setGrade1},editObject:a,courseType:1};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetPlay",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.setPlay||0==l.setPlay){var n={editFields:{fastForwardEnable:l.setPlay},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetJumpPlay",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.setJumpPlay||0==l.setJumpPlay){var n={editFields:{jumpEnable:l.setJumpPlay},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetPlaylayModel",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.setPlaylayModel||0==l.setPlaylayModel){var n={editFields:{videoPlayModel:l.setPlaylayModel},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetChapterPlay",(function(){(0,p.default)(t);var e=t.state.dataIdList;t.props.form.validateFields((function(a,l){if(!a)if(console.log("Received values of form: ",l),1==l.setChapterPlay||0==l.setChapterPlay){var n={editFields:{autoEnable:l.setChapterPlay},editObject:e,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetAudioRule",(function(){(0,p.default)(t);var e=t.state.dataIdList;t.props.form.validateFields((function(a,l){if(!a)if(console.log("Received values of form: ",l),1==l.audioRule||0==l.audioRule){var n={editFields:{audioComplete:l.audioRule},editObject:e,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetVideoRule",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.videoRule||0==l.videoRule){var n={editFields:{videoComplete:l.videoRule},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetTextRule",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.textRule||0==l.textRule){var n={editFields:{docComplete:l.textRule},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetMediaRule",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.videoRule||0==l.mediaRule){var n={editFields:{richComplete:l.mediaRule},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetPortRule",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.portRule||2==l.portRule||3==l.portRule){var n={editFields:{portRule:l.portRule},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetDurationGrant",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.durationGrant||0==l.durationGrant){var n={editFields:{totalDurationGrant:l.durationGrant},editObject:a,courseType:0};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"handleSetDurationGrant1",(function(){(0,p.default)(t);var e=t.state,a=e.dataIdList;e.viewRangeInfo;t.props.form.validateFields((function(e,l){if(!e)if(console.log("Received values of form: ",l),1==l.durationGrant1||0==l.durationGrant1){var n={editFields:{totalDurationGrant:l.durationGrant1},editObject:a,courseType:1};t.setState({strategyParam:n}),t.courseCheckStatus(n)}else c.default.warn("参数不能为空")}))})),(0,g.default)((0,p.default)(t),"courseCheckStatus",(function(e){var a=(0,p.default)(t);console.log("Param==",e),t.props.courseCheckStatus(e,(function(){if(console.log("Check ok"),a.props.courseStatusCode.length>0){for(var e=[],t=0;t<a.props.courseStatusCode.length;t++)e.push(a.props.courseStatusCode[t].code);a.setState({courseStatusCode:e,courseStatusVisible:!0})}else a.doContinue2()}))})),(0,g.default)((0,p.default)(t),"doContinue2",(function(){(0,p.default)(t);var e=t.state.strategyParam;console.log("strategyParam==",e),e&&t.props.batchStrategy(e,(function(){console.log("修改ok"),c.default.success("修改成功")})),t.setState({courseStatusVisible:!1})})),t.state={data:[],classify:[],dataIdList:[],currentPageData:[],total:1,pageNo:1,pageSize:10,tabKey:1,visibleRange:"",visibleRange1:"",randomNum:(new Date).getTime(),courseViewVisible:!1,courseRelationVisible:!1,courseRelationCode:[],shelvesParam:null,courseViewData:[],viewRangeInfo:[],courseStatusCode:[],courseStatusVisible:!1,strategyParam:null,shelvesCheck:""},t.courseResColumns1=[{title:"课程编码",dataIndex:"code",key:"code"},{title:"课程名称",dataIndex:"name",key:"name"},{title:"课程分类",dataIndex:"classifyName",key:"classifyName"}],t.courseResColumns2=[{title:"课程编码",dataIndex:"code",key:"code"},{title:"课程名称",dataIndex:"name",key:"name"},{title:"课程状态",dataIndex:"shelves",key:"shelves",render:function(e,t){return R.default.createElement("span",null,1===t.shelves&&R.default.createElement("span",null,"已上架"),0===t.shelves&&R.default.createElement("span",null,"已下架"),2===t.shelves&&R.default.createElement("span",null,"草稿"))}}],t.courseResColumns3=[{title:"课程编码",dataIndex:"code",key:"code"},{title:"课程名称",dataIndex:"name",key:"name"},{title:"课程类型",dataIndex:"courseType",key:"courseType",render:function(e,t){return R.default.createElement("span",null,1===t.courseType&&R.default.createElement("span",null,"Scorm课程"),0===t.courseType&&R.default.createElement("span",null,"一般课程"))}}],t}return(0,f.default)(l,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this,a=this.props.data;console.log("data==",a),console.log("this.props==",this.props);var l=[];if(a)for(var n=0;n<a.length;n++)l.push(a[n].id);this.setState({total:a.length,data:a,dataIdList:l}),console.log("data.length==",a.length),this.props.getClassifyList({pageNo:1,pageSize:1e4},(function(){for(var a=t.props.classify,l=0;l<a.length;l++)"全部"==a[l].value&&a.splice(l,1);e.setState({classify:a})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,l=t.tabKey,n=t.shelvesCheck,c={labelCol:{span:4},wrapperCol:{span:16}},d={wrapperCol:{span:16,offset:4}},f=this.props.form,p=f.getFieldDecorator;f.setFieldsValue;return R.default.createElement("div",null,R.default.createElement(i.default,{onOk:this.saveCourseViewRange,onCancel:this.closeCourseViewRange,width:1160,visible:this.state.courseViewVisible},R.default.createElement(k.default,{types:"course",groupTypes:"course",key:this.state.randomNum,initData:this.state.courseViewData,getData:this.getViewData,invisible:!1})),R.default.createElement(S.default,{defaultActiveKey:"1",onChange:this.switchTab},R.default.createElement(x,{tab:"批量调整分类",key:"1"},R.default.createElement(s.default,{className:"pagination",rowKey:function(e){return e.id},columns:this.courseResColumns1,dataSource:a,pagination:{total:this.state.total,showTotal:function(){return"共计 "+e.state.total+"条"},size:"small",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}})),R.default.createElement(x,{tab:"批量上/下架",key:"2"},R.default.createElement(s.default,{className:"pagination",rowKey:function(e){return e.id},columns:this.courseResColumns2,dataSource:a,pagination:{total:this.state.total,showTotal:function(){return"共计 "+e.state.total+"条"},size:"small",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}})),R.default.createElement(x,{tab:"批量调整课程策略",key:"3"},R.default.createElement(s.default,{className:"pagination",rowKey:function(e){return e.id},columns:this.courseResColumns3,dataSource:a,pagination:{total:this.state.total,showTotal:function(){return"共计 "+e.state.total+"条"},size:"small",defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}}))),1==l&&R.default.createElement("div",null,R.default.createElement(L,(0,u.default)({},c,{label:"课程分类："}),p("classify",{rules:[{required:!0,message:"请选择课程分类"}]})(R.default.createElement(o.default,{style:{width:"500px"},options:this.state.classify,changeOnSelect:!0,placeholder:"请选择课程分类"}))),R.default.createElement("div",{style:{textAlign:"center"}},R.default.createElement(r.default,{onClick:this.closeBatch},"取消"),R.default.createElement(r.default,{onClick:this.changeClassfy,type:"primary",style:{margin:"0 8px"}},"确定"))),2==l&&R.default.createElement("div",null,R.default.createElement(i.default,{title:"提示",visible:this.state.courseRelationVisible,onCancel:this.handleCancel,onOk:this.doContinue},0==n?R.default.createElement("div",null,"课程编码：",this.state.courseRelationCode.map((function(e,t){return R.default.createElement("span",{key:t},e,"，")})),"已关联培训项目，不能下架，是否继续？"):R.default.createElement("div",null,"课程编码：",this.state.courseRelationCode.map((function(e,t){return R.default.createElement("span",{key:t},e,"，")})),"系未添加章节的草稿课程，不能上架，是否继续？")),R.default.createElement(L,(0,u.default)({},c,{label:"课程状态："}),p("shelves",{rules:[{required:!0,message:"请选择课程状态"}]})(R.default.createElement(v.default.Group,null,R.default.createElement(v.default,{value:1},"批量上架"),R.default.createElement(v.default,{value:0},"批量下架")))),R.default.createElement("div",{style:{textAlign:"center"}},R.default.createElement(r.default,{onClick:this.closeBatch},"取消"),R.default.createElement(r.default,{onClick:this.changeStatus,type:"primary",style:{margin:"0 8px"}},"确定"))),1!=l&&2!=l&&R.default.createElement("div",null,R.default.createElement(i.default,{title:"提示",visible:this.state.courseStatusVisible,onCancel:this.handleCancel,onOk:this.doContinue2},R.default.createElement("div",null,"课程编码：",this.state.courseStatusCode.map((function(e,t){return R.default.createElement("span",{key:t},e,"，")})),"处于上架状态，无法修改，是否继续？")),R.default.createElement(S.default,{defaultActiveKey:"4",onChange:this.switchTab},R.default.createElement(x,{tab:"一般课程",key:"4"},R.default.createElement(E.default,null,R.default.createElement(L,(0,u.default)({},c,{label:"可见范围："}),p("setScope",{rules:[]})(R.default.createElement(T,{onChange:this.selectVisibleRange},R.default.createElement(v.default,{value:1},"平台用户可见"),R.default.createElement(v.default,{value:2},"指定用户可见"))),R.default.createElement(r.default,{type:"primary",onClick:this.setCourseViewRange,disabled:2!=this.state.visibleRange},"用户选择"),R.default.createElement(r.default,{onClick:this.handleSetScope,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"评论设置："}),p("setComment",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"启用评论"),R.default.createElement(v.default,{value:1},"关闭评论"))),R.default.createElement(r.default,{onClick:this.handleSetComment,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"评分设置："}),p("setGrade",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"启用评分"),R.default.createElement(v.default,{value:1},"关闭评分"))),R.default.createElement(r.default,{onClick:this.handleSetGrade,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"播放设置："}),p("setPlay",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"允许用户未完成观看前拖动进度条"),R.default.createElement(v.default,{value:1},"禁止拖动"))),R.default.createElement(r.default,{onClick:this.handleSetPlay,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"跳播设置："}),p("setJumpPlay",{rules:[]})(R.default.createElement(T,{onChange:this.handleJumpPlay},R.default.createElement(v.default,{value:0},"允许"),R.default.createElement(v.default,{value:1},"不允许"))),R.default.createElement(r.default,{onClick:this.handleSetJumpPlay,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"视频播放器设置："}),p("setPlaylayModel",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"横屏"),R.default.createElement(v.default,{value:1},"竖屏"))),R.default.createElement(r.default,{onClick:this.handleSetPlaylayModel,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"章节播放设置："}),p("setChapterPlay",{})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"自动播放下一段"),R.default.createElement(v.default,{value:1},"手动播放下一段"))),R.default.createElement(r.default,{onClick:this.handleSetChapterPlay,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"学习完成规则："}),R.default.createElement("span",{style:{marginRight:20}},"音频素材"),p("audioRule",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"播放即完成"),R.default.createElement(v.default,{value:1},"听完完整课程"))),R.default.createElement(r.default,{onClick:this.handleSetAudioRule,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,d,R.default.createElement("span",{style:{marginRight:20}},"视频素材"),p("videoRule",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"播放即完成"),R.default.createElement(v.default,{value:1},"听完完整课程"))),R.default.createElement(r.default,{onClick:this.handleSetVideoRule,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,d,R.default.createElement("span",{style:{marginRight:20}},"文本素材"),p("textRule",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"观看即完成"),R.default.createElement(v.default,{value:1},"停留时间达到预设的学习时长才完成"))),R.default.createElement(r.default,{onClick:this.handleSetTextRule,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,d,R.default.createElement("span",{style:{marginRight:20}},"多媒体素材"),p("mediaRule",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"观看即完成"),R.default.createElement(v.default,{value:1},"停留时间达到预设的学习时长才完成"))),R.default.createElement(r.default,{onClick:this.handleSetMediaRule,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"积分规则："}),p("portRule",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:1},"按课程发放"),R.default.createElement(v.default,{value:2},"按章发放"),R.default.createElement(v.default,{value:3},"按节发放"))),R.default.createElement(r.default,{onClick:this.handleSetPortRule,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"学时规则："}),p("durationGrant",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:!1},"不发放"),R.default.createElement(v.default,{value:!0},"发放"))),R.default.createElement(r.default,{onClick:this.handleSetDurationGrant,type:"primary",style:{float:"right"}},"确定修改")))),R.default.createElement(x,{tab:"scorm课程",key:"5"},R.default.createElement(E.default,null,R.default.createElement(L,(0,u.default)({},c,{label:"可见范围："}),p("setScope1",{rules:[]})(R.default.createElement(T,{onChange:this.selectVisibleRange1},R.default.createElement(v.default,{value:1},"平台用户可见"),R.default.createElement(v.default,{value:2},"指定用户可见"))),R.default.createElement(r.default,{type:"primary",onClick:this.setCourseViewRange,disabled:2!=this.state.visibleRange1},"用户选择"),R.default.createElement(r.default,{onClick:this.handleSetScope1,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"评论设置："}),p("setComment1",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"启用评论"),R.default.createElement(v.default,{value:1},"关闭评论"))),R.default.createElement(r.default,{onClick:this.handleSetComment1,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"评分设置："}),p("setGrade1",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:0},"启用评分"),R.default.createElement(v.default,{value:1},"关闭评分"))),R.default.createElement(r.default,{onClick:this.handleSetGrade1,type:"primary",style:{float:"right"}},"确定修改")),R.default.createElement(L,(0,u.default)({},c,{label:"学时规则："}),p("durationGrant1",{rules:[]})(R.default.createElement(T,null,R.default.createElement(v.default,{value:!1},"不发放"),R.default.createElement(v.default,{value:!0},"发放"))),R.default.createElement(r.default,{onClick:this.handleSetDurationGrant1,type:"primary",style:{float:"right"}},"确定修改")))))))}}]),l}(R.Component),N=E.default.create()(V),P=(0,b.connect)((function(e,t){return{classify:e.courseManagementReducer.courseClassifyList,courseRelationCode:e.courseManagementReducer.courseRelationCode,courseStatusCode:e.courseManagementReducer.courseStatusCode}}),(function(e){return{batchClassify:function(t,a){return e((0,w.batchClassify)(t,a))},batchShelves:function(t,a){return e((0,w.batchShelves)(t,a))},courseCheckRelation:function(t,a){return e((0,w.courseCheckRelation)(t,a))},batchStrategy:function(t,a){return e((0,w.batchStrategy)(t,a))},courseCheckStatus:function(t,a){return e((0,w.courseCheckStatus)(t,a))},getClassifyList:function(t,a){return e((0,w.getClassifyList)(t,a))}}}))(N);t.default=P},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},553:function(e,t,a){e.exports=a(11)(206)},558:function(e,t,a){e.exports=a(11)(251)},561:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:o.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,l=!1,n=!1;e?(l=e.needTranscode,n=e.type,a="".concat(i,"/upload/policy?needTranscode=").concat(l,"&type=").concat(n,"&date=").concat(new Date)):a="".concat(i,"/upload/policy?date=").concat(new Date);return function(e){return(0,r.default)({url:a}).then((function(a){if("1000"===a.code){var l=JSON.parse(a.data);e({type:o.GET_UPLOAD_PARAM,data:l}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,r.default)({videoUpload:c,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:o.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,r.default)({videoPlay:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:o.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:o.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:o.CLEARUPLOAD})}};var r=n(a(78)),u=n(a(587)),o=l(a(231)),s=u.default.common,i=s.ossUrl,c=s.videoUpload,d=s.videoPlay},563:function(e,t,a){e.exports=a(11)(837)},565:function(e,t,a){e.exports=a(11)(170)},568:function(e,t,a){e.exports=a(11)(333)},570:function(e,t,a){e.exports=a(11)(99)},571:function(e,t,a){e.exports=a(11)(912)},586:function(e,t,a){},587:function(e,t,a){"use strict";var l=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(63)),r={common:{ossUrl:"GET ".concat(n.default.ossUrl),videoUpload:"POST ".concat(n.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(n.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(n.default.ossUrl,"/upload/policy")}};t.default=r},596:function(e,t,a){e.exports=a(11)(827)},618:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.exportUsers=t.importUsers=t.getAuditorList=t.getUserList=t.getGroupList=t.getOrgList=void 0;var r=n(a(78)),u=n(a(635)),o=l(a(235)),s=u.default.linkUser,i=s.orgList,c=s.userList,d=s.auditorList,f=s.importUserUrl,p=s.exportUserUrl;t.getOrgList=function(e,t){return function(a){return(0,r.default)({url:i,data:{type:e}}).then((function(e){a({type:o.ORGLIST,data:e.data}),t&&t(e.data)}))}};t.getGroupList=function(e,t,a){return function(t){return(0,r.default)({url:c,data:{type:e,typ:"system"}}).then((function(e){a&&a(e.data)}))}};t.getUserList=function(e,t,a){return function(l){return(0,r.default)({url:c,data:{seachVal:e,type:t}}).then((function(e){1e3==e.code&&a&&a(e.data)}))}};t.getAuditorList=function(e,t){return function(a){return(0,r.default)({url:d,data:e}).then((function(e){t&&t(e.data)}))}};t.importUsers=function(e,t,a){return function(l){return(0,r.default)({url:"".concat(f,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}};t.exportUsers=function(e,t,a){return function(l){return(0,r.default)({url:"".concat(p,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}}},622:function(e,t,a){e.exports=a(11)(854)},624:function(e,t,a){"use strict";var l=a(4),n=a(0);a(44),a(3),a(5),a(51),a(20),a(34),a(35),a(23),a(229),a(6),a(569);var r=n(a(558));a(549);var u=n(a(544));a(146);var o=n(a(150));a(574);var s=n(a(565));a(578);var i=n(a(570));a(634);var c=n(a(596));a(99);var d=n(a(100));a(61);var f=n(a(62)),p=n(a(29)),m=n(a(30)),h=n(a(59)),y=n(a(32)),g=n(a(33)),v=n(a(31)),C=n(a(2));a(575);var E=n(a(568));a(537);var S=n(a(536)),R=l(a(1)),b=a(52),w=n(a(649)),k=n(a(141)),I=a(618);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=S.default.Search;var T=E.default.TabPane,V=function(e){(0,y.default)(l,e);var t,a=(t=l,function(){var e,a=(0,v.default)(t);if(x()){var l=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function l(){var e;(0,p.default)(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,C.default)((0,h.default)(e),"search",(function(t,a){var l=e.state.tabKey,n=e.props,r=n.getGroupList,u=n.getUserList,o=n.getAuditorList,s=t.target?t.target.value:t;if(e.setState({value:s}),s){var i=(0,h.default)(e);switch(l){case"3":e.setState({groupLoading:!0}),r(s,(function(e){i.setState({searchGroup:e,groupLoading:!1})}));break;case"2":e.setState({userLoading:!0}),"on"==e.props.onlyUser?o({name:s,pageNo:1,pageSize:10},(function(e){console.log(e,"3444"),i.setState({searchUser:e.records,userLoading:!1,searchData:e})})):u(s,a,(function(e){i.setState({searchUser:e,userLoading:!1})}))}}else f.default.info("请输入关键词")})),(0,C.default)((0,h.default)(e),"closeMode",(function(){e.setState({vsb:!1})})),e.state={selectedItems:[],invisible:!0,departmentFlag:!0,show:!0,orgData:"",searchGroup:[],searchUser:[],tabKey:"2",orgLoading:!1,groupLoading:!1,userLoading:!1,userKeyword:"",groupKeyword:"",value:"",searchData:{records:[],pageRecords:""}},e.tabChange=e.tabChange.bind((0,h.default)(e)),e.removeSelected=e.removeSelected.bind((0,h.default)(e)),e.getSelected=e.getSelected.bind((0,h.default)(e)),e.isExist=e.isExist.bind((0,h.default)(e)),e.search=e.search.bind((0,h.default)(e)),e.onSearchChange=e.onSearchChange.bind((0,h.default)(e)),e}return(0,m.default)(l,[{key:"componentWillMount",value:function(){var e=this,t=this.props.groupTypes;this.props.getOrgList(t,(function(){e.setState({orgData:e.props.orgList})}))}},{key:"componentDidMount",value:function(){console.log("检测打印变量=this.props.initData ",this.props.initData),"research"===this.props.groupTypes&&this.props.initData&&this.props.initData.forEach((function(e){e.relationId&&(e.id=e.relationId)})),this.setState({selectedItems:this.props.initData?this.props.initData:[],invisible:void 0===this.props.invisible,departmentFlag:void 0===this.props.departmentFlag})}},{key:"onSearchChange",value:function(e,t){var a=e.target.value;a.length>50?f.default.info("输入长度不可超过50"):("user"==t?this.setState({userKeyword:a}):this.setState({groupKeyword:a}),"1"==this.state.tabKey&&(a.length>0?this.setState({show:!1}):this.setState({show:!0})))}},{key:"getSelected",value:function(e){var t=this;if(this.isExist(e.id)){var a=this;k.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{var l={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},n=this.state.selectedItems;n.push(l),this.setState({selectedItems:n},(function(){t.props.getData(n),f.default.success("选择成功")}))}}},{key:"listSelect",value:function(e){var t=this;if(console.log("检测打印变量=item ",e),this.isExist(e.id)){var a=this;k.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{console.log("检测打印变量=this.state.tabKey ",this.state.tabKey);var l={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},n=this.state.selectedItems;n.push(l),this.setState({selectedItems:n},(function(){t.props.getData(n),f.default.success("选择成功")}))}}},{key:"tabChange",value:function(e){console.log("key",e),this.setState({tabKey:e})}},{key:"isExist",value:function(e){return this.state.selectedItems.filter((function(t){return t.id==e})).length>0}},{key:"removeSelected",value:function(e){if(!this.props.disabled){var t=this.state.selectedItems.filter((function(t){return t.id!=e}));this.setState({selectedItems:t}),this.props.getData(t)}}},{key:"render",value:function(){var e=this,t=[{title:R.default.createElement("p",{style:{minWidth:"60px",marginTop:"0",marginBottom:"0"}},"用户名"),dataIndex:"name",key:"name",render:function(t,a){return R.default.createElement("a",{onClick:function(){return e.listSelect(a)},style:{whiteSpace:"nowrap"}},R.default.createElement(d.default,{type:"contacts"})," ",t)}},{title:R.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"姓名"),dataIndex:"fullName",key:"fullName"},{title:R.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"工号"),dataIndex:"workNum",key:"workNum"}],a=this.props.types;return"look"==this.props.type?R.default.createElement("div",null,R.default.createElement(s.default,null,R.default.createElement(i.default,{span:24,style:{paddingLeft:15,paddingRight:15}},R.default.createElement("h3",null,"已选择的部门、成员",this.state.departmentFlag?"或用户组":""),R.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},R.default.createElement(c.default,{itemLayout:"horizontal",split:!1,dataSource:this.state.selectedItems,renderItem:function(e){return R.default.createElement(c.default.Item,null,R.default.createElement(c.default.Item.Meta,{title:R.default.createElement("a",null,R.default.createElement(d.default,{type:"contacts"}),e.name)}))}}))))):R.default.createElement("div",null,R.default.createElement(s.default,null,R.default.createElement(i.default,{span:12,style:{paddingLeft:15,paddingRight:15}},R.default.createElement(E.default,{defaultActiveKey:this.state.tabKey,onChange:this.tabChange},R.default.createElement(T,{tab:"用户",key:"2"},R.default.createElement(L,{placeholder:"用户名/姓名/工号",style:{marginBottom:"15px"},max:50,onSearch:function(t){return e.search(t,a)},onPressEnter:function(t){return e.search(t,a)},value:this.state.userKeyword,onChange:function(t){return e.onSearchChange(t,"user")}}),R.default.createElement("div",{style:{height:500,overflowY:"auto"}},R.default.createElement(o.default,{spinning:this.state.userLoading}),R.default.createElement(u.default,{columns:t,dataSource:this.state.searchUser,rowKey:function(e){return e.id},pagination:!1}),"on"==this.props.onlyUser?R.default.createElement(r.default,{style:{textAlign:"right",marginRight:"15px",marginTop:"15px"},onChange:function(t){var a={name:e.state.value,pageNo:t,pageSize:10};e.props.getAuditorList(a,(function(t){console.log(t,"3444"),e.setState({searchUser:t.records,searchData:t,userLoading:!1})}))},showTotal:function(e){return"共计 ".concat(e," 条")},total:this.state.searchData.pageRecords}):"")),this.state.departmentFlag?R.default.createElement(T,{tab:"部门",key:"1",disabled:"on"==this.props.onlyUser},R.default.createElement(w.default,{data:this.state.orgData,getSelect:this.getSelected})):null,this.state.invisible?R.default.createElement(T,{tab:"用户组",key:"3",disabled:"on"==this.props.onlyUser},R.default.createElement(L,{placeholder:"搜索",max:50,onPressEnter:this.search,value:this.state.groupKeyword,onChange:function(t){return e.onSearchChange(t,"group")}}),R.default.createElement("div",{style:{height:500,overflowY:"auto"}},R.default.createElement(o.default,{spinning:this.state.groupLoading}),R.default.createElement(c.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.searchGroup,renderItem:function(t){return R.default.createElement(c.default.Item,null,R.default.createElement(c.default.Item.Meta,{title:R.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.listSelect(t)}},R.default.createElement(d.default,{type:"contacts"}),t.name)}))}}))):null)),R.default.createElement(i.default,{span:12,style:{paddingLeft:15,paddingRight:15}},this.props.tabTitle?R.default.createElement("div",null,this.props.tabTitle):R.default.createElement("h3",null,"已选择的部门、成员",this.state.invisible?"或用户组":""),R.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},R.default.createElement(c.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.selectedItems,renderItem:function(t){return R.default.createElement(c.default.Item,{actions:[R.default.createElement("a",{onClick:function(){return e.removeSelected(t.id)}},R.default.createElement(d.default,{type:"close"}))]},R.default.createElement(c.default.Item.Meta,{title:1==t.type?R.default.createElement("a",null,R.default.createElement(d.default,{type:"team"})," ",t.name):R.default.createElement("a",null,R.default.createElement("div",null,console.log(t,"item")),R.default.createElement(d.default,{type:"contacts"})," ",t.name," ",t.fullName," ",t.workNum)}))}})))))}}]),l}(R.Component);e.exports=(0,b.connect)((function(e,t){var a=e.linkUserReducer;return{fetching:a.fetching,orgList:a.orgList}}),(function(e){return{getOrgList:function(t,a){return e((0,I.getOrgList)(t,a))},getGroupList:function(t,a){return e((0,I.getGroupList)(t,a))},getUserList:function(t,a,l){return e((0,I.getUserList)(t,a,l))},getAuditorList:function(t,a){return e((0,I.getAuditorList)(t,a))}}}))(V)},635:function(e,t,a){"use strict";var l=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(63)),r={linkUser:{orgList:"GET ".concat(n.default.systemManage,"/org/userGroup/list"),userList:"GET ".concat(n.default.systemManage,"/account/name/search"),auditorList:"GET ".concat(n.default.webManage,"/assignment/get/all/auditor"),importUserUrl:"POST ".concat(n.default.webManage,"/range/import"),exportUserUrl:"GET ".concat(n.default.webManage,"/range/export")}};t.default=r},636:function(e,t,a){e.exports=a(46)(174)},649:function(e,t,a){"use strict";var l=a(4),n=a(0);a(101),a(40),a(51),a(20),a(34),a(35),a(23),a(53),a(61);var r=n(a(62)),u=n(a(29)),o=n(a(30)),s=n(a(59)),i=n(a(32)),c=n(a(33)),d=n(a(31)),f=n(a(2));a(537);var p=n(a(536));a(719);var m=n(a(622)),h=l(a(1));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=m.default.TreeNode,v=p.default.Search,C=function(e){(0,i.default)(l,e);var t,a=(t=l,function(){var e,a=(0,d.default)(t);if(y()){var l=(0,d.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function l(e){var t;return(0,u.default)(this,l),t=a.call(this,e),(0,f.default)((0,s.default)(t),"onExpand",(function(e){t.setState({expandedKeys:e,autoExpandParent:!1})})),(0,f.default)((0,s.default)(t),"onChange",(function(e){var a=e.target.value;if(a.length>50)r.default.info("关键词长度最大为50");else{var l=(0,s.default)(t);a?t.setState({searchValue:a,expandedKeys:[]},(function(){for(var e=0;e<t.props.data.trees.length;e++)l.getExpandedKeys(t.props.data.trees[e].children,a,""+e)})):(t.setState({searchValue:a}),t.setDefaultExpandKeys())}})),t.state={expandedKeys:[],searchValue:"",autoExpandParent:!0},t.loop=t.loop.bind((0,s.default)(t)),t.onSelect=t.onSelect.bind((0,s.default)(t)),t.getExpandedKeys=t.getExpandedKeys.bind((0,s.default)(t)),t.renderTree=t.renderTree.bind((0,s.default)(t)),t.setDefaultExpandKeys=t.setDefaultExpandKeys.bind((0,s.default)(t)),t}return(0,o.default)(l,[{key:"componentDidMount",value:function(){this.setDefaultExpandKeys()}},{key:"setDefaultExpandKeys",value:function(){var e=this.props.data.trees.map((function(e,t){return""+t}));this.setState({expandedKeys:e})}},{key:"onSelect",value:function(e,t){this.props.getSelect(t.node.props.dataRef)}},{key:"getExpandedKeys",value:function(e,t,a){var l=this,n=this.state.expandedKeys;e.map((function(e){if(e.name.indexOf(t)>=0){for(var r=a.split("&&&"),u=0;u<r.length;u++)-1==n.indexOf(r[u])&&r[u]&&n.push(r[u]);n.push(e.id)}if(e.children.length>0){var o="";o+=a?a+"&&&"+e.id:e.id,l.getExpandedKeys(e.children,t,o)}})),this.setState({expandedKeys:n})}},{key:"loop",value:function(e){var t=this,a=this.state.searchValue,l=[];return e.length>0&&(l=e.map((function(e){var l=e.name.indexOf(a),n=e.name.substr(0,l),r=e.name.substr(l+a.length),u=l>-1?h.default.createElement("span",null,n,h.default.createElement("span",{style:{color:"#f50"}},a),r):h.default.createElement("span",null,e.name);return h.default.createElement(g,{key:e.id,title:u,dataRef:e},t.loop(e.children))}))),l}},{key:"renderTree",value:function(e){var t=this,a=[],l=this.state.expandedKeys;return e&&(a=e.trees.map((function(e,a){return h.default.createElement(m.default,{onSelect:t.onSelect,onExpand:t.onExpand,expandedKeys:l,autoExpandParent:!1,key:a},h.default.createElement(g,{key:a,title:e.name,dataRef:e},t.loop(e.children)))}))),a}},{key:"render",value:function(){return h.default.createElement("div",null,h.default.createElement(v,{placeholder:"部门名称",max:50,style:{marginBottom:8},value:this.state.searchValue,onChange:this.onChange}),h.default.createElement("div",{style:{height:500,overflowY:"auto"}},this.renderTree(this.props.data)))}}]),l}(h.Component);e.exports=C},764:function(e,t,a){"use strict";a.r(t);a(26),a(1008),a(554),a(655)},765:function(e,t,a){e.exports=a(11)(855)},807:function(e,t,a){"use strict";a.r(t);a(26),a(809),a(655),a(537)},808:function(e,t,a){e.exports=a(11)(815)},809:function(e,t,a){},905:function(e,t,a){"use strict";var l=a(245),n=a(246);e.exports=l("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},906:function(e,t,a){"use strict";var l=a(4),n=a(0);a(7),a(3),a(5),a(51),a(9),a(10),a(8),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.downComment=t.upComment=t.downloadComment=t.checkReply=t.checkComment=t.getReplyList=t.getCommentList=t.getResourceClassify=t.addResourceByRelation=t.getResourceByRelationId=t.moveCourseResource=t.deleteCourseResource=t.getCourseResourceById=t.setCourseViewRange=t.getCourseRange=t.courseCheckStatus=t.batchStrategy=t.courseCheckRelation=t.batchShelves=t.batchClassify=t.deleteCourse=t.downCourse=t.upCourse=t.exportCourseList=t.getClassifyList=t.getCourseList=void 0;var r=n(a(2));a(61);var u=n(a(62)),o=n(a(78)),s=n(a(1294)),i=l(a(249));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=s.default.courseManagement,p=f.courseList,m=f.courseClassifyList,h=f.courseUpUrl,y=f.courseDownUrl,g=f.courseDelUrl,v=f.batchClassifyUrl,C=f.batchShelvesUrl,E=f.courseCheckRelationUrl,S=f.batchStrategyUrl,R=f.courseCheckStatusUrl,b=f.courseExportUrl,w=f.courseVsRangeUrl,k=f.courseSaveRangeUrl,I=f.courseDataUrl,x=f.coursDataDelUrl,L=f.courseDataMoveUrl,T=f.queryDataUrl,V=f.dataSaveUrl,N=f.DataClassifyUrl,P=f.commentListUrl,D=f.replyListUrl,U=f.auditCommentUrl,O=f.auditReplyUrl,_=f.commentExportUrl,M=f.commentUpUrl,F=f.commentDownUrl;t.getCourseList=function(e,t){return function(a){return(0,o.default)({url:p,data:e}).then((function(e){a({type:i.COURSE_LIST,data:e.data}),t&&t()}))}};t.getClassifyList=function(e,t){return function(a){return(0,o.default)({url:m,data:e}).then((function(e){for(var l=e.data,n=[],r=0;r<l.length;r++)1===l[r].layer&&n.push({title:l[r].name,label:l[r].name,value:l[r].id,id:l[r].id,key:"A"+r,code:l[r].code,name:l[r].name,level:"一级分类",createTime:l[r].createTime}),2===l[r].layer&&("children"in n[n.length-1]||(n[n.length-1].children=[]),n[n.length-1].children.push({title:l[r].name,label:l[r].name,value:l[r].id,id:l[r].id,key:"B"+r,code:l[r].code,name:l[r].name,level:"二级分类",createTime:l[r].createTime})),3===l[r].layer&&("children"in n[n.length-1].children[n[n.length-1].children.length-1]||(n[n.length-1].children[n[n.length-1].children.length-1].children=[]),n[n.length-1].children[n[n.length-1].children.length-1].children.push({title:l[r].name,label:l[r].name,value:l[r].id,id:l[r].id,key:""+r,code:l[r].code,name:l[r].name,level:"三级分类",createTime:l[r].createTime}));a({type:i.COURSE_CLASSIFY_LIST,data:n}),t&&t()}))}};t.exportCourseList=function(e,t){return function(a){return(0,o.default)({url:b,data:e}).then((function(e){1e3==e.code&&t&&t(e)}))}};t.upCourse=function(e,t){return function(a){return(0,o.default)({url:h,data:e}).then((function(e){1e3==e.code&&t&&t(e)}))}};t.downCourse=function(e,t){return function(a){return(0,o.default)({url:y,data:e}).then((function(e){1e3==e.code&&t&&t(e)}))}};t.deleteCourse=function(e,t){return function(a){return(0,o.default)({url:g,data:e}).then((function(e){1e3==e.code&&t&&t(e)}))}};t.batchClassify=function(e,t){return function(a){return(0,o.default)({url:v,data:e}).then((function(e){t&&t()}))}};t.batchShelves=function(e,t){return function(a){return(0,o.default)({url:C,data:e}).then((function(e){e.data&&u.default.warn(e.data),t&&t()}))}};t.courseCheckRelation=function(e,t){return function(a){return(0,o.default)({url:E,data:e}).then((function(e){a({type:i.COURSE_CHECK_RELATION,data:e.data}),t&&t()}))}};t.batchStrategy=function(e,t){return function(a){return(0,o.default)({url:S,data:e}).then((function(e){e.data&&u.default.warn(e.data),t&&t()}))}};t.courseCheckStatus=function(e,t){return function(a){return(0,o.default)({url:R,data:e}).then((function(e){a({type:i.COURSE_CHECK_STATUS,data:e.data}),t&&t()}))}};t.getCourseRange=function(e,t){return function(a){return(0,o.default)({url:w,data:{courseId:e}}).then((function(e){a({type:i.COURS_EVIEW_RANGE,data:e.data}),t&&t(e)}))}};t.setCourseViewRange=function(e,t){return function(a){return(0,o.default)({url:k,data:e}).then((function(e){t&&t(e)}))}};t.getCourseResourceById=function(e,t){return function(a){return(0,o.default)({url:I,data:e}).then((function(e){a({type:i.COURSE_RESOURCE,data:e.data}),t&&t(e.data)}))}};t.deleteCourseResource=function(e,t){return function(a){return(0,o.default)({url:x,data:e}).then((function(e){t&&t(e.data)}))}};t.moveCourseResource=function(e,t){return function(a){return(0,o.default)({url:L,data:e}).then((function(e){t&&t(e.data)}))}};t.getResourceByRelationId=function(e,t){return function(a){return(0,o.default)({url:T,data:e}).then((function(e){a({type:i.DATA_SOURSE,data:e.data}),t&&t(e.data)}))}};t.addResourceByRelation=function(e,t){return function(a){return(0,o.default)({url:V,data:e}).then((function(e){t&&t(e.data)}))}};t.getResourceClassify=function(e,t){return function(a){return(0,o.default)({url:N,data:{showThirdClassfy:e}}).then((function(e){a({type:i.RESOURCE_CLASSIFY,data:e.data}),t&&t(e.data)}))}};t.getCommentList=function(e,t){return function(a){return(0,o.default)({url:P,data:e}).then((function(l){if("1000"===l.code){for(var n=[],r=0;r<l.data.page.records.length;r++){var o=d({},l.data.page.records[r],{key:e.pageSize*(e.pageNo-1)+(r+1)});l.data.page.records[r].replys>0&&(o.children=[],o.index=r),n.push(o)}console.log(n),a({type:i.COMMENT_LIST,data:{list:n,listTotal:l.data.page.total,avgLevel:l.data.avgLevel}})}else u.default.error("加载失败...");t&&t()}))}};t.getReplyList=function(e,t,a){return function(t){return(0,o.default)({url:D,data:e}).then((function(l){if("1000"===l.code){for(var n=[],r=0;r<l.data.records.length;r++)n.push({commentId:l.data.records[r].commentId,id:l.data.records[r].id,commentator:l.data.records[r].replier,content:l.data.records[r].content,createTime:l.data.records[r].createTime,flag:"reply",replyName:l.data.records[r].parentAccountFullName,status:l.data.records[r].status,commentatorName:l.data.records[r].replierName});t({type:i.REPLY_LIST,data:{children:n,commentId:e.commmentId}})}else u.default.error("加载失败...");a&&a()}))}};t.checkComment=function(e,t){return function(a){return(0,o.default)({url:U,data:e}).then((function(e){t&&t(e)}))}};t.checkReply=function(e,t){return function(a){return(0,o.default)({url:O,data:e}).then((function(e){t&&t(e)}))}};t.downloadComment=function(e,t){return function(a){return(0,o.default)({url:_,data:e}).then((function(e){t&&t(e)}))}};t.upComment=function(e,t){return function(a){return(0,o.default)({url:M,data:e}).then((function(e){t&&t(e)}))}};t.downComment=function(e,t){return function(a){return(0,o.default)({url:F,data:e}).then((function(e){t&&t(e)}))}}}}]);