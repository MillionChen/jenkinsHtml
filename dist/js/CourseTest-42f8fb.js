(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1003:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),a(3),a(101),a(227),a(40),a(143),a(20),a(34),a(35),a(23),a(53),a(99);var l=r(a(100));a(537);var s=r(a(536));a(144);var u=r(a(230));a(648);var i=r(a(619)),o=r(a(81));a(61);var c=r(a(62)),d=r(a(29)),p=r(a(30)),f=r(a(59)),m=r(a(32)),h=r(a(33)),g=r(a(31)),_=r(a(2)),y=n(a(1));function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(v()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,_.default)((0,f.default)(t),"saveInputRef",(function(e){return t.input=e})),t.props.init&&t.props.init((0,f.default)(t)),console.log(t.props.defaultTags,"回显938"),t.state={tags:t.props.defaultTags?t.props.defaultTags:[],inputVisible:!1,inputValue:""},t.showInput=t.showInput.bind((0,f.default)(t)),t.handleClose=t.handleClose.bind((0,f.default)(t)),t.handleInputConfirm=t.handleInputConfirm.bind((0,f.default)(t)),t.handleInputChange=t.handleInputChange.bind((0,f.default)(t)),t.props.defaultTags&&t.props.getTags(t.props.defaultTags),t}return(0,p.default)(n,[{key:"initTags",value:function(e){this.setState({tags:e})}},{key:"handleClose",value:function(e){var t=this.state.tags.filter((function(t){return t!==e}));this.setState({tags:t});var a=this.props.getTags;a&&a(t)}},{key:"showInput",value:function(){var e=this;this.state.tags&&this.state.tags.length>=5?c.default.error("最多只能添加5个"):this.setState({inputVisible:!0},(function(){return e.input.focus()}))}},{key:"handleInputChange",value:function(e){var t=e.target.value.split(" ");this.setState({inputValue:t.join("")})}},{key:"componentWillReceiveProps",value:function(e){if(!this.state.tags.length&&e.defaultTags.length){console.log("oldTags",e.defaultTags);var t=e.defaultTags.join(","),a=!1;this.props.defaultTags.length?t!=this.props.defaultTags.join(",")&&(a=!0):a=!0,a&&(this.setState({tags:e.defaultTags}),this.props.getTags(e.defaultTags))}}},{key:"handleInputConfirm",value:function(e){if(e.target.value.length>10)return console.log("长度不可超过10，请重新输入..."),c.default.error("长度不可超过10，请重新输入..."),void this.setState({inputValue:"",inputVisible:!1});var t=this.props.getTags,a=this.state,n=a.inputValue,r=a.tags;r||(r=[]),n&&-1===r.indexOf(n)&&(r=[].concat((0,o.default)(r),[n])),t&&t(r),this.setState({tags:r,inputVisible:!1,inputValue:"",focus:!0})}},{key:"render",value:function(){var e=this,t=this.props.disabled,a=this.state,n=a.tags,r=a.inputVisible,o=a.inputValue;return n||(n=[]),t?y.default.createElement("div",{style:{float:"left"}},n.map((function(e,t){var a=e.length>20,n=y.default.createElement(i.default,{key:e,closable:!1,onClose:function(){}},a?"".concat(e.slice(0,20),"..."):e);return a?y.default.createElement(u.default,{title:e,key:e},n):n}))):y.default.createElement("div",{style:{float:"left"}},r&&y.default.createElement(s.default,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78,display:this.props.disable?"none":"inline-block"},value:o,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!r&&y.default.createElement(i.default,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed",display:this.props.disable?"none":"inline-block"}},y.default.createElement(l.default,{type:"plus"})," 添加"),n.map((function(t,a){var n=t.length>20,r=y.default.createElement(i.default,{key:t,closable:e.props.disable?a<0:a>=0,onClose:function(){return e.handleClose(t)}},n?"".concat(t.slice(0,20),"..."):t);return n?y.default.createElement(u.default,{title:t,key:t},r):r})))}}]),n}(y.default.Component);e.exports=b},1022:function(e,t,a){},1024:function(e,t,a){"use strict";var n=a(12),r=a(54).every,l=a(109),s=a(43),u=l("every"),i=s("every");n({target:"Array",proto:!0,forced:!u||!i},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},1657:function(e,t,a){"use strict";var n=a(4),r=a(0);a(103),a(40),a(20),a(34),a(23),a(151),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var l=r(a(225));a(146);var s=r(a(150));a(549);var u=r(a(544));a(564);var i=r(a(563));a(61);var o=r(a(62));a(140);var c=r(a(535));a(554);var d=r(a(550));a(537);var p=r(a(536)),f=r(a(29)),m=r(a(30)),h=r(a(59)),g=r(a(32)),_=r(a(33)),y=r(a(31)),v=r(a(2));a(540);var b=r(a(539)),E=n(a(1)),S=a(52),w=a(1658),C=r(a(226)),k=r(a(223)),T=r(a(1660)),j=r(a(1661));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var q=b.default.Item,L=function(e){(0,g.default)(n,e);var t,a=(t=n,function(){var e,a=(0,y.default)(t);if(V()){var n=(0,y.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,_.default)(this,e)});function n(e){var t;return(0,f.default)(this,n),t=a.call(this,e),(0,v.default)((0,h.default)(t),"onCancel",(function(){return t.setState({visible:!1})})),(0,v.default)((0,h.default)(t),"onChange1",(function(e){t.setState({values:e.target.value},(function(){console.log("values",t.state.values)}))})),(0,v.default)((0,h.default)(t),"handleSearch",(function(){var e={status:t.state.status,type:t.state.type,pageNo:1,pageSize:t.state.pageSize,isRelevance:!t.state.status,codeOrName:t.state.values};t.props.testCourseListAction(e,(function(e){t.setState({pageNo:1,pageSize:e.page.pageSize,pageTotal:e.page.pageRecords,loading:!1},(function(){this.setState({pageNo:1})}))}))})),(0,v.default)((0,h.default)(t),"onShowSizeChange",(function(e,a){t.props.testCourseListAction({pageNo:1,pageSize:a,isRelevance:!0,status:t.state.status,type:t.state.type},(function(e){t.setState({loading:!1,current:t.state.pageNo},(function(){this.setState({pageNo:1,pageSize:a})}))}))})),(0,v.default)((0,h.default)(t),"onChange",(function(e,a){t.props.testCourseListAction({pageNo:e,pageSize:a,isRelevance:!0,status:t.state.status,type:t.state.type},(function(a){t.setState({loading:!1},(function(){this.setState({pageNo:e})}))}))})),(0,v.default)((0,h.default)(t),"handleChangeType",(function(e){console.log("value1",e),t.setState({type:e})})),(0,v.default)((0,h.default)(t),"handleChangeStatus",(function(e){console.log("value2",e),t.setState({status:e})})),t.state={visible:!1,testCouse:"new",courseDelList:[],pageNo:1,pageSize:10,pageTotal:1,loading:!0,status:"",type:"",values:""},t}return(0,m.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.testCourseListAction({pageNo:this.state.pageNo,pageSize:this.state.pageSize,isRelevance:!0},(function(t){e.setState({pageNo:t.page.pageNo,pageSize:t.page.pageSize,pageTotal:t.page.pageRecords,loading:!1})}))}},{key:"showTotal",value:function(e){return"总 ".concat(e," 条记录")}},{key:"render",value:function(){var e=this,t=this.props.courseTestReducer,a=void 0===t?{testCourseList:{data:[]}}:t,n=this.props.form.getFieldDecorator,r=this.state,f=r.pageNo,m=(r.pageSize,r.pageTotal);console.log(f,"pageNo");var h={onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a);var n=[];a.map((function(e,t){n.push(e.id)})),e.setState({courseDelList:n})},getCheckboxProps:function(e){return{disabled:1===e.status,status:e.status}}},g=[{title:"测验编码",dataIndex:"code",render:function(e){return E.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"测验名称",dataIndex:"name",render:function(e){return E.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"测验类型",dataIndex:"type",render:function(e,t){return E.default.createElement("span",null,"01"===t.type&&E.default.createElement("span",null,"过程性测验"),"02"===t.type&&E.default.createElement("span",null,"总结性测验"))}},{title:"使用状态",dataIndex:"status",render:function(e,t){return E.default.createElement("span",null,"0"==t.status&&E.default.createElement("span",null,"草稿"),"1"==t.status&&E.default.createElement("span",null,"使用中"),"2"==t.status&&E.default.createElement("span",null,"未使用"))}},{title:"创建时间",dataIndex:"createTime",render:function(e,t){return E.default.createElement("span",null,(0,k.default)(t.createTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",dataIndex:"action",render:function(t,a){return E.default.createElement("span",null,1==a.status&&E.default.createElement("a",{onClick:function(){return e.props.testCourseView({id:a.id},(function(t){e.setState({testCouse:"look",testCourseView:t.data,visible:!0,testId:a.id,testCouseTitle:"查看课程测验"},(function(){e.props.tesSubjectList({id:t.data.id})}))}))}},"查看"),2==a.status&&E.default.createElement("a",{onClick:function(){return e.props.testCourseView({id:a.id},(function(t){e.setState({testCouse:"edit",testCourseView:t.data,visible:!0,testId:a.id,testCouseTitle:"修改课程测验"},(function(){e.props.tesSubjectList({id:t.data.id})}))}))}},"修改"))}}];return E.default.createElement("div",{className:T.default.course_test_body},E.default.createElement(C.default,{title:"课程测验"}),E.default.createElement(b.default,{className:T.default.head_searh,onSubmit:this.handleSearch,layout:"inline"},E.default.createElement(q,{label:"关键字（词）："},n("codeOrName")(E.default.createElement(p.default,{placeholder:"请输入测验名称、测验编码、自定义关键词",onChange:this.onChange1}))),E.default.createElement(q,{label:"测验类型："},n("type",{initialValue:""})(E.default.createElement(d.default,{style:{width:120,zIndex:1},onChange:this.handleChangeType},E.default.createElement(d.default.Option,{value:""},"所有类型"),E.default.createElement(d.default.Option,{value:"01"},"过程性测验"),E.default.createElement(d.default.Option,{value:"02"},"总结性测验")))),E.default.createElement(q,{label:"使用状态："},n("status",{initialValue:""})(E.default.createElement(d.default,{style:{width:120,zIndex:1},onChange:this.handleChangeStatus},E.default.createElement(d.default.Option,{value:""},"所有状态"),E.default.createElement(d.default.Option,{value:"1"},"使用中"),E.default.createElement(d.default.Option,{value:"2"},"未使用")))),E.default.createElement("span",null," ",E.default.createElement(c.default,{type:"primary",style:{marginTop:"4px"},onClick:this.handleSearch},"查询"))),E.default.createElement("div",{className:T.default.head_button},E.default.createElement(c.default,{type:"primary",style:{marginRight:"20px"},onClick:function(){e.setState({visible:!0,testCouse:"new",testCouseTitle:"创建课程测验"}),e.props.tesSubjectList({id:0})}},"创建测验"),E.default.createElement(i.default,{title:"确定删除测验,删除后不可恢复",onConfirm:function(){e.state.courseDelList.length?e.props.testCourseDel(e.state.courseDelList,(function(){e.handleSearch()})):o.default.info("请选择要删除的测验")}},E.default.createElement(c.default,{type:"primary"},"删除"))),E.default.createElement(s.default,{spinning:this.state.loading},E.default.createElement(u.default,{columns:g,rowKey:function(e){return e.id},rowSelection:h,dataSource:a.testCourseList,pagination:{total:m,showTotal:function(){return"共计 "+m+"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:f,onChange:this.onChange,onShowSizeChange:this.onShowSizeChange,showQuickJumper:!0,size:"small"}})),E.default.createElement(l.default,{title:this.state.testCouseTitle,visible:this.state.visible,width:1e3,style:{top:2},maskClosable:!1,destroyOnClose:!0,footer:null,onCancel:this.onCancel},E.default.createElement(j.default,{onCancel:this.onCancel,subjectList:this.props.courseTestReducer.subjectList&&this.props.courseTestReducer.subjectList,testCourseAddSubject:this.props.testCourseAddSubject,testCourseSubjectView:this.props.testCourseSubjectView,testCourseSave:this.props.testCourseSave,testSubjectDel:this.props.testSubjectDel,tesSubjectAction:this.props.tesSubjectList,testSubjectScore:this.props.testSubjectScore,testSubjectMove:this.props.testSubjectMove,testCouse:this.state.testCouse,testCourseView:"new"!=this.state.testCouse&&this.state.testCourseView,editTestId:"new"!=this.state.testCouse&&this.state.testId,testCourseListAction:this.props.testCourseListAction,handleSearch:function(){return e.handleSearch()}})))}}]),n}(E.Component),R=(0,S.connect)((function(e){return x({},e)}),x({},w.testCouseActions))(b.default.create()(L));t.default=R},1658:function(e,t,a){"use strict";var n=a(4),r=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.testCouseActions=void 0,a(61);var l=r(a(62)),s=n(a(282)),u=r(a(78)),i=r(a(1659)).default.courseClassify,o=i.testDelUrl,c=i.testListUlr,d=i.testSavelUrl,p=i.testViewUrl,f=i.subjectAddUrl,m=i.subjectViewUrl,h=i.subjectListUrl,g=i.subjectDelUrl,_=i.subjectUpdateUrl,y=i.subjectMoveUrl,v={testCourseListAction:function(e,t){return function(a){return(0,u.default)({url:c,data:e}).then((function(e){a({type:s.TEST_COURSE_LIST,testCourseList:e.data}),1e3==e.code?t&&t(e):l.default.error(e.msg)}))}},testCourseSave:function(e,t){return function(a){return(0,u.default)({url:d,data:e}).then((function(e){1e3==e.code?(l.default.success("测验保存成功"),t&&t(e)):l.default.error(e.subMsg)}))}},testCourseAddSubject:function(e,t){return function(a){return(0,u.default)({url:f,data:e}).then((function(e){1e3==e.code?(l.default.success("测验保存成功"),t&&t(e)):l.default.error(e.subMsg)}))}},tesSubjectList:function(e,t){return function(a){return(0,u.default)({url:h,data:e}).then((function(e){1e3==e.code?(a({type:s.TEST_SUBJECT_LIST,subjectList:e.data}),t&&t(e)):l.default.error(e.subMsg)}))}},testCourseSubjectView:function(e,t){return function(a){return(0,u.default)({url:m,data:e}).then((function(e){1e3==e.code?(a({type:s.SUBJECT_VIEW,subjectView:e.data}),t&&t(e)):l.default.error(e.subMsg)}))}},testCourseView:function(e,t){return function(a){return(0,u.default)({url:p,data:e}).then((function(e){1e3==e.code?(a({type:s.TEST_VIEW,testView:e.data}),t&&t(e)):l.default.error(e.subMsg)}))}},testSubjectDel:function(e,t){return function(a){return(0,u.default)({url:g,data:e}).then((function(e){1e3==e.code?(l.default.success("题目删除成功"),t&&t(e)):l.default.error(e.msg)}))}},testCourseDel:function(e,t){return function(a){return(0,u.default)({url:o,data:e}).then((function(e){1e3==e.code?t&&t(e):l.default.error(e.msg)}))}},testSubjectScore:function(e,t){return function(a){return(0,u.default)({url:_,data:e}).then((function(e){1e3==e.code?(l.default.success("分数设置成功"),t&&t(e)):l.default.error(e.msg)}))}},testSubjectMove:function(e,t){return function(a){return(0,u.default)({url:y,data:e}).then((function(e){1e3==e.code?(l.default.success("位置移动成功"),t&&t(e),a(v.tesSubjectList({id:e.data.testId}))):l.default.error(e.msg)}))}}};t.testCouseActions=v},1659:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={courseClassify:{testDelUrl:"POST ".concat(r.default.webManage,"/testInfo/test/ids/delete"),testListUlr:"POST ".concat(r.default.webManage,"/testInfo/test/list"),testSavelUrl:"POST ".concat(r.default.webManage,"/testInfo/test/save"),testViewUrl:"GET ".concat(r.default.webManage,"/testInfo/test/view"),subjectAddUrl:"POST ".concat(r.default.webManage,"/testInfo/testSubject/save"),subjectViewUrl:"GET ".concat(r.default.webManage,"/testInfo/testSubject/view"),subjectListUrl:"GET ".concat(r.default.webManage,"/testInfo/test/subject/list"),subjectDelUrl:"GET ".concat(r.default.webManage,"/testInfo/testSubject/delete"),subjectUpdateUrl:"GET ".concat(r.default.webManage,"/testInfo/testSubject/score/update"),subjectMoveUrl:"GET ".concat(r.default.webManage,"/testInfo/testSubject/move")}};t.default=l},1660:function(e,t,a){e.exports={course_test_body:"course_test_body__2XGDQ",head_searh:"head_searh__3nEwW",head_button:"head_button__1gjLn"}},1661:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(4),_interopRequireDefault=__webpack_require__(0);__webpack_require__(44),__webpack_require__(227),__webpack_require__(40),__webpack_require__(51),__webpack_require__(20),__webpack_require__(34),__webpack_require__(35),__webpack_require__(23),__webpack_require__(53),__webpack_require__(228),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(224);var _modal=_interopRequireDefault(__webpack_require__(225));__webpack_require__(549);var _table=_interopRequireDefault(__webpack_require__(544));__webpack_require__(140);var _button=_interopRequireDefault(__webpack_require__(535));__webpack_require__(554);var _select=_interopRequireDefault(__webpack_require__(550));__webpack_require__(144);var _tooltip=_interopRequireDefault(__webpack_require__(230)),_extends2=_interopRequireDefault(__webpack_require__(98));__webpack_require__(537);var _input=_interopRequireDefault(__webpack_require__(536));__webpack_require__(564);var _popconfirm=_interopRequireDefault(__webpack_require__(563));__webpack_require__(590);var _divider=_interopRequireDefault(__webpack_require__(591));__webpack_require__(61);var _message2=_interopRequireDefault(__webpack_require__(62));__webpack_require__(99);var _icon=_interopRequireDefault(__webpack_require__(100));__webpack_require__(616);var _inputNumber=_interopRequireDefault(__webpack_require__(617)),_classCallCheck2=_interopRequireDefault(__webpack_require__(29)),_createClass2=_interopRequireDefault(__webpack_require__(30)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(59)),_inherits2=_interopRequireDefault(__webpack_require__(32)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(33)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(31)),_defineProperty2=_interopRequireDefault(__webpack_require__(2));__webpack_require__(556);var _radio=_interopRequireDefault(__webpack_require__(553));__webpack_require__(540);var _form=_interopRequireDefault(__webpack_require__(539)),_react=_interopRequireWildcard(__webpack_require__(1)),_AddSubject=_interopRequireDefault(__webpack_require__(1662)),_index=_interopRequireDefault(__webpack_require__(1003));function _createSuper(e){return function(){var t,a=(0,_getPrototypeOf2.default)(e);if(_isNativeReflectConstruct()){var n=(0,_getPrototypeOf2.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var FormItem=_form.default.Item,RadioGroup=_radio.default.Group,EditableCell=function(e){(0,_inherits2.default)(a,e);var t=_createSuper(a);function a(){var e;(0,_classCallCheck2.default)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(e),"state",{value:e.props.value,recordId:e.props.recordId,editable:!1}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(e),"handleChange",(function(t){e.setState({value:t})})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(e),"check",(function(){e.setState({editable:!1});var t=e.state,a=t.value,n=t.recordId;e.props.onChange&&e.props.onChange(a,n)})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(e),"edit",(function(){e.setState({editable:!0})})),e}return(0,_createClass2.default)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.editable;return _react.default.createElement("div",null,a?_react.default.createElement("div",null,_react.default.createElement(_inputNumber.default,{value:t,onChange:this.handleChange,onPressEnter:this.check,min:1}),_react.default.createElement(_icon.default,{type:"check",className:"editable-cell-icon-check",onClick:this.check})):_react.default.createElement("div",null,t||" ","look"!=this.props.testCouse&&_react.default.createElement(_icon.default,{type:"edit",className:"editable-cell-icon",onClick:this.edit})))}}]),a}(_react.default.Component),TestCourseCreate=function(_Component){(0,_inherits2.default)(TestCourseCreate,_Component);var _super2=_createSuper(TestCourseCreate);function TestCourseCreate(props){var _this2;return(0,_classCallCheck2.default)(this,TestCourseCreate),_this2=_super2.call(this,props),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"onCellChange",(function(){return function(e,t){_this2.props.testSubjectScore({id:t,score:e},(function(){_this2.props.tesSubjectAction({id:_this2.props.subjectList[0].testId})}))}})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"handleSubmit",(function(){var e="";if(_this2.props.subjectList.length){if("edit"==_this2.props.testCouse);else{if(!_this2.props.subjectList.length)return void _message2.default.error("至少添加一道试题!！");e=_this2.props.subjectList[0].testId}var t=_this2.props,a=t.onCancel,n=t.testCouse,r=t.testCourseView,l=_this2.state.typesVale;_this2.props.form.validateFields((function(t,s){if(!t){var u={};s.name=s.name.trim(),(u="01"==l?{desc:s.desc,name:s.name,optionRandomStrategy:s.optionRandomStrategy,passedSetting:s.passedSetting,subjectRandomStrategy:s.subjectRandomStrategy,type:l,status:2,id:"edit"==n?r.id:e}:{answerFeedbackStrategy:s.answerFeedbackStrategy,desc:s.desc,explainFeedbackStrategy:s.explainFeedbackStrategy,name:s.name,optionRandomStrategy:s.optionRandomStrategy,passedSetting:s.passedSetting,passingScore:s.passingScore,resultFeedbackStrategy:s.resultFeedbackStrategy,subjectRandomStrategy:s.subjectRandomStrategy,type:l,status:2,id:"edit"==n?r.id:e}).keywords=_this2.state.keywords,console.log("检测打印变量=json ",u),_this2.props.testCourseSave(u,(function(e){_this2.props.handleSearch(),a()}))}}))}else _message2.default.error("至少添加一道试题!！")})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"closeModal",(function(){return _this2.setState({showFlag:!1},(function(){_this2.addSubject.clearTypeChange(),_this2.setState({testId:_this2.addSubject.state.testId})}))})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"sum",(function(){var arr=[];return _this2.props.subjectList&&_this2.props.subjectList.map((function(e){arr.push(e.score)})),eval(arr.join("+"))})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"moveSubject",(function(e,t){_this2.props.testSubjectMove({id:e,moveType:t})})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"typesChange",(function(e){_this2.setState({typesVale:e})})),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this2),"getTags",(function(e){_this2.setState({keywords:e.join()}),console.log(e.join(),"任务938")})),_this2.state={showFlag:!1,flag:!1,testId:0,typesVale:"new"!=_this2.props.testCouse?_this2.props.testCourseView.type:"01",subjectState:"new",subjectModal:"创建课程测验",keywords:""},_this2}return(0,_createClass2.default)(TestCourseCreate,[{key:"render",value:function(){var e=this,t=this.props.testCouse,a=this.props.form.getFieldDecorator;console.log("this.addSubject==",this.addSubject);var n=this.state.typesVale,r={labelCol:{span:2},wrapperCol:{span:22}},l=[{title:"序号",dataIndex:"sort"},{title:"题干",dataIndex:"questions",render:function(e){return _react.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"试题类型",dataIndex:"type",render:function(e,t){return _react.default.createElement("span",null,"01"===t.type&&_react.default.createElement("span",null,"单选题"),"02"===t.type&&_react.default.createElement("span",null,"多选题"),"03"===t.type&&_react.default.createElement("span",null,"判断题"))}},{title:"操作",dataIndex:"action",render:function(t,a){return _react.default.createElement("span",null,1!=a.sort&&_react.default.createElement("span",null,_react.default.createElement("a",{onClick:function(){return e.moveSubject(a.id,"up")}},"上移"),_react.default.createElement(_divider.default,{type:"vertical"})),a.sort!=e.props.subjectList.length&&_react.default.createElement("span",null,_react.default.createElement("a",{onClick:function(){return e.moveSubject(a.id,"down")}},"下移"),_react.default.createElement(_divider.default,{type:"vertical"})),_react.default.createElement("a",{onClick:function(){e.props.testCourseSubjectView({id:a.id},(function(t){e.setState({showFlag:!0,subjectState:"edit",subjectModal:"修改课程测验",subjectView:t.data,recordId:a.id})}))}},"修改"),_react.default.createElement(_divider.default,{type:"vertical"}),_react.default.createElement(_popconfirm.default,{title:"确定删除本道题目吗?",onConfirm:function(){return e.props.testSubjectDel({id:a.id},(function(){e.props.tesSubjectAction({id:e.props.subjectList[0].testId})}))}},_react.default.createElement("a",null,"删除")))}}],s=[{title:"序号",dataIndex:"sort"},{title:"题干",dataIndex:"questions",render:function(e){return _react.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"分数",dataIndex:"score",width:"10%",render:function(a,n){return _react.default.createElement(EditableCell,{value:a,sum:e.sum,key:Math.random(),recordId:n.id,onChange:e.onCellChange(n.id,"score"),testCouse:"look"==t&&t})}},{title:"试题类型",dataIndex:"type",render:function(e,t){return _react.default.createElement("span",null,"01"===t.type&&_react.default.createElement("span",null,"单选题"),"02"===t.type&&_react.default.createElement("span",null,"多选题"),"03"===t.type&&_react.default.createElement("span",null,"判断题"))}},{title:"操作",dataIndex:"action",render:function(t,a){return _react.default.createElement("span",null,1!=a.sort&&_react.default.createElement("span",null,_react.default.createElement("a",{onClick:function(){return e.moveSubject(a.id,"up")}},"上移"),_react.default.createElement(_divider.default,{type:"vertical"})),a.sort!=e.props.subjectList.length&&_react.default.createElement("span",null,_react.default.createElement("a",{onClick:function(){return e.moveSubject(a.id,"down")}},"下移"),_react.default.createElement(_divider.default,{type:"vertical"})),_react.default.createElement("a",{onClick:function(){e.props.testCourseSubjectView({id:a.id},(function(t){e.setState({showFlag:!0,subjectState:"edit",subjectModal:"修改课程测验",subjectView:t.data,recordId:a.id})}))}},"修改"),_react.default.createElement(_divider.default,{type:"vertical"}),_react.default.createElement(_popconfirm.default,{title:"确定删除本道题目吗?",onConfirm:function(){return e.props.testSubjectDel({id:a.id},(function(){e.props.tesSubjectAction({id:e.props.subjectList[0].testId})}))}},_react.default.createElement("a",null,"删除")))}}];"look"==t&&(l.pop(),s.pop());var u=[];console.log(this.props.testCourseView.keywords,"关键词"),"new"!=this.props.testCouse&&this.props.testCourseView.keywords&&(u=this.props.testCourseView.keywords.split(","));var i={defaultTags:u,getTags:this.getTags};return _react.default.createElement("div",null,_react.default.createElement(_form.default,{className:"test-course-search",onSubmit:this.handleSubmit},_react.default.createElement(_divider.default,{orientation:"left"},"基本信息"),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"测验名称："}),a("name",{rules:[{required:!0,message:"测验名称格式错误/不可为空"},{max:50,message:"最多可输入50个字符"}],initialValue:"new"!=this.props.testCouse?this.props.testCourseView.name:""})(_react.default.createElement(_input.default,{disabled:"look"==t,maxLength:51,placeholder:"请输入测验标题,50个字以内"}))),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"测验简介："}),a("desc",{rules:[{required:!1,max:120,message:"测验简介,120个字以内!"}],initialValue:"new"!=this.props.testCouse?this.props.testCourseView.desc:""})(_react.default.createElement(_input.default.TextArea,{disabled:"look"==t,placeholder:"请输入测验简介,120个字以内"}))),"look"==t?_react.default.createElement("div",null,"自定义关键词：",this.props.testCourseView.keywords):_react.default.createElement(FormItem,{label:"自定义关键词： ",labelCol:{span:3},wrapperCol:{span:20}},_react.default.createElement(_index.default,i)),_react.default.createElement(_divider.default,{orientation:"left"},"测验试题",_react.default.createElement("span",{style:{display:"inline-block",margin:"0px 0 0 10px",fontSize:"12px",color:"#c1c1c1"}},"确定选择测试类型后，可进行试题创建~")),_react.default.createElement(FormItem,{label:_react.default.createElement("span",null,"测验类型 ",_react.default.createElement(_tooltip.default,{placement:"topLeft",title:_react.default.createElement("div",null,_react.default.createElement("p",null,"过程性测验：针对一门课程里某章内容的总结测验"),_react.default.createElement("p",null,"总结性测验：针对一门课程所有内容的总结测验"))},_react.default.createElement(_icon.default,{type:"question-circle-o"}))),wrapperCol:{span:10},labelCol:{span:3}},a("types",{rules:[{required:!0,message:"请选择测验类型"}],initialValue:"new"!=this.props.testCouse?this.props.testCourseView.type:"01"})(_react.default.createElement(_select.default,{style:{width:120},onChange:this.typesChange,disabled:"look"==t},_react.default.createElement(_select.default.Option,{value:"01"},"过程性测验"),_react.default.createElement(_select.default.Option,{value:"02"},"总结性测验")))),_react.default.createElement(FormItem,{wrapperCol:{span:22},labelCol:{span:2},label:_react.default.createElement("span",null,_react.default.createElement("span",{style:{color:"red"}},"*"),"添加试题：")},a("subjectAry",{rules:[{required:!1,message:"至少添加一道试题！"}]})(_react.default.createElement("div",null,_react.default.createElement(_button.default,{style:{marginLeft:"-4px"},disabled:"look"==t,type:"primary",onClick:function(){return e.setState({showFlag:!0,subjectState:"new",subjectModal:"新增课程测验"},(function(){e.setState({testId:e.addSubject&&e.addSubject.state.testId,qType:"01"})}))}},"添加试题"),_react.default.createElement("span",{style:{float:"right",fontSize:"12px",color:"#c1c1c1"}},"* 总结性测验试题添加完毕记得填写对应分值哦~")))),_react.default.createElement(_table.default,{rowKey:function(e){return e.id},locale:{emptyText:"至少添加一道试题哦"},columns:"01"==n?l:s,pagination:!1,dataSource:this.props.subjectList}),_react.default.createElement(_divider.default,{orientation:"left"},"测验策略"),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"题目随机"}),a("subjectRandomStrategy",{initialValue:"new"!=this.props.testCouse?this.props.testCourseView.subjectRandomStrategy?1:0:1})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"否"),_react.default.createElement(_radio.default,{value:1},"是")))),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"选项随机"}),a("optionRandomStrategy",{initialValue:"new"!=this.props.testCouse?this.props.testCourseView.optionRandomStrategy?1:0:1})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"否"),_react.default.createElement(_radio.default,{value:1},"是")))),"01"==n&&_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"通过设置"}),a("passedSetting",{initialValue:"new"!=this.props.testCouse&&this.props.testCourseView.passedSetting?1:0})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"允许"),_react.default.createElement(_radio.default,{value:1},"不允许"),_react.default.createElement("span",null,_react.default.createElement(_tooltip.default,{placement:"topLeft",title:_react.default.createElement("div",null,_react.default.createElement("p",null,"选择“不允许”表示学员需答对所有试题才能通过测验"),_react.default.createElement("p",null,"选择“允许”表示学员提交试题即可通过测验"))},_react.default.createElement(_icon.default,{type:"question-circle-o"})))))),"02"==n&&_react.default.createElement("div",null,_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"解析反馈"}),a("explainFeedbackStrategy",{initialValue:"new"!=this.props.testCouse&&this.props.testCourseView.explainFeedbackStrategy?1:0})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"否"),_react.default.createElement(_radio.default,{value:1},"是")))),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:"正误反馈"}),a("resultFeedbackStrategy",{initialValue:"new"!=this.props.testCouse&&this.props.testCourseView.resultFeedbackStrategy?1:0})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"否"),_react.default.createElement(_radio.default,{value:1},"是")))),_react.default.createElement(FormItem,(0,_extends2.default)({},r,{label:_react.default.createElement("span",null,"答案反馈")}),a("answerFeedbackStrategy",{initialValue:"new"!=this.props.testCouse&&this.props.testCourseView.answerFeedbackStrategy?1:0})(_react.default.createElement(RadioGroup,{disabled:"look"==t},_react.default.createElement(_radio.default,{value:0},"否"),_react.default.createElement(_radio.default,{value:1},"是")))),_react.default.createElement(FormItem,{label:"合格分数：",wrapperCol:{span:13},labelCol:{span:11},style:{display:"inline-block"}},a("passingScore",{rules:[{required:!0,message:" 合格分数不可不填"}],initialValue:"new"!=this.props.testCouse?this.props.testCourseView.passingScore:""})(_react.default.createElement(_inputNumber.default,{disabled:"look"==t,min:0,max:this.sum()}))),_react.default.createElement("span",{key:Math.random(),style:{fontSize:"12px",color:"#c1c1c1",marginTop:"10",marginLeft:"20px",display:"inline-block"}},"(当前总分`",this.sum(),"`分)",_react.default.createElement("span",{style:{fontSize:"12px",color:"red",margin:"0 10px"}},"合格分数不得大于试题总分数！"))),"look"!=t&&_react.default.createElement("div",{style:{textAlign:"center"}},_react.default.createElement(_button.default,{type:"primary",style:{marginTop:"4px"},onClick:this.handleSubmit},"保存"))),_react.default.createElement(_modal.default,{visible:this.state.showFlag,onCancel:this.closeModal,maskClosable:!1,width:800,footer:null,title:this.state.subjectModal,destroyOnClose:!0},_react.default.createElement(_AddSubject.default,{onRef:function(t){return e.addSubject=t},testCourseAddSubject:this.props.testCourseAddSubject,subjectList:this.props.subjectList,tesSubjectAction:this.props.tesSubjectAction,closeModal:this.closeModal,qType:"new"==this.props.subjectState&&this.state.qType,testCourseView:"edit"==this.props.testCouse&&this.props.testCourseView,testCouse:"edit"==this.props.testCouse&&this.props.testCouse,editTestId:"edit"==this.props.testCouse&&this.props.editTestId,subjectState:this.state.subjectState,subjectView:"edit"==this.state.subjectState?this.state.subjectView:"",recordId:"edit"==this.state.subjectState&&this.state.recordId})))}}]),TestCourseCreate}(_react.Component),_default=_form.default.create()(TestCourseCreate);exports.default=_default},1662:function(e,t,a){"use strict";var n=a(4),r=a(0);a(1024),a(40),a(143),a(51),a(633),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(574);var l=r(a(565));a(578);var s=r(a(570));a(140);var u=r(a(535)),i=r(a(98));a(61);var o=r(a(62)),c=r(a(29)),d=r(a(30)),p=r(a(59)),f=r(a(32)),m=r(a(33)),h=r(a(31)),g=r(a(2));a(537);var _=r(a(536));a(540);var y=r(a(539));a(556);var v=r(a(553)),b=n(a(1)),E=r(a(1663)),S=r(a(663)),w=(a(52),r(a(1664)));function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=v.default.Button,T=v.default.Group,j=y.default.Item,I=_.default.TextArea,x=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(C()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;(0,c.default)(this,n),t=a.call(this,e),(0,g.default)((0,p.default)(t),"clearTypeChange",(function(){t.setState({questionType:"01",logourl:"",randoms:Math.random()})})),(0,g.default)((0,p.default)(t),"getOptions",(function(e,a,n){var r="";"null"===a?t.setState({requiredSelect:!1}):t.setState({requiredSelect:!0});var l=e.every((function(e){return""!=e.content}));if(t.setState({requiredOption:l}),"[object Array]"!==Object.prototype.toString.call(a)){var s=[];e.length>0&&(s=1==e[0].isAnswer?e.map((function(e,t){return{answerOption:e.content,testSubjectId:t,answerResult:e.isAnswer,sort:t+1}})):e.map((function(e,t){return r=e.isAnswer==a?1:0,{answerOption:e.content,testSubjectId:t,answerResult:r,sort:t+1}}))),console.log("检测打印变量=select ",n),void 0===n?t.setState({selectOptionsFlag:!0}):t.setState({selectOptionsFlag:!1}),t.setState({options:s})}else{void 0===n?t.setState({selectOptionsFlag:!0}):t.setState({selectOptionsFlag:!1});var u=[];e.length>0&&(u=e.map((function(e,t){return{answerOption:e.content,testSubjectId:t,answerResult:e.isAnswer,sort:t+1,typeSatate:"multiple"}}))),console.log("检测打印多选=arr ",u),t.setState({options:u})}})),(0,g.default)((0,p.default)(t),"addQuestionSubmit",(function(e){var a=t.props,n=a.testCourseAddSubject,r=(a.subjectList,a.closeModal),l=a.testCouse,s=(a.subjectState,a.editTestId),u=a.recordId,i=t.state,c=(i.id,i.questionType),d=i.topic,p=i.analysis,f=i.logourl,m=i.defaultUrl,h=void 0===m?[]:m,g=i.selectOptionsFlag,_=t.state,y=_.options,v=(_.testId,_.requiredSelect),b=_.requiredOption;return y.every((function(e){return 0===e.answerResult}))?o.default.error("选项必选,或正确选项的内容不能为空!!"):g?o.default.error("选项必选"):!1===v?o.default.error("选项必选!！"):!1===b?o.default.error("选项内容必填!！"):void("edit"==l?t.props.form.validateFields((function(a,l){if(!a){if(t.state.options[0].typeSatate){for(var i=[],m=0;m<t.state.options.length;m++)1==t.state.options[m].answerResult&&i.push(t.state.options[m]);if(i.length<2)return o.default.error("题目为多选必须选择两个选项!！")}if(!a){t.clearQuestion();var g={testId:s,questions:l.topic?l.topic:d,id:u||"",type:l.questionType?l.questionType:c,explain:l.analysis?l.analysis:p,img:f||(h.length?h[0].url:"")};"edit"==t.props.subjectState?_option_state?g.optionVOS=t.state.options:g.optionVOS=t.props.subjectView.optionVOS:g.optionVOS=t.state.options,n(g,(function(a){e&&r(),t.setState({defaultUrl:[],logoState:!1}),t.props.tesSubjectAction({id:a.data.testId})}))}}})):t.props.form.validateFields((function(a,l){if(!a){if(t.state.options[0].typeSatate){for(var s=[],i=0;i<t.state.options.length;i++)1==t.state.options[i].answerResult&&s.push(t.state.options[i]);if(s.length<2)return o.default.error("题目为多选必须选择两个选项!！")}if(!a){t.forceUpdate(),t.clearQuestion();var m={testId:t.props.subjectList.length?t.props.subjectList[0].testId:"",questions:l.topic?l.topic:d,id:u||"",type:l.questionType?l.questionType:c,explain:l.analysis?l.analysis:p,img:f||(h.length?h[0].url:"")};"edit"==t.props.subjectState?_option_state?m.optionVOS=t.state.options:m.optionVOS=t.props.subjectView.optionVOS:m.optionVOS=t.state.options,n(m,(function(a){e&&r(),t.setState({testId:a.data.testId,defaultUrl:[],logoState:!1}),t.props.tesSubjectAction({id:a.data.testId})}))}}})))})),(0,g.default)((0,p.default)(t),"addNext",(function(){t.addQuestionSubmit(!1)})),(0,g.default)((0,p.default)(t),"clearQuestion",(function(){t.props.form.resetFields(),t.clearTypeChange(),t.forceUpdate(),t.setState({fileList:[],fileNames:[],logourl:"",defaultUrl:[]})})),(0,g.default)((0,p.default)(t),"handleChange",(function(e){e.event&&t.setState({uploadPercent:e.event.percent.toFixed(0)-0});var a=e.fileList;a=a.slice(-1),"done"===e.file.status&&(o.default.success("上传成功"),t.setState({fileLists:a,uploadPercent:100,uploadProgress:!1,playLoading:!1})),"error"===e.file.status&&(o.default.error("上传失败，请重新尝试"),t.setState({fileLists:[],uploadProgress:!1}))})),(0,g.default)((0,p.default)(t),"normFile",(function(e){return Array.isArray(e)?e:e&&t.state.fileLists}));var r=[];return r="edit"==e.subjectState&&e.subjectView.img?[{uid:1,status:"done",reponse:"Server Error 500",url:e.subjectView.img}]:[],t.tagsComponent="",t.optionsComponent="",t.state={formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},formButtonLayout:{labelCol:{span:0},wrapperCol:{span:24}},fileNames:[],fileList:[],questionType:"01",importVisible:!1,tags:[],id:"",topic:"",analysis:"",options:[{content:"",isAnswer:1},{content:"",isAnswer:0}],typeRight:!1,fileLists:[],uploadPercent:0,uploadProgress:!1,playLoading:!1,originalFile:null,randoms:Math.random(),logourl:"",defaultUrl:r,logoState:!1,selectOptionsFlag:!1,requiredSelect:!0,requiredOption:!0},t.addQuestionSubmit=t.addQuestionSubmit.bind((0,p.default)(t)),t.onTypeChange=t.onTypeChange.bind((0,p.default)(t)),t.onTypeChange=t.onTypeChange.bind((0,p.default)(t)),t.getOptions=t.getOptions.bind((0,p.default)(t)),t.getTopic=t.getTopic.bind((0,p.default)(t)),t.getAnalysis=t.getAnalysis.bind((0,p.default)(t)),t.addNext=t.addNext.bind((0,p.default)(t)),t.clearQuestion=t.clearQuestion.bind((0,p.default)(t)),t.importFiles=t.importFiles.bind((0,p.default)(t)),t.getFileList=t.getFileList.bind((0,p.default)(t)),t.initOptions=t.initOptions.bind((0,p.default)(t)),t.initTags=t.initTags.bind((0,p.default)(t)),t.closeImportFiles=t.closeImportFiles.bind((0,p.default)(t)),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.onRef(this),"edit"==this.props.testCouse&&this.setState({editTestId:this.props.editTestId}),"edit"==this.props.subjectState&&this.setState({recordId:this.props.recordId}),this.state.id!=this.props.id&&this.setState({id:this.props.id})}},{key:"onTypeChange",value:function(e){this.setState({questionType:e.target.value,randoms:Math.random()})}},{key:"getTopic",value:function(e){e.target.value.length<500?this.setState({topic:e.target.value}):o.default.warning("题干长度不能超过500个字！")}},{key:"getAnalysis",value:function(e){e.target.value.length<500?this.setState({analysis:e.target.value}):o.default.warning("题目解析长度不能超过500个字！")}},{key:"getFileList",value:function(e){var t=this.state,a=t.fileList,n=t.fileNames;a.push(e.url),n.push(e.name),this.setState({fileList:a,fileNames:n}),this.closeImportFiles()}},{key:"initOptions",value:function(e){this.optionsComponent=e}},{key:"initTags",value:function(e){this.tagsComponent=e}},{key:"importFiles",value:function(){this.setState({importVisible:!0})}},{key:"closeImportFiles",value:function(){this.setState({importVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.subjectState,n=(t.subjectView,{name:"选择缩略图：",required:!1,layout:{labelCol:{span:5},wrapperCol:{span:14}},defaultUrl:this.state.defaultUrl,getUrl:function(t){e.setState({logourl:t})}}),r=this.props.form.getFieldDecorator;return b.default.createElement("div",null,b.default.createElement(l.default,null,b.default.createElement(s.default,{span:24},b.default.createElement(y.default,{layout:"horizontal",style:{marginTop:15}},"edit"!=a&&b.default.createElement(j,(0,i.default)({label:"题型"},this.state.formItemLayout),r("questionType",{initialValue:"edit"==a?this.props.subjectView.type:this.state.questionType,rules:[{required:!0,message:"请选择题型"}]})(b.default.createElement(T,{onChange:this.onTypeChange},b.default.createElement(k,{value:"01"},"单选题"),b.default.createElement(k,{value:"02"},"多选题"),b.default.createElement(k,{value:"03"},"判断题")))),"edit"==a&&"01"==this.props.subjectView.type&&b.default.createElement(j,(0,i.default)({label:"题型"},this.state.formItemLayout),r("questionType",{initialValue:"edit"==a?this.props.subjectView.type:this.state.questionType,rules:[{required:!0,message:"请选择题型"}]})(b.default.createElement(T,{onChange:this.onTypeChange},b.default.createElement(k,{value:"01"},"单选题")))),"edit"==a&&"02"==this.props.subjectView.type&&b.default.createElement(j,(0,i.default)({label:"题型"},this.state.formItemLayout),r("questionType",{initialValue:"02",rules:[{required:!0,message:"请选择题型"}]})(b.default.createElement(T,{onChange:this.onTypeChange},b.default.createElement(k,{value:"02"},"多选题")))),"edit"==a&&"03"==this.props.subjectView.type&&b.default.createElement(j,(0,i.default)({label:"题型"},this.state.formItemLayout),r("questionType",{initialValue:"edit"==a?this.props.subjectView.type:this.state.questionType,rules:[{required:!0,message:"请选择题型"}]})(b.default.createElement(T,{onChange:this.onTypeChange},b.default.createElement(k,{value:"03"},"判断题")))),b.default.createElement(j,(0,i.default)({label:"题干"},this.state.formItemLayout),r("topic",{rules:[{required:!0,message:"请输入题干"}],initialValue:"edit"==a?this.props.subjectView.questions:""})(b.default.createElement(I,{placeholder:"请输入题干，200个字以内",maxLength:200,onChange:this.getTopic})),b.default.createElement("br",null)),b.default.createElement(j,null,r("img",{})(b.default.createElement(S.default,(0,i.default)({},n,{logoState:this.state.logoState,ref:function(t){return e.validate=t},testCourse:!0})))),b.default.createElement("div",{style:{margin:"-46px 0 4px 158px"}},b.default.createElement("span",null,"图片最佳尺寸比例：16:9，支持jpg、png、jpeg，大小3M以内")),b.default.createElement(j,(0,i.default)({label:"选项"},this.state.formItemLayout),r("options",{rules:[{required:"new"==a,message:"请输入选项"}]})(b.default.createElement("div",null,"new"==a&&b.default.createElement(E.default,{key:this.state.randoms,init:this.initOptions,type:this.state.questionType,getData:this.getOptions}),"new"!=a&&b.default.createElement(w.default,{getData:this.getOptions,subjectState:a,defaultOptions:"edit"==a&&this.props.subjectView.optionVOS,type:this.state.questionType,initialValue:"edit"==a?this.props.subjectView:""})))),b.default.createElement(j,(0,i.default)({label:"题目解析"},this.state.formItemLayout),r("analysis",{rules:[],initialValue:"edit"==a?this.props.subjectView.explain:""})(b.default.createElement(I,{placeholder:"请输入题目解析,限制字数500字以内",maxLength:500,onChange:this.getAnalysis}))),b.default.createElement(j,(0,i.default)({label:""},this.state.formButtonLayout),r("button",{rules:[]})(b.default.createElement("div",{style:{textAlign:"center"}},b.default.createElement(u.default,{type:"primary",style:{marginRight:10},onClick:function(){return e.addQuestionSubmit(!0)}},"保存"))))))))}}]),n}(b.Component),V=y.default.create()(x);t.default=V},1663:function(e,t,a){"use strict";var n=a(4),r=a(0);a(3),a(227),a(40),a(20),a(34),a(23),a(140);var l=r(a(535));a(564);var s=r(a(563));a(537);var u=r(a(536));a(648);var i=r(a(619));a(61);var o=r(a(62)),c=r(a(29)),d=r(a(30)),p=r(a(59)),f=r(a(32)),m=r(a(33)),h=r(a(31)),g=r(a(2));a(712);var _=r(a(643));a(556);var y=r(a(553));a(540);var v=r(a(539)),b=n(a(1));function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=v.default.Item,w=y.default.Group,C=_.default.Group,k=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(E()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),t=a.call(this,e),(0,g.default)((0,p.default)(t),"change",(function(e,a){var n=t.state.options,r=t.state.rId;n[a].content=e.target.value,t.setState({options:n});var l=t.props.form.getFieldValue("select");console.log("检测打印变量= select",l),t.props.getData(n,r,l)})),(0,g.default)((0,p.default)(t),"trueFalsechange",(function(e,a){var n=t.state.TrueOrFalse,r=t.state.rId;n[a].content=e.target.value,t.setState({options:n});var l=t.props.form.getFieldValue("select");console.log("检测打印变量= select",l),t.props.getData(n,r,l)})),(0,g.default)((0,p.default)(t),"delete",(function(e,a){var n=t.state,r=n.options,l=n.right;if(r.length<=2)o.default.info("选项不能少于两个");else if(a&&1==a){var s=r.filter((function(t,a){return a!=e&&(l=e),a!=e})).map((function(t,a){return a==e?{isAnswer:e,content:t.content}:{isAnswer:a,content:t.content}}));t.setState({options:s,right:l,rId:l}),t.props.getData(s,l)}else{var u=t.props.form;s=r.filter((function(t,a){return a!=e}));var i=u.getFieldValue("select")&&u.getFieldValue("select").filter((function(t,a){return t!==e})),c=i&&i.map((function(e,t){return e!==t?0===t?t:e-1:e}));console.log("检测打印变量=arl1 ",c),u.setFieldsValue({select:c}),console.log("检测打印变量=arr.leng ",s.length);var d=u.getFieldValue("select")&&u.getFieldValue("select").filter((function(t,a){return t!==e}));console.log("检测打印变量222222=select ",d),t.setState({options:s}),t.props.getData(s,s)}})),(0,g.default)((0,p.default)(t),"add",(function(){var e=t.state,a=e.options,n=e.rId,r=t.props.form,l=a.length;console.log("检测打印变量=form.getFieldValue('select') ",r.getFieldValue("select")),"[object Array]"===Object.prototype.toString.call(n)?a.push({isAnswer:0,content:""}):a.push({isAnswer:l,content:""}),t.setState({options:a})})),(0,g.default)((0,p.default)(t),"select",(function(e){var a=e.target&&e.target.value;if(t.setState({right:a}),console.log("检测打印变量=e ",e),2==t.props.type){e.length<2&&o.default.info("题目为多选必须选择两个选项");var n=t.state.options.map((function(e,t){return{isAnswer:0,content:e.content}}));e.map((function(e){n[e].isAnswer=1})),t.setState({options:n,rightGroup:e,rId:e}),t.props.getData(n,e,e)}else if(1==t.props.type){t.props.form;var r=parseInt(e.target.value);n=t.state.options.map((function(e,t){return{isAnswer:t,content:e.content}}));t.setState({options:n,right:r,rId:r}),t.props.getData(n,a,r)}else if(3==t.props.type){r=parseInt(e.target.value),n=t.state.TrueOrFalse.map((function(e,t){return{isAnswer:t,content:e.content}}));t.setState({options:n,right:r,rId:r}),t.props.getData(n,a,r)}})),(0,g.default)((0,p.default)(t),"renderRight",(function(){return t.state.options.map((function(e,t){if(1==e.isAnswer)return b.default.createElement(i.default,{key:t,color:"green"},t+1)}))})),(0,g.default)((0,p.default)(t),"optionSubmit",(function(){t.props.form.validateFields((function(e,t){e||console.log("检测打印变量=fieldsValue ",t)}))})),(0,g.default)((0,p.default)(t),"renderOptions",(function(){var e=t.props.form.getFieldDecorator;return 2==t.props.type?"look"==t.props.pattern?t.state.options.map((function(a,n){return b.default.createElement(v.default,{layout:"inline",key:n+t.state.update,onSubmit:t.optionSubmit},b.default.createElement(S,null,e("content-"+n,{rules:[{required:!0,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{disabled:!0,style:{width:480,marginBottom:"10px"},placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,onChange:function(e){return t.change(e,n)}}))))})):t.state.options.map((function(a,n){return b.default.createElement(v.default,{layout:"inline",key:n,onSubmit:t.optionSubmit},b.default.createElement(_.default,{value:n},n+1),b.default.createElement(S,null,e("content-"+Math.random(),{rules:[{required:!0,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,n)}}))),b.default.createElement(S,null,b.default.createElement(s.default,{title:"删除选项可能造成已设置的正确选项错误，确认删除?",onConfirm:function(){return t.delete(n)},okText:"确定",cancelText:"取消"},b.default.createElement("a",null,"删除"))))})):1==t.props.type?"look"==t.props.pattern?t.state.options.map((function(a,n){return b.default.createElement(v.default,{layout:"inline",key:n+t.state.update,onSubmit:t.optionSubmit},b.default.createElement(S,null,b.default.createElement(y.default,{value:n},n+1)),b.default.createElement(S,null,e("content-"+n,{rules:[{required:!0,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,disabled:!0,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,n)}}))))})):t.state.options.map((function(a,n){return console.log("检测打印变量=index ",n),b.default.createElement(v.default,{layout:"inline",key:n+t.state.update,onSubmit:t.optionSubmit},b.default.createElement(S,null,b.default.createElement(y.default,{value:n},n+1)),b.default.createElement(S,null,e("content-"+n,{rules:[{required:!0,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,n)}}))),b.default.createElement(S,null,b.default.createElement(s.default,{title:"删除选项可能造成已设置的正确选项错误，确认删除?",onConfirm:function(){return t.delete(n,t.props.type)},okText:"确定",cancelText:"取消"},b.default.createElement("a",null,"删除"))))})):3==t.props.type?"look"==t.props.pattern?t.state.options.map((function(a,n){return b.default.createElement(v.default,{layout:"inline",key:n+t.state.update,onSubmit:t.optionSubmit},b.default.createElement(S,null,b.default.createElement(y.default,{value:n},n+1)),b.default.createElement(S,null,e("content-"+n,{rules:[{required:!0,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,disabled:!0,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,n)}}))))})):t.state.TrueOrFalse.map((function(a,n){return b.default.createElement(v.default,{layout:"inline",key:n+t.state.update,onSubmit:t.optionSubmit},b.default.createElement(S,null,b.default.createElement(y.default,{value:n},n+1)),b.default.createElement(S,null,e("content-"+n,{rules:[{required:!1,message:"请输入内容!"}],initialValue:a.content})(b.default.createElement(u.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.trueFalsechange(e,n)}}))))})):void 0})),t.state={options:[{isAnswer:"",content:""},{isAnswer:"",content:""},{isAnswer:"",content:""},{isAnswer:"",content:""}],TrueOrFalse:[{isAnswer:0,content:""},{isAnswer:1,content:""}],right:"null",rightGroup:[0],update:0,rId:"",stat:!1,arrList:[],opTime:"1"},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.state.options;var e=this.props.defaultOptions;if(e&&e.length>0){var t,a,n=e.map((function(e){return{content:e.content,isAnswer:e.isAnswer}}));2==this.props.type?t=e.map((function(e){if(1==e.isAnswer)return index})):a=(a=e.map((function(e,t){if(1==e.isAnswer)return t}))).join(""),console.log(a),this.setState({options:n,rightGroup:t,right:a})}}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return 2==this.props.type?b.default.createElement("div",null,b.default.createElement(v.default,{layout:"horizontal",key:this.state.update},b.default.createElement(S,null),b.default.createElement(S,null,e("select",{rules:[{required:!0,message:"请输入内容!"}]})(b.default.createElement(C,{onChange:this.select},this.renderOptions()))),b.default.createElement(S,null),"look"==this.props.pattern?"":b.default.createElement(S,null,b.default.createElement(l.default,{onClick:this.add},"增加选项")))):1==this.props.type?b.default.createElement("div",null,b.default.createElement(v.default,{layout:"horizontal",key:this.state.update},b.default.createElement(S,null),b.default.createElement(S,null,e("select",{rules:[{required:!0,message:"请输入选项!"}]})(b.default.createElement(w,{onChange:this.select},this.renderOptions()))),"look"==this.props.pattern?"":b.default.createElement(S,null,b.default.createElement(l.default,{onClick:this.add},"增加选项")))):3==this.props.type?b.default.createElement("div",null,b.default.createElement(v.default,{layout:"horizontal",key:this.state.update},b.default.createElement(S,null),b.default.createElement(S,null,e("select",{rules:[{required:!0,message:"请输入选项!"}]})(b.default.createElement(w,{onChange:this.select},this.renderOptions()))))):void 0}}]),n}(b.Component),T=v.default.create()(k);e.exports=T},1664:function(e,t,a){"use strict";var n=a(4),r=a(0);a(3),a(227),a(40),a(620),a(20),a(34),a(23),a(537);var l=r(a(536));a(61);var s=r(a(62)),u=r(a(29)),i=r(a(30)),o=r(a(59)),c=r(a(32)),d=r(a(33)),p=r(a(31)),f=r(a(2));a(712);var m=r(a(643));a(556);var h=r(a(553));a(540);var g=r(a(539)),_=n(a(1));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=g.default.Item,b=h.default.Group,E=m.default.Group,S=function(e){(0,c.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(y()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,u.default)(this,n),t=a.call(this,e),(0,f.default)((0,o.default)(t),"change",(function(e,a){window._option_state=!0;var n=t.state.options,r="";r=2!=t.props.initialValue.type?t.state.right:t.state.rightGroup,n[a].content=e.target.value,t.setState({options:n});var l=t.props.form.getFieldValue("select");console.log("检测打印变量= select",l),console.log("检测打印变量=options ",n);var s=t.props;s.defaultOptions;"01"==s.initialValue.type&&(r=1),console.log("检测打印变量=right ",r),t.props.getData(n,r,l)})),(0,f.default)((0,o.default)(t),"trueFalsechange",(function(e,a){window._option_state=!0;var n=t.state.options,r=t.state.right;n[a].content=e.target.value,t.setState({options:n});var l=t.props.form.getFieldValue("select");console.log("检测打印变量= select",l),t.props.getData(n,r,l)})),(0,f.default)((0,o.default)(t),"delete",(function(e){var a=t.state,n=a.options,r=a.right;if(n.length<=2)s.default.info("选项不能少于两个");else{var l=n.filter((function(t,a){return a!=e}));t.setState({options:l,keyTiem:(new Date).getTime()},(function(){console.log("检测打印变量= this.state.options",t.state.options),t.props.getData(t.state.options,r)}))}})),(0,f.default)((0,o.default)(t),"select",(function(e){window._option_state=!0;var a=e.target&&e.target.value;if(t.setState({right:a}),"02"==t.props.initialValue.type){var n=t.state.options.map((function(e,t){return{isAnswer:0,content:e.content}}));e.map((function(e){null!=e&&(n[e].isAnswer=1)})),t.setState({options:n,rightGroup:e,rId:e}),t.props.getData(n,e,e)}else if("01"==t.props.initialValue.type){var r=parseInt(e.target.value);n=t.state.options.map((function(e,t){return{isAnswer:t,content:e.content}}));t.setState({options:n,right:r,rId:r}),t.props.getData(n,a,r)}else if("03"==t.props.initialValue.type){r=parseInt(e.target.value),n=t.state.options.map((function(e,t){return{isAnswer:t,content:e.content}}));t.setState({options:n,right:r,rId:r}),t.props.getData(n,a,r)}})),(0,f.default)((0,o.default)(t),"renderOptions",(function(){var e=t.props.initialValue,a=e.type,n=e.optionVOS,r=t.props.form,s=r.getFieldDecorator;r.getFieldsValue;return"02"==a?"look"==t.props.pattern?n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.update,onSubmit:t.optionSubmit},_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,id:"userName",disabled:!0,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,a)}}))))})):n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.update,onSubmit:t.optionSubmit},_.default.createElement(v,null,_.default.createElement(m.default,{value:a},a+1)),_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,a)}}))),_.default.createElement(v,null))})):"01"==a?"look"==t.props.pattern?n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.update,onSubmit:t.optionSubmit},_.default.createElement(v,null,_.default.createElement(h.default,{value:a},a+1)),_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,disabled:!0,style:{width:480,marginBottom:"10px"},onChange:function(e){return t.change(e,a)}}))))})):(console.log("检测打印变量=keyTiem ",t.state.keyTiem),n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.keyTiem,onSubmit:t.optionSubmit},_.default.createElement(v,null,_.default.createElement(h.default,{value:a},a+1)),_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{style:{width:480,marginBottom:"10px"},placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,onChange:function(e){return t.change(e,a)}}))),_.default.createElement(v,null))}))):"03"==a?"look"==t.props.pattern?n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.update,onSubmit:t.optionSubmit},_.default.createElement(v,null,_.default.createElement(h.default,{value:a},a+1)),_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{disabled:!0,style:{width:480,marginBottom:"10px"},placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,onChange:function(e){return t.change(e,a)}}))))})):n.map((function(e,a){return _.default.createElement(g.default,{layout:"inline",key:a+t.state.update,onSubmit:t.optionSubmit},_.default.createElement(v,null,_.default.createElement(h.default,{value:a},a+1)),_.default.createElement(v,null,s("content-"+a,{rules:[{required:!1,message:"请输入内容!"}],initialValue:e.answerOption})(_.default.createElement(l.default.TextArea,{style:{width:480,marginBottom:"10px"},placeholder:"请输入选项内容,限制字数100字以内",maxLength:100,onChange:function(e){return t.trueFalsechange(e,a)}}))))})):void 0})),t.state={options:[{isAnswer:1,content:""},{isAnswer:0,content:""},{isAnswer:2,content:""},{isAnswer:3,content:""}],TrueOrFalse:[{isAnswer:0,content:""},{isAnswer:1,content:""}],right:0,rightGroup:[0],update:"",rId:"null",keyTiem:"0"},t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){window._option_state=!1,setTimeout((function(){try{var e=document.getElementById("userName");e.focus(),e.select()}catch(e){}}),200);this.state.options;var e=this.props,t=e.defaultOptions,a=e.initialValue;if(t&&t.length>0){var n,r,l=t.map((function(e){return{content:e.answerOption,isAnswer:e.answerResult?1:0}}));"02"==a.type?n=t.map((function(e,t){if(e.answerResult)return t})):r=(r=t.map((function(e,t){if(1==e.answerResult)return t}))).join(""),console.log("检测打印变量=str ",r),this.setState({options:l,rightGroup:n,right:r})}}},{key:"render",value:function(){var e=this.props.initialValue.type,t=this.props.form.getFieldDecorator;return"02"==e?_.default.createElement("div",null,_.default.createElement(g.default,{layout:"horizontal",key:this.state.update},_.default.createElement(v,null,t("select",{rules:[{required:!0,message:"请输入内容!"}],initialValue:this.state.rightGroup})(_.default.createElement(E,{onChange:this.select},this.renderOptions()))))):"01"==e?(console.log("检测打印变量=this.state.keyTiem ",this.state.keyTiem),_.default.createElement("div",null,_.default.createElement(g.default,{layout:"horizontal",key:this.state.keyTiem},_.default.createElement(v,null,t("select",{rules:[{required:!0,message:"请输入选项!"}],initialValue:this.state.right?Number(this.state.right):"DDDD"})(_.default.createElement(b,{onChange:this.select},this.renderOptions())))))):"03"==e?_.default.createElement("div",null,_.default.createElement(g.default,{layout:"horizontal",key:this.state.update},_.default.createElement(v,null,t("select",{rules:[{required:!0,message:"请输入选项!"}],initialValue:+this.state.right})(_.default.createElement(b,{onChange:this.select},this.renderOptions()))))):void 0}}]),n}(_.Component),w=g.default.create()(S);e.exports=w},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},553:function(e,t,a){e.exports=a(11)(206)},561:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:u.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,n=!1,r=!1;e?(n=e.needTranscode,r=e.type,a="".concat(o,"/upload/policy?needTranscode=").concat(n,"&type=").concat(r,"&date=").concat(new Date)):a="".concat(o,"/upload/policy?date=").concat(new Date);return function(e){return(0,l.default)({url:a}).then((function(a){if("1000"===a.code){var n=JSON.parse(a.data);e({type:u.GET_UPLOAD_PARAM,data:n}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,l.default)({videoUpload:c,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:u.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,l.default)({videoPlay:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:u.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:u.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:u.CLEARUPLOAD})}};var l=r(a(78)),s=r(a(587)),u=n(a(231)),i=s.default.common,o=i.ossUrl,c=i.videoUpload,d=i.videoPlay},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},565:function(e,t,a){e.exports=a(11)(170)},570:function(e,t,a){e.exports=a(11)(99)},571:function(e,t,a){e.exports=a(11)(912)},574:function(e,t,a){"use strict";a.r(t);a(26),a(584)},578:function(e,t,a){"use strict";a.r(t);a(26),a(584)},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={common:{ossUrl:"GET ".concat(r.default.ossUrl),videoUpload:"POST ".concat(r.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(r.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(r.default.ossUrl,"/upload/policy")}};t.default=l},590:function(e,t,a){"use strict";a.r(t);a(26),a(597)},591:function(e,t,a){e.exports=a(11)(819)},597:function(e,t,a){},616:function(e,t,a){"use strict";a.r(t);a(26),a(652)},617:function(e,t,a){e.exports=a(11)(824)},619:function(e,t,a){e.exports=a(11)(415)},620:function(e,t,a){"use strict";var n=a(19),r=a(16),l=a(85),s=a(36),u=a(21),i=a(45),o=a(153),c=a(83),d=a(14),p=a(66),f=a(80).f,m=a(49).f,h=a(22).f,g=a(236).trim,_=r.Number,y=_.prototype,v="Number"==i(p(y)),b=function(e){var t,a,n,r,l,s,u,i,o=c(e,!1);if("string"==typeof o&&o.length>2)if(43===(t=(o=g(o)).charCodeAt(0))||45===t){if(88===(a=o.charCodeAt(2))||120===a)return NaN}else if(48===t){switch(o.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+o}for(s=(l=o.slice(2)).length,u=0;u<s;u++)if((i=l.charCodeAt(u))<48||i>r)return NaN;return parseInt(l,n)}return+o};if(l("Number",!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var E,S=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof S&&(v?d((function(){y.valueOf.call(a)})):"Number"!=i(a))?o(new _(b(t)),a,S):b(t)},w=n?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;w.length>C;C++)u(_,E=w[C])&&!u(S,E)&&h(S,E,m(_,E));S.prototype=y,y.constructor=S,s(r,"Number",S)}},633:function(e,t,a){"use strict";var n=a(12),r=a(64),l=a(650),s=a(651),u=a(14),i=1..toFixed,o=Math.floor,c=function(e,t,a){return 0===t?a:t%2==1?c(e,t-1,a*e):c(e*e,t/2,a)};n({target:"Number",proto:!0,forced:i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!u((function(){i.call({})}))},{toFixed:function(e){var t,a,n,u,i=l(this),d=r(e),p=[0,0,0,0,0,0],f="",m="0",h=function(e,t){for(var a=-1,n=t;++a<6;)n+=e*p[a],p[a]=n%1e7,n=o(n/1e7)},g=function(e){for(var t=6,a=0;--t>=0;)a+=p[t],p[t]=o(a/e),a=a%e*1e7},_=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==p[e]){var a=String(p[e]);t=""===t?a:t+s.call("0",7-a.length)+a}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(f="-",i=-i),i>1e-21)if(a=(t=function(e){for(var t=0,a=e;a>=4096;)t+=12,a/=4096;for(;a>=2;)t+=1,a/=2;return t}(i*c(2,69,1))-69)<0?i*c(2,-t,1):i/c(2,t,1),a*=4503599627370496,(t=52-t)>0){for(h(0,a),n=d;n>=7;)h(1e7,0),n-=7;for(h(c(10,n,1),0),n=t-1;n>=23;)g(1<<23),n-=23;g(1<<n),h(1,1),g(2),m=_()}else h(0,a),h(1<<-t,0),m=_()+s.call("0",d);return m=d>0?f+((u=m.length)<=d?"0."+s.call("0",d-u)+m:m.slice(0,u-d)+"."+m.slice(u-d)):f+m}})},643:function(e,t,a){e.exports=a(11)(110)},648:function(e,t,a){"use strict";a.r(t);a(26),a(1022)},650:function(e,t,a){var n=a(45);e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},651:function(e,t,a){"use strict";var n=a(64),r=a(28);e.exports="".repeat||function(e){var t=String(r(this)),a="",l=n(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(a+=t);return a}},652:function(e,t,a){},663:function(e,t,a){"use strict";var n=a(4),r=a(0);a(101),a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(98));a(580);var s=r(a(571));a(140);var u=r(a(535));a(99);var i=r(a(100));a(61);var o=r(a(62)),c=r(a(29)),d=r(a(30)),p=r(a(59)),f=r(a(32)),m=r(a(33)),h=r(a(31)),g=r(a(2));a(540);var _=r(a(539)),y=n(a(1)),v=a(52),b=a(561),E=r(a(671));function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=_.default.Item,C=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,h.default)(t);if(S()){var n=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),t=a.call(this,e),(0,g.default)((0,p.default)(t),"testCourseBeforeUpload",(function(e,a){var n=(new Date).getTime();if(e.size>3145728)return o.default.error("上传图片过大（不能大于3M）"),!1;if(-1===e.type.indexOf("image"))return o.default.info("请上传图片文件"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var r=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(r))return t.setState({fileList:[]}),o.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var l=t.props.param,s=e.name.split(".").length;t.setState({uploadParams:{Filename:l.dir+"/"+n+"."+e.name.split(".")[s-1],key:l.dir+"/"+n+"."+e.name.split(".")[s-1],policy:l.policy,OSSAccessKeyId:l.accessid,success_action_status:"200",signature:l.signature},uploadAction:l.host})})),(0,g.default)((0,p.default)(t),"onRemove",(function(){t.props.resetImgList&&t.props.resetImgList(),t.props.clearUpload()})),(0,g.default)((0,p.default)(t),"onPreview",(function(e){var a=t.state.cacheUrl,n=a||e.url;window.open(n)})),t.state={uploadParams:{},uploadAction:"",cacheUrl:""},console.log(t.props.defaultUrl),t.props.defaultUrl&&t.props.gupList(t.props.defaultUrl),t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,p.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,p.default)(t)),t}return(0,d.default)(n,[{key:"beforeUpload",value:function(e,t){var a=(new Date).getTime();if(e.size>1048576)return o.default.error("上传文件过大（不能大于1M）"),!1;if(-1===e.type.indexOf("image"))return o.default.info("请上传图片文件"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;if("banner"==this.props.bannerType){if(e.size>=1048576)return o.default.error("上传文件过大（不能大于1M）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1}else{if(e.size>=512e3)return o.default.error("上传文件过大（不能大于500KB）"),!1;this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([])}var n=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(n))return this.setState({fileList:[]}),o.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;var r=this.props.param,l=e.name.split(".").length;this.setState({uploadParams:{Filename:r.dir+"/"+a+"."+e.name.split(".")[l-1],key:r.dir+"/"+a+"."+e.name.split(".")[l-1],policy:r.policy,OSSAccessKeyId:r.accessid,success_action_status:"200",signature:r.signature},uploadAction:r.host,cacheUrl:r.host+"/"+r.dir+"/"+a+"."+e.name.split(".")[l-1]})}},{key:"handleUploadChange",value:function(e){var t=e.file,a=e.fileList,n=this.props.param,r=this.state.uploadParams.Filename;t.name.split(".").length;if("uploading"===t.status){var l=[];l.push(a.pop()),this.props.gupList(l)}if("done"===t.status){var s=[];s.push(a.pop()),this.props.gupList(s),this.props.getUrl&&this.props.getUrl(n.host+"/"+r)}}},{key:"componentWillUnmount",value:function(){this.props=null}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.uploadParams,r=a.uploadAction,o=this.props,c=o.required,d=o.fileList,p=(o.listType,this.props.layout?this.props.layout:{labelCol:{span:6},wrapperCol:{span:14}}),f="";f=0===d.length?"newState":"editState";return y.default.createElement(_.default,null,y.default.createElement(w,(0,l.default)({},p,{extra:this.props.extra,label:this.props.name?this.props.name:"播放展示图："})," ",t("logourl",{rules:[{required:!!c,message:"请上传缩略图"}]})(y.default.createElement("div",{className:E.default.credEditLogo,"data-status":f},y.default.createElement(s.default,{headers:{"X-Requested-With":null},accept:"image",listType:"picture-card",fileList:d,action:r,data:n,beforeUpload:this.props.testCourse?this.testCourseBeforeUpload:this.beforeUpload,onChange:this.handleUploadChange,onRemove:this.onRemove,onPreview:this.onPreview},this.props.disabled?null:0===d.length?y.default.createElement("div",null,y.default.createElement(i.default,{type:"plus"}),y.default.createElement("div",{className:"ant-upload-text"},"上传图片")):y.default.createElement("div",{className:"upload-btn"},y.default.createElement(u.default,{disabled:!!e.props.usable&&e.props.usable},"更换图片")))))))}}]),n}(y.Component);var k=_.default.create()((0,v.connect)((function(e,t){return{param:e.uploadParam.param,fileList:e.uploadParam.fileList}}),(function(e){return{gupfetch:function(){return e((0,b.gupfetch)())},gupList:function(t){return e((0,b.gupList)(t))},clearUpload:function(){return e((0,b.clearUpload)())}}}))(C));t.default=k},671:function(e,t,a){e.exports={credEditLogo:"credEditLogo__1fhCq","ant-upload-list-item-info":"ant-upload-list-item-info__1Pp8a","ant-upload-select-picture-card":"ant-upload-select-picture-card__2cZDS","ant-upload-list-item-actions":"ant-upload-list-item-actions__2odMN","anticon-delete":"anticon-delete__1uwBf","anticon-eye-o":"anticon-eye-o__2631W"}}}]);