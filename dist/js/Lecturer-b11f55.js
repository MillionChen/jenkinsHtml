(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1008:function(e,t,a){},1022:function(e,t,a){},1439:function(e,t,a){e.exports={ClassAdmin:"ClassAdmin__3XwN0",top:"top__1nOFM",weidu:"weidu__2S30H",classTable:"classTable__28bXc",lecturerBasicInfoAddClassify:"lecturerBasicInfoAddClassify__We-Je",addClassifyDisplay:"addClassifyDisplay__1wXv-",addClassifyDisplayItem:"addClassifyDisplayItem__h1aqr"}},1440:function(e,t,a){e.exports={contentProps:"contentProps__2qz6R",contentBox:"contentBox__2So5I",contentLeft:"contentLeft__1tvm5",checkboxContent:"checkboxContent__iND_K",checkboxDiv:"checkboxDiv__3aKID",checkboxItem:"checkboxItem__1nh8J","ant-checkbox":"ant-checkbox__3JUf5","ant-checkbox-wrapper":"ant-checkbox-wrapper__1_3qn",contentRight:"contentRight__2nQY8",contentRightHead:"contentRightHead__2-Vf5",contentRightDiv:"contentRightDiv__WeRDd","step-two-box":"step-two-box__1NryP","content-div":"content-div__ZtFND","content-p":"content-p__2SF4n","step-one-box":"step-one-box__2x_ym","user-search":"user-search__3UKUr",stepThreeBox:"stepThreeBox__YEmzX",stepThreeParentContainer:"stepThreeParentContainer__3Xfx1",stepThreeChildOne:"stepThreeChildOne__2CBj4",stepThreeChildTwo:"stepThreeChildTwo__3U8h6",lecturerRateLevelChangeBtn:"lecturerRateLevelChangeBtn__3c65A","ant-btn":"ant-btn__3M7uu",lecturerImportForm:"lecturerImportForm__14Ch3","ant-form-item-children":"ant-form-item-children__156v_",lecturerModelDownload:"lecturerModelDownload__cuoZ9",teacherCreatePageOperation:"teacherCreatePageOperation__2Eh_p",teacerMediaDisplayContainer:"teacerMediaDisplayContainer__tiqa1"}},1512:function(e,t,a){"use strict";var n=a(4),l=a(0);a(3),a(68),a(40),a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(648);var r=l(a(619)),i=l(a(98)),o=l(a(2));a(224);var u=l(a(225));a(140);var s=l(a(535)),c=l(a(29)),d=l(a(30)),f=l(a(59)),p=l(a(32)),h=l(a(33)),m=l(a(31));a(764);var v=l(a(765));a(575);var y=l(a(568)),g=n(a(1)),b=a(52),C=l(a(1439)),k=n(a(1317));function L(e){return function(){var t,a=(0,m.default)(e);if(S()){var n=(0,m.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,h.default)(this,t)}}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=y.default.TabPane,w=v.default.SHOW_PARENT,D=function(e){(0,p.default)(a,e);var t=L(a);function a(e){var n;return(0,c.default)(this,a),(n=t.call(this,e)).state={visible:!1,valueGroup:[],classifyData:[],displayValueGroup:[],refreshDisplay:"",limitLength:0},n.classifySelectRef=null,n.showClassifyList=n.showClassifyList.bind((0,f.default)(n)),n.closeClassifyList=n.closeClassifyList.bind((0,f.default)(n)),n.getValueGroup=n.getValueGroup.bind((0,f.default)(n)),n.submitClassify=n.submitClassify.bind((0,f.default)(n)),n.deleteClassify=n.deleteClassify.bind((0,f.default)(n)),n.getRef=n.getRef.bind((0,f.default)(n)),n.initClassifyValue=n.initClassifyValue.bind((0,f.default)(n)),n.setLimitLength=n.setLimitLength.bind((0,f.default)(n)),n}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.classlist({type:0}).then((function(t){"1000"==t.code&&e.setState({classifyData:e.getInitClassifyData(t.data,1,0)},(function(){e.props.canInitClassify()}))})),this.props.onRef(this)}},{key:"setLimitLength",value:function(){var e=this.state.displayValueGroup,t=0;e.map((function(e){e.value&&e.value.length>0&&(t+=e.value.length)})),this.setState({limitLength:t})}},{key:"initClassifyValue",value:function(e){var t=this.state.classifyData,a=this;if(e.length>0&&t.length>0){var n=this.getInitValueParent(e,t);this.setState({valueGroup:n,displayValueGroup:n,refreshDisplay:(new Date).getTime()},(function(){a.setLimitLength()}))}}},{key:"initValueId",value:function(e,t){return parseInt(e)+1+"-"+t}},{key:"getInitValueParent",value:function(e,t){var a=[],n=[],l=this;return e.map((function(e){if(n.includes(e.parentId))a=a.map((function(t){return t.key==e.parentId&&(t.value.push(l.initValueId(e.layer,e.id)),t.label.push(e.name)),t}));else{var t=l.initValueId(e.layer,e.id);a.push({key:e.parentId,id:e.parentId,title:e.parentName,value:[t],label:[e.name]}),n.push(e.parentId)}})),console.log("从接口初始化数据",a),a}},{key:"getRef",value:function(e){this.classifySelectRef=e}},{key:"getInitClassifyData",value:function(e,t,a){var n=this;if(e&&0!=e.length){return e.map((function(e){return e.children=n.getInitClassifyData(e.children,t+1,e.id),{title:e.name,id:e.id,level:t,parentId:a,children:e.children}}))}return[]}},{key:"showClassifyList",value:function(){var e=this;this.setState({visible:!0},(function(){e.classifySelectRef&&e.classifySelectRef.initValueGroup(e.state.displayValueGroup)}))}},{key:"closeClassifyList",value:function(){this.setState({visible:!1})}},{key:"getValueGroup",value:function(e){var t=e.filter((function(e){return e.value.length>0}));this.setState({valueGroup:t})}},{key:"deleteClassify",value:function(e,t,a){var n=this.state.displayValueGroup,l=this,r=n.map((function(n){return n.key==e&&(n.value=n.value.filter((function(e){return e!=t})),n.label=n.label.filter((function(e){return e!=a}))),n})).filter((function(e,t){return e.value.length>0}));this.setState({displayValueGroup:r,refreshDisplay:(new Date).getTime()},(function(){l.setLimitLength()})),this.props.getclassifySelectGroup(r),console.log(r)}},{key:"limitValueGroupForThree",value:function(e){var t=0,a=[];return e.map((function(e){e.value.length+t<=3?(a.push(e),t+=e.value.length):t<3&&(e.value=e.value.slice(0,3-t),e.label=e.label.slice(0,3-t),a.push(e),t=3)})),a}},{key:"submitClassify",value:function(){var e=this.state.valueGroup,t=this.limitValueGroupForThree(e);console.log(t);var a=this;this.setState({displayValueGroup:t,refreshDisplay:(new Date).getTime(),visible:!1},(function(){a.setLimitLength(),a.props.getclassifySelectGroup(a.state.displayValueGroup)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.classifyData,n=t.displayValueGroup,l=this.props.onlyShow;return g.default.createElement("div",{className:C.default.lecturerBasicInfoAddClassify},l?"":g.default.createElement(s.default,{className:C.default.addClassifyBtn,type:"primary",onClick:this.showClassifyList,disabled:this.state.limitLength>=3},"添加分类"),g.default.createElement(R,{key:this.state.refreshDisplay,dataSource:n,deleteClassify:this.deleteClassify,onlyShow:l}),g.default.createElement(u.default,{visible:this.state.visible,title:"添加分类",onCancel:this.closeClassifyList,width:540,footer:[g.default.createElement(s.default,{key:"cancel",onClick:this.closeClassifyList},"取消"),g.default.createElement(s.default,{key:"confirm",type:"primary",onClick:this.submitClassify},"确定")]},g.default.createElement(I,{onRef:function(t){return e.getRef(t)},dataSource:a,getValueGroup:this.getValueGroup})))}}]),a}(g.Component),x=(0,b.connect)(null,k)(D);t.default=x;var I=function(e){(0,p.default)(a,e);var t=L(a);function a(e){var n;return(0,c.default)(this,a),(n=t.call(this,e)).state={treeData:[],currentTab:"",valueGroup:[]},n.getTreeData=n.getTreeData.bind((0,f.default)(n)),n.tabChange=n.tabChange.bind((0,f.default)(n)),n.onChange=n.onChange.bind((0,f.default)(n)),n}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dataSource,a=this;if(t.length>0){var n=this.getTreeData(t[0].children,2);this.setState({treeData:n,currentTab:"1",valueGroup:[{key:t[0].id,title:t[0].title,value:[],label:[]}]},(function(){a.props.onRef(e)}))}}},{key:"getValueLength",value:function(e){var t=0;return e.map((function(e){e.value&&e.value.length>0&&(t+=e.value.length)})),t}},{key:"initValueGroup",value:function(e){e.length>0&&(this.setState({valueGroup:e}),console.log("这是初始化的数据",e))}},{key:"getTreeData",value:function(e,t){if(console.log(e),e&&0!=e.length){var a=this;return e.map((function(e){var n,l=a.getTreeData(e.children,t+1);return n={title:e.title,value:t+"-"+e.id},(0,o.default)(n,"title",e.title),(0,o.default)(n,"key",e.id),(0,o.default)(n,"children",l),(0,o.default)(n,"selectable",!(l.length>0)),n}))}return[]}},{key:"onChange",value:function(e,t){var a=this.state,n=a.currentTab,l=a.valueGroup,r=this.props.dataSource,i=parseInt(n)-1,o=l.map((function(a){return a.key==r[i].id&&(a.title=a.title,a.value=e,a.label=t),a}));this.getValueLength(o)>3||(this.setState({valueGroup:o}),console.log("现有的数据",o),this.props.getValueGroup(o))}},{key:"tabChange",value:function(e){var t=this.props.dataSource,a=this.state.valueGroup,n=parseInt(e)-1,l=t.filter((function(e){return e.id==t[n].id}));0==a.filter((function(e){return e.key==t[n].id})).length&&a.push({key:t[n].id,title:l[0].title,value:[],label:[]});var r=this.getTreeData(l[0].children,2);this.setState({currentTab:e,treeData:r,valueGroup:a})}},{key:"getCurrentValue",value:function(e,t){var a=this.props.dataSource,n=parseInt(e)-1,l=t.filter((function(e){return e.key==a[n].id}));return l.length>0?l[0].value:[]}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.treeData,n=e.valueGroup,l=this.props.dataSource,r=this.getCurrentValue(t,n);console.log(a);var o={treeData:a,value:r,onChange:this.onChange,treeCheckable:!1,multiple:!0,showCheckedStrategy:w,searchPlaceholder:"Please select",style:{width:"100%"}};return g.default.createElement("div",{style:{width:"100%",height:500}},g.default.createElement("span",null,"最多只能选择三个分类 "),g.default.createElement("br",null),g.default.createElement(y.default,{defaultActiveKey:"1",tabPosition:"left",onChange:this.tabChange,style:{width:"100%",height:500}},l.map((function(e,t){return g.default.createElement(E,{tab:e.title,key:String(t+1)},g.default.createElement(v.default,(0,i.default)({},o,{getPopupContainer:function(){return document.getElementById("tree-select-"+e.id)}})),g.default.createElement("div",{id:"tree-select-"+e.id}))}))))}}]),a}(g.Component),R=function(e){(0,p.default)(a,e);var t=L(a);function a(e){var n;return(0,c.default)(this,a),(n=t.call(this,e)).state={dataSource:[]},n}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dataSource;this.setState({dataSource:e.filter((function(e){return e.value.length>0}))})}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a=this.props.onlyShow;return g.default.createElement("div",{className:C.default.addClassifyDisplay},t.map((function(t,n){return g.default.createElement("div",{className:C.default.addClassifyDisplayItem,key:n},g.default.createElement("span",null,t.title,":"),t.label.map((function(n,l){return g.default.createElement(r.default,{key:l,closable:!a,onClose:function(){return e.props.deleteClassify(t.key,t.value[l],n)}},n)})))})))}}]),a}(g.Component)},1569:function(e,t,a){"use strict";var n=a(4),l=a(0);a(7),a(3),a(5),a(68),a(40),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(71),a(53),a(228),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(648);var r=l(a(619));a(224);var i=l(a(225));a(616);var o=l(a(617)),u=l(a(238));a(239);var s=l(a(240)),c=l(a(98));a(569);var d=l(a(558));a(549);var f=l(a(544));a(140);var p=l(a(535));a(537);var h=l(a(536));a(564);var m=l(a(563));a(755);var v=l(a(756));a(61);var y=l(a(62)),g=l(a(29)),b=l(a(30)),C=l(a(59)),k=l(a(32)),L=l(a(33)),S=l(a(31)),E=l(a(2));a(554);var w=l(a(550));a(540);var D=l(a(539)),x=n(a(1)),I=(l(a(60)),a(65)),R=l(a(226)),_=a(52),T=l(a(2168)),O=a(1317),N=l(a(2169)),P=l(a(1440)),V=l(a(1512));function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){return function(){var t,a=(0,S.default)(e);if(B()){var n=(0,S.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,L.default)(this,t)}}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=location.pathname.split("/")[1],M=location.pathname.split("/")[2],F=D.default.Item,z=w.default.Option,A=function(e){(0,k.default)(a,e);var t=U(a);function a(e){var n;return(0,g.default)(this,a),n=t.call(this,e),(0,E.default)((0,C.default)(n),"onChange",(function(e){var t=n.state,a=t.mobile,l=t.name,r=t.sourceCode,i={pageNo:e,pageSize:t.pageSize,mobile:a||void 0,name:l||void 0,sourceCode:r||void 0};n.listTable(i)})),(0,E.default)((0,C.default)(n),"handleChange",(function(e){console.log("selected ".concat(e))})),(0,E.default)((0,C.default)(n),"showTotal",(function(e){return"共计 ".concat(e," 条")})),(0,E.default)((0,C.default)(n),"onShowSizeChange",(function(e,t){var a=n.state,l={pageNo:1,pageSize:t,mobile:a.mobile||void 0,name:a.name||void 0,sourceCode:a.sourceCode||void 0};n.listTable(l)})),(0,E.default)((0,C.default)(n),"onSearch",(function(){var e=n.state,t=e.pageNo,a=e.pageSize;n.props.form.validateFields((function(e,l){if(!e){n.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){(0,E.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},l,{pageNo:1}),(function(){this.setState({pageNo:1},(function(){console.log(t,"!1111")}))}));var r={pageNo:1,pageSize:a,name:l.name?l.name.trim():void 0,mobile:l.mobile?l.mobile.trim():void 0,sourceCode:l.sourceCode||void 0};n.listTable(r)}}))})),(0,E.default)((0,C.default)(n),"editClick",(function(e){n.props.history.push("/"+j+"/"+M+"/index/tool/lecturer/edit?id="+e.id)})),(0,E.default)((0,C.default)(n),"deleteClick",(function(e){var t={ids:[e.id]},a=n.state;a.pageNo,a.pageSize;n.props.delListTable(t,(function(e){"1000"===e.code&&(y.default.success(e.msg),n.onSearch())}))})),(0,E.default)((0,C.default)(n),"linkContent",(function(e){n.setState({visible:!0,recordId:e.id})})),(0,E.default)((0,C.default)(n),"visibleCall",(function(e){var t=n.state;t.pageNo,t.pageSize;n.setState({visible:e}),n.onSearch()})),(0,E.default)((0,C.default)(n),"switchChange",(function(e,t){console.log(e,t);var a=(0,C.default)(n),l={id:t.id,status:e?"1":"0"},r={id:t.id,enabled:e};n.props.lecturerUpOrDown(l,(function(e){"1000"==e.code&&y.default.success("修改成功",.5);var t={pageNo:a.state.pageNo,pageSize:a.state.pageSize};a.listTable(t)})),n.props.lecturerStatusToggle(r,(function(e){}))})),(0,E.default)((0,C.default)(n),"addLecturer",(function(){n.props.history.push("/"+j+"/"+M+"/index/tool/lecturer/edit")})),(0,E.default)((0,C.default)(n),"deleteCheck",(function(){var e=n.state,t={ids:e.selectIds};e.pageNo,e.pageSize;n.props.delListTable(t,(function(e){"1000"===e.code&&(y.default.success(e.msg),n.setState({selectIds:[],selectedRowKeys:[],selectedRows:[]}),n.onSearch())}))})),(0,E.default)((0,C.default)(n),"exportLecturer",(function(){var e=n.state,t={keywords:e.name||"",sourceCode:e.sourceCode||"",mobile:e.mobile||""};n.props.exportLecturer(t,(function(e){"1000"===e.code&&y.default.success(e.data)}))})),n.state={pageNo:1,pageSize:20,visible:!1,dataSource:null,pageTotal:null,mobile:null,name:null,sourceCode:null,relationData:[],selectedRowKeys:[],selectIds:[],rateOrLevelVisible:!1,isRate:!0,lecturerLevel:0,lecturerRate:0,currentLecturerId:"",currentLecturerName:"",defaultLevelList:[],showCreateBtn:!1,refreshTable:"",showSomeSolveVisible:!1,teacherInfoLookVisible:!1,teacherInfoLookItem:{},refreshTeacherInfoLook:""},n.showRateLevel=n.showRateLevel.bind((0,C.default)(n)),n.closeRateLevel=n.closeRateLevel.bind((0,C.default)(n)),n.lecturerRateChange=n.lecturerRateChange.bind((0,C.default)(n)),n.lecturerLevelChange=n.lecturerLevelChange.bind((0,C.default)(n)),n.submitRateOrLevel=n.submitRateOrLevel.bind((0,C.default)(n)),n.getLecturerLevel=n.getLecturerLevel.bind((0,C.default)(n)),n.cancelDelete=n.cancelDelete.bind((0,C.default)(n)),n.someSolve=n.someSolve.bind((0,C.default)(n)),n.cancelSomeSolve=n.cancelSomeSolve.bind((0,C.default)(n)),n.getLevelNameFromLevelList=n.getLevelNameFromLevelList.bind((0,C.default)(n)),n.lookClick=n.lookClick.bind((0,C.default)(n)),n.closeLookInfo=n.closeLookInfo.bind((0,C.default)(n)),n}return(0,b.default)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageNo,a=e.pageSize;this.props.location.pathname.includes("/index/tool/lecturer/create")?this.setState({showCreateBtn:!0}):this.setState({showCreateBtn:!1});var n={pageNo:t,pageSize:a};this.listTable(n),this.getLecturerLevel()}},{key:"componentWillReceiveProps",value:function(e){e.location.pathname!=this.props.location.pathname&&(e.location.pathname.includes("/index/tool/lecturer/create")?this.setState({showCreateBtn:!0}):this.setState({showCreateBtn:!1}))}},{key:"getLecturerLevel",value:function(){var e=this;this.props.getLecturerLevelList({status:1}).then((function(t){"1000"==t.code&&e.setState({defaultLevelList:t.data})}))}},{key:"getLevelNameFromLevelList",value:function(e){var t=this.state.defaultLevelList;if(!t||0==t.length)return"";var a=t.filter((function(t){return t.sort==e}));return a.length>0?a[0].name:""}},{key:"lecturerRateChange",value:function(e){this.setState({lecturerRate:e})}},{key:"lecturerLevelChange",value:function(e){this.setState({lecturerLevel:e})}},{key:"submitRateOrLevel",value:function(){var e=this.state,t=e.isRate,a=e.currentLecturerId,n=e.lecturerRate,l=e.lecturerLevel,r=e.pageNo,i=e.pageSize,o={id:a},u=this;t?o.score=n:o.grade=l,this.props.rateOrLevelLecturer(o).then((function(e){if("1000"==e.code){y.default.success(t?"评分成功":"评级成功"),u.closeRateLevel();var a={pageNo:r,pageSize:i};u.listTable(a)}}))}},{key:"listTable",value:function(e){var t=this;this.props.getListTable(e).then((function(a){"1000"===a.code&&t.setState({dataSource:a.data,pageTotal:a.page.pageTotal,pageNo:a.page.pageNo,pageSize:a.page.pageSize,name:e.name||"",mobile:e.mobile||"",sourceCode:e.sourceCode||""})}))}},{key:"cancelDelete",value:function(){this.setState({selectIds:[],selectedRowKeys:[],selectedRows:[],refreshTable:(new Date).getTime()})}},{key:"someSolve",value:function(){this.setState({showSomeSolveVisible:!0})}},{key:"cancelSomeSolve",value:function(){this.setState({showSomeSolveVisible:!1})}},{key:"showRateLevel",value:function(e,t){var a=this.state.defaultLevelList,n=t.grade||0,l=a.filter((function(e){return e.sort==t.grade}));l.length<=0&&(n=0),t.grade&&0!=t.grade&&l.length<=0&&y.default.info("已设置的讲师评级已被下架",2),this.setState({rateOrLevelVisible:!0,currentLecturerName:t.lecturerName,currentLecturerId:t.id,lecturerRate:t.score,lecturerLevel:n,isRate:e})}},{key:"closeRateLevel",value:function(){this.setState({rateOrLevelVisible:!1})}},{key:"lookClick",value:function(e){this.setState({teacherInfoLookVisible:!0,teacherInfoLookItem:e,refreshTeacherInfoLook:(new Date).getTime()})}},{key:"closeLookInfo",value:function(){this.setState({teacherInfoLookVisible:!1})}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageNo,n=t.pageSize,l=t.dataSource,r=t.pageTotal,y=t.visible,g=t.relationData,b=t.recordId,C=(t.selectedRowKeys,this.props.form.getFieldDecorator),k={onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.setState({selectedRowKeys:t,selectIds:a.map((function(e){return e.id}))})},selectedRowKeys:this.state.selectIds,getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}},L=[{title:"讲师姓名",dataIndex:"lecturerName",key:"lecturerName",width:200,render:function(e){return x.default.createElement("span",{title:e,style:{maxWidth:200,display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"pointer"}},e)}},{title:"讲师编码",dataIndex:"code",key:"code"},{title:"手机号",dataIndex:"mobile",key:"mobile"},{title:"讲师来源",dataIndex:"sourceCode",key:"sourceCode",render:function(e){return x.default.createElement("span",null,"inner"===e?"内部讲师":"外部讲师")}},{title:"讲师评分",dataIndex:"score",key:"score",render:function(e,t){return parseFloat(e)==Math.floor(e)?e+".0":e}},{title:"讲师评级",dataIndex:"gradeName",key:"gradeName"},{title:"授课课程",dataIndex:"count",key:"count"},{title:"是否启用",dataIndex:"status",key:"status",render:function(t,a){return x.default.createElement(v.default,{checked:"1"===t,onChange:function(t){e.switchChange(t,a)}})}},{title:"操作",dataIndex:"action",key:"action",width:200,render:function(t,a){return x.default.createElement("div",{className:P.default.teacherCreatePageOperation},e.state.showCreateBtn&&"1"==a.status?x.default.createElement("a",{onClick:function(t){e.lookClick(a)}},"查看"):"",e.state.showCreateBtn&&"1"!=a.status?x.default.createElement("a",{onClick:function(t){e.editClick(a)}},"编辑"):"",e.state.showCreateBtn?"":x.default.createElement("a",{onClick:function(t){e.showRateLevel(!0,a)}},"讲师评分"),e.state.showCreateBtn?"":x.default.createElement("a",{onClick:function(t){e.showRateLevel(!1,a)}},"讲师评级"),e.state.showCreateBtn&&"1"!=a.status?x.default.createElement(m.default,{title:"确定删除?",okText:"确定",cancelText:"取消",onConfirm:function(t){e.deleteClick(a)}},x.default.createElement("a",null,"删除")):"",e.state.showCreateBtn?"":x.default.createElement("a",{onClick:function(t){e.linkContent(a)}},"关联内容"))}}];this.state.showCreateBtn&&(L=L.filter((function(e){return"grade"!=e.key&&"score"!=e.key})));var S,E={labelCol:{span:4},wrapperCol:{span:8}};return x.default.createElement("div",{style:{marginBottom:"100px"}},x.default.createElement(R.default,{title:this.state.showCreateBtn?"创建讲师":"讲师管理"}),x.default.createElement(D.default,{layout:"inline",style:{padding:"20px"}},x.default.createElement(F,{label:"关键字（词）：",layout:"inline"},C("name",{rules:[{required:!1}],initialValue:null})(x.default.createElement(h.default,{style:{width:"250px"},placeholder:"请输入讲师姓名"}))),x.default.createElement(F,{label:"手机号:",layout:"inline"},C("mobile",{rules:[{required:!1}],initialValue:null})(x.default.createElement(h.default,{style:{},placeholder:"请输入手机号"}))),x.default.createElement(F,{label:"类型:"},C("sourceCode",{initialValue:null})(x.default.createElement(w.default,{style:{width:"120px"},placeholder:"Select a person",onChange:this.handleChange},x.default.createElement(z,{value:null},"全部"),x.default.createElement(z,{value:"inner"},"内部讲师"),x.default.createElement(z,{value:"outer"},"外部讲师")))),x.default.createElement(p.default,{style:{marginTop:"4px"},type:"primary",onClick:this.onSearch},"查询")),x.default.createElement("div",{style:{padding:"20px"}},this.state.showCreateBtn?x.default.createElement(p.default,{type:"primary",style:{marginRight:"20px"},onClick:this.addLecturer},"创建讲师"):"",this.state.showCreateBtn?x.default.createElement(m.default,{title:"确定删除?",okText:"确定",cancelText:"取消",onConfirm:function(t){e.deleteCheck()},onCancel:function(t){e.cancelDelete()}},x.default.createElement(p.default,{type:"primary",style:{marginRight:"20px"}},"批量删除")):"",this.state.showCreateBtn?"":x.default.createElement(p.default,{type:"primary",style:{marginRight:"4px"},onClick:this.someSolve},"批量处理"),x.default.createElement(p.default,{type:"primary",style:{marginRight:"4px"},onClick:this.exportLecturer},"导出讲师")),y&&x.default.createElement(T.default,{visible:y,type:"list",id:b,relationData:g,visibleCall:this.visibleCall}),x.default.createElement(f.default,{key:this.state.refreshTable,rowKey:function(e){return e.id},columns:L,dataSource:l,pagination:!1,rowSelection:k}),x.default.createElement(d.default,{style:{textAlign:"right",marginRight:"40px",marginTop:"15px"},onChange:this.onChange,showTotal:this.showTotal,onShowSizeChange:this.onShowSizeChange,showSizeChanger:!0,showQuickJumper:!0,pageSize:n,defaultCurrent:0,current:a,total:r}),x.default.createElement(i.default,{visible:this.state.rateOrLevelVisible,title:this.state.isRate?"讲师评分":"讲师评级",width:800,footer:null,onCancel:this.closeRateLevel,destroyOnClose:!0},x.default.createElement(D.default,null,x.default.createElement(F,(0,c.default)({label:"讲师姓名"},E),x.default.createElement("span",null,this.state.currentLecturerName)),this.state.isRate?x.default.createElement(F,(0,c.default)({label:"讲师评分"},E),C("rate",{rules:[{required:!0,message:"请输入评分"},{validator:(S=(0,s.default)(u.default.mark((function e(t,a){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a>5)){e.next=2;break}throw new Error("最高评分为5");case 2:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)})}],initialValue:this.state.lecturerRate})(x.default.createElement(o.default,{min:0,max:5,step:.1,precision:1,onChange:this.lecturerRateChange}))):"",this.state.isRate?"":x.default.createElement(F,(0,c.default)({label:"讲师评级"},E),C("level",{rules:[{required:!0,message:"请选择讲师级别"}],initialValue:this.state.lecturerLevel})(x.default.createElement(w.default,{onChange:this.lecturerLevelChange},x.default.createElement(z,{value:0},"请选择讲师级别"),this.state.defaultLevelList.map((function(e,t){return x.default.createElement(z,{key:e.sort,value:e.sort},e.name)})))))),x.default.createElement("div",{className:P.default.lecturerRateLevelChangeBtn},x.default.createElement(p.default,{onClick:this.closeRateLevel},"取消"),x.default.createElement(p.default,{style:{marginLeft:"20px"},type:"primary",onClick:this.submitRateOrLevel},"确定"))),x.default.createElement(i.default,{title:"批量处理",visible:this.state.showSomeSolveVisible,onCancel:this.cancelSomeSolve,footer:null},x.default.createElement(N.default,null)),x.default.createElement(i.default,{title:"查看讲师",width:1e3,visible:this.state.teacherInfoLookVisible,footer:null,onCancel:this.closeLookInfo,destroyOnClose:!0},x.default.createElement(J,{key:this.state.refreshTeacherInfoLook,id:this.state.teacherInfoLookItem.id,lecturerDetail:this.props.lecturerDetail})))}}]),a}(x.Component),K=D.default.create()(A);var q=(0,_.connect)((function(e,t){return{}}),(function(e){return{getListTable:function(t,a){return e((0,O.getListTable)(t,a))},delListTable:function(t,a){return e((0,O.delListTable)(t,a))},exportLecturer:function(t,a){return e((0,O.exportLecturer)(t,a))},lecturerUpdate:function(t,a){return e((0,O.lecturerUpdate)(t,a))},lecturerUpOrDown:function(t,a){return e((0,O.lecturerUpOrDown)(t,a))},lecturerStatusToggle:function(t,a){return e((0,O.lecturerStatusToggle)(t,a))},getLecturerLevelList:function(t,a){return e((0,O.getLecturerLevelList)(t,a))},lecturerDetail:function(t,a){return e((0,O.lecturerDetail)(t,a))},rateOrLevelLecturer:function(t,a){return e((0,O.rateOrLevelLecturer)(t,a))}}}))((0,I.withRouter)(K));t.default=q;var J=function(e){(0,k.default)(a,e);var t=U(a);function a(e){var n;return(0,g.default)(this,a),(n=t.call(this,e)).state={data:{},refreshAddClassify:""},n.classifyRef=null,n.canInitClassify=n.canInitClassify.bind((0,C.default)(n)),n}return(0,b.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.lecturerDetail({id:this.props.id}).then((function(t){"1000"==t.code&&e.setState({data:t.data,refreshAddClassify:(new Date).getTime()})}))}},{key:"canInitClassify",value:function(){if(this.classifyRef){var e=this.state.data.classificationVOList?this.state.data.classificationVOList.map((function(e){return{id:e.id,layer:parseInt(e.layer),name:e.name,parentId:e.topId,parentName:e.topName}})):[];this.classifyRef.initClassifyValue(e)}}},{key:"render",value:function(){var e=this,t={labelCol:{span:4},wrapperCol:{span:20}},a=this.state.data;return x.default.createElement("div",{style:{width:"100%"}},x.default.createElement(D.default,null,x.default.createElement(F,(0,c.default)({label:"讲师来源"},t),"outer"==a.sourceCode?"外部讲师":"内部讲师"),x.default.createElement(F,(0,c.default)({label:"讲师编码"},t),a.code),x.default.createElement(F,(0,c.default)({label:"讲师姓名"},t),a.lecturerName),x.default.createElement(F,(0,c.default)({label:"手机号"},t),a.mobile),x.default.createElement(F,(0,c.default)({label:"讲师头像"},t),x.default.createElement("img",{src:a.avatar,style:{width:100}})),x.default.createElement(F,(0,c.default)({label:"讲师头衔"},t),a.title),x.default.createElement(F,(0,c.default)({label:"学历"},t),a.edu),x.default.createElement(F,(0,c.default)({label:"所属单位"},t),a.companyName),x.default.createElement(F,(0,c.default)({label:"个性签名"},t),a.signature),x.default.createElement(F,(0,c.default)({label:"讲师分类"},t),x.default.createElement(V.default,{key:this.state.refreshAddClassify,onRef:function(t){return e.classifyRef=t},getclassifySelectGroup:function(){},canInitClassify:this.canInitClassify,onlyShow:!0})),x.default.createElement(F,(0,c.default)({label:"讲师简介"},t),x.default.createElement("div",{className:P.default.teacerMediaDisplayContainer,dangerouslySetInnerHTML:{__html:a.resume}})),x.default.createElement(F,(0,c.default)({label:"自定义关键词"},t),x.default.createElement("div",{style:{width:"100%"}},a.keywords&&a.keywords.map((function(e,t){return x.default.createElement(r.default,{key:t},e)}))))))}}]),a}(x.Component)},2168:function(e,t,a){"use strict";var n=a(4),l=a(0);a(44),a(3),a(40),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var r=l(a(225));a(99);var i=l(a(100));a(140);var o=l(a(535)),u=l(a(81));a(61);var s=l(a(62)),c=l(a(29)),d=l(a(30)),f=l(a(59)),p=l(a(32)),h=l(a(33)),m=l(a(31)),v=l(a(2));a(712);var y=l(a(643));a(537);var g=l(a(536));a(575);var b=l(a(568)),C=n(a(1)),k=a(1317),L=a(52),S=l(a(1440));function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=b.default.TabPane,D=g.default.Search,x=y.default.Group,I=function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,m.default)(t);if(E()){var n=(0,m.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),t=a.call(this,e),(0,v.default)((0,f.default)(t),"tabChange",(function(e){var a=t.state,n=a.tab1Name,l=a.tab2Name,r=a.tab3Name;if(console.log(e),"1"===e){var i={type:1,name:n||void 0};t.props.relationList(i,(function(e){"1000"===e.code&&t.setState({tab1Data:e.data})}))}else if("2"===e){var o={type:2,name:l||void 0};t.props.relationList(o,(function(e){"1000"===e.code&&t.setState({tab2Data:e.data})}))}else{var u={type:3,name:r||void 0};t.props.relationList(u,(function(e){"1000"===e.code&&t.setState({tab3Data:e.data})}))}t.setState({TabPaneKey:e})})),(0,v.default)((0,f.default)(t),"handleOk",(function(){var e=t.state.renderData,a=t.props,n=a.id;if("list"===a.type){var l={id:n,lecturerRelationVOS:e};t.props.updateRelation(l,(function(e){"1000"===e.code&&(s.default.success("修改成功"),t.handleCancel())}))}else t.props.renderData(e),t.handleCancel()})),(0,v.default)((0,f.default)(t),"handleCancel",(function(){t.setState({visible:!1}),t.props.visibleCall(!1)})),(0,v.default)((0,f.default)(t),"tabSearch",(function(e){var a=t.state.TabPaneKey;if("1"===a){var n={type:1,name:e||void 0};t.props.relationList(n,(function(e){"1000"===e.code&&t.setState({tab1Data:e.data})}))}else if("2"===a){var l={type:2,name:e||void 0};t.props.relationList(l,(function(e){"1000"===e.code&&t.setState({tab2Data:e.data})}))}else{var r={type:3,name:e||void 0};t.props.relationList(r,(function(e){"1000"===e.code&&t.setState({tab3Data:e.data})}))}})),(0,v.default)((0,f.default)(t),"tab1Search",(function(e){})),(0,v.default)((0,f.default)(t),"tab1Search",(function(e){})),(0,v.default)((0,f.default)(t),"checkOnChange",(function(e,a,n){var l=t.state.renderData;1==n||2==n?(console.log(e.target.checked),e.target.checked?t.setState({renderData:[].concat((0,u.default)(l),[a])}):t.setState({renderData:l.filter((function(e,t){return e.relationId!==a.relationId}))})):e.target.checked?t.setState({renderData:[].concat((0,u.default)(l),[a])}):t.setState({renderData:l.filter((function(e,t){return e.relationId!==a.relationId}))})})),(0,v.default)((0,f.default)(t),"checkboxClick1",(function(e){t.setState({groupList1:e}),console.log(e)})),(0,v.default)((0,f.default)(t),"checkboxClick2",(function(e){t.setState({groupList2:e})})),(0,v.default)((0,f.default)(t),"checkboxClick3",(function(e){t.setState({groupList3:e})})),(0,v.default)((0,f.default)(t),"iconClick",(function(e,a){var n=t.state,l=n.renderData,r=n.groupList1,i=n.groupList2,o=n.groupList3;"1"==a.type?t.setState({renderData:l.filter((function(e,t){return e.relationId!==a.relationId})),groupList1:r.filter((function(e){return e!==a.relationId}))},(function(){console.log(l,r)})):"2"==a.type?t.setState({renderData:l.filter((function(e,t){return e.relationId!==a.relationId})),groupList2:i.filter((function(e){return e!==a.relationId}))}):t.setState({renderData:l.filter((function(e,t){return e.relationId!==a.relationId})),groupList3:o.filter((function(e){return e!==a.relationId}))})})),(0,v.default)((0,f.default)(t),"restClick",(function(){t.setState({renderData:[],groupList1:[],groupList2:[],groupList3:[]})})),t.state={visible:!1,loading:!1,TabPaneKey:"1",tab1Data:[],tab2Data:[],tab3Data:[],tab1Name:"",tab2Name:"",tab3Name:"",renderData:[],groupList1:[],groupList2:[],groupList3:[]},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.relationData,n=t.type,l=t.id;console.log(this.props.visible),this.props.relationList({type:1},(function(t){"1000"===t.code&&e.setState({tab1Data:t.data})})),this.setState({visible:this.props.visible}),"edit"===n?this.setState({renderData:a,groupList1:a.map((function(e){if(1==e.type)return e.relationId})),groupList2:a.map((function(e){if(2==e.type)return e.relationId})),groupList3:a.map((function(e){if(3==e.type)return e.relationId}))}):"list"===n&&this.props.getRelation({id:l},(function(t){if("1000"===t.code){var a=t.data||[];e.setState({renderData:a,groupList1:a.map((function(e){if(1==e.type)return e.relationId})),groupList2:a.map((function(e){if(2==e.type)return e.relationId})),groupList3:a.map((function(e){if(3==e.type)return e.relationId}))})}}))}},{key:"componentWillReceiveProps",value:function(e){this.state.visible}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=t.tab1Data,u=t.tab2Data,s=t.tab3Data,c=t.renderData,d=t.groupList1,f=t.groupList2,p=t.groupList3;return C.default.createElement("div",{style:{display:a?"block":"none"}},C.default.createElement(r.default,{width:"800px",className:S.default.contentProps,title:"关联内容",visible:a,onOk:this.handleOk,onCancel:this.handleCancel,footer:[C.default.createElement(o.default,{key:"back",onClick:this.handleCancel},"返回"),C.default.createElement(o.default,{key:"submit",type:"primary",loading:n,onClick:this.handleOk},"保存")]},C.default.createElement("div",{className:S.default.contentBox},C.default.createElement(b.default,{className:S.default.contentLeft,animated:!1,defaultActiveKey:"1",onChange:this.tabChange},C.default.createElement(w,{tab:"在线课程",key:"1"},C.default.createElement("div",{className:S.default.checkboxContent},C.default.createElement(D,{style:{width:"80%"},placeholder:"请输入课程名称/关键词",onSearch:this.tabSearch,enterButton:!0}),C.default.createElement(x,{value:d,onChange:function(t){return e.checkboxClick1(t)}},l&&l.map((function(t,a){return C.default.createElement("div",{key:t.relationId,className:S.default.checkboxDiv},C.default.createElement(y.default,{className:S.default.checkboxItem,checked:!0,onChange:function(a){e.checkOnChange(a,t,t.type)},value:t.relationId},t.relationName))}))))),C.default.createElement(w,{tab:"线下课程",key:"2"},C.default.createElement("div",{className:S.default.checkboxContent},C.default.createElement(D,{style:{width:"80%"},placeholder:"请输入课程名称/关键词",onSearch:this.tabSearch,enterButton:!0}),C.default.createElement(x,{value:f,onChange:function(t){return e.checkboxClick2(t)}},u&&u.map((function(t,a){return C.default.createElement("div",{key:t.relationId,className:S.default.checkboxDiv},C.default.createElement(y.default,{className:S.default.checkboxItem,onChange:function(a){e.checkOnChange(a,t,t.type)},value:t.relationId},t.relationName))}))))),C.default.createElement(w,{tab:"培训项目",key:"3"},C.default.createElement("div",{className:S.default.checkboxContent},C.default.createElement(D,{style:{width:"80%"},placeholder:"请输入项目名称/关键词",onSearch:this.tabSearch,enterButton:!0}),C.default.createElement(x,{value:p,onChange:function(t){return e.checkboxClick3(t)}},s&&s.map((function(t,a){return C.default.createElement("div",{key:t.relationId,className:S.default.checkboxDiv},C.default.createElement(y.default,{className:S.default.checkboxItem,onChange:function(a){e.checkOnChange(a,t,t.type)},value:t.relationId},t.relationName))})))))),C.default.createElement("div",{className:S.default.contentRight},C.default.createElement("p",{className:S.default.contentRightHead},C.default.createElement("span",null,"已选择".concat(c.length,"项")),C.default.createElement(i.default,{type:"rest",style:{fontSize:"18px",cursor:"pointer"},onClick:this.restClick})),C.default.createElement("div",null,c&&c.map((function(t,a){return C.default.createElement("div",{key:a,className:S.default.contentRightDiv},1==t.type&&C.default.createElement("span",null,"【在线课程】",t.relationName),2==t.type&&C.default.createElement("span",null,"【线下课程】",t.relationName),3==t.type&&C.default.createElement("span",null,"【培训项目】",t.relationName),C.default.createElement(i.default,{type:"close",style:{fontSize:"18px",cursor:"pointer"},onClick:function(a){e.iconClick(a,t)}}))})))))))}}]),n}(C.Component);var R=(0,L.connect)((function(e,t){return{}}),(function(e){return{relationList:function(t,a){return e((0,k.relationList)(t,a))},getRelation:function(t,a){return e((0,k.getRelation)(t,a))},updateRelation:function(t,a){return e((0,k.updateRelation)(t,a))}}}))(I);t.default=R},2169:function(e,t,a){"use strict";var n=a(4),l=a(0);a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(580);var r=l(a(571));a(99);var i=l(a(100));a(61);var o=l(a(62)),u=l(a(59)),s=l(a(2)),c=l(a(98)),d=l(a(29)),f=l(a(30)),p=l(a(32)),h=l(a(33)),m=l(a(31));a(540);var v=l(a(539)),y=n(a(1)),g=a(561),b=a(52),C=n(a(1317)),k=l(a(1440));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){return function(){var t,a=(0,m.default)(e);if(E()){var n=(0,m.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,h.default)(this,t)}}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=v.default.Item,D=function(e){(0,p.default)(a,e);var t=S(a);function a(e){var n;return(0,d.default)(this,a),(n=t.call(this,e)).state={uploadParams:{},uploadAction:{},originalFile:"",originalFileUrl:"",fileList:[],key:""},n}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.props.gupfetch()}},{key:"render",value:function(){var e={labelCol:{span:4},wrapperCol:{span:20}};return y.default.createElement("div",null,y.default.createElement(v.default,{className:k.default.lecturerImportForm},y.default.createElement(w,(0,c.default)({label:"讲师评分"},e),y.default.createElement(x,{param:this.props.param,btnText:"导入讲师评分",code:"score",importLecturerScore:this.props.importLecturerScore}),y.default.createElement("a",{className:k.default.lecturerModelDownload,href:"https://customproject.oss-cn-shanghai.aliyuncs.com/upload_model/lecturer_score.xlsx",download:"讲师评分导入模板.xlsx"},"讲师评分导入模板下载")),y.default.createElement(w,(0,c.default)({label:"讲师评级"},e),y.default.createElement(x,{param:this.props.param,btnText:"导入讲师评级",code:"grade",importLecturerGrade:this.props.importLecturerGrade}),y.default.createElement("a",{className:k.default.lecturerModelDownload,href:"https://customproject.oss-cn-shanghai.aliyuncs.com/upload_model/lecturer_grade.xlsx",download:"讲师评级导入模板下载.xlsx"},"讲师评级导入模板下载")),y.default.createElement(w,(0,c.default)({label:"关联课程"},e),y.default.createElement(x,{param:this.props.param,btnText:"导入讲师关联课程",code:"course",importLecturerCourse:this.props.importLecturerCourse}),y.default.createElement("a",{className:k.default.lecturerModelDownload,href:"https://customproject.oss-cn-shanghai.aliyuncs.com/upload_model/lecturer_course.xlsx",download:"讲师课程导入模板.xlsx"},"讲师课程导入模板"))))}}]),a}(y.Component);var x=function(e){(0,p.default)(a,e);var t=S(a);function a(e){var n;return(0,d.default)(this,a),n=t.call(this,e),(0,s.default)((0,u.default)(n),"beforeUpload",(function(e,t){if(!/(xls|xlsx)$/g.test(e.name))return n.props.form.resetFields(""),n.setState({fileList:[]}),o.default.error("文件类型不对，参照格式上传"),!1;if(console.log(e.type),t.length>1)return o.default.error("一次只能导入一个文件"),void n.setState({fileList:[]});n.setState({fileList:t});var a=n.props.param;n.setState({uploadParams:{Filename:a.dir+"/"+e.name,key:a.dir+"/"+e.name,policy:a.policy,OSSAccessKeyId:a.accessid,success_action_status:"200",signature:a.signature},uploadAction:a.host,originalFile:e.name,originalFileUrl:a.host+"/"+a.dir+"/"+e.name})})),(0,s.default)((0,u.default)(n),"handleChange",(function(e){console.log(n.state),console.log(e);var t=n.props.code,a=e.fileList;if(a=a.slice(-1),e.file.status,"done"===e.file.status){n.setState({fileList:a}),console.log(n.state.originalFileUrl);var l={fileName:n.state.originalFile,fileUrl:n.state.originalFileUrl};switch(t){case"score":n.props.importLecturerScore(l).then((function(e){"1000"==e.code?o.default.success("已成功创建导入任务，任务编号".concat(e.data,"请至任务中查看完成情况")):o.default.success("导入失败,"+e.subMsg)}));break;case"grade":n.props.importLecturerGrade(l).then((function(e){"1000"==e.code?o.default.success("已成功创建导入任务，任务编号".concat(e.data,"请至任务中查看完成情况")):o.default.success("导入失败,"+e.subMsg)}));break;case"course":n.props.importLecturerCourse(l).then((function(e){"1000"==e.code?o.default.success("已成功创建导入任务，任务编号".concat(e.data,"请至任务中查看完成情况")):o.default.success("导入失败,"+e.subMsg)}))}}"error"===e.file.status&&(o.default.error("上传失败，请重新尝试"),n.setState({fileList:[]}))})),n.state={uploadParams:{},uploadAction:{},originalFile:"",originalFileUrl:"",fileList:[],key:""},n}return(0,f.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.uploadAction,n=t.uploadParams;return y.default.createElement(r.default,{style:{display:"inline-block"},headers:{"X-Requested-With":null},beforeUpload:this.beforeUpload,action:a,data:n,onChange:this.handleChange,onRemove:function(){return e.setState({fileList:[]})}},y.default.createElement("a",{type:"primary"},y.default.createElement(i.default,{type:"upload"})," ",this.props.btnText))}}]),a}(y.Component),I=(0,b.connect)((function(e,t){return{param:e.uploadParam.param}}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},C,{gupfetch:g.gupfetch}))(D);t.default=I},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},550:function(e,t,a){e.exports=a(11)(94)},558:function(e,t,a){e.exports=a(11)(251)},561:function(e,t,a){"use strict";var n=a(4),l=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:o.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,n=!1,l=!1;e?(n=e.needTranscode,l=e.type,a="".concat(s,"/upload/policy?needTranscode=").concat(n,"&type=").concat(l,"&date=").concat(new Date)):a="".concat(s,"/upload/policy?date=").concat(new Date);return function(e){return(0,r.default)({url:a}).then((function(a){if("1000"===a.code){var n=JSON.parse(a.data);e({type:o.GET_UPLOAD_PARAM,data:n}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,r.default)({videoUpload:c,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:o.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,r.default)({videoPlay:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:o.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:o.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:o.CLEARUPLOAD})}};var r=l(a(78)),i=l(a(587)),o=n(a(231)),u=i.default.common,s=u.ossUrl,c=u.videoUpload,d=u.videoPlay},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},568:function(e,t,a){e.exports=a(11)(333)},571:function(e,t,a){e.exports=a(11)(912)},575:function(e,t,a){"use strict";a.r(t);a(26),a(623)},580:function(e,t,a){"use strict";a.r(t);a(26),a(625),a(598),a(144)},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(63)),r={common:{ossUrl:"GET ".concat(l.default.ossUrl),videoUpload:"POST ".concat(l.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(l.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(l.default.ossUrl,"/upload/policy")}};t.default=r},598:function(e,t,a){"use strict";a.r(t);a(26),a(626)},616:function(e,t,a){"use strict";a.r(t);a(26),a(652)},617:function(e,t,a){e.exports=a(11)(824)},619:function(e,t,a){e.exports=a(11)(415)},623:function(e,t,a){},625:function(e,t,a){},626:function(e,t,a){},643:function(e,t,a){e.exports=a(11)(110)},648:function(e,t,a){"use strict";a.r(t);a(26),a(1022)},652:function(e,t,a){},755:function(e,t,a){"use strict";a.r(t);a(26),a(901)},756:function(e,t,a){e.exports=a(11)(845)},764:function(e,t,a){"use strict";a.r(t);a(26),a(1008),a(554),a(655)},765:function(e,t,a){e.exports=a(11)(855)},901:function(e,t,a){}}]);