(window.webpackJsonp=window.webpackJsonp||[]).push([[88,10],{1533:function(e,t,a){"use strict";var n=a(0);a(44),a(20),a(86),Object.defineProperty(t,"__esModule",{value:!0}),t.postNewsTable=function(e,t){return e.messageType=t,function(e){}},t.getMessageParameter=function(e){return console.log("333333333,333333",e),function(t){return(0,s.default)({url:d,data:e}).then((function(e){console.log("res==",e),t({type:"NEWS_MESSAGE_PARME",data:e.data})}))}},t.postNewsDelete=function(e,t){return console.log(e),function(a){return(0,s.default)({url:m,data:e}).then((function(e){a({type:"NEWS_CUSTOMSEE",data:null}),t&&t()}))}},t.postNewsSend=function(e,t,a,n,l,u){a&&(e.type=a);return function(a){return(0,s.default)({url:"POST ".concat(r.default.base,"/newMessage/manage/message/").concat(t?"send":"cancel"),data:e}).then((function(e){1e3==e.code&&(a({type:"NEWS_CUSTOMSEE",data:null}),u&&u())}))}},t.postCustomAdd=function(e,t){return console.log(e),function(a){return(0,s.default)({url:p,data:e}).then((function(n){1e3==n.code?(t(n),1==e.messageType&&(a({type:"NEWS_CUSTOMSEE",data:null}),t&&t())):l.default.error(n.subMsg)}))}},t.getNewscustomSee=function(e){return console.log(e),function(t){return(0,s.default)({url:c,data:e}).then((function(e){console.log("res==",e),t({type:"NEWS_CUSTOMSEE",data:e.data})}))}},t.setNewscustom=function(){return function(e){e({type:"NEWS_CUSTOMSEE",data:null})}},t.getNewscustomEdit=function(e,t,a,n,r){return console.log(e),function(t){return(0,s.default)({url:f,data:e}).then((function(e){"1000"!=e.code?(l.default.error(e.subMsg),a?(r&&r(),t({type:"HANDLE_MESSAGE_TABLE",data:e.data})):(t({type:"HANDLE_MESSAGE_TABLE",data:e.data}),r&&r())):(t({type:"HANDLE_MESSAGE_TABLE",data:e.data}),r&&r()),r&&r()}))}},t.postSystemTable=y,t.postNewsShelves=function(e,t){return console.log(e),function(a){return(0,s.default)({url:h,data:e}).then((function(e){a({type:"HANDLE_MESSAGE_TABLE",data:e.data}),t&&t()}))}},t.postNewsOffShelf=function(e,t){return console.log(e),function(a){return(0,s.default)({url:E,data:e}).then((function(e){a({type:"HANDLE_MESSAGE_TABLE",data:e.data}),t&&t()}))}},t.postSystemAdd=function(e,t){return console.log(e),function(a){return fetch(newsUrl+"/manage/message/template/add",{type:"POST",data:e}).then((function(e){"1000"==e.code&&t(e),a(y({pageNo:"1"}))}))}},t.postNewsSystemEdit=function(e,t){return console.log(e),function(a){return fetch(newsUrl+"/manage/message/template/update",{type:"POST",data:e}).then((function(e){"1000"==String(e.code)?t&&t():l.default.error(e.subMsg)}))}},t.postHandleMessage=S,t.getHandleMessage=function(e){return console.log(e),function(t){return fetch(api.newsUrllist+"/manage/message/get",{type:"GET",data:e}).then((function(e){console.log(e,"22222"),t({type:"HANDLE_MESSAGE_GET",data:e.data})}))}},t.postHandleMessageEdit=function(e){return console.log(e),function(t){return fetch(api.newsUrllist+"/manage/message/save",{type:"GET",data:e}).then((function(e){4e3==e.code&&l.default.error(e.subMsg),t(S({pageNo:1,pageSize:10,messageType:3}))}))}},t.getHandleMessageShelves=function(e,t,a,n,r){return console.log(e,2222222),function(t){return(0,s.default)({url:v,data:e}).then((function(e){1e3==e.code?(t({type:"HANDLE_MESSAGE_TABLE",data:e.data}),r&&r()):l.default.error(e.subMsg)}))}},t.HANDLE_MESSAGE_GET=t.HANDLE_MESSAGE_TABLEEDIT=t.HANDLE_MESSAGE_TABLE=t.NEWS_MESSAGE_PARME=t.NEWS_SYSTEMEDIT=t.NEWS_SYSTEMADD=t.NEWS_OFFSHELF=t.NEWS_OFFSHELVES=t.NEWS_SYSTEMTABLE=t.NEWS_CUSTOMEDIT=t.NEWS_CUSTOMSEE=t.NEWS_CUSTOMADD=t.NEWS_SEND=t.NEWS_DELETE=t.NEWS_TABLE=void 0,a(61);var l=n(a(62)),s=n(a(78)),r=n(a(63)),u=n(a(1729));t.NEWS_TABLE="NEWS_TABLE";t.NEWS_DELETE="NEWS_DELETE";t.NEWS_SEND="NEWS_SEND";t.NEWS_CUSTOMADD="NEWS_CUSTOMADD";t.NEWS_CUSTOMSEE="NEWS_CUSTOMSEE";t.NEWS_CUSTOMEDIT="NEWS_CUSTOMEDIT";t.NEWS_SYSTEMTABLE="NEWS_SYSTEMTABLE";t.NEWS_OFFSHELVES="NEWS_OFFSHELVES";t.NEWS_OFFSHELF="NEWS_OFFSHELF";t.NEWS_SYSTEMADD="NEWS_SYSTEMADD";t.NEWS_SYSTEMEDIT="NEWS_SYSTEMEDIT";t.NEWS_MESSAGE_PARME="NEWS_MESSAGE_PARME";t.HANDLE_MESSAGE_TABLE="HANDLE_MESSAGE_TABLE";t.HANDLE_MESSAGE_TABLEEDIT="HANDLE_MESSAGE_TABLEEDIT";t.HANDLE_MESSAGE_GET="HANDLE_MESSAGE_GET";var i=u.default.messageManagement,o=i.postHandleMessageApi,d=i.getMessageParameterApi,c=i.getNewscustomSeeApi,f=i.getNewscustomEditApi,m=i.postNewsDeleteApi,p=i.postCustomAddApi,g=i.postSystemTableApi,h=i.postNewsShelvesApi,E=i.postNewsOffShelfApi,v=i.getHandleMessageShelvesApi;function y(e,t){return console.log(e),function(t){return(0,s.default)({url:g,data:e}).then((function(e){t({type:"NEWS_SYSTEMTABLE",data:e.data})}))}}function S(e,t){return console.log("触发消息 ",e),function(a){return(0,s.default)({url:o,data:e}).then((function(e){a({type:"HANDLE_MESSAGE_TABLE",data:e.data}),t&&t()}))}}},1726:function(e,t,a){"use strict";var n=a(0);a(7),a(44),a(3),a(5),a(248),a(103),a(40),a(51),a(9),a(10),a(8),a(20),a(34),a(23),a(905),a(148),a(228),a(6),a(151),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var l=n(a(544));a(140);var s=n(a(535));a(564);var r=n(a(563));a(590);var u=n(a(591));a(61);var i=n(a(62)),o=n(a(29)),d=n(a(30)),c=n(a(59)),f=n(a(32)),m=n(a(33)),p=n(a(31)),g=n(a(2));a(575);var h=n(a(568)),E=n(a(1)),v=n(a(1727)),y=n(a(1728)),S=n(a(1730)),b=n(a(1731)),C=n(a(226)),T=a(52),w=a(1533),x=n(a(223)),M=n(a(1732)),N=n(a(1733));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=h.default.TabPane,I=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(P()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(){var e;(0,o.default)(this,n);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),(0,g.default)((0,c.default)(e),"state",{callback:"1",visible:!1,customvisible:!1,customState:!1,systemvisible:!1,handleMessageVisible:!1,handleMessageModifyVisible:!1,customcurrent:1,custompageSize:"10",systemcurrent:1,systempageSize:"10",query:{},arr:[],str:"0",customrecord:"",systemrecord:"",handleMessagerecord:"",editor:"",handleMessageList:[],handleMessagecurrent:"1",handleMessagepageSize:"10",status:1,lookState:!1,messageType:"1",addNewBtnAbled:!1,values:"",childrenValue:""}),(0,g.default)((0,c.default)(e),"onDelete",(function(t){e.props.postNewsDelete({id:t.id},(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"onSend",(function(t,a,n){var l=e.state.customcurrent,s=e.state.custompageSize;e.props.postNewsSend({id:t.id},a,n,l,s,(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"onEditor",(function(t){e.setState({editor:t})})),(0,g.default)((0,c.default)(e),"getLinkUser",(function(t,a){e.setState({arr:t,str:a})})),(0,g.default)((0,c.default)(e),"customSee",(function(t){e.setState({customvisible:!0,customState:!0,lookState:!0,customrecord:t.id}),e.props.getNewscustomSee({id:t.id})})),(0,g.default)((0,c.default)(e),"customModify",(function(t){e.props.getMessageParameter({messageType:1,relationType:0}),e.setState({customvisible:!0,lookState:!1,customrecord:t.id}),e.props.getNewscustomSee({id:t.id})})),(0,g.default)((0,c.default)(e),"customHandleCancel",(function(){e.setState({customvisible:!1}),e.props.setNewscustom()})),(0,g.default)((0,c.default)(e),"customHandleCreate",(function(){var t=e.customformRef.props.form,a=e.state,n=a.str,l=a.customrecord,s=(a.editor,a.arr),r=e.props.customsee;t.validateFields((function(a,u){if(!a){u.isChangge=!0,u.messageType=1,u.title=u.title.trim();var o,d=new Date(u.sendTime).getTime();if(d<(new Date).getTime()+6e5)i.default.error("发送时间请选择当前时间10分钟以后的时间点");else u.sendTime=d,u.sendType=1,u.messageParameterIds=Array.from(new Set(u.ids)),delete u.ids,delete u.visLet,"1"==u.visibleRange?(o="0"==n?r.messageVisibleRange.map((function(e){return{receiverId:e.receiverId,name:e.name,type:e.type}})):s,e.props.getNewscustomEdit(D({id:l},u,{messageVisibleRange:o}),e.state.customcurrent,1,e.state.custompageSize,(function(){e.handleSearch()}))):e.props.getNewscustomEdit(D({id:l},u),e.state.customcurrent,1,e.state.custompageSize,(function(){e.handleSearch()})),t.resetFields(),e.setState({customvisible:!1})}}))})),(0,g.default)((0,c.default)(e),"customFormRef",(function(t){e.customformRef=t})),(0,g.default)((0,c.default)(e),"callback",(function(t){e.setState({callback:t,messageType:t,addNewBtnAbled:3==t},(function(){1==t?e.props.postHandleMessage({pageNo:"1",pageSize:"10",messageType:1}):2==t?e.props.postHandleMessage({pageNo:"1",pageSize:"10",messageType:2}):e.props.postHandleMessage({pageNo:"1",pageSize:"10",messageType:3})}))})),(0,g.default)((0,c.default)(e),"QueryForm",(function(t){e.state.callback,e.props.postHandleMessage({title:t,messageType:e.state.messageType})})),(0,g.default)((0,c.default)(e),"showModal",(function(){e.setState({visible:!0})})),(0,g.default)((0,c.default)(e),"handleCancel",(function(){e.setState({visible:!1})})),(0,g.default)((0,c.default)(e),"cancel",(function(){e.setState({visible:!1})})),(0,g.default)((0,c.default)(e),"systemSee",(function(t){e.setState({systemvisible:!0,systemrecord:t})})),(0,g.default)((0,c.default)(e),"systemModify",(function(t,a){e.props.getMessageParameter({messageType:t.messageType,relationType:t.relationType}),e.setState({systemvisible:!0,systemrecord:t,systemrecordId:t.id,lookState:!!a},(function(){e.props.getNewscustomSee({id:t.id})}))})),(0,g.default)((0,c.default)(e),"systemHandleCancel",(function(){e.setState({systemvisible:!1})})),(0,g.default)((0,c.default)(e),"systemHandleCreate",(function(){var t=e.systemformRef.props.form,a=e.state,n=a.systemrecordId,l=a.systemrecord;t.validateFields((function(a,s){a||(s.isChangge=!0,s.messageType=l.messageType,s.title=s.title.trim(),s.sendType=1,s.messageParameterIds=Array.from(new Set(s.ids)),delete s.ids,delete s.visLet,e.props.getNewscustomEdit(D({id:n},s),e.state.systemcurrent,2,e.state.systempageSize,(function(){e.handleSearch()})),t.resetFields(),e.setState({systemvisible:!1}))}))})),(0,g.default)((0,c.default)(e),"systemFormRef",(function(t){e.systemformRef=t})),(0,g.default)((0,c.default)(e),"messageCheckModify",(function(t,a){a?e.setState({lookState:!0}):e.setState({lookState:!1}),e.props.getMessageParameter({messageType:t.messageType,relationType:t.relationType}),e.setState({handleMessageVisible:!0,handleMessagerecord:t,messageId:t.id},(function(){e.props.getNewscustomSee({id:t.id})}))})),(0,g.default)((0,c.default)(e),"messageCheckHandleCancel",(function(){e.setState({handleMessageVisible:!1})})),(0,g.default)((0,c.default)(e),"messageModifyCheckHandleCancel",(function(){e.setState({handleMessageModifyVisible:!1})})),(0,g.default)((0,c.default)(e),"messageCheckHandleCreate",(function(){var t=e.state,a=t.messageId,n=t.handleMessagerecord,l=e.handleMessagFrom.props.form;l.validateFields((function(t,s){t||(s.isChangge=!0,s.messageType=n.messageType,s.title=s.title.trim(),s.messageParameterIds=Array.from(new Set(e.props.customsee.messageParameterIds,s.ids)),s.sendType=1,delete s.ids,delete s.visLet,e.props.getNewscustomEdit(D({id:a},s),e.state.handleMessagecurrent,3,e.state.handleMessagepageSize,(function(){e.handleSearch()})),l.resetFields(),e.setState({handleMessageVisible:!1}))}))})),(0,g.default)((0,c.default)(e),"messageCheckFormRef",(function(t){e.messageCheckformRef=t})),(0,g.default)((0,c.default)(e),"messageShelves",(function(t,a){e.props.getHandleMessageShelves({id:t.id,status:7},a,e.state.systemcurrent,e.state.systempageSize,(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"messageOffShelf",(function(t,a){e.props.getHandleMessageShelves({id:t.id,status:6},a,e.state.systemcurrent,e.state.systempageSize,(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"shelves",(function(t){e.props.postNewsShelves({id:t.id},(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"offShelf",(function(t){e.props.postNewsOffShelf({id:t.id},(function(){e.handleSearch()}))})),(0,g.default)((0,c.default)(e),"onClickChange",(function(t){console.log("92929292",t),e.setState({childrenValue:t},(function(){console.log("0000000000000000",e.state.childrenValue)}))})),(0,g.default)((0,c.default)(e),"handleSearch",(function(){e.QueryForm(e.state.childrenValue)})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.postHandleMessage({pageNo:1,pageSize:10,messageType:1})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.table,t.postNewsTable,t.systemtable,t.postSystemTable,t.customsee),n=t.postHandleMessage,i=t.handlemessagetable,o=(t.handlemessagetableget,this.state),d=(o.customcurrent,o.custompageSize,o.systemcurrent,o.systempageSize,o.handleMessagepageSize,o.handleMessagecurrent,o.lookState);console.log(a,"customsee");var c=[{title:"消息序号",dataIndex:"num"},{title:"消息标题",dataIndex:"title"},{title:"发送时间",dataIndex:"sendTime",render:function(e){return E.default.createElement("span",null,(0,x.default)(e).format("YYYY-MM-DD HH:mm"))}},{title:"状态",dataIndex:"statusString"},{title:"创建时间",dataIndex:"createTime",render:function(e){return E.default.createElement("span",null,(0,x.default)(e).format("YYYY-MM-DD HH:mm"))}},{title:"操作",dataIndex:"operation",render:function(t,a){return E.default.createElement("div",null,E.default.createElement("div",null,E.default.createElement("a",{onClick:function(){return e.customSee(a)}},"查看"),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{disabled:1!=a.status,onClick:function(){return e.customModify(a)}},"修改"),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement(r.default,{title:"是否发送?",onConfirm:function(){return e.onSend(a,!0,0)}},E.default.createElement("a",{disabled:1!=a.status},"发送")),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement(r.default,{title:"是否删除?",onConfirm:function(){return e.onDelete(a)}},E.default.createElement("a",{disabled:1!=a.status},"删除")),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement(r.default,{title:"是否删除?",onConfirm:function(){return e.onSend(a,!1,2)}},E.default.createElement("a",{disabled:4!=a.status},"撤回")),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement(r.default,{title:"取消发送?",onConfirm:function(){return e.onSend(a,!1,1)}},E.default.createElement("a",{disabled:2!=a.status},"取消发送"))))}}],f=[{title:"模板编号",dataIndex:"num",width:100},{title:"模板标题",dataIndex:"templateName"},{title:"应用场景",dataIndex:"relationTypeString"},{title:"消息标题",dataIndex:"title",width:200},{title:"状态",dataIndex:"statusString",width:200},{title:"操作",dataIndex:"operation",width:200,render:function(t,a){return E.default.createElement("div",null,E.default.createElement("a",{onClick:function(){return e.systemModify(a,"look")}},"查看"),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{disabled:"7"==a.status,onClick:function(){return e.systemModify(a)}},"修改"),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{disabled:"7"==a.status,onClick:function(){return e.messageShelves(a,2,2)}},"上架"),E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{disabled:"6"==a.status||"0"===a.siteId,onClick:function(){return e.messageOffShelf(a,2,2)}},"下架"))}}],m=this,p={showQuickJumper:!0,showSizeChanger:!0,total:null!==i?i.total:null,showTotal:function(e){return"共计 ".concat(e," 条")},PageSize:null!==i?i.pageSize:null,current:null!==i?i.current:null,onShowSizeChange:function(e,t){m.setState({customcurrent:1,custompageSize:t}),n({pageNo:1,pageSize:t,messageType:1})},onChange:function(e,t){m.setState({customcurrent:e,custompageSize:t}),n({pageNo:e,pageSize:t,messageType:1})}};console.log("handlemessagetable",i);i&&i.total,i&&i.pageSize,null!==i&&i.current;var g={showQuickJumper:!0,showSizeChanger:!0,total:null!==i?i.total:null,showTotal:function(e){return"共计 ".concat(e," 条")},PageSize:null!==i?i.pageSize:null,current:null!==i?i.current:null,onShowSizeChange:function(e,t){m.setState({systemcurrent:e,systempageSize:t}),n({pageNo:1,pageSize:t,messageType:2})},onChange:function(e,t){m.setState({systemcurrent:e,systempageSize:t}),n({pageNo:e,pageSize:t,messageType:2})}};return E.default.createElement("div",{className:N.default.mar40},E.default.createElement(C.default,{title:"消息管理"}),E.default.createElement("div",{className:N.default.newsHead},E.default.createElement(v.default,{QueryForm:this.QueryForm,onClickChange:this.onClickChange}),E.default.createElement(s.default,{className:N.default.marl40,type:"primary",onClick:this.showModal,disabled:this.state.addNewBtnAbled},"新增消息"),this.state.visible&&E.default.createElement(y.default,{handleSearch:this.handleSearch,visible:this.state.visible,onCancel:this.handleCancel,cancel:this.cancel,postHandleMessage:this.props.postHandleMessage,messageType:this.state.messageType})),E.default.createElement(h.default,{defaultActiveKey:"1",animated:!1,onChange:this.callback},E.default.createElement(A,{tab:"自定义消息",key:"1"},E.default.createElement(l.default,{rowKey:function(e){return e.id},dataSource:i?i.records:[],columns:c,pagination:p})),E.default.createElement(A,{tab:"系统消息模板",key:"2"},E.default.createElement(l.default,{rowKey:function(e){return e.id},dataSource:i?i.records:[],columns:f,pagination:g}))),this.state.customvisible&&a&&E.default.createElement(S.default,{wrappedComponentRef:this.customFormRef,visible:this.state.customvisible,onCancel:this.customHandleCancel,onCreate:this.customHandleCreate,getLinkUser:this.getLinkUser,onEditor:this.onEditor,record:a,lookState:d,newmessageparm:this.props.newmessageparm,handleSearch:this.handleSearch}),this.state.systemvisible&&a&&E.default.createElement(b.default,{wrappedComponentRef:this.systemFormRef,visible:this.state.systemvisible,onCancel:this.systemHandleCancel,onCreate:this.systemHandleCreate,record:a,lookState:d,newmessageparm:this.props.newmessageparm}),this.state.handleMessageVisible&&a&&E.default.createElement(M.default,{wrappedComponentRef:function(t){return e.handleMessagFrom=t},visible:this.state.handleMessageVisible,onCancel:this.messageCheckHandleCancel,onCreate:this.messageCheckHandleCreate,record:a,lookState:d,newmessageparm:this.props.newmessageparm}))}}]),n}(E.default.Component);var O=(0,T.connect)((function(e,t){return{table:e.news.table,delete:e.news.delete,send:e.news.send,customsee:e.news.customsee,customedit:e.news.customedit,systemtable:e.news.systemtable,handlemessagetable:e.news.handlemessagetable,handlemessagetableedit:e.news.handlemessagetableedit,handlemessagetableget:e.news.handlemessagetableget,offshelf:e.news.offshelf,shelves:e.news.shelves,systemedit:e.news.systemedit,newmessageparm:e.news.newmessageparm}}),(function(e){return{postNewsTable:function(t){return e((0,w.postNewsTable)(t))},postNewsDelete:function(t,a){return e((0,w.postNewsDelete)(t,a))},postNewsSend:function(t,a,n,l,s,r){return e((0,w.postNewsSend)(t,a,n,l,s,r))},getNewscustomSee:function(t){return e((0,w.getNewscustomSee)(t))},getNewscustomEdit:function(t,a,n,l,s){return e((0,w.getNewscustomEdit)(t,a,n,l,s))},postSystemTable:function(t){return e((0,w.postSystemTable)(t))},postNewsOffShelf:function(t){return e((0,w.postNewsOffShelf)(t))},postNewsShelves:function(t,a){return e((0,w.postNewsShelves)(t,a))},postNewsSystemEdit:function(t){return e((0,w.postNewsSystemEdit)(t))},postHandleMessage:function(t,a){return e((0,w.postHandleMessage)(t,a))},postHandleMessageEdit:function(t){return e((0,w.postHandleMessageEdit)(t))},getHandleMessage:function(t){return e((0,w.getHandleMessage)(t))},setNewscustom:function(){return e((0,w.setNewscustom)())},getHandleMessageShelves:function(t,a,n,l,s){return e((0,w.getHandleMessageShelves)(t,a,n,l,s))},getMessageParameter:function(t){return e((0,w.getMessageParameter)(t))}}}))(I);t.default=O},1727:function(e,t,a){"use strict";var n=a(0);a(44),a(20),a(34),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var l=n(a(535));a(537);var s=n(a(536)),r=n(a(29)),u=n(a(30)),i=n(a(59)),o=n(a(32)),d=n(a(33)),c=n(a(31)),f=n(a(2));a(540);var m=n(a(539)),p=n(a(1));function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=m.default.Item,E=function(e){(0,o.default)(n,e);var t,a=(t=n,function(){var e,a=(0,c.default)(t);if(g()){var n=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(){var e;(0,r.default)(this,n);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),(0,f.default)((0,i.default)(e),"handleSubmit",(function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||(console.log("value",a),e.props.QueryForm(a.title.trim()),e.props.onClickChange(a.title.trim()))}))})),e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return p.default.createElement(m.default,{className:"queryForm",layout:"inline",onSubmit:this.handleSubmit},p.default.createElement(h,{label:"消息标题："},e("title")(p.default.createElement(s.default,{placeholder:"请输入消息标题"}))),p.default.createElement(h,null,p.default.createElement(l.default,{type:"primary",htmlType:"submit"},"查询")))}}]),n}(p.default.Component),v=m.default.create()(E);t.default=v},1728:function(e,t,a){"use strict";var n=a(0);a(7),a(44),a(3),a(5),a(248),a(101),a(103),a(40),a(143),a(51),a(9),a(10),a(8),a(20),a(34),a(23),a(905),a(148),a(228),a(6),a(151),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(592);var l=n(a(566));a(224);var s=n(a(225));a(556);var r=n(a(553));a(140);var u=n(a(535));a(537);var i=n(a(536)),o=n(a(98)),d=n(a(81));a(61);var c=n(a(62)),f=n(a(29)),m=n(a(30)),p=n(a(59)),g=n(a(32)),h=n(a(33)),E=n(a(31)),v=n(a(2));a(712);var y=n(a(643));a(554);var S=n(a(550));a(540);var b=n(a(539)),C=n(a(1)),T=n(a(624)),w=a(1533),x=a(52),M=n(a(628)),N=n(a(223));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=b.default.Item,I=S.default.Option,O=(y.default.Group,function(e){(0,g.default)(n,e);var t,a=(t=n,function(){var e,a=(0,E.default)(t);if(P()){var n=(0,E.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(){var e;(0,f.default)(this,n);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),(0,v.default)((0,p.default)(e),"state",{types:"1",messageType:1,editor:"",radioValue:0,cursurPosition:0,selectStudentVisible:!1,insertBisabled:!1,mode:[],arr:[],arrs:[],messageParameterIds:[],messageContent:"",messageIds:"1",messagelabel:"用户姓名",insertDisabled:!1}),(0,v.default)((0,p.default)(e),"onChange",(function(t){e.setState({mode:t})})),(0,v.default)((0,p.default)(e),"onRadioChange",(function(t){e.setState({radioValue:t.target.value})})),(0,v.default)((0,p.default)(e),"getEditorHtml",(function(t){e.setState({editor:t})})),(0,v.default)((0,p.default)(e),"getUser",(function(t){var a=t.map((function(e){return{relationId:e.id,type:e.type,name:e.name}}));e.setState({arr:a})})),(0,v.default)((0,p.default)(e),"handleChange",(function(t){e.setState({messageType:t}),1==t?e.visLetAPI(1,0):2==t?e.visLetAPI(2,1):e.visLetAPI(3,2)})),(0,v.default)((0,p.default)(e),"visLetAPI",(function(t,a){e.props.getMessageParameter({messageType:t,relationType:a})})),(0,v.default)((0,p.default)(e),"selectStudent",(function(){1!=e.state.radioValue?c.default.info("请选择指定用户!"):e.setState({selectStudentVisible:!0})})),(0,v.default)((0,p.default)(e),"closeSelectStudent",(function(){e.setState({selectStudentVisible:!1})})),(0,v.default)((0,p.default)(e),"visibleRangeOk",(function(){var t=e.state.arr;e.setState({selectStudentVisible:!1,arrs:t})})),(0,v.default)((0,p.default)(e),"handleSubmit",(function(t){var a=(0,p.default)(e),n=e.state,l=n.arrs,s=n.messageParameterIds,r=n.messageContentlabel,u=n.messageContent;t.preventDefault(),e.props.form.validateFields((function(t,n){if(!t){if(n.isChangge=!1,n.title=n.title.trim(),n.messageParameterIds=Array.from(new Set(s)),1==e.state.messageType){var i=new Date(n.sendTime).getTime();if(i<(new Date).getTime()+6e5)return void c.default.error("发送时间请选择当前时间10分钟以后的时间点");if(n.sendTime=i,e.state.editor.length>500)return c.default.info("请不要超过500字!");n.sendType=1,r&&(n.context=u),delete n.visLet,e.props.postCustomAdd(D({messageType:0},n,{messageVisibleRange:l}),(function(){e.props.handleSearch()}))}else 3==e.state.messageType?(delete n.visLet,n.sendType=1,n.context=r?u:n.context,e.props.postCustomAdd(n,(function(){e.props.handleSearch()}))):(delete n.visLet,n.sendType=1,n.context=r?u:n.context,n.templateName=n.name,delete n.name,e.props.postCustomAdd(n,(function(){e.props.handleSearch()})));a.props.cancel()}}))})),(0,v.default)((0,p.default)(e),"cancel",(function(){e.props.cancel()})),(0,v.default)((0,p.default)(e),"disabledDate",(function(e){return e&&e<(0,N.default)().endOf("day").subtract(1,"days")})),(0,v.default)((0,p.default)(e),"insertContent",(function(){var t=e.state,a=t.cursurPosition,n=t.messageContent,l=t.messageIds,s=t.messageParameterIds,r=(t.messagelabel,t.messagelabelvalue);console.log(a,"cursurPosition");var u=n.slice(0,a)+r+n.slice(a),i=n.slice(0,a)+r+n.slice(a);e.setState({messageParameterIds:[].concat((0,d.default)(s),[l])},(function(){e.setState({messageContent:u,messageContentlabel:i,insertDisabled:!0}),e.props.form.setFieldsValue({context:u}),console.log(e.state.messageParameterIds,"mIDarray")}))})),(0,v.default)((0,p.default)(e),"contentOnChange",(function(t){""===t.target.value&&e.setState({insertDisabled:!1}),e.setState({messageContent:t.target.value})})),(0,v.default)((0,p.default)(e),"getTxt1CursorPosition",(function(t){var a;a=t.target.selectionStart,e.setState({cursurPosition:a})})),(0,v.default)((0,p.default)(e),"activityTypeSelect",(function(t){e.visLetAPI(e.state.messageType,t)})),(0,v.default)((0,p.default)(e),"relationSelect",(function(t){e.visLetAPI(e.state.messageType,t)})),e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.setState({messageType:parseInt(this.props.messageType)}),this.visLetAPI(this.props.messageType,1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,d=(t.onCreate,t.form.getFieldDecorator),c=this.state,f=c.messageContent,m=c.insertDisabled;console.log(f,"插入内容事件拼接");var p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return C.default.createElement(s.default,{width:1e3,visible:a,title:"新建消息",onCancel:n,footer:null,destroyOnClose:!0},C.default.createElement(b.default,{onSubmit:this.handleSubmit},C.default.createElement(A,(0,o.default)({},p,{label:"消息类型："}),d("messageType",{initialValue:this.state.messageType})(C.default.createElement(S.default,{onChange:this.handleChange,disabled:!0},C.default.createElement(I,{value:1},"自定义消息"),C.default.createElement(I,{value:2},"系统消息模板")))),1==this.state.messageType?C.default.createElement("div",null,C.default.createElement(A,(0,o.default)({},p,{label:"消息标题："}),d("title",{rules:[{required:!0,validator:function(e,t,a){(0,M.default)(e,t,a,"请输入消息标题",100)}}]})(C.default.createElement(i.default,{placeholder:"请输入消息标题！"}))),C.default.createElement(A,(0,o.default)({},p,{label:"发送方式："}),d("sendType",{initialValue:[1],rules:[{required:!0,message:"请选择发送方式！"}]})(C.default.createElement(y.default.Group,{style:{width:"100%"},disabled:!0,onChange:this.onChange},C.default.createElement(y.default,{value:1},"站内消息")))),C.default.createElement(A,(0,o.default)({},p,{label:"可用变量："}),d("visLet",{initialValue:this.state.messageParameterIds})(C.default.createElement(S.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,insertBisabled:!0,messagelabel:a.props.children,messagelabelvalue:a.props.value})}},this.props.newmessageparm.map((function(e){return C.default.createElement(I,{key:e.id,value:e.relationField},e.name)})))),C.default.createElement(u.default,{type:"primary",disabled:!this.state.insertBisabled,onClick:this.insertContent},"插入")),C.default.createElement(A,(0,o.default)({},p,{label:"消息内容："}),d("context",{initialValue:this.state.messageContent,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(C.default.createElement(i.default.TextArea,{placeholder:"请输入消息内容！",onChange:this.contentOnChange,onBlur:this.getTxt1CursorPosition,onClick:this.getTxt1CursorPosition}))),"-1"!=this.state.mode.indexOf("3")?C.default.createElement("div",null,C.default.createElement(A,(0,o.default)({},p,{label:"后续动作："}),d("forwardTarget",{initialValue:"1"})(C.default.createElement(r.default.Group,null,C.default.createElement(r.default,{value:"1"},"打开App首页"),C.default.createElement(r.default,{value:"2"},"打开App指定内容"))))):"",C.default.createElement(A,(0,o.default)({},p,{label:"通知对象："}),d("visibleRange",{initialValue:0})(C.default.createElement(r.default.Group,{onChange:this.onRadioChange},C.default.createElement(r.default,{value:0},"平台用户可见"),C.default.createElement(r.default,{value:1},"指定用户可见"))),C.default.createElement(u.default,{type:"primary",disabled:0==this.state.radioValue,onClick:this.selectStudent},"指定用户"),C.default.createElement(s.default,{width:1160,visible:this.state.selectStudentVisible,onCancel:this.closeSelectStudent,onOk:this.visibleRangeOk},C.default.createElement(T.default,{getData:this.getUser,types:"message",groupTypes:"message",invisible:!1}))),C.default.createElement(A,(0,o.default)({},p,{label:"指定发送时间：",extra:"发送时间请选择当前时间10分钟以后的时间点"}),d("sendTime",{rules:[{required:!0,message:"请选择发送时间！"}]})(C.default.createElement(l.default,{disabledDate:this.disabledDate,showToday:!1,showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})))):3==this.state.messageType?C.default.createElement("div",null,C.default.createElement(A,(0,o.default)({},p,{label:"活动名称："}),d("relationType",{initialValue:2,rules:[{required:!0,message:"活动名称!"}]})(C.default.createElement(S.default,{onChange:this.activityTypeSelect},C.default.createElement(I,{value:2},"考试"),C.default.createElement(I,{value:5},"报名"),C.default.createElement(I,{value:6},"作业"),C.default.createElement(I,{value:7},"签到"),C.default.createElement(I,{value:8},"项目"),C.default.createElement(I,{value:10},"积分"),C.default.createElement(I,{value:11},"课程")))),C.default.createElement(A,(0,o.default)({},p,{label:"触发事件："}),d("eventName",{initialValue:"考试阅卷已完成",rules:[{required:!0,message:"请输入触发事件！"}]})(C.default.createElement(S.default,null,C.default.createElement(I,{value:"课程上架成功"},"课程上架成功"),C.default.createElement(I,{value:"课程学习已完成"},"课程学习已完成"),C.default.createElement(I,{value:"项目报名开始"},"项目报名开始"),C.default.createElement(I,{value:"项目学习已完成"},"项目学习已完成"),C.default.createElement(I,{value:"报名审核通过"},"报名审核通过"),C.default.createElement(I,{value:"报名审核未通过"},"报名审核未通过"),C.default.createElement(I,{value:"扫码签到成功"},"扫码签到成功"),C.default.createElement(I,{value:"作业批阅已完成"},"作业批阅已完成"),C.default.createElement(I,{value:"考试阅卷已完成"},"考试阅卷已完成"),C.default.createElement(I,{value:"积分变动已完成"},"积分变动已完成")))),C.default.createElement(A,(0,o.default)({},p,{label:"消息标题："}),d("title",{rules:[{max:100,message:"消息标题不能超过100个字！"},{required:!0,message:"请输入消息标题！"}]})(C.default.createElement(i.default,{placeholder:"请输入消息标题！"}))),C.default.createElement(A,(0,o.default)({},p,{label:"可用变量："}),d("visLet",{initialValue:this.state.messageIds})(C.default.createElement(S.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,messagelabel:a.props.children,messagelabelvalue:a.props.value})}},this.props.newmessageparm.map((function(e){return C.default.createElement(I,{key:e.id,value:e.relationField},e.name)})))),C.default.createElement(u.default,{type:"primary",onClick:this.insertContent},"插入")),C.default.createElement(A,(0,o.default)({},p,{label:"消息内容："}),d("context",{initialValue:this.state.messageContent,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(C.default.createElement(i.default.TextArea,{placeholder:"请输入消息内容！",onChange:this.contentOnChange,onClick:this.getTxt1CursorPosition})))):C.default.createElement("div",null,C.default.createElement(A,(0,o.default)({},p,{label:"活动名称"}),d("name",{rules:[{max:100,message:"模板名称不能超过100个字！"},{required:!0,message:"请输入模板名称！"}]})(C.default.createElement(i.default,{placeholder:"请输入模板名称！"}))),C.default.createElement(A,(0,o.default)({},p,{label:"应用场景："}),d("relationType",{initialValue:1})(C.default.createElement(S.default,{onChange:this.relationSelect,disabled:m},C.default.createElement(I,{value:1},"学习计划"),C.default.createElement(I,{value:2},"考试"),C.default.createElement(I,{value:3},"调研"),C.default.createElement(I,{value:6},"作业"),C.default.createElement(I,{value:8},"项目"),C.default.createElement(I,{value:9},"直播")))),C.default.createElement(A,(0,o.default)({},p,{label:"可用变量："}),d("visLet",{initialValue:this.state.messageIds})(C.default.createElement(S.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,messagelabel:a.props.children,messagelabelvalue:a.props.value,insertBisabled:!0})}},this.props.newmessageparm.map((function(e){return C.default.createElement(I,{key:e.id,value:e.relationField},e.name)})))),C.default.createElement(u.default,{type:"primary",disabled:!this.state.insertBisabled,onClick:this.insertContent},"插入")),C.default.createElement(A,(0,o.default)({},p,{label:"消息标题："}),d("title",{rules:[{max:100,message:"消息标题不能超过100个字！"},{required:!0,message:"请输入消息标题！"}]})(C.default.createElement(i.default,{placeholder:"请输入消息标题！"}))),C.default.createElement(A,(0,o.default)({},p,{label:"消息内容："}),d("context",{initialValue:this.state.messageContent,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(C.default.createElement(i.default.TextArea,{placeholder:"请输入消息内容！",onChange:this.contentOnChange,onClick:this.getTxt1CursorPosition})))),C.default.createElement(A,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:6}}},C.default.createElement(u.default,{type:"primary",style:{marginRight:"40px"},onClick:this.cancel},"取消"),C.default.createElement(u.default,{className:"marl40",type:"primary",htmlType:"submit"},"保存"))))}}]),n}(C.default.Component)),L=b.default.create()(O);var _=(0,x.connect)((function(e,t){return{systemadd:e.news.systemadd,customadd:e.news.customadd,newmessageparm:e.news.newmessageparm}}),(function(e){return{postSystemAdd:function(t,a){return e((0,w.postSystemAdd)(t,a))},postCustomAdd:function(t,a){return e((0,w.postCustomAdd)(t,a))},getMessageParameter:function(t){return e((0,w.getMessageParameter)(t))}}}))(L);t.default=_},1729:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(63)),s={messageManagement:{postHandleMessageApi:"GET ".concat(l.default.base,"/newMessage/manage/message/page"),getMessageParameterApi:"GET ".concat(l.default.base,"/newMessage/manage/messageParameter/getList"),getNewscustomSeeApi:"GET ".concat(l.default.base,"/newMessage/manage/message/get"),getNewscustomEditApi:"POST ".concat(l.default.base,"/newMessage/manage/message/update"),postNewsDeleteApi:"POST ".concat(l.default.base,"/newMessage/manage/message/deleted"),postCustomAddApi:"POST ".concat(l.default.base,"/newMessage/manage/message/save"),postSystemTableApi:"POST ".concat(l.default.base,"/message/manage/message/template/list/page"),postNewsShelvesApi:"POST ".concat(l.default.base,"/message/manage/message/template/up"),postNewsOffShelfApi:"POST ".concat(l.default.base,"/message/manage/message/template/down"),getHandleMessageShelvesApi:"POST ".concat(l.default.base,"/newMessage/manage/message/upOrDown")}};t.default=s},1730:function(e,t,a){"use strict";var n=a(0);a(44),a(40),a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(592);var l=n(a(566));a(224);var s=n(a(225));a(556);var r=n(a(553));a(712);var u=n(a(643)),i=n(a(98));a(537);var o=n(a(536));a(140);var d=n(a(535)),c=n(a(81));a(61);var f=n(a(62)),m=n(a(29)),p=n(a(30)),g=n(a(59)),h=n(a(32)),E=n(a(33)),v=n(a(31)),y=n(a(2));a(554);var S=n(a(550));a(540);var b=n(a(539)),C=n(a(1)),T=n(a(624)),w=n(a(223)),x=n(a(628));function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var N=b.default.Item,k=S.default.Option,D=function(e){(0,h.default)(n,e);var t,a=(t=n,function(){var e,a=(0,v.default)(t);if(M()){var n=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,E.default)(this,e)});function n(e){var t;return(0,m.default)(this,n),t=a.call(this,e),(0,y.default)((0,g.default)(t),"onRadioChange",(function(e){t.setState({radioValue:e.target.value})})),(0,y.default)((0,g.default)(t),"getEditorHtml",(function(e){t.props.onEditor(e),t.setState({editor:e})})),(0,y.default)((0,g.default)(t),"getUser",(function(e){var a=e.map((function(e){return{relationId:e.id,type:e.type,name:e.name,fullName:e.fullName,workNum:e.workNum}}));t.setState({arrays:a,str:"2"})})),(0,y.default)((0,g.default)(t),"selectStudent",(function(){if("1"!=t.state.radioValue)f.default.info("请选择指定用户!");else{var e=t.props.record.messageVisibleRange.map((function(e){return{id:e.relationId,name:e.name,type:e.type,fullName:e.fullName,workNum:e.workNum}}));t.setState({selectStudentVisible:!0,recorder:e})}})),(0,y.default)((0,g.default)(t),"closeSelectStudent",(function(){t.setState({selectStudentVisible:!1})})),(0,y.default)((0,g.default)(t),"visibleRangeOk",(function(){var e=t.state,a=e.arr,n=e.arrays,l=e.str;t.setState({selectStudentVisible:!1,arrs:a}),t.props.getLinkUser(n,l)})),(0,y.default)((0,g.default)(t),"insertContent",(function(){var e=t.state,a=e.cursurPosition,n=e.messageContent,l=e.messageIds,s=(e.mIDarray,e.messageParameterIds),r=(e.messagelabel,e.messagelabelvalue);console.log(a,"cursurPosition");var u=n.slice(0,a)+r+n.slice(a),i=n.slice(0,a)+r+n.slice(a);t.setState({messageParameterIds:[].concat((0,c.default)(s),[l])},(function(){t.setState({messageContent:u,messageContentlabel:i}),t.props.form.setFieldsValue({context:u,ids:t.state.messageParameterIds}),console.log(t.state.messageParameterIds,"mIDarray")}))})),(0,y.default)((0,g.default)(t),"contentOnChange",(function(e){console.log(e.target.value,"e.target.value"),console.log(t.props.form.getFieldValue("context1"),"this.props.form.getFieldDecorator"),t.setState({messageContent:e.target.value})})),(0,y.default)((0,g.default)(t),"getTxt1CursorPosition",(function(e){var a;a=e.target.selectionStart,t.setState({cursurPosition:a})})),t.state={editor:"",selectStudentVisible:!1,insertBisabled:!1,recorder:"",arr:[],arrs:[],arrays:[],messageParameterIds:e.record.messageParameterIds||[],str:"1",messageContent:e.record&&e.record.context,radioValue:e.record&&""+e.record.visibleRange},t}return(0,p.default)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCreate,c=t.onCancel,f=t.form,m=t.record,p=t.lookState,g=f.getFieldDecorator,h=!!p;console.log(m.messageParameterIds[0]);var E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return C.default.createElement(s.default,{width:700,visible:a,title:"自定义消息",onCancel:c,onOk:n,footer:h?null:C.default.createElement("div",null,C.default.createElement("span",null,C.default.createElement(d.default,{onClick:c},"取消"),C.default.createElement(d.default,{type:"primary",style:{marginLeft:"15px"},onClick:n},"确定"))),destroyOnClose:!0},C.default.createElement(b.default,{onSubmit:this.handleSubmit},C.default.createElement(N,(0,i.default)({},E,{label:"消息标题："}),g("title",{initialValue:m&&m.title,rules:[{required:!0,validator:function(e,t,a){(0,x.default)(e,t,a,"请输入消息标题",100)}}]})(C.default.createElement(o.default,{placeholder:"请输入消息标题！",disabled:h}))),C.default.createElement(N,(0,i.default)({},E,{label:"发送方式："}),g("sendType",{initialValue:m&&[m.sendType],rules:[{required:!0,message:"请选择发送方式！"}]})(C.default.createElement(u.default.Group,{style:{width:"100%"},disabled:!0,onChange:this.onChange},C.default.createElement(u.default,{value:1},"站内消息")))),C.default.createElement(N,(0,i.default)({},E,{label:"可用变量："}),g("visLet",{})(C.default.createElement(S.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,insertBisabled:!0,messagelabel:a.props.children,messagelabelvalue:a.props.value})}},this.props.newmessageparm.map((function(e){return C.default.createElement(k,{key:e.id,value:e.relationField},e.name)})))),C.default.createElement(d.default,{type:"primary",disabled:!this.state.insertBisabled,onClick:this.insertContent},"插入")),C.default.createElement(N,(0,i.default)({},E,{label:"消息内容："}),g("context",{initialValue:m&&m.context,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(C.default.createElement(o.default.TextArea,{disabled:h,placeholder:"请输入消息内容！",onChange:this.contentOnChange,onClick:this.getTxt1CursorPosition}))),C.default.createElement(N,(0,i.default)({},E,{label:"通知对象："}),g("visibleRange",{initialValue:m&&m.visibleRange})(C.default.createElement(r.default.Group,{disabled:h,onChange:this.onRadioChange},C.default.createElement(r.default,{value:0},"平台用户可见"),C.default.createElement(r.default,{value:1},"指定用户可见"))),C.default.createElement(d.default,{type:"primary",disabled:0==this.state.radioValue,onClick:this.selectStudent},"指定用户"),"1"!=m.status?C.default.createElement(s.default,{width:1160,visible:this.state.selectStudentVisible,onCancel:this.closeSelectStudent,onOk:this.visibleRangeOk,footer:null},C.default.createElement(T.default,{getData:this.getUser,types:"message",groupTypes:"message",invisible:!1,initData:this.state.recorder})):C.default.createElement(s.default,{width:1160,visible:this.state.selectStudentVisible,onCancel:this.closeSelectStudent,onOk:this.visibleRangeOk},C.default.createElement(T.default,{getData:this.getUser,types:"message",groupTypes:"message",invisible:!1,initData:this.state.recorder}))),C.default.createElement(N,(0,i.default)({},E,{label:"指定发送时间："}),g("sendTime",{initialValue:m&&(0,w.default)(m.sendTime),rules:[{required:!0,message:"请选择发送时间！"}]})(C.default.createElement(l.default,{showToday:!1,showTime:!0,format:"YYYY-MM-DD HH:mm:ss",disabled:h}))),C.default.createElement(N,E,g("ids",{initialValue:m&&m.messageParameterIds})(C.default.createElement("div",null))),C.default.createElement(N,E,g("messageContextId",{initialValue:m&&m.messageContextId})(C.default.createElement("div",null)))))}}]),n}(C.default.Component),P=b.default.create()(D);t.default=P},1731:function(e,t,a){"use strict";var n=a(0);a(44),a(40),a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var l=n(a(225));a(140);var s=n(a(535)),r=n(a(98));a(537);var u=n(a(536)),i=n(a(81)),o=n(a(29)),d=n(a(30)),c=n(a(59)),f=n(a(32)),m=n(a(33)),p=n(a(31)),g=n(a(2));a(554);var h=n(a(550));a(540);var E=n(a(539)),v=n(a(1));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=E.default.Item,b=h.default.Option,C=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(y()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,g.default)((0,c.default)(t),"insertContent",(function(){var e=t.state,a=e.cursurPosition,n=e.messageContent,l=e.messageIds,s=e.messageParameterIds,r=e.messagelabelvalue;console.log(a,"cursurPosition");var u=n.slice(0,a)+r+n.slice(a),o=n.slice(0,a)+r+n.slice(a);t.setState({messageParameterIds:[].concat((0,i.default)(s),[l])},(function(){t.setState({messageContent:u,messageContentlabel:o}),t.props.form.setFieldsValue({context:u,ids:t.state.messageParameterIds}),console.log(t.state.messageParameterIds,"mIDarray")}))})),(0,g.default)((0,c.default)(t),"contentOnChange",(function(e){console.log(e.target.value,"e.target.value"),t.setState({messageContent:e.target.value})})),(0,g.default)((0,c.default)(t),"getTxt1CursorPosition",(function(e){var a;a=e.target.selectionStart,t.setState({cursurPosition:a})})),t.state={editor:"",selectStudentVisible:!1,insertBisabled:!1,recorder:"",arr:[],arrs:[],arrays:[],messageParameterIds:e.record.messageParameterIds||[],str:"1",messageContent:e.record.context},t}return(0,d.default)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,i=t.onCreate,o=t.form,d=t.record,c=t.lookState,f=o.getFieldDecorator,m=!!c,p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return v.default.createElement(l.default,{width:700,visible:a,title:"系统消息模板",onCancel:n,onOk:c?n:i,destroyOnClose:!0},v.default.createElement(E.default,{onSubmit:this.handleSubmit},v.default.createElement(S,(0,r.default)({},p,{label:"模板名称："}),f("templateName",{initialValue:d.templateName,rules:[{max:100,message:"模板名称不能超过100个字！"},{required:!0,message:"请输入模板名称！"}]})(v.default.createElement(u.default,{disabled:m,placeholder:"请输入模板名称！"}))),v.default.createElement(S,(0,r.default)({},p,{label:"应用场景："}),f("relationType",{initialValue:d.relationType})(v.default.createElement(h.default,{disabled:!0},v.default.createElement(b,{value:1},"学习计划"),v.default.createElement(b,{value:2},"考试"),v.default.createElement(b,{value:3},"调研"),v.default.createElement(b,{value:6},"作业"),v.default.createElement(b,{value:8},"项目"),v.default.createElement(b,{value:9},"直播")))),v.default.createElement(S,(0,r.default)({},p,{label:"消息标题："}),f("title",{initialValue:d.title,rules:[{max:100,message:"消息标题不能超过100个字！"},{required:!0,message:"请输入消息标题！"}]})(v.default.createElement(u.default,{disabled:m,placeholder:"请输入消息标题！"}))),v.default.createElement(S,(0,r.default)({},p,{label:"可用变量："}),f("visLet",{})(v.default.createElement(h.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,disabled:m,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,insertBisabled:!0,messagelabel:a.props.children,messagelabelvalue:a.props.value})}},this.props.newmessageparm.map((function(e){return v.default.createElement(b,{key:e.id,value:e.relationField},e.name)})))),v.default.createElement(s.default,{type:"primary",disabled:!this.state.insertBisabled,onClick:this.insertContent},"插入")),v.default.createElement(S,(0,r.default)({},p,{label:"消息内容："}),f("context",{initialValue:d.context,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(v.default.createElement(u.default.TextArea,{disabled:m,placeholder:"请输入消息内容！",onChange:this.contentOnChange,onClick:this.getTxt1CursorPosition}))),v.default.createElement(S,p,f("ids",{initialValue:d&&d.messageParameterIds})(v.default.createElement("div",null))),v.default.createElement(S,p,f("messageContextId",{initialValue:d&&d.messageContextId})(v.default.createElement("div",null)))))}}]),n}(v.default.Component),T=E.default.create()(C);t.default=T},1732:function(e,t,a){"use strict";var n=a(0);a(44),a(40),a(143),a(51),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var l=n(a(225));a(140);var s=n(a(535)),r=n(a(98));a(537);var u=n(a(536)),i=n(a(81)),o=n(a(29)),d=n(a(30)),c=n(a(59)),f=n(a(32)),m=n(a(33)),p=n(a(31)),g=n(a(2));a(554);var h=n(a(550));a(540);var E=n(a(539)),v=n(a(1));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=E.default.Item,b=h.default.Option,C=function(e){(0,f.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(y()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,g.default)((0,c.default)(t),"insertContent",(function(){var e=t.state,a=e.cursurPosition,n=e.messageContent,l=e.messageIds,s=e.messageParameterIds,r=e.messagelabelvalue;console.log(a,"cursurPosition");var u=n.slice(0,a)+r+n.slice(a),o=n.slice(0,a)+r+n.slice(a);t.setState({messageParameterIds:[].concat((0,i.default)(s),[l])},(function(){t.setState({messageContent:u,messageContentlabel:o}),t.props.form.setFieldsValue({context:u,ids:t.state.messageParameterIds}),console.log(t.state.messageParameterIds,"mIDarray")}))})),(0,g.default)((0,c.default)(t),"contentOnChange",(function(e){console.log(e.target.value,"e.target.value"),t.setState({messageContent:e.target.value})})),(0,g.default)((0,c.default)(t),"getTxt1CursorPosition",(function(e){var a;a=e.target.selectionStart,t.setState({cursurPosition:a,messageContent:t.props.record.context},(function(){console.log(t.state.messageContent,"修改8388ok")}))})),t.state={editor:"",selectStudentVisible:!1,insertBisabled:!1,recorder:"",arr:[],arrs:[],arrays:[],messageParameterIds:e.record.messageParameterIds||[],str:"1",messageContent:e.record.context},t}return(0,d.default)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,i=t.onCreate,o=t.form,d=t.record,c=t.lookState,f=o.getFieldDecorator,m=!!c;console.log(m,"falsetrue");var p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return v.default.createElement(l.default,{width:700,visible:a,title:"事件触发消息模板",onCancel:n,onOk:m?n:i,destroyOnClose:!0},v.default.createElement(E.default,{onSubmit:this.handleSubmit},v.default.createElement(S,(0,r.default)({},p,{label:"活动名称："}),f("relationTypeString",{initialValue:d.relationTypeString,rules:[{max:100,message:"模板名称不能超过100个字！"},{required:!0,message:"请输入模板名称！"}]})(v.default.createElement(u.default,{disabled:!0,placeholder:"请输入模板名称！"}))),v.default.createElement(S,(0,r.default)({},p,{label:"触发事件："}),f("eventName",{initialValue:d.eventName,rules:[{required:!0,message:"请输入触发事件！"}]})(v.default.createElement(h.default,{disabled:!0},v.default.createElement(b,{value:"课程上架成功"},"课程上架成功"),v.default.createElement(b,{value:"课程学习已完成"},"课程学习已完成"),v.default.createElement(b,{value:"项目报名开始"},"项目报名开始"),v.default.createElement(b,{value:"项目学习已完成"},"项目学习已完成"),v.default.createElement(b,{value:"报名审核通过"},"报名审核通过"),v.default.createElement(b,{value:"报名审核未通过"},"报名审核未通过"),v.default.createElement(b,{value:"扫码签到成功"},"扫码签到成功"),v.default.createElement(b,{value:"作业批阅已完成"},"作业批阅已完成"),v.default.createElement(b,{value:"考试阅卷已完成"},"考试阅卷已完成"),v.default.createElement(b,{value:"积分变动已完成"},"积分变动已完成")))),v.default.createElement(S,(0,r.default)({},p,{label:"消息标题："}),f("title",{initialValue:d.title,rules:[{max:100,message:"消息标题不能超过100个字！"},{required:!0,message:"请输入消息标题！"}]})(v.default.createElement(u.default,{disabled:m,placeholder:"请输入消息标题！"}))),v.default.createElement(S,(0,r.default)({},p,{label:"可用变量："}),f("visLet",{})(v.default.createElement(h.default,{style:{width:"70%",marginRight:"1rem"},placeholder:"选择可用变量",labelInValue:!0,disabled:m,onChange:function(t,a){console.log(a),e.setState({messageIds:a.key,insertBisabled:!0,messagelabel:a.props.children,messagelabelvalue:a.props.value})}},this.props.newmessageparm.map((function(e){return v.default.createElement(b,{key:e.id,value:e.relationField},e.name)})))),v.default.createElement(s.default,{disabled:!this.state.insertBisabled,type:"primary",onClick:this.insertContent},"插入")),v.default.createElement(S,(0,r.default)({},p,{label:"消息内容："}),f("context",{initialValue:d.context,rules:[{max:500,message:"消息内容不能超过500个字！"},{required:!0,message:"请输入消息内容！"}]})(v.default.createElement(u.default.TextArea,{disabled:m,placeholder:"请输入消息内容！",onChange:this.contentOnChange,onClick:this.getTxt1CursorPosition}))),v.default.createElement(S,p,f("ids",{initialValue:d&&d.messageParameterIds})(v.default.createElement("div",null))),v.default.createElement(S,p,f("messageContextId",{initialValue:d&&d.messageContextId})(v.default.createElement("div",null)))))}}]),n}(v.default.Component),T=E.default.create()(C);t.default=T},1733:function(e,t,a){e.exports={mar40:"mar40__2W2eh",marr20:"marr20__bKe8L",newsHead:"newsHead__2O3L4",queryForm:"queryForm__1hsb-"}},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},553:function(e,t,a){e.exports=a(11)(206)},558:function(e,t,a){e.exports=a(11)(251)},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},565:function(e,t,a){e.exports=a(11)(170)},566:function(e,t,a){e.exports=a(11)(817)},568:function(e,t,a){e.exports=a(11)(333)},570:function(e,t,a){e.exports=a(11)(99)},577:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);a(26),a(597)},591:function(e,t,a){e.exports=a(11)(819)},596:function(e,t,a){e.exports=a(11)(827)},597:function(e,t,a){},618:function(e,t,a){"use strict";var n=a(4),l=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.exportUsers=t.importUsers=t.getAuditorList=t.getUserList=t.getGroupList=t.getOrgList=void 0;var s=l(a(78)),r=l(a(635)),u=n(a(235)),i=r.default.linkUser,o=i.orgList,d=i.userList,c=i.auditorList,f=i.importUserUrl,m=i.exportUserUrl;t.getOrgList=function(e,t){return function(a){return(0,s.default)({url:o,data:{type:e}}).then((function(e){a({type:u.ORGLIST,data:e.data}),t&&t(e.data)}))}};t.getGroupList=function(e,t,a){return function(t){return(0,s.default)({url:d,data:{type:e,typ:"system"}}).then((function(e){a&&a(e.data)}))}};t.getUserList=function(e,t,a){return function(n){return(0,s.default)({url:d,data:{seachVal:e,type:t}}).then((function(e){1e3==e.code&&a&&a(e.data)}))}};t.getAuditorList=function(e,t){return function(a){return(0,s.default)({url:c,data:e}).then((function(e){t&&t(e.data)}))}};t.importUsers=function(e,t,a){return function(n){return(0,s.default)({url:"".concat(f,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}};t.exportUsers=function(e,t,a){return function(n){return(0,s.default)({url:"".concat(m,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}}},622:function(e,t,a){e.exports=a(11)(854)},624:function(e,t,a){"use strict";var n=a(4),l=a(0);a(44),a(3),a(5),a(51),a(20),a(34),a(35),a(23),a(229),a(6),a(569);var s=l(a(558));a(549);var r=l(a(544));a(146);var u=l(a(150));a(574);var i=l(a(565));a(578);var o=l(a(570));a(634);var d=l(a(596));a(99);var c=l(a(100));a(61);var f=l(a(62)),m=l(a(29)),p=l(a(30)),g=l(a(59)),h=l(a(32)),E=l(a(33)),v=l(a(31)),y=l(a(2));a(575);var S=l(a(568));a(537);var b=l(a(536)),C=n(a(1)),T=a(52),w=l(a(649)),x=l(a(141)),M=a(618);function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=b.default.Search;var D=S.default.TabPane,P=function(e){(0,h.default)(n,e);var t,a=(t=n,function(){var e,a=(0,v.default)(t);if(N()){var n=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,E.default)(this,e)});function n(){var e;(0,m.default)(this,n);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),(0,y.default)((0,g.default)(e),"search",(function(t,a){var n=e.state.tabKey,l=e.props,s=l.getGroupList,r=l.getUserList,u=l.getAuditorList,i=t.target?t.target.value:t;if(e.setState({value:i}),i){var o=(0,g.default)(e);switch(n){case"3":e.setState({groupLoading:!0}),s(i,(function(e){o.setState({searchGroup:e,groupLoading:!1})}));break;case"2":e.setState({userLoading:!0}),"on"==e.props.onlyUser?u({name:i,pageNo:1,pageSize:10},(function(e){console.log(e,"3444"),o.setState({searchUser:e.records,userLoading:!1,searchData:e})})):r(i,a,(function(e){o.setState({searchUser:e,userLoading:!1})}))}}else f.default.info("请输入关键词")})),(0,y.default)((0,g.default)(e),"closeMode",(function(){e.setState({vsb:!1})})),e.state={selectedItems:[],invisible:!0,departmentFlag:!0,show:!0,orgData:"",searchGroup:[],searchUser:[],tabKey:"2",orgLoading:!1,groupLoading:!1,userLoading:!1,userKeyword:"",groupKeyword:"",value:"",searchData:{records:[],pageRecords:""}},e.tabChange=e.tabChange.bind((0,g.default)(e)),e.removeSelected=e.removeSelected.bind((0,g.default)(e)),e.getSelected=e.getSelected.bind((0,g.default)(e)),e.isExist=e.isExist.bind((0,g.default)(e)),e.search=e.search.bind((0,g.default)(e)),e.onSearchChange=e.onSearchChange.bind((0,g.default)(e)),e}return(0,p.default)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.groupTypes;this.props.getOrgList(t,(function(){e.setState({orgData:e.props.orgList})}))}},{key:"componentDidMount",value:function(){console.log("检测打印变量=this.props.initData ",this.props.initData),"research"===this.props.groupTypes&&this.props.initData&&this.props.initData.forEach((function(e){e.relationId&&(e.id=e.relationId)})),this.setState({selectedItems:this.props.initData?this.props.initData:[],invisible:void 0===this.props.invisible,departmentFlag:void 0===this.props.departmentFlag})}},{key:"onSearchChange",value:function(e,t){var a=e.target.value;a.length>50?f.default.info("输入长度不可超过50"):("user"==t?this.setState({userKeyword:a}):this.setState({groupKeyword:a}),"1"==this.state.tabKey&&(a.length>0?this.setState({show:!1}):this.setState({show:!0})))}},{key:"getSelected",value:function(e){var t=this;if(this.isExist(e.id)){var a=this;x.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},l=this.state.selectedItems;l.push(n),this.setState({selectedItems:l},(function(){t.props.getData(l),f.default.success("选择成功")}))}}},{key:"listSelect",value:function(e){var t=this;if(console.log("检测打印变量=item ",e),this.isExist(e.id)){var a=this;x.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{console.log("检测打印变量=this.state.tabKey ",this.state.tabKey);var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},l=this.state.selectedItems;l.push(n),this.setState({selectedItems:l},(function(){t.props.getData(l),f.default.success("选择成功")}))}}},{key:"tabChange",value:function(e){console.log("key",e),this.setState({tabKey:e})}},{key:"isExist",value:function(e){return this.state.selectedItems.filter((function(t){return t.id==e})).length>0}},{key:"removeSelected",value:function(e){if(!this.props.disabled){var t=this.state.selectedItems.filter((function(t){return t.id!=e}));this.setState({selectedItems:t}),this.props.getData(t)}}},{key:"render",value:function(){var e=this,t=[{title:C.default.createElement("p",{style:{minWidth:"60px",marginTop:"0",marginBottom:"0"}},"用户名"),dataIndex:"name",key:"name",render:function(t,a){return C.default.createElement("a",{onClick:function(){return e.listSelect(a)},style:{whiteSpace:"nowrap"}},C.default.createElement(c.default,{type:"contacts"})," ",t)}},{title:C.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"姓名"),dataIndex:"fullName",key:"fullName"},{title:C.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"工号"),dataIndex:"workNum",key:"workNum"}],a=this.props.types;return"look"==this.props.type?C.default.createElement("div",null,C.default.createElement(i.default,null,C.default.createElement(o.default,{span:24,style:{paddingLeft:15,paddingRight:15}},C.default.createElement("h3",null,"已选择的部门、成员",this.state.departmentFlag?"或用户组":""),C.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},C.default.createElement(d.default,{itemLayout:"horizontal",split:!1,dataSource:this.state.selectedItems,renderItem:function(e){return C.default.createElement(d.default.Item,null,C.default.createElement(d.default.Item.Meta,{title:C.default.createElement("a",null,C.default.createElement(c.default,{type:"contacts"}),e.name)}))}}))))):C.default.createElement("div",null,C.default.createElement(i.default,null,C.default.createElement(o.default,{span:12,style:{paddingLeft:15,paddingRight:15}},C.default.createElement(S.default,{defaultActiveKey:this.state.tabKey,onChange:this.tabChange},C.default.createElement(D,{tab:"用户",key:"2"},C.default.createElement(k,{placeholder:"用户名/姓名/工号",style:{marginBottom:"15px"},max:50,onSearch:function(t){return e.search(t,a)},onPressEnter:function(t){return e.search(t,a)},value:this.state.userKeyword,onChange:function(t){return e.onSearchChange(t,"user")}}),C.default.createElement("div",{style:{height:500,overflowY:"auto"}},C.default.createElement(u.default,{spinning:this.state.userLoading}),C.default.createElement(r.default,{columns:t,dataSource:this.state.searchUser,rowKey:function(e){return e.id},pagination:!1}),"on"==this.props.onlyUser?C.default.createElement(s.default,{style:{textAlign:"right",marginRight:"15px",marginTop:"15px"},onChange:function(t){var a={name:e.state.value,pageNo:t,pageSize:10};e.props.getAuditorList(a,(function(t){console.log(t,"3444"),e.setState({searchUser:t.records,searchData:t,userLoading:!1})}))},showTotal:function(e){return"共计 ".concat(e," 条")},total:this.state.searchData.pageRecords}):"")),this.state.departmentFlag?C.default.createElement(D,{tab:"部门",key:"1",disabled:"on"==this.props.onlyUser},C.default.createElement(w.default,{data:this.state.orgData,getSelect:this.getSelected})):null,this.state.invisible?C.default.createElement(D,{tab:"用户组",key:"3",disabled:"on"==this.props.onlyUser},C.default.createElement(k,{placeholder:"搜索",max:50,onPressEnter:this.search,value:this.state.groupKeyword,onChange:function(t){return e.onSearchChange(t,"group")}}),C.default.createElement("div",{style:{height:500,overflowY:"auto"}},C.default.createElement(u.default,{spinning:this.state.groupLoading}),C.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.searchGroup,renderItem:function(t){return C.default.createElement(d.default.Item,null,C.default.createElement(d.default.Item.Meta,{title:C.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.listSelect(t)}},C.default.createElement(c.default,{type:"contacts"}),t.name)}))}}))):null)),C.default.createElement(o.default,{span:12,style:{paddingLeft:15,paddingRight:15}},this.props.tabTitle?C.default.createElement("div",null,this.props.tabTitle):C.default.createElement("h3",null,"已选择的部门、成员",this.state.invisible?"或用户组":""),C.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},C.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.selectedItems,renderItem:function(t){return C.default.createElement(d.default.Item,{actions:[C.default.createElement("a",{onClick:function(){return e.removeSelected(t.id)}},C.default.createElement(c.default,{type:"close"}))]},C.default.createElement(d.default.Item.Meta,{title:1==t.type?C.default.createElement("a",null,C.default.createElement(c.default,{type:"team"})," ",t.name):C.default.createElement("a",null,C.default.createElement("div",null,console.log(t,"item")),C.default.createElement(c.default,{type:"contacts"})," ",t.name," ",t.fullName," ",t.workNum)}))}})))))}}]),n}(C.Component);e.exports=(0,T.connect)((function(e,t){var a=e.linkUserReducer;return{fetching:a.fetching,orgList:a.orgList}}),(function(e){return{getOrgList:function(t,a){return e((0,M.getOrgList)(t,a))},getGroupList:function(t,a){return e((0,M.getGroupList)(t,a))},getUserList:function(t,a,n){return e((0,M.getUserList)(t,a,n))},getAuditorList:function(t,a){return e((0,M.getAuditorList)(t,a))}}}))(P)},628:function(e,t,a){"use strict";a(156),a(35),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,l){var s=[];new RegExp(/^\s+/,"i");t||(t="");""===t.trim()&&t.length>0&&s.push(new Error(n,e.field));0==t.length&&e.required&&s.push(new Error(n,e.field));t.length>l&&s.push(new Error("最多支持输入"+l+"个字符以内",e.field));a(s)}},635:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(63)),s={linkUser:{orgList:"GET ".concat(l.default.systemManage,"/org/userGroup/list"),userList:"GET ".concat(l.default.systemManage,"/account/name/search"),auditorList:"GET ".concat(l.default.webManage,"/assignment/get/all/auditor"),importUserUrl:"POST ".concat(l.default.webManage,"/range/import"),exportUserUrl:"GET ".concat(l.default.webManage,"/range/export")}};t.default=s},643:function(e,t,a){e.exports=a(11)(110)},649:function(e,t,a){"use strict";var n=a(4),l=a(0);a(101),a(40),a(51),a(20),a(34),a(35),a(23),a(53),a(61);var s=l(a(62)),r=l(a(29)),u=l(a(30)),i=l(a(59)),o=l(a(32)),d=l(a(33)),c=l(a(31)),f=l(a(2));a(537);var m=l(a(536));a(719);var p=l(a(622)),g=n(a(1));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=p.default.TreeNode,v=m.default.Search,y=function(e){(0,o.default)(n,e);var t,a=(t=n,function(){var e,a=(0,c.default)(t);if(h()){var n=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,r.default)(this,n),t=a.call(this,e),(0,f.default)((0,i.default)(t),"onExpand",(function(e){t.setState({expandedKeys:e,autoExpandParent:!1})})),(0,f.default)((0,i.default)(t),"onChange",(function(e){var a=e.target.value;if(a.length>50)s.default.info("关键词长度最大为50");else{var n=(0,i.default)(t);a?t.setState({searchValue:a,expandedKeys:[]},(function(){for(var e=0;e<t.props.data.trees.length;e++)n.getExpandedKeys(t.props.data.trees[e].children,a,""+e)})):(t.setState({searchValue:a}),t.setDefaultExpandKeys())}})),t.state={expandedKeys:[],searchValue:"",autoExpandParent:!0},t.loop=t.loop.bind((0,i.default)(t)),t.onSelect=t.onSelect.bind((0,i.default)(t)),t.getExpandedKeys=t.getExpandedKeys.bind((0,i.default)(t)),t.renderTree=t.renderTree.bind((0,i.default)(t)),t.setDefaultExpandKeys=t.setDefaultExpandKeys.bind((0,i.default)(t)),t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.setDefaultExpandKeys()}},{key:"setDefaultExpandKeys",value:function(){var e=this.props.data.trees.map((function(e,t){return""+t}));this.setState({expandedKeys:e})}},{key:"onSelect",value:function(e,t){this.props.getSelect(t.node.props.dataRef)}},{key:"getExpandedKeys",value:function(e,t,a){var n=this,l=this.state.expandedKeys;e.map((function(e){if(e.name.indexOf(t)>=0){for(var s=a.split("&&&"),r=0;r<s.length;r++)-1==l.indexOf(s[r])&&s[r]&&l.push(s[r]);l.push(e.id)}if(e.children.length>0){var u="";u+=a?a+"&&&"+e.id:e.id,n.getExpandedKeys(e.children,t,u)}})),this.setState({expandedKeys:l})}},{key:"loop",value:function(e){var t=this,a=this.state.searchValue,n=[];return e.length>0&&(n=e.map((function(e){var n=e.name.indexOf(a),l=e.name.substr(0,n),s=e.name.substr(n+a.length),r=n>-1?g.default.createElement("span",null,l,g.default.createElement("span",{style:{color:"#f50"}},a),s):g.default.createElement("span",null,e.name);return g.default.createElement(E,{key:e.id,title:r,dataRef:e},t.loop(e.children))}))),n}},{key:"renderTree",value:function(e){var t=this,a=[],n=this.state.expandedKeys;return e&&(a=e.trees.map((function(e,a){return g.default.createElement(p.default,{onSelect:t.onSelect,onExpand:t.onExpand,expandedKeys:n,autoExpandParent:!1,key:a},g.default.createElement(E,{key:a,title:e.name,dataRef:e},t.loop(e.children)))}))),a}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(v,{placeholder:"部门名称",max:50,style:{marginBottom:8},value:this.state.searchValue,onChange:this.onChange}),g.default.createElement("div",{style:{height:500,overflowY:"auto"}},this.renderTree(this.props.data)))}}]),n}(g.Component);e.exports=y},905:function(e,t,a){"use strict";var n=a(245),l=a(246);e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),l)}}]);