(window.webpackJsonp=window.webpackJsonp||[]).push([[92,4],{1015:function(e,t,a){},1016:function(e,t,a){},1022:function(e,t,a){},1024:function(e,t,a){"use strict";var n=a(12),o=a(54).every,r=a(109),l=a(42),i=r("every"),s=l("every");n({target:"Array",proto:!0,forced:!i||!s},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},1407:function(e,t,a){e.exports={offline_course_body:"offline_course_body__oY7rx",head_search:"head_search__2eiv0",head_btns:"head_btns__18pQO",head_btn_del:"head_btn_del__1RFMc",course_detail_body:"course_detail_body__djFx9",upload_body:"upload_body__1SiTs"}},1408:function(e,t,a){"use strict";var n=a(4),o=a(0);a(51),Object.defineProperty(t,"__esModule",{value:!0}),t.getCourseList=b,t.getSortList=function(e,t){return function(t){return(0,l.default)({url:m,data:e}).then((function(e){if("1000"===e.code){for(var a=e.data,n=[],o=0;o<a.length;o++)1===a[o].layer&&n.push({label:a[o].name,title:a[o].name,value:a[o].id,id:a[o].id,key:"A"+o,code:a[o].code,name:a[o].name,level:"一级分类",createTime:a[o].createTime}),2===a[o].layer&&("children"in n[n.length-1]||(n[n.length-1].children=[]),n[n.length-1].children.push({label:a[o].name,title:a[o].name,value:a[o].id,id:a[o].id,key:"B"+o,code:a[o].code,name:a[o].name,level:"二级分类",createTime:a[o].createTime})),3===a[o].layer&&("children"in n[n.length-1].children[n[n.length-1].children.length-1]||(n[n.length-1].children[n[n.length-1].children.length-1].children=[]),n[n.length-1].children[n[n.length-1].children.length-1].children.push({label:a[o].name,title:a[o].name,value:a[o].id,id:a[o].id,key:""+o,code:a[o].code,name:a[o].name,level:"三级分类",createTime:a[o].createTime}));console.log(n),t({type:s.OFFLINE_CLASSIFY_LIST,data:n})}else r.default.error(e.subMsg)}))}},t.upCourse=function(e,t,a){return function(a){return(0,l.default)({url:c,data:e}).then((function(e){"1000"===e.code?a(b(t)):r.default.error(e.subMsg)}))}},t.downCourse=function(e,t,a){return function(a){return(0,l.default)({url:d,data:e}).then((function(e){"1000"===e.code?a(b(t)):r.default.error(e.subMsg)}))}},t.deleteCourse=function(e,t,a){return function(a){return(0,l.default)({url:p,data:e}).then((function(e){"1000"===e.code?a(b(t)):r.default.error(e.subMsg)}))}},t.getCourseInfo=function(e,t){return function(a){return(0,l.default)({url:h,data:{id:e}}).then((function(e){"1000"===e.code?(a({type:s.OFFLINE_COURSE_INFO,data:e.data}),t&&t(e)):r.default.error(e.subMsg)}))}},t.courseBasicInfo=function(e,t){return function(a){return(0,l.default)({url:g,data:e}).then((function(e){"1000"===e.code?t&&t():r.default.error(e.subMsg)}))}},t.saveCourseBasicInfo=function(e,t){return function(a){return(0,l.default)({url:v,data:e}).then((function(e){"1000"===e.code?t&&t():r.default.error(e.subMsg)}))}},t.uploadData=function(e,t){return function(a){return(0,l.default)({url:y,data:e}).then((function(e){"1000"===e.code?t&&t(e):r.default.error(e.subMsg)}))}},t.resetCourseInfo=void 0,a(61);var r=o(a(62)),l=o(a(76)),i=o(a(1409)),s=n(a(269)),u=i.default.offlineCourse,f=u.courseListUrl,c=u.courseUpUrl,d=u.courseDownUrl,p=u.courseDelUrl,m=u.classifyListUrl,h=u.courseDetailUrl,g=u.courseSaveUrl,v=u.courseUpdateUrl,y=u.courseUploadUrl;function b(e,t){return function(a){return(0,l.default)({url:f,data:e}).then((function(e){"1000"===e.code?(a({type:s.OFFLINE_COURSE_LIST,data:e.data}),t&&t(e)):r.default.error(e.subMsg)}))}}t.resetCourseInfo=function(){return function(e){e({type:COURSEINFO,data:{data:{}}})}}},1409:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(63)),r={offlineCourse:{courseListUrl:"GET ".concat(o.default.webManage,"/offlineCourse/list"),courseUpUrl:"POST ".concat(o.default.webManage,"/offlineCourse/up/"),courseDownUrl:"POST ".concat(o.default.webManage,"/offlineCourse/down"),courseDelUrl:"POST ".concat(o.default.webManage,"/offlineCourse/delete"),classifyListUrl:"POST ".concat(o.default.webManage,"/offlineClassify/list"),courseDetailUrl:"GET ".concat(o.default.webManage,"/offlineCourse/get"),courseSaveUrl:"POST ".concat(o.default.webManage,"/offlineCourse/save"),courseUpdateUrl:"POST ".concat(o.default.webManage,"/offlineCourse/update"),courseUploadUrl:"POST ".concat(o.default.webManage,"/offlineCourse/upload")}};t.default=r},1692:function(e,t,a){"use strict";var n=a(4),o=a(0);a(7),a(154),a(1024),a(227),a(51),a(20),a(34),a(35),a(23),a(80),a(53),a(140);var r=o(a(535));a(807);var l=o(a(808)),i=o(a(98));a(224);var s=o(a(225));a(598);var u=o(a(768));a(61);var f=o(a(62)),c=o(a(110)),d=o(a(29)),p=o(a(30)),m=o(a(59)),h=o(a(32)),g=o(a(33)),v=o(a(31)),y=o(a(2));a(540);var b=o(a(539));a(537);var S=o(a(536)),C=n(a(1)),I=a(65),k=o(a(141)),x=o(a(106)),T=o(a(769)),E=o(a(771)),U=o(a(653)),_=o(a(1407)),w=o(a(226)),M=a(52),V=a(1408);function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}S.default.TextArea;var P=b.default.Item,L=[];var O=function(e){(0,h.default)(n,e);var t,a=(t=n,function(){var e,a=(0,v.default)(t);if(R()){var n=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,y.default)((0,m.default)(t),"getImgUrl",(function(e){console.log("选择图片：",e);var a=t.state.baseInfo;a.logo=e,t.setState({baseInfo:a,logourl:e})})),t.state={fileList:[],uploadProgress:!1,uploadPercent:0,codeValidState:"",helpText:"",baseInfo:{code:"",name:"",classifyName:"",logo:"",make:"",description:null,tags:null},flag:!1,checkoutFlag:!0,defaultUrl:"",formKey:""},t.beforeUpload=t.beforeUpload.bind((0,m.default)(t)),t.progress=t.progress.bind((0,m.default)(t)),t.completeUpload=t.completeUpload.bind((0,m.default)(t)),t.baseInfoSubmit=t.baseInfoSubmit.bind((0,m.default)(t)),t.receiveHtml=t.receiveHtml.bind((0,m.default)(t)),t.getTags=t.getTags.bind((0,m.default)(t)),t.codeValidTest=t.codeValidTest.bind((0,m.default)(t)),t}return(0,p.default)(n,[{key:"componentDidMount",value:function(){var e=this;if(console.log(this.props.match.params.type,"---------------------------------type"),console.log(this.props.type,"---------------------------------propstype"),this.props.getsortlist({pageNo:1,pageSize:1e4}),"edit"==this.props.match.params.type||"look"==this.props.match.params.type){var t=this.props.match.params.id,a=this.state.baseInfo,n=this;this.props.getCourseInfo(t,(function(){var t=e.props.courseInfo,o=t.tags;o?"object"!=(0,c.default)(o)&&(o=o.split(",")):o=[],a.code=t.code,a.name=t.name,a.classifyName=t.path.split(","),a.logo=t.image,a.make=t.authorUnit,a.description=t.description,a.tags=o,n.setState({baseInfo:a,defaultUrl:t.image,logourl:t.image}),console.log("1111111111111111"),console.log(a)}))}"look"===this.props.match.params.type&&this.setState({flag:!0})}},{key:"getTags",value:function(e){var t=this.state.baseInfo;t.tags=e,this.setState({baseInfo:t})}},{key:"beforeUpload",value:function(e){var t="image/*"===e.type;t||f.default.error("You can only upload JPG file!");var a=e.size/1024/1024<8;return a||f.default.error("Image must smaller than 8MB!"),t&&a}},{key:"progress",value:function(e){this.setState({uploadPercent:e.percent})}},{key:"completeUpload",value:function(e){if(200===e.status){this.setState({uploadProgress:!1}),f.default.success(x.default.get("UploadSuccess")||"上传成功");var t=this.state.baseInfo;t.logo=uploader.host+"/"+uploader.filePath+"/"+uploader.fileName,this.setState({baseInfo:t,formKey:(new Date).getTime()}),this.props.form.setFieldsValue({logo:t.logo})}}},{key:"baseInfoSubmit",value:function(e){var t=this.state.logourl;e.preventDefault();var a=this.props,n=a.courseBasicInfo,o=a.saveCourseBasicInfo,r=this;"error"!==this.state.codeValidState?t?this.props.form.validateFields((function(e,a){if(console.log(a),!e){console.log("Received values of form: ",a);var l={code:a.code,name:a.name,offlineClassifyId:a.classify[a.classify.length-1],image:t,authorUnit:a.author,description:a.description,tags:null===a.tag?"":a.tag.join(",")};"edit"==r.props.match.params.type?(l.id=r.props.match.params.id,o(l,(function(){f.default.success(x.default.get("comment51")||"保存成功"),setTimeout((function(){history.back()}),300)}))):n(l,(function(){f.default.success(x.default.get("comment51")||"保存成功"),setTimeout((function(){history.back()}),300)}))}})):f.default.error(x.default.get("albumManagement77")||"请上传课程logo"):f.default.error(x.default.get("albumManagement76")||"课程编码已被占用")}},{key:"codeValidTest",value:function(e){if(this.setState({codeValidState:"validating"}),0!==e.target.value.length){if(e.target.value.length>0){var t=this;if(e.target.value.split("").every((function(e){return!!/^[a-zA-Z0-9-_*&.?!,:;]+$/.test(e)||(t.setState({codeValidState:"error",helpText:"'"+e+"'"+x.default.get("albumManagement78")||!1,checkoutFlag:!1}),!1)})),e.target.value.length>10)return void this.setState({codeValidState:"error",helpText:x.default.get("albumManagement79")||"课程编码不能超过10位"});console.log(this.state.checkoutFlag);e.target.value}}else this.setState({codeValidState:"error"})}},{key:"receiveHtml",value:function(e){var t=this.state.baseInfo;t.description=e,this.setState({baseInfo:t})}},{key:"handleInputChange",value:function(e){this.props.form}},{key:"componentWillUnmount",value:function(){L=null,this.props=null}},{key:"render",value:function(){var e=this.state,t=(e.defaultUrl,e.baseInfo),a=this.props.form.getFieldDecorator,n=this.props,o=n.courseInfo,f=n.fromUrl;console.log("this.state=detail=",this.state),console.log("this.props=detail=",this.props),"creat"===f?L=[]:"edit"===f&&(L=t.name&&t.code?[{uid:1,status:"done",reponse:"Server Error 500",url:o&&o.image}]:[]);var c={labelCol:{span:4},wrapperCol:{span:16}};x.default.get("albumManagement80");return!("edit"===f&&!L.length>0)&&(console.log("this.state.baseInfo",this.state.baseInfo),C.default.createElement("div",{className:_.default.course_detail_body},C.default.createElement(w.default,{title:x.default.get("SystemActive92")||"编辑课程"}),C.default.createElement(s.default,{title:x.default.get("UploadProgress")||"上传进度",visible:this.state.uploadProgress,footer:null},C.default.createElement(u.default,{percent:this.state.uploadPercent})),C.default.createElement(b.default,{onSubmit:this.baseInfoSubmit,key:this.state.formKey},C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("CourseCode")||"课程编码",hasFeedback:!0,validateStatus:this.state.codeValidState,help:this.state.helpText}),a("code",{rules:[{required:!0,message:x.default.get("UnderLineStatisitic2")||"请输入课程编码"}],initialValue:this.state.baseInfo.code})(C.default.createElement(S.default,{disabled:this.state.flag,placeholder:x.default.get("CourseCodeWith")||"请输入课程编码 (50字以内)",maxLength:50,autoFocus:"edit"!==this.props.match.params.type}))),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("CourseName")||"课程名称"}),a("name",{rules:[{required:!0,message:x.default.get("Statisitic235")||"请输入课程名称"}],initialValue:this.state.baseInfo.name})(C.default.createElement(S.default,{disabled:this.state.flag,placeholder:x.default.get("Statisitic235")||"请输入课程名称"}))),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("CourseClass")||"课程分类"}),a("classify",{rules:[{required:!0,message:x.default.get("SelCourseClass")||"选择课程分类"}],initialValue:this.state.baseInfo.classifyName})(C.default.createElement(l.default,{disabled:this.state.flag,style:{width:"500px"},options:this.props.classify,changeOnSelect:!0,placeholder:x.default.get("SelCourseClass")||"请选择课程分类"}))),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("albumManagement80")||"课程LOGO"}),a("logo",{rules:[{required:!0,message:x.default.get("albumManagement81")||"选择上传课程logo"}],initialValue:this.state.baseInfo.logo})(C.default.createElement(U.default,{details:this.state.baseInfo.logo,getImgUrl:this.getImgUrl,preRatio:["5/3"],maxSize:500,extra:x.default.get("Statisitic34")||"图片最佳尺寸：1125*675，比例为5：3，支持jpg、png、jpeg",disabled:"look"===this.props.match.params.type}))),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("albumManagement82")||"课程简介"}),a("description",{rules:[],initialValue:this.state.baseInfo.description})(C.default.createElement(S.default,{type:"hidden"})),"look"===this.props.match.params.type&&null!==this.state.baseInfo.description&&C.default.createElement(T.default,{readOnly:!0,audio:!1,video:!1,image:!1,importContent:this.state.baseInfo.description,cbReceiver:this.receiveHtml}),"edit"===this.props.match.params.type&&null!==this.state.baseInfo.description&&C.default.createElement(T.default,{audio:!1,video:!1,image:!1,importContent:this.state.baseInfo.description,cbReceiver:this.receiveHtml}),"look"!==this.props.match.params.type&&"edit"!==this.props.match.params.type&&C.default.createElement(T.default,{audio:!1,video:!1,image:!1,cbReceiver:this.receiveHtml})),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("CustomKeyswords")||"自定义关键词"}),a("tag",{initialValue:this.state.baseInfo.tags})(C.default.createElement(S.default,{type:"hidden"})),"look"===this.props.match.params.type&&null!==this.state.baseInfo.tags&&C.default.createElement(E.default,{defaultTags:this.state.baseInfo.tags,btnText:x.default.get("Add")||"添加",getTags:this.getTags,disable:!0}),"edit"===this.props.match.params.type&&null!==this.state.baseInfo.tags&&C.default.createElement(E.default,{defaultTags:this.state.baseInfo.tags,btnText:x.default.get("Add")||"添加",getTags:this.getTags}),"look"!==this.props.match.params.type&&"edit"!==this.props.match.params.type&&C.default.createElement(E.default,{defaultTags:[],btnText:x.default.get("Add")||"添加",getTags:this.getTags})),C.default.createElement(P,(0,i.default)({},c,{label:x.default.get("ProductionUnit")||"制作单位"}),a("author",{initialValue:this.state.baseInfo.make})(C.default.createElement(S.default,{disabled:this.state.flag}))),"look"!==this.props.match.params.type&&C.default.createElement(P,(0,i.default)({},{wrapperCol:{span:20,offset:4}},{style:{textAlign:"center"}}),C.default.createElement(I.Link,{to:"/"+k.default.companyCode+"/"+k.default.siteCode+"/index/online/underline/underline"},C.default.createElement(r.default,null,x.default.get("Cancel")||"取消")),C.default.createElement(r.default,{type:"primary",style:{margin:"0 16px"},onClick:this.baseInfoSubmit},x.default.get("Save")||"保存")),"look"==this.props.match.params.type?C.default.createElement("div",{style:{textAlign:"center"}},C.default.createElement(I.Link,{to:"/"+k.default.companyCode+"/"+k.default.siteCode+"/index/online/underline/underline"},C.default.createElement(r.default,null,x.default.get("Cancel")||"取消"))):null)))}}]),n}(C.Component),F=b.default.create()(O);e.exports=(0,M.connect)((function(e,t){return{classify:e.offlineCourseReducer.classifyList,courseInfo:e.offlineCourseReducer.courseInfo}}),(function(e){return{courseBasicInfo:function(t,a){return e((0,V.courseBasicInfo)(t,a))},saveCourseBasicInfo:function(t,a){return e((0,V.saveCourseBasicInfo)(t,a))},getsortlist:function(t){return e((0,V.getSortList)(t))},getCourseInfo:function(t,a){return e((0,V.getCourseInfo)(t,a))}}}))((0,I.withRouter)(F))},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},545:function(e,t,a){e.exports=a(11)(22)},556:function(e,t,a){"use strict";a.r(t);a(26),a(1016)},562:function(e,t,a){e.exports=a(11)(57)},567:function(e,t,a){e.exports=a(11)(67)},574:function(e,t,a){"use strict";a.r(t);a(26),a(584)},577:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);a(26),a(625),a(598),a(144)},586:function(e,t,a){},588:function(e,t,a){e.exports=a(11)(91)},593:function(e,t,a){e.exports=a(11)(105)},598:function(e,t,a){"use strict";a.r(t);a(26),a(626)},619:function(e,t,a){e.exports=a(11)(415)},625:function(e,t,a){},626:function(e,t,a){},644:function(e,t,a){e.exports=a(11)(233)},645:function(e,t,a){e.exports=a(11)(234)},646:function(e,t,a){e.exports=a(11)(235)},648:function(e,t,a){"use strict";a.r(t);a(26),a(1022)},655:function(e,t,a){"use strict";a(26),a(1015)},713:function(e,t,a){e.exports=a(11)(231)},714:function(e,t,a){e.exports=a(11)(305)},715:function(e,t,a){e.exports=a(11)(369)},716:function(e,t,a){e.exports=a(11)(370)},717:function(e,t,a){e.exports=a(11)(371)},718:function(e,t,a){e.exports=a(11)(61)},768:function(e,t,a){e.exports=a(11)(416)},769:function(e,t,a){"use strict";var n=a(4),o=a(0);a(44),a(101),a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(29)),l=o(a(30)),i=o(a(59)),s=o(a(32)),u=o(a(33)),f=o(a(31)),c=o(a(2)),d=n(a(1)),p=o(a(811));a(821);var m=o(a(770)),h=a(52),g=a(561);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){(0,s.default)(n,e);var t,a=(t=n,function(){var e,a=(0,f.default)(t);if(v()){var n=(0,f.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,u.default)(this,e)});function n(){var e;return(0,r.default)(this,n),e=a.apply(this,arguments),(0,c.default)((0,i.default)(e),"submitContent",(function(){e.state.editorState.toHTML()})),(0,c.default)((0,i.default)(e),"handleEditorChange",(function(t){var a=t.toHTML();e.setState({editorState:t,html:a}),e.props.cbReceiver(a)})),(0,c.default)((0,i.default)(e),"blockExportFn",(function(e,t){var a=e.getBlockBefore(t.key);if("unstyled"===t.type&&a&&"atomic"===a.getType())return{start:"",end:""}})),e.state={editorState:"",defaultValue:""},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.importContent;if(e)return{defaultValue:p.default.createEditorState(e),importContent:e};this.props.gupfetch()}},{key:"render",value:function(){var e=this,t=(this.props.uploadParam,this.state),a=(t.editorState,t.defaultValue),n=[],o=navigator.userAgent.toLowerCase(),r=/macintosh|mac os x/i.test(navigator.userAgent);(o.indexOf("win32")>=0||o.indexOf("wow32")>=0||o.indexOf("win64")>=0||o.indexOf("wow64")>=0)&&(n=[{name:"Araial",family:"Arial, Helvetica, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, serif"},{name:"Monospace",family:'"Courier New", Courier, monospace'},{name:"Tahoma",family:'tahoma, arial, "Hiragino Sans GB", 宋体, sans-serif'},{name:"黑体",family:"SimHei, 黑体"},{name:"宋体",family:"SimSun, 宋体"},{name:"仿宋",family:"FangSong, 仿宋"},{name:"新宋体",family:"NSimSun, 新宋体"},{name:"楷体",family:"KaiTi, 楷体, Helvetica, sans-serif"},{name:"微软雅黑",family:"微软雅黑, Microsoft YaHei , Helvetica, sans-serif"},{name:"微软正黑体",family:"微软正黑体, Microsoft JhengHei , Helvetica, sans-serif"}]),r&&(n=[{name:"Araial",family:"Arial, Helvetica, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, serif"},{name:"Monospace",family:'"Courier New", Courier, monospace'},{name:"Tahoma",family:'tahoma, arial, "Hiragino Sans GB", 宋体, sans-serif'},{name:"华文黑体",family:"STHeiti, 华文黑体"},{name:"华文宋体",family:"STSong, 华文宋体"},{name:"华文仿宋",family:"STFangsong, 华文仿宋"},{name:"华文楷体",family:"STKaiti, 华文楷体"},{name:"冬青黑体简",family:"Hiragino Sans GB, 冬青黑体简"},{name:"兰亭黑",family:"Lantinghei SC, 兰亭黑"},{name:"宋体",family:"Songti SC, 宋体"},{name:"娃娃体",family:"Wawati SC, 娃娃体"}]);return d.default.createElement(p.default,{imageResizable:!0,converts:{blockExportFn:function(e,t){}},forceNewLine:!1,media:{uploadFn:function(t){var a=e.props.uploadParam,n=a.host,o=new XMLHttpRequest,r=new FormData,l=(new Date).getTime(),i="".concat(t.id+l,".").concat(t.file.name.split(".")[t.file.name.split(".").length-1]);r.append("name",t.file.name),r.append("Filename","".concat(a.dir,"/").concat(i)),r.append("key","".concat(a.dir,"/").concat(i)),r.append("policy",a.policy),r.append("OSSAccessKeyId",a.accessid),r.append("success_action_status","200"),r.append("signature",a.signature),r.append("file",t.file),o.open("POST",n,!0),o.send(r);var s=function(e){t.error({msg:"unable to upload."})};o.addEventListener("load",(function(e){t.success({url:"".concat(a.host,"/").concat(a.dir,"/").concat(i),meta:{id:"1",title:"1",alt:"image"}})}),!1),o.addEventListener("error",s,!1),o.addEventListener("failed ",s,!1)}},className:m.default.edit,defaultValue:a,fontFamilies:n,fontSizes:[12,14,16,18,20,24,28,30,32,36,40,48,56,64,72,96,120,144],controls:["undo","redo","separator","font-size","font-family","line-height","letter-spacing","separator","text-color","bold","italic","underline","strike-through","separator","superscript","subscript","remove-styles","separator","text-indent","text-align","separator","headings","list-ul","list-ol","blockquote","code","separator","link","separator","hr","separator","media","separator","clear"],onChange:this.handleEditorChange,onSave:this.submitContent})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.importContent;return a!==t.importContent?{defaultValue:p.default.createEditorState(a),importContent:a}:null}}]),n}(d.PureComponent);var b=(0,h.connect)((function(e,t){return{uploadParam:e.uploadParam.param}}),(function(e){return{gupfetch:function(){return e((0,g.gupfetch)())}}}))(y);t.default=b},770:function(e,t,a){},771:function(e,t,a){"use strict";var n=a(4),o=a(0);a(44),a(3),a(101),a(227),a(43),a(143),a(20),a(34),a(35),a(23),a(234),a(53),a(144);var r=o(a(230));a(648);var l=o(a(619));a(99);var i=o(a(100));a(537);var s=o(a(536)),u=o(a(79));a(61);var f=o(a(62)),c=o(a(29)),d=o(a(30)),p=o(a(59)),m=o(a(32)),h=o(a(33)),g=o(a(31)),v=o(a(2)),y=n(a(1));function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(b()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),t=a.call(this,e),(0,v.default)((0,p.default)(t),"saveInputRef",(function(e){return t.input=e})),t.props.init&&t.props.init((0,p.default)(t)),t.state={tags:t.props.defaultTags?t.props.defaultTags:[],inputVisible:!1,inputValue:""},t.showInput=t.showInput.bind((0,p.default)(t)),t.handleClose=t.handleClose.bind((0,p.default)(t)),t.handleInputConfirm=t.handleInputConfirm.bind((0,p.default)(t)),t.handleInputChange=t.handleInputChange.bind((0,p.default)(t)),console.log(t.props.defaultTags),t}return(0,d.default)(n,[{key:"initTags",value:function(e){this.setState({tags:e})}},{key:"handleClose",value:function(e){var t=this.state.tags.filter((function(t){return t!==e}));this.setState({tags:t});var a=this.props.getTags;a&&a(t)}},{key:"showInput",value:function(){var e=this;this.state.tags&&this.state.tags.length>=5?f.default.error("最多只能添加5个"):this.setState({inputVisible:!0},(function(){return e.input.focus()}))}},{key:"handleInputChange",value:function(e){if("questionbank"==this.props.questionbank){if(e.target.value.length>20)return f.default.error("关键词长度不可超过20");var t=e.target.value.split(" ");this.setState({inputValue:t.join("")})}else if(e.target.value.length>10)f.default.error("长度不可超过10个字");else{t=e.target.value.split(" ");this.setState({inputValue:t.join("")})}}},{key:"handleInputConfirm",value:function(){var e=this.props.getTags,t=this.state,a=t.inputValue,n=t.tags;if(!(a.length<21))return f.default.error("长度不可超过20");if(n){var o=[];n.map((function(e,t){""!=(e=e.replace(/\s*/g,""))&&o.push(e)})),n=o}n||(n=[]),a&&-1===n.indexOf(a)&&(n=[].concat((0,u.default)(n),[a])),e&&e(n),this.setState({tags:n,inputVisible:!1,inputValue:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tags,n=t.inputVisible,o=t.inputValue;return a||(a=[]),"look"!=this.props.type?y.default.createElement("div",{style:{float:"left"}},n&&y.default.createElement(s.default,{ref:this.saveInputRef,maxLength:"questionbank"==this.props.questionbank?20:10,type:"text",size:"small",style:{width:78,display:this.props.disable?"none":"inline-block"},value:o,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!n&&y.default.createElement(l.default,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed",display:this.props.disable?"none":"inline-block"}},y.default.createElement(i.default,{type:"plus"})," 添加"),a.map((function(t,a){if(""!=t){var n=(t=t.replace(/\s*/g,"")).length>20,o=y.default.createElement(l.default,{key:t,closable:e.props.disable?a<0:a>=0,onClose:function(){return e.handleClose(t)}},n?"".concat(t.slice(0,20),"..."):t);return n?y.default.createElement(r.default,{title:t,key:t},o):o}}))):y.default.createElement("div",null,a.map((function(e,t){if(""!=e)return e=e.replace(/\s*/g,""),y.default.createElement(l.default,{key:t},e)})))}}]),n}(y.Component);e.exports=S},807:function(e,t,a){"use strict";a.r(t);a(26),a(809),a(655),a(537)},808:function(e,t,a){e.exports=a(11)(815)},809:function(e,t,a){},812:function(e,t,a){e.exports=a(11)(866)},813:function(e,t,a){e.exports=a(11)(542)},814:function(e,t,a){e.exports=a(11)(368)},815:function(e,t,a){e.exports=a(11)(870)},816:function(e,t,a){e.exports=a(11)(871)},817:function(e,t,a){e.exports=a(11)(872)},818:function(e,t,a){e.exports=a(11)(876)},819:function(e,t,a){e.exports=a(11)(881)},820:function(e,t,a){e.exports=a(11)(884)}}]);