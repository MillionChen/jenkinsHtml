(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{1008:function(e,t,a){},1407:function(e,t,a){e.exports={offline_course_body:"offline_course_body__oY7rx",head_search:"head_search__2eiv0",head_btns:"head_btns__18pQO",head_btn_del:"head_btn_del__1RFMc",course_detail_body:"course_detail_body__djFx9",upload_body:"upload_body__1SiTs"}},1408:function(e,t,a){"use strict";var n=a(4),l=a(0);a(51),Object.defineProperty(t,"__esModule",{value:!0}),t.getCourseList=v,t.getSortList=function(e,t){return function(t){return(0,u.default)({url:p,data:e}).then((function(e){if("1000"===e.code){for(var a=e.data,n=[],l=0;l<a.length;l++)1===a[l].layer&&n.push({label:a[l].name,title:a[l].name,value:a[l].id,id:a[l].id,key:"A"+l,code:a[l].code,name:a[l].name,level:"一级分类",createTime:a[l].createTime}),2===a[l].layer&&("children"in n[n.length-1]||(n[n.length-1].children=[]),n[n.length-1].children.push({label:a[l].name,title:a[l].name,value:a[l].id,id:a[l].id,key:"B"+l,code:a[l].code,name:a[l].name,level:"二级分类",createTime:a[l].createTime})),3===a[l].layer&&("children"in n[n.length-1].children[n[n.length-1].children.length-1]||(n[n.length-1].children[n[n.length-1].children.length-1].children=[]),n[n.length-1].children[n[n.length-1].children.length-1].children.push({label:a[l].name,title:a[l].name,value:a[l].id,id:a[l].id,key:""+l,code:a[l].code,name:a[l].name,level:"三级分类",createTime:a[l].createTime}));console.log(n),t({type:i.OFFLINE_CLASSIFY_LIST,data:n})}else r.default.error(e.subMsg)}))}},t.upCourse=function(e,t,a){return function(a){return(0,u.default)({url:c,data:e}).then((function(e){"1000"===e.code?a(v(t)):r.default.error(e.subMsg)}))}},t.downCourse=function(e,t,a){return function(a){return(0,u.default)({url:f,data:e}).then((function(e){"1000"===e.code?a(v(t)):r.default.error(e.subMsg)}))}},t.deleteCourse=function(e,t,a){return function(a){return(0,u.default)({url:h,data:e}).then((function(e){"1000"===e.code?a(v(t)):r.default.error(e.subMsg)}))}},t.getCourseInfo=function(e,t){return function(a){return(0,u.default)({url:g,data:{id:e}}).then((function(e){"1000"===e.code?(a({type:i.OFFLINE_COURSE_INFO,data:e.data}),t&&t(e)):r.default.error(e.subMsg)}))}},t.courseBasicInfo=function(e,t){return function(a){return(0,u.default)({url:m,data:e}).then((function(e){"1000"===e.code?t&&t():r.default.error(e.subMsg)}))}},t.saveCourseBasicInfo=function(e,t){return function(a){return(0,u.default)({url:C,data:e}).then((function(e){"1000"===e.code?t&&t():r.default.error(e.subMsg)}))}},t.uploadData=function(e,t){return function(a){return(0,u.default)({url:y,data:e}).then((function(e){"1000"===e.code?t&&t(e):r.default.error(e.subMsg)}))}},t.resetCourseInfo=void 0,a(61);var r=l(a(62)),u=l(a(76)),o=l(a(1409)),i=n(a(269)),d=o.default.offlineCourse,s=d.courseListUrl,c=d.courseUpUrl,f=d.courseDownUrl,h=d.courseDelUrl,p=d.classifyListUrl,g=d.courseDetailUrl,m=d.courseSaveUrl,C=d.courseUpdateUrl,y=d.courseUploadUrl;function v(e,t){return function(a){return(0,u.default)({url:s,data:e}).then((function(e){"1000"===e.code?(a({type:i.OFFLINE_COURSE_LIST,data:e.data}),t&&t(e)):r.default.error(e.subMsg)}))}}t.resetCourseInfo=function(){return function(e){e({type:COURSEINFO,data:{data:{}}})}}},1409:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(63)),r={offlineCourse:{courseListUrl:"GET ".concat(l.default.webManage,"/offlineCourse/list"),courseUpUrl:"POST ".concat(l.default.webManage,"/offlineCourse/up/"),courseDownUrl:"POST ".concat(l.default.webManage,"/offlineCourse/down"),courseDelUrl:"POST ".concat(l.default.webManage,"/offlineCourse/delete"),classifyListUrl:"POST ".concat(l.default.webManage,"/offlineClassify/list"),courseDetailUrl:"GET ".concat(l.default.webManage,"/offlineCourse/get"),courseSaveUrl:"POST ".concat(l.default.webManage,"/offlineCourse/save"),courseUpdateUrl:"POST ".concat(l.default.webManage,"/offlineCourse/update"),courseUploadUrl:"POST ".concat(l.default.webManage,"/offlineCourse/upload")}};t.default=r},1691:function(e,t,a){"use strict";var n=a(4),l=a(0);a(7),a(3),a(5),a(227),a(143),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(53),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var r=l(a(544));a(140);var u=l(a(535));a(554);var o=l(a(550));a(764);var i=l(a(765));a(537);var d=l(a(536));a(564);var s=l(a(563)),c=l(a(29)),f=l(a(30)),h=l(a(59)),p=l(a(32)),g=l(a(33)),m=l(a(31)),C=l(a(2));a(540);var y=l(a(539)),v=n(a(1)),b=l(a(226)),S=a(65),w=l(a(141)),_=l(a(223)),E=l(a(1407)),O=a(52),N=a(1408),D=l(a(106));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,C.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=y.default.Item,x=(location.pathname.split("/")[1],location.pathname.split("/")[2],function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,m.default)(t);if(U()){var n=(0,m.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function n(e){var t;return(0,c.default)(this,n),t=a.call(this,e),(0,C.default)((0,h.default)(t),"getViewData",(function(e){t.setState({courseViewData:e})})),t.state={value:"",filteredInfo:{},selectedRowKeys:[],createCourseVisible:!1,pageNo:1,pageSize:20,randomNum:"",courseViewData:[]},t.handleSearch=t.handleSearch.bind((0,h.default)(t)),t.handlePageChange=t.handlePageChange.bind((0,h.default)(t)),t.handlePageSizeChange=t.handlePageSizeChange.bind((0,h.default)(t)),t.createCourse=t.createCourse.bind((0,h.default)(t)),t.closeCreateCourse=t.closeCreateCourse.bind((0,h.default)(t)),t.handleDeleteRows=t.handleDeleteRows.bind((0,h.default)(t)),t}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.props.getlist({}),this.props.getsortlist({})}},{key:"handleUp",value:function(e){var t=this.state,a=t.value,n=t.pageNo,l=t.pageSize;this.props.up({id:e},k({},a,{pageNo:n,pageSize:l}))}},{key:"handleDown",value:function(e){var t=this.state,a=t.value,n=t.pageNo,l=t.pageSize;this.props.down({id:e},k({},a,{pageNo:n,pageSize:l}))}},{key:"handleSearch",value:function(){var e=this,t=this.state,a=t.pageNo,n=t.pageSize;this.props.form.validateFields((function(t,l){e.props.getlist(k({},l,{pageNo:1,pageSize:n})),console.log("Received values of form: ",l),"全部"===l.classifyId&&delete l.classifyId,e.setState({value:l},(function(){this.setState({pageNo:1}),console.log(a,"1562141319024")}))}))}},{key:"handleDeleteRows",value:function(){for(var e=this.state.checkArr,t=[],a=0;a<e.length;a++)t.push(e[a].id);var n=this.state,l=k({},n.value,{pageNo:n.pageNo,pageSize:n.pageSize});this.props.delete({ids:t.join(",")},l),this.setState({selectedRowKeys:[]})}},{key:"createCourse",value:function(){this.setState({createCourseVisible:!0})}},{key:"closeCreateCourse",value:function(){this.setState({createCourseVisible:!1})}},{key:"showTotal",value:function(e){return D.default.get("Total")||"共计"+e+D.default.get("item")||"条"}},{key:"handlePageChange",value:function(e,t){this.setState({pageNo:e}),this.props.getlist(k({},this.state.value,{pageNo:e,pageSize:t}))}},{key:"handlePageSizeChange",value:function(e,t){this.setState({pageSize:t}),this.props.getlist(k({},this.state.value,{pageNo:1,pageSize:t})),this.setState({pageNo:pageNo},(function(){console.log(pageNo,"pageNo123")}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.sortlist,l=this.state,c=l.selectedRowKeys,f=l.pageNo;n[0]&&"全部"!==n[0].label&&n.unshift({label:"全部",value:"",id:"0"});var h=[{title:D.default.get("CourseCode")||"课程编码",dataIndex:"code"},{title:D.default.get("CourseName")||"课程名称",dataIndex:"name",render:function(e,t){return v.default.createElement("span",{title:e},e.length<=20?e:e.slice(0,20)+"...")}},{title:D.default.get("CourseStatus")||"课程状态",dataIndex:"status",render:function(e,t){return v.default.createElement("span",null,1===t.status&&v.default.createElement("span",null,D.default.get("HasBeenRemoved")||"已下架"),0===t.status&&v.default.createElement("span",null,D.default.get("HasBeenAddedTo")||"已上架"),2===t.status&&v.default.createElement("span",null,D.default.get("Draft")||"草稿"))}},{title:D.default.get("rankCreateTime")||"创建时间",dataIndex:"createTime",render:function(e,t){return v.default.createElement("span",null,(0,_.default)(t.createTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:D.default.get("Operation")||"操作",dataIndex:"action",render:function(t,a){return v.default.createElement("span",null,0===a.status&&v.default.createElement(S.Link,{to:{pathname:"/"+w.default.companyCode+"/"+w.default.siteCode+"/index/online/underline/detail/".concat(a.id,"/","look")}},D.default.get("Look")||"查看"),0!==a.status&&v.default.createElement(S.Link,{to:{pathname:"/"+w.default.companyCode+"/"+w.default.siteCode+"/index/online/underline/detail/".concat(a.id,"/","edit")}},D.default.get("Change")||"修改"),"    ",0===a.status&&v.default.createElement(s.default,{title:D.default.get("albumManagement74")||"确定执行此操作？",onConfirm:function(){return e.handleDown(a.id)}},v.default.createElement("a",null,D.default.get("OffShelf")||"下架")),0!==a.status&&v.default.createElement(s.default,{title:D.default.get("albumManagement74")||"确定执行此操作？",onConfirm:function(){return e.handleUp(a.id)}},v.default.createElement("a",null,D.default.get("PutOnTheShelf")||"上架")),"  ",v.default.createElement(S.Link,{to:{pathname:"/"+w.default.companyCode+"/"+w.default.siteCode+"/index/online/underline/importdata",state:{text:JSON.stringify(a)}}},v.default.createElement("a",null,D.default.get("QiandaoStatisitic10")||"导入数据")))}}],p=this.props.form.getFieldDecorator,g={selectedRowKeys:c,onChange:function(t,a){e.setState({selectedRowKeys:t,checkArr:a})},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}};return v.default.createElement("div",{className:E.default.offline_course_body},v.default.createElement(b.default,{title:D.default.get("Statisitic236")||"线下课程"}),v.default.createElement(y.default,{className:E.default.head_search,onSubmit:this.handleSearch,layout:"inline"},v.default.createElement(P,{label:D.default.get("SystemNews16")||"关键字（词）"},p("name")(v.default.createElement(d.default,{placeholder:D.default.get("albumManagement75")||"请输入线下课程名称、线下课程编码、自定义关键词",maxLength:"20"}))),v.default.createElement(P,{label:D.default.get("CourseType")||"课程类型"},p("offlineClassifyId")(v.default.createElement(i.default,{style:{width:200},dropdownStyle:{maxHeight:400,overflow:"auto",width:200,zIndex:1},treeData:n,placeholder:D.default.get("SelCourseClass")||"请选择课程分类",onChange:this.handleSearchSelect}))),v.default.createElement(P,{label:"课程状态："},p("status")(v.default.createElement(o.default,{style:{width:120,zIndex:1}},v.default.createElement(Option,{value:""},D.default.get("All")||"全部"),v.default.createElement(Option,{value:2},D.default.get("Draft")||"草稿"),v.default.createElement(Option,{value:0},D.default.get("HasBeenAddedTo")||"已上架"),v.default.createElement(Option,{value:1},D.default.get("HasBeenRemoved")||"已下架")))),v.default.createElement("span",null,v.default.createElement(u.default,{type:"primary",style:{marginTop:"4px"},onClick:this.handleSearch},D.default.get("Find")||"查询"))),v.default.createElement("div",{className:E.default.head_btns},v.default.createElement(S.Link,{to:"/"+w.default.companyCode+"/"+w.default.siteCode+"/index/online/underline/detail/0/create"},v.default.createElement(u.default,{type:"primary",className:"material-btn"},D.default.get("CreateCourse")||"创建课程")),v.default.createElement(u.default,{type:"primary",style:{marginLeft:"20px"},className:E.default.head_btn_del,onClick:this.handleDeleteRows},D.default.get("Delete")||"删除")),v.default.createElement("div",{className:"material-list"},v.default.createElement(r.default,{rowSelection:g,columns:h,dataSource:a.records,onChange:this.handleTableChange,rowKey:"id",pagination:{total:a.total,showTotal:function(){return D.default.get("Total")||"共计 "+a.total+D.default.get("item")||"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:f,onChange:this.handlePageChange,onShowSizeChange:this.handlePageSizeChange,showQuickJumper:!0,size:"small"}})))}}]),n}(v.Component));var M=(0,O.connect)((function(e,t){return{list:e.offlineCourseReducer.courseList,sortlist:e.offlineCourseReducer.classifyList}}),(function(e){return{getlist:function(t){return e((0,N.getCourseList)(t))},getsortlist:function(t){return e((0,N.getSortList)(t))},up:function(t,a){return e((0,N.upCourse)(t,a))},down:function(t,a){return e((0,N.downCourse)(t,a))},delete:function(t,a){return e((0,N.deleteCourse)(t,a))}}}))(y.default.create()(x));t.default=M},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},577:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},764:function(e,t,a){"use strict";a.r(t);a(26),a(1008),a(554),a(655)},765:function(e,t,a){e.exports=a(11)(855)}}]);