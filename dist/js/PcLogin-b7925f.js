(window.webpackJsonp=window.webpackJsonp||[]).push([[101,4],{1306:function(e,t,a){"use strict";var n=a(4),o=a(0);a(101),a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(580);var l=o(a(571));a(61);var i=o(a(62)),r=o(a(29)),u=o(a(30)),d=o(a(59)),s=o(a(32)),c=o(a(33)),f=o(a(31)),p=o(a(2));a(540);var m=o(a(539)),g=n(a(1)),y=a(52),h=a(561);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}m.default.Item;var _=function(e){(0,s.default)(n,e);var t,a=(t=n,function(){var e,a=(0,f.default)(t);if(v()){var n=(0,f.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function n(e){var t;return(0,r.default)(this,n),t=a.call(this,e),(0,p.default)((0,d.default)(t),"beforeUpload",(function(e,a){console.log(e,a);var n=(new Date).getTime();if(e.size>1048576)return i.default.error("上传文件过大（不能大于1M）"),!1;if(-1===e.type.indexOf("image"))return i.default.info("请上传图片文件"),!1;var o=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(o))return t.setState({fileList:[]}),i.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),!1;var l=t.props.param,r=(t.state.uploadParams,e.name.split(".").length);t.setState({uploadParams:{Filename:l.dir+"/"+n+"."+e.name.split(".")[r-1],key:l.dir+"/"+n+"."+e.name.split(".")[r-1],policy:l.policy,OSSAccessKeyId:l.accessid,success_action_status:"200",signature:l.signature},uploadAction:l.host}),t.props.getUrl&&t.props.getUrl(l.host+"/"+l.dir+"/"+n+"."+e.name.split(".")[r-1],e)})),(0,p.default)((0,d.default)(t),"handleUploadChange",(function(e){var a=e.file,n=e.fileList;console.log("wwwwwwwwww===============",a,n);var o=t.props.param;a.name.split(".").length;if("done"===a.status){var l=[];l.push(n.pop()),t.props.gupList(l),i.default.success(a.name+" 上传成功"),t.props.UploadCallback&&t.props.UploadCallback(a,o,t.state.uploadParams.Filename),t.props.UpCallback&&t.props.UpCallback(o.host+"/"+t.state.uploadParams.Filename)}})),t.state={uploadParams:{},uploadAction:""},t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.props.gupfetch()}},{key:"render",value:function(){var e=this.state,t=e.uploadAction,a=e.uploadParams;return g.default.createElement(l.default,{headers:{"X-Requested-With":null},accept:"image",action:t,data:a,showUploadList:!1,beforeUpload:this.beforeUpload,onChange:this.handleUploadChange},this.props.children)}}]),n}(g.Component);var U=(0,y.connect)((function(e,t){return{param:e.uploadParam.param}}),(function(e){return{gupfetch:function(t,a){return e((0,h.gupfetch)(t,a))},gupList:function(t,a){return e((0,h.gupList)(t,a))}}}))(_);t.default=U},1905:function(e,t,a){"use strict";var n=a(4),o=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var l=o(a(225));a(598);var i=o(a(768));a(99);var r=o(a(100));a(140);var u=o(a(535));a(61);var d=o(a(62)),s=o(a(29)),c=o(a(30)),f=o(a(59)),p=o(a(32)),m=o(a(33)),g=o(a(31)),y=o(a(2));a(537);var h=o(a(536)),v=n(a(1)),_=a(52),U=a(232),b=o(a(1306)),P=o(a(1906));function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=h.default.Search,E=function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(C()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,s.default)(this,n),t=a.call(this,e),(0,y.default)((0,f.default)(t),"onChangeLoginNameDesc",(function(e){t.setState({loginName:e.target.value})})),(0,y.default)((0,f.default)(t),"onChangeLoginPwdDesc",(function(e){t.setState({loginPwd:e.target.value})})),(0,y.default)((0,f.default)(t),"getUrl",(function(e){var a=(0,f.default)(t);t.props.AddBannerUploadPolicy((function(t){a.setState({imgUrl:e})}))})),(0,y.default)((0,f.default)(t),"UpCallback",(function(e){t.props.loginConfigUpdate({terminalId:history.state.state.id,bgimgPath:e,type:"1"})})),t.state={uploadProgress:!1,uploadPercent:0,imgUrl:"",loginName:"",loginPwd:""},t.beforeUpload=t.beforeUpload.bind((0,f.default)(t)),t.progress=t.progress.bind((0,f.default)(t)),t.completeUpload=t.completeUpload.bind((0,f.default)(t)),t}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.props.loginConfig(history.state.state.id)}},{key:"beforeUpload",value:function(e){if(e.length>1){d.default.error("只能上传一个背景图");for(var t=uploader.uploader.files.length,a=0;a<t;a++)uploader.uploader.removeFile(uploader.uploader.files[0].id)}else{this.setState({uploadProgress:!0});var n=this;this.props.AddBannerUploadPolicy((function(e){var t=JSON.parse(e.data);n.setState({imgUrl:t.host+"/"+t.dir+"/"+uploader.fileName},(function(){uploader.uploadFile(t)}))}))}}},{key:"progress",value:function(e){this.setState({uploadPercent:e.percent})}},{key:"completeUpload",value:function(e){if(200==e.status){this.setState({uploadProgress:!1}),d.default.success("上传成功");this.props.loginConfigUpdate({terminalId:history.state.state.id,bgimgPath:this.state.imgUrl,type:"1"})}}},{key:"render",value:function(){var e=this,t=this.props.loginInfo,a=t.bgimgPath,n=void 0===a?"":a,o=t.loginNameDesc,s=void 0===o?"":o,c=t.loginPwdDesc,f=void 0===c?"":c,p=this.state,m=p.loginName,g=p.loginPwd;return console.log("检测打印变量=bgimgPath ",n),v.default.createElement("div",{className:P.default.mobileConfig3},v.default.createElement("div",{style:{textAlign:"center"}},"图片最佳尺寸：1920*600 "),v.default.createElement("div",{className:P.default.mobileContainer,id:"container",style:{backgroundImage:"url('".concat(n,"')"),marginTop:15,backgroundSize:"cover",backgroundPosition:"center"}},v.default.createElement("div",{style:{display:"inline"}},v.default.createElement(b.default,{getUrl:this.getUrl,UpCallback:this.UpCallback},v.default.createElement(u.default,{type:"primary"},"更换背景图"))),v.default.createElement(u.default,{style:{display:"inline-block",marginLeft:"20px"},onClick:function(){e.props.loginConfigUpdate({terminalId:history.state.state.id,bgimgPath:"http://cloud-wmy-oss.kmelearning.com/banner/banner-img.png",type:"1"})},type:"primary"},"使用默认图片"),v.default.createElement("div",{className:P.default.inputContainer},v.default.createElement("div",{className:P.default.inputHint},v.default.createElement("h2",null,"登录表单配置")),v.default.createElement("div",{className:P.default.inputUsername},v.default.createElement(k,{placeholder:s||"配置用户名提示语",prefix:v.default.createElement(r.default,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:m,onChange:this.onChangeLoginNameDesc,enterButton:"配置",maxLength:20,onSearch:function(t){e.props.loginConfigUpdate({terminalId:history.state.state.id,loginNameDesc:t,type:"2"},(function(e){return 1e3==+e.code?d.default.success("配置成功"):d.default.error(e.subMsg)}))}})),v.default.createElement("div",{className:P.default.inputPassword},v.default.createElement(k,{placeholder:f||"配置密码提示语",prefix:v.default.createElement(r.default,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),value:g,onChange:this.onChangeLoginPwdDesc,enterButton:"配置",onSearch:function(t){e.props.loginConfigUpdate({terminalId:history.state.state.id,loginPwdDesc:t,type:"3"},(function(e){return 1e3==+e.code?d.default.success("配置成功"):d.default.error(e.subMsg)}))}})))),v.default.createElement(l.default,{title:"上传进度",visible:this.state.uploadProgress,footer:null},v.default.createElement(i.default,{percent:this.state.uploadPercent})))}}]),n}(v.Component);var w=(0,_.connect)((function(e,t){return{loginInfo:e.door.loginInfo}}),(function(e){return{loginConfig:function(t){return e((0,U.loginConfig)(t))},loginConfigUpdate:function(t,a){return e((0,U.loginConfigUpdate)(t,a))},AddBannerUploadPolicy:function(t,a){return e((0,U.AddBannerUploadPolicy)(t,a))}}}))(E);t.default=w},1906:function(e,t,a){e.exports={mobileConfig3:"mobileConfig3__3-DHw",mobileContainer:"mobileContainer__3KiTc",inputContainer:"inputContainer__1wLv1",inputHint:"inputHint__yH51u",inputUsername:"inputUsername__2IHv3",inputPassword:"inputPassword__Yy3G2","mobile-banner":"mobile-banner__1MPq6","mobile-classify":"mobile-classify__4qKlQ","classify-item":"classify-item__D3TX-","classify-add":"classify-add__3KqBE","classify-icon":"classify-icon__3FjE8","classify-mask":"classify-mask__3Qde1","mobile-announcement":"mobile-announcement__3haih","drag-text":"drag-text__kTQRV","ant-carousel":"ant-carousel__2rUCr","slick-slide":"slick-slide__2YEUM","slick-dots":"slick-dots__3R6gd",bannerList:"bannerList__kdy84",bannerImg:"bannerImg__1ElEE",noticeBar:"noticeBar__LuuSe","notice-list":"notice-list__3NgYA",ModalButton:"ModalButton__2j5mQ","featured-topics-mask":"featured-topics-mask__36kar","featured-topics-add":"featured-topics-add__o7UyV","module-box":"module-box__brcrg","module-title":"module-title__22WdE","module-icon":"module-icon__1iKDX","module-name":"module-name__3y7Ow","module-more":"module-more__29Qi8","module-mask":"module-mask__1VQfr","module-edit":"module-edit__3NPrN","module-add":"module-add__vKcaY","module-edit-icon":"module-edit-icon__3ocNn"}},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},561:function(e,t,a){"use strict";var n=a(4),o=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:r.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,n=!1,o=!1;e?(n=e.needTranscode,o=e.type,a="".concat(d,"/upload/policy?needTranscode=").concat(n,"&type=").concat(o,"&date=").concat(new Date)):a="".concat(d,"/upload/policy?date=").concat(new Date);return function(e){return(0,l.default)({url:a}).then((function(a){if("1000"===a.code){var n=JSON.parse(a.data);e({type:r.GET_UPLOAD_PARAM,data:n}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,l.default)({videoUpload:s,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:r.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,l.default)({videoPlay:c,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:r.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:r.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:r.CLEARUPLOAD})}};var l=o(a(78)),i=o(a(587)),r=n(a(231)),u=i.default.common,d=u.ossUrl,s=u.videoUpload,c=u.videoPlay},571:function(e,t,a){e.exports=a(11)(912)},577:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);a(26),a(625),a(598),a(144)},586:function(e,t,a){},587:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(63)),l={common:{ossUrl:"GET ".concat(o.default.ossUrl),videoUpload:"POST ".concat(o.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(o.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(o.default.ossUrl,"/upload/policy")}};t.default=l},598:function(e,t,a){"use strict";a.r(t);a(26),a(626)},625:function(e,t,a){},626:function(e,t,a){},768:function(e,t,a){e.exports=a(11)(416)}}]);