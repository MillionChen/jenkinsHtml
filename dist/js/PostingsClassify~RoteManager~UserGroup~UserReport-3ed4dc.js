(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},544:function(e,t,a){e.exports=a(11)(846)},558:function(e,t,a){e.exports=a(11)(251)},565:function(e,t,a){e.exports=a(11)(170)},568:function(e,t,a){e.exports=a(11)(333)},570:function(e,t,a){e.exports=a(11)(99)},596:function(e,t,a){e.exports=a(11)(827)},618:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.exportUsers=t.importUsers=t.getAuditorList=t.getUserList=t.getGroupList=t.getOrgList=void 0;var l=r(a(76)),s=r(a(635)),u=n(a(235)),i=s.default.linkUser,o=i.orgList,d=i.userList,c=i.auditorList,f=i.importUserUrl,p=i.exportUserUrl;t.getOrgList=function(e,t){return function(a){return(0,l.default)({url:o,data:{type:e}}).then((function(e){a({type:u.ORGLIST,data:e.data}),t&&t(e.data)}))}};t.getGroupList=function(e,t,a){return function(t){return(0,l.default)({url:d,data:{type:e,typ:"system"}}).then((function(e){a&&a(e.data)}))}};t.getUserList=function(e,t,a){return function(n){return(0,l.default)({url:d,data:{seachVal:e,type:t}}).then((function(e){1e3==e.code&&a&&a(e.data)}))}};t.getAuditorList=function(e,t){return function(a){return(0,l.default)({url:c,data:e}).then((function(e){t&&t(e.data)}))}};t.importUsers=function(e,t,a){return function(n){return(0,l.default)({url:"".concat(f,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}};t.exportUsers=function(e,t,a){return function(n){return(0,l.default)({url:"".concat(p,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}}},622:function(e,t,a){e.exports=a(11)(854)},624:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),a(3),a(5),a(51),a(20),a(34),a(35),a(23),a(229),a(6),a(569);var l=r(a(558));a(549);var s=r(a(544));a(146);var u=r(a(150));a(574);var i=r(a(565));a(578);var o=r(a(570));a(634);var d=r(a(596));a(99);var c=r(a(100));a(61);var f=r(a(62)),p=r(a(29)),h=r(a(30)),m=r(a(59)),g=r(a(32)),y=r(a(33)),v=r(a(31)),E=r(a(2));a(575);var x=r(a(568));a(537);var S=r(a(536)),b=n(a(1)),L=a(52),k=r(a(649)),w=r(a(141)),K=a(618);function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=S.default.Search;var I=x.default.TabPane,T=function(e){(0,g.default)(n,e);var t,a=(t=n,function(){var e,a=(0,v.default)(t);if(U()){var n=(0,v.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,y.default)(this,e)});function n(){var e;(0,p.default)(this,n);for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return e=a.call.apply(a,[this].concat(r)),(0,E.default)((0,m.default)(e),"search",(function(t,a){var n=e.state.tabKey,r=e.props,l=r.getGroupList,s=r.getUserList,u=r.getAuditorList,i=t.target?t.target.value:t;if(e.setState({value:i}),i){var o=(0,m.default)(e);switch(n){case"3":e.setState({groupLoading:!0}),l(i,(function(e){o.setState({searchGroup:e,groupLoading:!1})}));break;case"2":e.setState({userLoading:!0}),"on"==e.props.onlyUser?u({name:i,pageNo:1,pageSize:10},(function(e){console.log(e,"3444"),o.setState({searchUser:e.records,userLoading:!1,searchData:e})})):s(i,a,(function(e){o.setState({searchUser:e,userLoading:!1})}))}}else f.default.info("请输入关键词")})),(0,E.default)((0,m.default)(e),"closeMode",(function(){e.setState({vsb:!1})})),e.state={selectedItems:[],invisible:!0,departmentFlag:!0,show:!0,orgData:"",searchGroup:[],searchUser:[],tabKey:"2",orgLoading:!1,groupLoading:!1,userLoading:!1,userKeyword:"",groupKeyword:"",value:"",searchData:{records:[],pageRecords:""}},e.tabChange=e.tabChange.bind((0,m.default)(e)),e.removeSelected=e.removeSelected.bind((0,m.default)(e)),e.getSelected=e.getSelected.bind((0,m.default)(e)),e.isExist=e.isExist.bind((0,m.default)(e)),e.search=e.search.bind((0,m.default)(e)),e.onSearchChange=e.onSearchChange.bind((0,m.default)(e)),e}return(0,h.default)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.groupTypes;this.props.getOrgList(t,(function(){e.setState({orgData:e.props.orgList})}))}},{key:"componentDidMount",value:function(){console.log("检测打印变量=this.props.initData ",this.props.initData),"research"===this.props.groupTypes&&this.props.initData&&this.props.initData.forEach((function(e){e.relationId&&(e.id=e.relationId)})),this.setState({selectedItems:this.props.initData?this.props.initData:[],invisible:void 0===this.props.invisible,departmentFlag:void 0===this.props.departmentFlag})}},{key:"onSearchChange",value:function(e,t){var a=e.target.value;a.length>50?f.default.info("输入长度不可超过50"):("user"==t?this.setState({userKeyword:a}):this.setState({groupKeyword:a}),"1"==this.state.tabKey&&(a.length>0?this.setState({show:!1}):this.setState({show:!0})))}},{key:"getSelected",value:function(e){var t=this;if(this.isExist(e.id)){var a=this;w.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},r=this.state.selectedItems;r.push(n),this.setState({selectedItems:r},(function(){t.props.getData(r),f.default.success("选择成功")}))}}},{key:"listSelect",value:function(e){var t=this;if(console.log("检测打印变量=item ",e),this.isExist(e.id)){var a=this;w.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{console.log("检测打印变量=this.state.tabKey ",this.state.tabKey);var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},r=this.state.selectedItems;r.push(n),this.setState({selectedItems:r},(function(){t.props.getData(r),f.default.success("选择成功")}))}}},{key:"tabChange",value:function(e){console.log("key",e),this.setState({tabKey:e})}},{key:"isExist",value:function(e){return this.state.selectedItems.filter((function(t){return t.id==e})).length>0}},{key:"removeSelected",value:function(e){if(!this.props.disabled){var t=this.state.selectedItems.filter((function(t){return t.id!=e}));this.setState({selectedItems:t}),this.props.getData(t)}}},{key:"render",value:function(){var e=this,t=[{title:b.default.createElement("p",{style:{minWidth:"60px",marginTop:"0",marginBottom:"0"}},"用户名"),dataIndex:"name",key:"name",render:function(t,a){return b.default.createElement("a",{onClick:function(){return e.listSelect(a)},style:{whiteSpace:"nowrap"}},b.default.createElement(c.default,{type:"contacts"})," ",t)}},{title:b.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"姓名"),dataIndex:"fullName",key:"fullName"},{title:b.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"工号"),dataIndex:"workNum",key:"workNum"}],a=this.props.types;return"look"==this.props.type?b.default.createElement("div",null,b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24,style:{paddingLeft:15,paddingRight:15}},b.default.createElement("h3",null,"已选择的部门、成员",this.state.departmentFlag?"或用户组":""),b.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},b.default.createElement(d.default,{itemLayout:"horizontal",split:!1,dataSource:this.state.selectedItems,renderItem:function(e){return b.default.createElement(d.default.Item,null,b.default.createElement(d.default.Item.Meta,{title:b.default.createElement("a",null,b.default.createElement(c.default,{type:"contacts"}),e.name)}))}}))))):b.default.createElement("div",null,b.default.createElement(i.default,null,b.default.createElement(o.default,{span:12,style:{paddingLeft:15,paddingRight:15}},b.default.createElement(x.default,{defaultActiveKey:this.state.tabKey,onChange:this.tabChange},b.default.createElement(I,{tab:"用户",key:"2"},b.default.createElement(D,{placeholder:"用户名/姓名/工号",style:{marginBottom:"15px"},max:50,onSearch:function(t){return e.search(t,a)},onPressEnter:function(t){return e.search(t,a)},value:this.state.userKeyword,onChange:function(t){return e.onSearchChange(t,"user")}}),b.default.createElement("div",{style:{height:500,overflowY:"auto"}},b.default.createElement(u.default,{spinning:this.state.userLoading}),b.default.createElement(s.default,{columns:t,dataSource:this.state.searchUser,rowKey:function(e){return e.id},pagination:!1}),"on"==this.props.onlyUser?b.default.createElement(l.default,{style:{textAlign:"right",marginRight:"15px",marginTop:"15px"},onChange:function(t){var a={name:e.state.value,pageNo:t,pageSize:10};e.props.getAuditorList(a,(function(t){console.log(t,"3444"),e.setState({searchUser:t.records,searchData:t,userLoading:!1})}))},showTotal:function(e){return"共计 ".concat(e," 条")},total:this.state.searchData.pageRecords}):"")),this.state.departmentFlag?b.default.createElement(I,{tab:"部门",key:"1",disabled:"on"==this.props.onlyUser},b.default.createElement(k.default,{data:this.state.orgData,getSelect:this.getSelected})):null,this.state.invisible?b.default.createElement(I,{tab:"用户组",key:"3",disabled:"on"==this.props.onlyUser},b.default.createElement(D,{placeholder:"搜索",max:50,onPressEnter:this.search,value:this.state.groupKeyword,onChange:function(t){return e.onSearchChange(t,"group")}}),b.default.createElement("div",{style:{height:500,overflowY:"auto"}},b.default.createElement(u.default,{spinning:this.state.groupLoading}),b.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.searchGroup,renderItem:function(t){return b.default.createElement(d.default.Item,null,b.default.createElement(d.default.Item.Meta,{title:b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.listSelect(t)}},b.default.createElement(c.default,{type:"contacts"}),t.name)}))}}))):null)),b.default.createElement(o.default,{span:12,style:{paddingLeft:15,paddingRight:15}},this.props.tabTitle?b.default.createElement("div",null,this.props.tabTitle):b.default.createElement("h3",null,"已选择的部门、成员",this.state.invisible?"或用户组":""),b.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},b.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.selectedItems,renderItem:function(t){return b.default.createElement(d.default.Item,{actions:[b.default.createElement("a",{onClick:function(){return e.removeSelected(t.id)}},b.default.createElement(c.default,{type:"close"}))]},b.default.createElement(d.default.Item.Meta,{title:1==t.type?b.default.createElement("a",null,b.default.createElement(c.default,{type:"team"})," ",t.name):b.default.createElement("a",null,b.default.createElement("div",null,console.log(t,"item")),b.default.createElement(c.default,{type:"contacts"})," ",t.name," ",t.fullName," ",t.workNum)}))}})))))}}]),n}(b.Component);e.exports=(0,L.connect)((function(e,t){var a=e.linkUserReducer;return{fetching:a.fetching,orgList:a.orgList}}),(function(e){return{getOrgList:function(t,a){return e((0,K.getOrgList)(t,a))},getGroupList:function(t,a){return e((0,K.getGroupList)(t,a))},getUserList:function(t,a,n){return e((0,K.getUserList)(t,a,n))},getAuditorList:function(t,a){return e((0,K.getAuditorList)(t,a))}}}))(T)},635:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={linkUser:{orgList:"GET ".concat(r.default.systemManage,"/org/userGroup/list"),userList:"GET ".concat(r.default.systemManage,"/account/name/search"),auditorList:"GET ".concat(r.default.webManage,"/assignment/get/all/auditor"),importUserUrl:"POST ".concat(r.default.webManage,"/range/import"),exportUserUrl:"GET ".concat(r.default.webManage,"/range/export")}};t.default=l},649:function(e,t,a){"use strict";var n=a(4),r=a(0);a(101),a(43),a(51),a(20),a(34),a(35),a(23),a(53),a(61);var l=r(a(62)),s=r(a(29)),u=r(a(30)),i=r(a(59)),o=r(a(32)),d=r(a(33)),c=r(a(31)),f=r(a(2));a(537);var p=r(a(536));a(719);var h=r(a(622)),m=n(a(1));function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=h.default.TreeNode,v=p.default.Search,E=function(e){(0,o.default)(n,e);var t,a=(t=n,function(){var e,a=(0,c.default)(t);if(g()){var n=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,s.default)(this,n),t=a.call(this,e),(0,f.default)((0,i.default)(t),"onExpand",(function(e){t.setState({expandedKeys:e,autoExpandParent:!1})})),(0,f.default)((0,i.default)(t),"onChange",(function(e){var a=e.target.value;if(a.length>50)l.default.info("关键词长度最大为50");else{var n=(0,i.default)(t);a?t.setState({searchValue:a,expandedKeys:[]},(function(){for(var e=0;e<t.props.data.trees.length;e++)n.getExpandedKeys(t.props.data.trees[e].children,a,""+e)})):(t.setState({searchValue:a}),t.setDefaultExpandKeys())}})),t.state={expandedKeys:[],searchValue:"",autoExpandParent:!0},t.loop=t.loop.bind((0,i.default)(t)),t.onSelect=t.onSelect.bind((0,i.default)(t)),t.getExpandedKeys=t.getExpandedKeys.bind((0,i.default)(t)),t.renderTree=t.renderTree.bind((0,i.default)(t)),t.setDefaultExpandKeys=t.setDefaultExpandKeys.bind((0,i.default)(t)),t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.setDefaultExpandKeys()}},{key:"setDefaultExpandKeys",value:function(){var e=this.props.data.trees.map((function(e,t){return""+t}));this.setState({expandedKeys:e})}},{key:"onSelect",value:function(e,t){this.props.getSelect(t.node.props.dataRef)}},{key:"getExpandedKeys",value:function(e,t,a){var n=this,r=this.state.expandedKeys;e.map((function(e){if(e.name.indexOf(t)>=0){for(var l=a.split("&&&"),s=0;s<l.length;s++)-1==r.indexOf(l[s])&&l[s]&&r.push(l[s]);r.push(e.id)}if(e.children.length>0){var u="";u+=a?a+"&&&"+e.id:e.id,n.getExpandedKeys(e.children,t,u)}})),this.setState({expandedKeys:r})}},{key:"loop",value:function(e){var t=this,a=this.state.searchValue,n=[];return e.length>0&&(n=e.map((function(e){var n=e.name.indexOf(a),r=e.name.substr(0,n),l=e.name.substr(n+a.length),s=n>-1?m.default.createElement("span",null,r,m.default.createElement("span",{style:{color:"#f50"}},a),l):m.default.createElement("span",null,e.name);return m.default.createElement(y,{key:e.id,title:s,dataRef:e},t.loop(e.children))}))),n}},{key:"renderTree",value:function(e){var t=this,a=[],n=this.state.expandedKeys;return e&&(a=e.trees.map((function(e,a){return m.default.createElement(h.default,{onSelect:t.onSelect,onExpand:t.onExpand,expandedKeys:n,autoExpandParent:!1,key:a},m.default.createElement(y,{key:a,title:e.name,dataRef:e},t.loop(e.children)))}))),a}},{key:"render",value:function(){return m.default.createElement("div",null,m.default.createElement(v,{placeholder:"部门名称",max:50,style:{marginBottom:8},value:this.state.searchValue,onChange:this.onChange}),m.default.createElement("div",{style:{height:500,overflowY:"auto"}},this.renderTree(this.props.data)))}}]),n}(m.Component);e.exports=E}}]);