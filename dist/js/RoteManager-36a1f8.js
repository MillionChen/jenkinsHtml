(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{1445:function(e,t,a){"use strict";a.r(t);a(26),a(1472)},1446:function(e,t,a){e.exports=a(11)(812)},1472:function(e,t,a){},1473:function(e,t,a){"use strict";var n=a(0);a(43),Object.defineProperty(t,"__esModule",{value:!0}),t.roleInsert=function(e,t){return function(a){return(0,l.default)({url:o,data:e}).then((function(e){1e3==+e.code&&t&&t()})).catch((function(e){console.log(e)}))}},t.roleUpdate=function(e,t){return function(a){return(0,l.default)({url:u,data:e}).then((function(e){t&&t()})).catch((function(e){console.log(e)}))}},t.roleDelete=function(e,t){return function(a){return(0,l.default)({url:i,data:e}).then((function(e){1e3==+e.code&&t&&t(e)})).catch((function(e){console.log(e)}))}},t.roleList=function(e,t){return function(a){return(0,l.default)({url:c,data:e}).then((function(e){1e3==e.code&&(a({type:"ROTE_List",roteList:e}),t&&t())})).catch((function(e){console.log(e)}))}},t.roleManageList=function(e,t){return function(a){return(0,l.default)({url:d,data:e}).then((function(e){1e3==e.code&&(a({type:"ROLE_MANAGE_LIST",roleMangeList:e}),t&&t())})).catch((function(e){console.log(e)}))}},t.roleManageEdit=function(e,t){return function(a){return(0,l.default)({url:s,data:e}).then((function(e){1e3==e.code&&(a({type:"ROLE_MANAGE_EDIT",roteMangeEdit:e}),t({roteMangeEdit:e}))})).catch((function(e){console.log(e)}))}},t.moduleList=function(e){return function(t){return(0,l.default)({url:f}).then((function(t){if(1e3==t.code){!function e(t){t&&t.map((function(t){0!==t.children.length?e(t.children):delete t.children}))}(t.data),e&&e(t.data)}})).catch((function(e){console.log(e)}))}},t.groupOptions=function(e){return function(t){return(0,l.default)({url:p}).then((function(t){1e3==t.code&&e&&e(t)})).catch((function(e){console.log(e)}))}},t.roleGet=function(e,t){return function(a){return(0,l.default)({url:h,data:{id:e}}).then((function(e){1e3==e.code&&t&&t(e)})).catch((function(e){console.log(e)}))}},t.authAccount=function(e,t){return function(a){return(0,l.default)({url:m,data:e}).then((function(e){1e3==e.code&&t&&t(e)})).catch((function(e){console.log(e)}))}},t.roleAccountList=function(e,t){return function(a){return(0,l.default)({url:g,data:{roleId:e}}).then((function(e){1e3==e.code&&t&&t(e)})).catch((function(e){console.log(e)}))}},t.siteAdminSet=function(e,t){return function(a){return(0,l.default)({url:y,data:e}).then((function(e){1e3==e.code&&t&&t(e)})).catch((function(e){console.log(e)}))}};var l=n(a(76)),r=n(a(1761)),o=r.default.roleInsertApi,u=r.default.roleUpdateApi,i=r.default.roleDeleteApi,c=r.default.roleListApi,d=r.default.roleManageListApi,s=r.default.roleManageEditApi,f=r.default.moduleListApi,p=r.default.groupOptionsApi,h=r.default.roleGetApi,m=r.default.authAccountApi,g=r.default.roleAccountListApi,y=r.default.siteAdminSetApi},1758:function(e,t,a){"use strict";var n=a(4),l=a(0);a(51),a(20),a(34),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var r=l(a(225)),o=l(a(98));a(549);var u=l(a(544));a(140);var i=l(a(535));a(537);var c=l(a(536));a(564);var d=l(a(563));a(590);var s=l(a(591)),f=l(a(29)),p=l(a(30)),h=l(a(59)),m=l(a(32)),g=l(a(33)),y=l(a(31)),v=l(a(2));a(554);var E=l(a(550)),w=l(a(1)),S=l(a(226)),O=l(a(1759)),R=l(a(1760)),b=a(52),k=n(a(1473)),M=l(a(1762)),C=l(a(1763));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}E.default.Option;var L=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,y.default)(t);if(x()){var n=(0,y.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,g.default)(this,e)});function n(e){var t;return(0,f.default)(this,n),t=a.call(this,e),(0,v.default)((0,h.default)(t),"reGetRoleList",(function(e){var a=t.state,n=a.value,l={name:n,code:n,pageNo:a.pageNo,pageSize:a.pageSize};!n.length>0&&(delete l.name,delete l.code),"search"==e&&(l.pageNo=1,t.setState({pageNo:1})),t.props.roleList(l)})),(0,v.default)((0,h.default)(t),"handleGetValue",(function(e){t.setState({value:e.target.value.trim()},(function(){t.input.children[0].vaule=""}))})),(0,v.default)((0,h.default)(t),"handleSearch",(function(){t.reGetRoleList("search")})),(0,v.default)((0,h.default)(t),"handleStop",(function(e){})),(0,v.default)((0,h.default)(t),"handleStart",(function(e){})),(0,v.default)((0,h.default)(t),"showModal",(function(e){t.setState({visible:!0,type:"edit",title:e,width:"30rem",footer:"打*号必须填",clear:"false",key:Math.random(),selectedRowKeys:selectedRowKeys})})),(0,v.default)((0,h.default)(t),"hideModal",(function(){t.setState({visible:!1}),t.reGetRoleList()})),(0,v.default)((0,h.default)(t),"roleManageModal",(function(e,a){var n=(0,h.default)(t),l=t.props,r=l.roleManageList;l.roleManageEdit;console.log("检测打印变量=roleManageList ",r),r({roleId:e,pageNo:1,pageSize:9999999},(function(){n.props.roteMange;var t=n.props.roteMange.roteMangeList.data;n.setState({visible:!0,title:a,isChecked:!0,Listdata:t,insertFlag:!1,powerAccountFlag:!1,updateFlag:!1,id:e})}))})),(0,v.default)((0,h.default)(t),"insertModal",(function(e){t.setState({insertFlag:!0,visible:!0,updateFlag:!1,powerAccountFlag:!1,title:e,isChecked:!1})})),(0,v.default)((0,h.default)(t),"editModal",(function(e,a){t.props.roleGet(a.id,(function(n){t.setState({insertFlag:!1,visible:!0,updateFlag:!0,powerAccountFlag:!1,title:e,roleAccountId:a.id,editeData:n.data,isChecked:!1})}))})),(0,v.default)((0,h.default)(t),"etModal",(function(e,a){t._siteId=a.id,t.props.roleAccountList(a.id,(function(n){t.setState({insertFlag:!1,visible:!0,updateFlag:!1,powerAccountFlag:!0,title:e,roleAccountId:a.id,editeData:n.data,isChecked:!1})}))})),t.state={searchName:"",editeData:[],data:[],title:"",name:"",code:"",Listdata:[],insertFlag:!1,updateFlag:!1,setFlag:!1,powerAccountFlag:!1,isChecked:!1,pageNo:"1",pageSize:"10",random:"",selectedRowKeys:[],value:""},t.columns=[{title:"角色序号",dataIndex:"code",key:"code"},{title:"角色名",dataIndex:"name",key:"name",render:function(e){return w.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"角色描述",dataIndex:"description",key:"description",render:function(e){return w.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"管理对象关系",dataIndex:"managerAccountNames",key:"managerAccountNames",render:function(e){return w.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"已关联用户数",dataIndex:"relevanceNum",key:"relevanceNum"},{title:"操作",key:"action",render:function(e,a,n){return w.default.createElement("span",null,w.default.createElement("a",{"data-index":n,onClick:function(){return t.editModal("修改角色",a)}},"修改"),w.default.createElement(s.default,{type:"vertical"}),w.default.createElement("a",{"data-index":n,onClick:function(){return t.etModal("授权用户",a)}},"授权用户"),w.default.createElement(s.default,{type:"vertical"}),w.default.createElement("a",{"data-index":n,onClick:function(){return t.roleManageModal(a.id,"管理对象")}},"管理对象"),w.default.createElement(s.default,{type:"vertical"}),w.default.createElement(d.default,{title:"是否要删除此行？",onConfirm:function(){return t.props.roleDelete({id:a.id},(function(e){t.reGetRoleList()}))}},w.default.createElement("a",null,"删除")))}}],t}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.props.roleList({pageNo:1,pageSize:10})}},{key:"render",value:function(){var e,t,a=this,n=this.columns,l=this.state,d=(l.insertFlag,l.name,l.code,this.state.isChecked,this.props),s=d.roleInsert,f=d.roteMange,p=d.roleList,h=d.roleUpdate,m=(d.roleGet,d.authAccount);d.roteMangeList;f.roteList&&(e=f.roteList.data.records,t=f.roteList.data);var g=this,y={showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],total:t?t.pageRecords:null,showTotal:function(e){return"共计 ".concat(e," 条")},PageSize:t?t.pageSize:null,current:t?t.pageNo:null,onShowSizeChange:function(e,t){g.setState({pageNo:e,pageSize:t},(function(){g.reGetRoleList()}))},onChange:function(e,t){g.setState({pageNo:e,pageSize:t},(function(){g.reGetRoleList()}))}};return this.pagination=y,w.default.createElement("div",{className:"list",style:{paddingLeft:"20px"}},w.default.createElement(S.default,{title:"角色管理"}),w.default.createElement("div",{className:"list-btn"},w.default.createElement("div",{ref:function(e){return a.input=e}},w.default.createElement(c.default,{placeholder:"请输入角色序号或角色名",onChange:this.handleGetValue,style:{width:200,marginRight:10}}),w.default.createElement(i.default,{type:"primary",style:{marginRight:"20px"},onClick:this.handleSearch},"搜索"),w.default.createElement(i.default,{type:"primary",onClick:function(){return a.insertModal("创建角色")}},"创建角色"))),w.default.createElement(u.default,{key:this.state.random,rowKey:function(e){return e.id},columns:n,dataSource:e,pagination:y}),w.default.createElement(r.default,{title:this.state.title,visible:this.state.visible,onOk:this.hideModal,onCancel:this.hideModal,footer:!1,width:1160,key:this.state.id||"1",destroyOnClose:!0},this.state.insertFlag?w.default.createElement("div",null,w.default.createElement(M.default,{hideModal:this.hideModal,roleInsert:s,roleList:p})):null,this.state.updateFlag?w.default.createElement("div",null,w.default.createElement(O.default,(0,o.default)({editeData:this.state.editeData,hideModal:this.hideModal,roleUpdate:h},this.props,this.state))):null,this.state.powerAccountFlag?w.default.createElement("div",null,w.default.createElement(R.default,{hideModal:this.hideModal,roleAccountId:this.state.roleAccountId,authAccount:m,editeData:this.state.editeData||[]})):null,this.state.isChecked?w.default.createElement("div",null,w.default.createElement(C.default,{hideModal:this.hideModal,data:this.state.Listdata||[],pageNo:this.state.pageNo,pageSize:this.state.pageSize,id:this.state.id,selectedRowKeys:this.state.selectedRowKeys,ref:"select"})):null))}}]),n}(w.default.Component),I=(0,b.connect)((function(e){return A({},e)}),A({},k))(L);t.default=I},1759:function(e,t,a){"use strict";var n=a(0);a(7),a(154),a(3),a(82),a(43),a(143),a(51),a(20),a(34),a(23),a(84),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var l=n(a(535));a(574);var r=n(a(565));a(578);var o=n(a(570)),u=n(a(98));a(61);var i=n(a(62)),c=n(a(79)),d=n(a(29)),s=n(a(30)),f=n(a(59)),p=n(a(32)),h=n(a(33)),m=n(a(31)),g=n(a(2));a(554);var y=n(a(550));a(537);var v=n(a(536));a(540);var E=n(a(539));a(1445);var w=n(a(1446));a(712);var S=n(a(643));a(719);var O=n(a(622)),R=n(a(1)),b=n(a(628));function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=O.default.TreeNode,C=(S.default.Group,w.default.Panel,E.default.Item),D=v.default.TextArea,A=(y.default.Option,function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,m.default)(t);if(k()){var n=(0,m.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,g.default)((0,f.default)(t),"state",{checkedList:"",indeterminate:!0,checkAll:!1}),(0,g.default)((0,f.default)(t),"onChange",(function(e){var a=(0,c.default)(t.state.scopeOptions),n=a.filter((function(t){return t.id==e.target.value.id}))[0];n.checked=!n.checked,t.setState({scopeOptions:a})})),(0,g.default)((0,f.default)(t),"onSelectChange",(function(e){t.setState({selectedRowKeys:e})})),(0,g.default)((0,f.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){if(!e){var n=t.props.editeData;a.name=a.name.trim();var l={code:a.code,description:a.description,name:a.name,id:n.id,groupIds:t.state.scopeOptions.filter((function(e){return e.checked})).map((function(e){return e.id})),moduleIds:t.state.selectedRowKeys};l.groupIds.length<1?i.default.error("管辖范围不能为空"):l.moduleIds.length<1?i.default.error("资源权限不能为空"):t.props.roleUpdate(l,(function(){i.default.success("修改成功！"),t.props.hideModal(!1)}))}}))})),(0,g.default)((0,f.default)(t),"renderTreeNodes",(function(e){return e.map((function(e){return e.children?R.default.createElement(M,{title:e.name,key:e.id,dataRef:e},t.renderTreeNodes(e.children)):R.default.createElement(M,(0,u.default)({},e,{dataRef:e,title:e.name,key:e.id}))}))})),(0,g.default)((0,f.default)(t),"onCheck",(function(e,a){console.log("onCheck",e),t.setState({selectedRowKeys:e})})),(0,g.default)((0,f.default)(t),"headerNode",(function(e,t){return R.default.createElement("div",null,R.default.createElement("span",null,e),R.default.createElement("a",{style:{marginLeft:"20px"}},"展开"))})),t.state={sourceData:[],scopeOptions:[],selectedRowKeys:[]},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.moduleList((function(t){var a=e.props.editeData.moduleIds,n=void 0===a?[]:a,l=t.filter((function(e){return e.children}));l.map((function(e){return e.children.map((function(e){return e.key=e.id}))})),e.setState({sourceData:l,selectedRowKeys:n})})),this.props.groupOptions((function(t){var a=e.props.editeData.groupIds,n=void 0===a?[]:a;t.data.map((function(e){return n.includes(e.id)?e.checked=!0:e.checked=!1})),e.setState({scopeOptions:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.editeData,n=t.hideModal,i=t.form,c=this.state.selectedRowKeys;console.log("检测打印变量=selectedRowKeys ",c);this.onSelectChange;var d=i.getFieldDecorator,s={labelCol:{span:6},wrapperCol:{span:14}};return R.default.createElement("div",null,R.default.createElement(E.default,{layout:"horizontal"},R.default.createElement(C,(0,u.default)({},s,{label:"角色序号:"}),d("code",{initialValue:a.code})(R.default.createElement(v.default,{disabled:!0}))),R.default.createElement(C,(0,u.default)({},s,{label:"角色名:"}),d("name",{initialValue:a.name,rules:[{validator:function(e,t,a){(0,b.default)(e,t,a,"请输入有效角色名",50)}}]})(R.default.createElement(v.default,{placeholder:"请输入少于50个字符"}))),R.default.createElement(C,(0,u.default)({},s,{label:"角色描述:"}),d("description",{initialValue:a.description})(R.default.createElement(D,{rows:4,maxLength:200,placeholder:"请输入少于200个字符"}))),R.default.createElement(C,(0,u.default)({},s,{label:R.default.createElement("span",null,R.default.createElement("span",{style:{color:"red"}},"* "),"资源权限")}),R.default.createElement(O.default,{className:"org-tree",checkable:!0,checkedKeys:c,onCheck:this.onCheck},this.renderTreeNodes(this.state.sourceData))),R.default.createElement(C,(0,u.default)({},s,{label:"管辖范围:"}),d("moduleIds",{rules:[{required:!0}],initialValue:a.moduleIds})(R.default.createElement(r.default,null,this.state.scopeOptions.map((function(t){return R.default.createElement(o.default,{span:8,key:t.id},R.default.createElement(S.default,{onChange:e.onChange,checked:t.checked,value:t},R.default.createElement("span",{title:t.name},t.name.length<10?t.name:t.name.slice(0,10)+"...")))})))))),R.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},R.default.createElement("div",null,R.default.createElement(l.default,{type:"default",style:{marginRight:"16px"},onClick:function(){n(!1)}},"取消"),R.default.createElement(l.default,{type:"primary",onClick:this.handleSubmit},"确定"))))}}]),n}(R.default.Component)),x=E.default.create()(A);t.default=x},1760:function(e,t,a){"use strict";var n=a(4),l=a(0);a(43),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var r=l(a(535)),o=l(a(29)),u=l(a(30)),i=l(a(59)),c=l(a(32)),d=l(a(33)),s=l(a(31)),f=l(a(2)),p=n(a(1)),h=l(a(624));function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){(0,c.default)(n,e);var t,a=(t=n,function(){var e,a=(0,s.default)(t);if(m()){var n=(0,s.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,f.default)((0,i.default)(t),"getViewData",(function(e){t.setState({viewRangeData:e})})),(0,f.default)((0,i.default)(t),"handleGetValue",(function(e){t.setState({value:e.target.value})})),(0,f.default)((0,i.default)(t),"handleSubmit",(function(e){e.preventDefault();var a,n=t.state.viewRangeData.map((function(e){return e.id}));(n.length>0||0===n.length)&&(a={userIds:n,roleId:t.props.roleAccountId}),t.props.authAccount(a,(function(){t.props.hideModal()}))})),t.state={value:"",viewRangeData:[],setFlag:!1},t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.setState({viewRangeData:this.props.editeData})}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(h.default,{getData:this.getViewData,invisible:!1,departmentFlag:!1,initData:this.props.editeData,types:"system",groupTypes:"system"}),p.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},p.default.createElement("div",null,p.default.createElement(r.default,{type:"default",style:{marginRight:"16px"},onClick:this.props.hideModal},"取消"),p.default.createElement(r.default,{type:"primary",onClick:this.handleSubmit},"确定"))))}}]),n}(p.Component);t.default=g},1761:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(63)),r={roleInsertApi:"POST ".concat(l.default.systemManage,"/role/add"),roleUpdateApi:"POST ".concat(l.default.systemManage,"/role/update"),roleDeleteApi:"POST ".concat(l.default.systemManage,"/role/delete"),roleListApi:"POST ".concat(l.default.systemManage,"/role/list"),roleManageListApi:"GET ".concat(l.default.systemManage,"/role/manager/list"),roleManageEditApi:"POST ".concat(l.default.systemManage,"/role/manager/edit"),moduleListApi:"GET ".concat(l.default.systemManage,"/module/list"),groupOptionsApi:"GET ".concat(l.default.systemManage,"/group/list"),roleGetApi:"GET ".concat(l.default.systemManage,"/role/get"),authAccountApi:"POST ".concat(l.default.systemManage,"/role/auth/account"),roleAccountListApi:"GET ".concat(l.default.systemManage,"/role/account/list"),siteAdminSetApi:"POST ".concat(l.default.systemManage,"/site/admin/set")};t.default=r},1762:function(e,t,a){"use strict";var n=a(4),l=a(0);a(7),a(154),a(3),a(43),a(143),a(51),a(20),a(34),a(156),a(35),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var r=l(a(535));a(574);var o=l(a(565));a(578);var u=l(a(570)),i=l(a(79)),c=l(a(98));a(61);var d=l(a(62)),s=l(a(29)),f=l(a(30)),p=l(a(59)),h=l(a(32)),m=l(a(33)),g=l(a(31)),y=l(a(2));a(537);var v=l(a(536));a(1445);var E=l(a(1446));a(540);var w=l(a(539));a(712);var S=l(a(643));a(719);var O=l(a(622)),R=n(a(1)),b=a(52),k=n(a(1473)),M=l(a(628));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=O.default.TreeNode,x=(S.default.Group,w.default.Item),L=(E.default.Panel,v.default.TextArea),I=function(e){(0,h.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(D()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function n(e){var t;return(0,s.default)(this,n),t=a.call(this,e),(0,y.default)((0,p.default)(t),"onChange1",(function(e){t._scopeOptions=[],e.map((function(e){return t._scopeOptions.push(e.id)}))})),(0,y.default)((0,p.default)(t),"onSelectChange",(function(e){t.setState({selectedRowKeys:e})})),(0,y.default)((0,p.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){if(!e)if(t.state.selectedRowKeys.length<1)d.default.error("管辖范围不能为空");else{a.name=a.name.trim();var n={code:a.code,description:a.description,name:a.name,groupIds:t._scopeOptions,moduleIds:t.state.selectedRowKeys};t.props.roleInsert(n,(function(){t.props.hideModal(!1)}))}}))})),(0,y.default)((0,p.default)(t),"headerNode",(function(e,t){return R.default.createElement("div",null,R.default.createElement("span",null,e),R.default.createElement("a",{style:{marginLeft:"20px"}},"展开"))})),(0,y.default)((0,p.default)(t),"changeCollapse",(function(e){})),(0,y.default)((0,p.default)(t),"renderTreeNodes",(function(e){return e.map((function(e){return e.children?R.default.createElement(A,{title:e.name,key:e.id,dataRef:e},t.renderTreeNodes(e.children)):R.default.createElement(A,(0,c.default)({},e,{dataRef:e,title:e.name,key:e.id}))}))})),(0,y.default)((0,p.default)(t),"onCheck",(function(e,a){console.log("onCheck",e),t.setState({selectedRowKeys:e})})),t.state={indeterminate:!0,checkAll:!1,res:{},sourceData:[]},t}return(0,f.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.moduleList((function(t){var a=t.filter((function(e){return e.children}));a.map((function(e){return e.children.map((function(e){return e.key=e.id}))})),e.setState({sourceData:a,selectedRowKeys:[]})})),this.props.groupOptions((function(t){e.setState({res:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.res,n=t.sourceData,l=[];a.data&&(l=(0,i.default)(a.data));var d=[];n&&(d=n);this.state.selectedRowKeys,this.onSelectChange;var s=this.props.form.getFieldDecorator,f={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}};return R.default.createElement("div",null,R.default.createElement(w.default,null,R.default.createElement(x,(0,c.default)({},f,{label:"角色序号:"}),s("code",{rules:[{required:!0,pattern:/^[-]|\w+$/gi,message:"请输入角色序号,数字字母下划线组成"}]})(R.default.createElement(v.default,{placeholder:"角色序号",maxLength:20}))),R.default.createElement(x,(0,c.default)({},f,{label:"角色名:"}),s("name",{rules:[{pattern:new RegExp("^[一-龥_a-zA-Z0-9]+$"),message:"请输入角色名(汉字、英文字符)"},{required:!0,validator:function(e,t,a){(0,M.default)(e,t,a,"请输入有效角色名",50)}}]})(R.default.createElement(v.default,{placeholder:"请输入少于50个字符"}))),R.default.createElement(x,(0,c.default)({},f,{label:"角色描述:"}),s("description",{})(R.default.createElement("div",null,R.default.createElement(L,{rows:4,maxLength:200,placeholder:"请输入少于200个字符"})," "))),R.default.createElement(x,(0,c.default)({},f,{label:R.default.createElement("span",null,R.default.createElement("span",{style:{color:"red"}},"* "),"资源权限")}),R.default.createElement(O.default,{className:"org-tree",checkable:!0,onCheck:this.onCheck},this.renderTreeNodes(d))),R.default.createElement(x,(0,c.default)({},f,{label:"管辖范围:"}),s("scope",{rules:[{required:!0,message:"请选择管辖范围"}]})(R.default.createElement(S.default.Group,{style:{width:"100%"},onChange:this.onChange1},R.default.createElement(o.default,null,l.map((function(e){return R.default.createElement(u.default,{span:8},R.default.createElement(S.default,{value:e},R.default.createElement("span",{title:e.name},e.name.length<10?e.name:e.name.slice(0,10)+"...")))}))))))),R.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},R.default.createElement("div",null,R.default.createElement(r.default,{type:"default",style:{marginRight:"16px"},onClick:function(){e.props.hideModal(!1)}},"取消"),R.default.createElement(r.default,{type:"primary",onClick:this.handleSubmit},"确定"))))}}]),n}(R.Component),N=w.default.create()(I),P=(0,b.connect)((function(e){return e}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},k))(N);t.default=P},1763:function(e,t,a){"use strict";var n=a(4),l=a(0);a(101),a(43),a(107),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var r=l(a(544));a(140);var o=l(a(535));a(537);var u=l(a(536));a(61);var i=l(a(62)),c=l(a(79)),d=l(a(29)),s=l(a(30)),f=l(a(59)),p=l(a(32)),h=l(a(33)),m=l(a(31)),g=l(a(2));a(554);var y=l(a(550)),v=l(a(1)),E=n(a(1473)),w=a(52);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=[{title:"用户名",dataIndex:"name",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"姓名",dataIndex:"fullName",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"工号",dataIndex:"workNum",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"部门",dataIndex:"orgName",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}},{title:"职务",dataIndex:"position",render:function(e){return v.default.createElement("span",{title:e},e.length>10?e.substring(9,0)+"...":e)}}],k=(y.default.Option,function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,m.default)(t);if(R()){var n=(0,m.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,g.default)((0,f.default)(t),"selectRow",(function(e){var a=(0,c.default)(t.state.selectedRowKeys);a.indexOf(e.key)>=0?a.splice(a.indexOf(e.key),1):e.key&&a.push(e.key),t.setState({selectedRowKeys:a})})),(0,g.default)((0,f.default)(t),"onSelectedRowKeysChange",(function(e,a){t.setState({selectedRowKeys:e,allselectedRowKeys:a,initRowKeys:a})})),(0,g.default)((0,f.default)(t),"handleSearch",(function(){var e=t.state,a=e.keyWord,n=e.orgName,l=e.position;console.log(123,a,n,l),t.setState({keyWord:a,orgName:n,position:l},(function(){var e=t.props.roleManageList,a=t.state,n=a.keyWord,l=a.orgName,r=a.position;""===n&&""===l&&""===r&&e({keyWord:n,orgName:l,position:r,pageNo:1,pageSize:9999999}),console.info(2222,e),console.log(33333,t.state.data),e({keyWord:n,orgName:l,position:r,roleId:t.props.id,pageNo:1,pageSize:9999999},(function(){var e=t.props,a=e.roteMange;e.roteMangeList;t.setState({data:a.roteMangeList.data})}))}))})),(0,g.default)((0,f.default)(t),"handleGetKeyWordValue",(function(e){t.setState({keyWord:e.target.value})})),(0,g.default)((0,f.default)(t),"handleGetOrgNameValue",(function(e){t.setState({orgName:e.target.value})})),(0,g.default)((0,f.default)(t),"handleGetPositionValue",(function(e){t.setState({position:e.target.value})})),(0,g.default)((0,f.default)(t),"handleSubmit",(function(e){var a,n=t.state;n.initRowKeys;a=n.selectedRowKeys.map((function(e){return e})),console.log("allRowKeys",a);var l={accountIds:a,roleId:t.props.id};t.props.roleManageEdit(l,(function(e){"1000"!==e.roteMangeEdit.code?(i.default.error("授权失败"),t.props.hideModal(!1)):(i.default.success("授权成功"),t.props.hideModal(!1))}))})),t.state={selectedRowKeys:[],allselectedRowKeys:[],initRowKeys:[],checkAll:!1,keyWord:"",orgName:"",position:""},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.data,t=[],a=[];e.map((function(e,n){e.isChecked&&(t.push(e.accountId),a.push({accountId:e.accountId}))})),this.setState({data:e}),t.length&&this.setState({selectedRowKeys:t,initRowKeys:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.hideModal,n=t.id,l=this.state,i=l.selectedRowKeys,c=l.allselectedRowKeys,d=l.data,s={selectedRowKeys:i,allselectedRowKeys:c,onChange:this.onSelectedRowKeysChange},f=this.props.id.roleId,p={showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","30","40","50"],showTotal:function(e){return"总".concat(e,"条记录")},total:this.state.pageTotal,PageSize:this.state.pageSize,roleId:this.props.id,onShowSizeChange:function(t,a){e.props.roleManageList({pageNo:t,pageSize:a,roleId:f},(function(t){e.setState({loading:!1})}))},onChange:function(t,a){e.props.roleManageList({pageNo:t,pageSize:a,roleId:f},(function(t){e.setState({loading:!1})}))},style:{float:"none",textAlign:"center"}};return v.default.createElement("div",null,v.default.createElement("span",null,v.default.createElement(u.default,{placeholder:"用户名/姓名/工号",style:{width:"200px",marginRight:"20px",marginBottom:"15px"},onChange:this.handleGetKeyWordValue,value:this.state.keyWord}),v.default.createElement(u.default,{placeholder:"部门",style:{width:"150px",marginRight:"20px"},onChange:this.handleGetOrgNameValue,value:this.state.orgName}),v.default.createElement(u.default,{placeholder:"职务",style:{width:"150px",marginRight:"20px"},onChange:this.handleGetPositionValue,value:this.state.position}),v.default.createElement(o.default,{type:"primary",onClick:this.handleSearch},"查询")),v.default.createElement(r.default,{rowSelection:s,columns:b,dataSource:d,pagination:p,rowKey:"accountId",onRow:function(t){return{onClick:function(){e.selectRow(t)}}}}),v.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},v.default.createElement("div",null,v.default.createElement(o.default,{type:"default",style:{marginRight:"16px"},onClick:function(){a(!1)}},"取消"),v.default.createElement(o.default,{type:"primary",onClick:function(){return e.handleSubmit(n)}},"确定"))))}}]),n}(v.default.Component)),M=(0,w.connect)((function(e){return O({},e)}),O({},E))(k);t.default=M},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},550:function(e,t,a){e.exports=a(11)(94)},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},577:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);a(26),a(597)},591:function(e,t,a){e.exports=a(11)(819)},597:function(e,t,a){},628:function(e,t,a){"use strict";a(156),a(35),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,l){var r=[];new RegExp(/^\s+/,"i");t||(t="");""===t.trim()&&t.length>0&&r.push(new Error(n,e.field));0==t.length&&e.required&&r.push(new Error(n,e.field));t.length>l&&r.push(new Error("最多支持输入"+l+"个字符以内",e.field));a(r)}},643:function(e,t,a){e.exports=a(11)(110)}}]);