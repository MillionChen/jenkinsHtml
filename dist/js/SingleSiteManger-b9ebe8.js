(window.webpackJsonp=window.webpackJsonp||[]).push([[118,4,10],{1385:function(e,t,a){e.exports={"ant-select-dropdown":"ant-select-dropdown__1Q0tm","ant-table-thead":"ant-table-thead__FZfwT",ed:"ed__3_sHN",pd10:"pd10__3Hxql","ed-left":"ed-left__1mRZ9","ed-right":"ed-right__3cglV",chooseManage:"chooseManage__3oa8K",left:"left__3GirT",right:"right__3PkHb",sitemanagerAddsiteShowurl:"sitemanagerAddsiteShowurl__2QnKb",singleSite:"singleSite__39vaR"}},1410:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={getSiteListApi:"POST ".concat(r.default.systemManage,"/site/list"),getSingleSiteListApi:"GET ".concat(r.default.systemManage,"/site/get"),getAuthSiteListApi:"GET ".concat(r.default.systemManage,"/site/course/auth/sites"),addSiteApi:"POST ".concat(r.default.systemManage,"/site/insert"),updateActionApi:"POST ".concat(r.default.systemManage,"/site/update"),enbleActionApi:"POST ".concat(r.default.systemManage,"/site/down"),upSiteApi:"POST ".concat(r.default.systemManage,"/site/up"),siteGetAdminApi:"GET ".concat(r.default.systemManage,"/site/admin/find"),roleInsertApi:"POST ".concat(r.default.systemManage,"/role/add"),roleUpdateApi:"POST ".concat(r.default.systemManage,"/role/update"),roleDeleteApi:"POST ".concat(r.default.systemManage,"/role/delete"),roleListApi:"POST ".concat(r.default.systemManage,"/role/list"),roleManageListApi:"GET ".concat(r.default.systemManage,"/role/manager/list"),roleManageEditApi:"POST ".concat(r.default.systemManage,"/role/manager/edit"),moduleListApi:"GET ".concat(r.default.systemManage,"/module/list"),groupOptionsApi:"GET ".concat(r.default.systemManage,"/group/list"),roleGetApi:"GET ".concat(r.default.systemManage,"/role/get"),authAccountApi:"POST ".concat(r.default.systemManage,"/role/auth/account"),roleAccountListApi:"GET ".concat(r.default.systemManage,"/role/account/list"),siteAdminSetApi:"POST ".concat(r.default.systemManage,"/site/admin/set")};t.default=l},1467:function(e,t,a){"use strict";var n=a(4),r=a(0);a(7),a(3),a(5),a(43),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(229),a(53),a(228),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var l=r(a(535)),o=r(a(98)),i=r(a(29)),u=r(a(30)),s=r(a(59)),d=r(a(32)),c=r(a(33)),f=r(a(31)),p=r(a(2));a(554);var h=r(a(550));a(592);var g=r(a(566));a(556);var m=r(a(553));a(537);var v=r(a(536));a(540);var y=r(a(539)),E=n(a(1)),S=(r(a(223)),r(a(663))),b=(a(52),r(a(63))),L=r(a(628)),A=r(a(1468)),O=r(a(1385));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=y.default.Item,M=(v.default.TextArea,m.default.Button,m.default.Group,g.default.RangePicker,h.default.Option),D={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},T=function(e){(0,d.default)(n,e);var t,a=(t=n,function(){var e,a=(0,f.default)(t);if(I()){var n=(0,f.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function n(e){var t;return(0,i.default)(this,n),t=a.call(this,e),(0,p.default)((0,s.default)(t),"onChange",(function(e){t.setState({orgId:e})})),(0,p.default)((0,s.default)(t),"getUserGroup",(function(){getUserGroup().then((function(e){var a=e.code,n=e.data;1e3==+a&&t.setState({userGroup:n||[]})}))})),(0,p.default)((0,s.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){console.log("777",a),e||(a.name=a.name.trim(),a.logo=t.state.logourl,t.props.addSite(a),t.props.search(),t.props.onCancel(!1))}))})),(0,p.default)((0,s.default)(t),"validatorCode",(function(e,t,a,n){A.default.validator(e,t,a,n)})),t.state={logourl:"",groupList:[],siteValue:""},t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.groupOptions((function(t){e.setState({groupList:t.data||[]})}))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.previewVisible,t.previewImage,t.fileList,t.openMangerModal,this.props.form.getFieldDecorator),n={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:16},sm:{span:16}}},r={name:"logo",required:!1,layout:{labelCol:{span:6},wrapperCol:{span:14}},defaultUrl:[],getUrl:function(t){e.setState({logourl:t})}},i=this.state.groupList,u=void 0===i?[]:i;return E.default.createElement("div",null,E.default.createElement(U,(0,o.default)({},n,{label:"子站点名称"}),a("name",{rules:[{required:!0,validator:function(e,t,a){(0,L.default)(e,t,a,"请输入站点名称",20)}}]})(E.default.createElement(v.default,{style:{width:"60%"}}))),E.default.createElement(U,(0,o.default)({},n,{label:"关联管辖区"}),a("userGroupId",{rules:[{required:!0,message:"请选择关联管辖区"}]})(E.default.createElement(h.default,{style:{width:130}},u.map((function(e,t){return E.default.createElement(M,{value:e.id,key:t},e.name)}))))),E.default.createElement(U,(0,o.default)({},n,{label:"子站点编码"}),a("code",{rules:[{required:!0,validator:function(t,a,n){e.validatorCode(t,a,n,"只能输入英文和数字")},message:"请输入站点编码"},{max:20,message:"站点编码最多支持20个字符"}]})(E.default.createElement(v.default,{addonBefore:b.default.managerDomen+"/"+location.pathname.split("/")[1]+"/",maxLength:120,onChange:function(t){e.state.siteValue=t.target.value}}))),E.default.createElement("div",{className:O.default.sitemanagerAddsiteShowurl},E.default.createElement("div",{style:x({},D)},this.state.siteValue?"管理端地址:"+b.default.managerDomen+"/"+location.pathname.split("/")[1]+"/"+this.state.siteValue+"/login":""),E.default.createElement("div",{style:x({},D)},this.state.siteValue?"移动端地址:"+b.default.wechartDomen+"/"+location.pathname.split("/")[1]+"/"+this.state.siteValue+"/login":""),E.default.createElement("div",{style:x({},D)},this.state.siteValue?"pc端地址:"+b.default.pcDomen+"/"+location.pathname.split("/")[1]+"/"+this.state.siteValue+"/login":"")),E.default.createElement("div",{style:{marginLeft:"-2rem"}},E.default.createElement(S.default,(0,o.default)({extra:"图片最佳尺寸：128*40"},r,{ref:function(t){return e.validate=t}}))),E.default.createElement(U,null,E.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},E.default.createElement("div",null,E.default.createElement(l.default,{type:"default",style:{marginRight:"16px"},onClick:function(){e.props.onCancel(!1)}},"取消"),E.default.createElement(l.default,{type:"primary",onClick:this.handleSubmit},"确定")))))}}]),n}(E.Component),C=y.default.create()(T);t.default=C},1468:function(e,t,a){"use strict";a(156),a(35),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={validator:function(e,t,a,n){var r=[],l=new RegExp(/[^\w]/,"img");t||(t=""),(""===t.trim()||l.test(t))&&r.push(new Error(n,e.field)),a(r)}};t.default=n},1469:function(e,t,a){"use strict";var n=a(0);a(7),a(3),a(5),a(9),a(10),a(8),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.getSiteList=function(e,t){return function(a){return(0,o.default)({url:d,data:e}).then((function(e){a({type:"SITELIST",data:e.data}),t&&t(e.data)}))}},t.getAuthSiteList=function(e){return function(t){return(0,o.default)({url:f,data:{}}).then((function(a){t({type:"AUTHSITELIST",data:a.data}),e&&e(a.data)}))}},t.getSingleSiteList=function(e,t){return function(e){return(0,o.default)({url:c,data:{}}).then((function(a){var n={pageNo:0,pageRecords:1,pageSize:10,pageTotal:1,records:[s({},a.data)]};e({type:"SITELIST",data:n}),t&&t(a.data)}))}},t.addSite=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(a){return(0,o.default)({url:p,data:e}).then((function(e){t&&t(e)}))}},t.updateAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(a){return(0,o.default)({url:h,data:e}).then((function(e){t&&t(e)}))}},t.enbleAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(a){return(0,o.default)({url:g,data:e}).then((function(e){t&&t(e)}))}},t.upSite=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(a){return(0,o.default)({url:m,data:e}).then((function(e){t&&t(e)}))}},t.siteGetAdmin=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(a){return(0,o.default)({url:v,data:{siteId:e}}).then((function(e){t&&t(e)}))}},t.LOGINCONFIGUPDATE=t.LOGINCONFIG=t.UNRELEASE=t.RELEASE=t.AUTHSITELIST=t.SITELIST=t.FETCHING=void 0;var r=n(a(2)),l=a(233),o=n(a(76)),i=n(a(1410));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.FETCHING="FETCHING";(0,l.createAction)("FETCHING");t.SITELIST="SITELIST";t.AUTHSITELIST="AUTHSITELIST";(0,l.createAction)("SITELIST");t.RELEASE="RELEASE";(0,l.createAction)("RELEASE");t.UNRELEASE="UNRELEASE";(0,l.createAction)("UNRELEASE");t.LOGINCONFIG="LOGINCONFIG";(0,l.createAction)("LOGINCONFIG");t.LOGINCONFIGUPDATE="LOGINCONFIGUPDATE";var d=i.default.getSiteListApi,c=i.default.getSingleSiteListApi,f=i.default.getAuthSiteListApi,p=i.default.addSiteApi,h=i.default.updateActionApi,g=i.default.enbleActionApi,m=i.default.upSiteApi,v=i.default.siteGetAdminApi},1470:function(e,t,a){"use strict";var n=a(0);a(43),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(61);var r=n(a(62)),l=n(a(76)),o=n(a(1410)),i=o.default.roleInsertApi,u=o.default.roleUpdateApi,s=o.default.roleDeleteApi,d=o.default.roleListApi,c=o.default.roleManageListApi,f=o.default.roleManageEditApi,p=o.default.moduleListApi,h=o.default.groupOptionsApi,g=o.default.roleGetApi,m=o.default.authAccountApi,v=o.default.roleAccountListApi,y=o.default.siteAdminSetApi,E={roleInsert:function(e,t){return function(a){return(0,l.default)({url:i,data:e}).then((function(e){1e3==+e.code?t&&t():r.default.error(e.subMsg)})).catch((function(e){console.log(e)}))}},roleUpdate:function(e,t){return function(a){return{url:u,data:e}.then((function(e){1e3!=+e.code?r.default.error("后台".concat(e.subMsg)):t&&t()})).catch((function(e){console.log(e)}))}},roleDelete:function(e,t){return function(a){return(0,l.default)({url:s,data:e}).then((function(e){1e3==+e.code?t&&t(e):r.default.error("后台".concat(e.subMsg))})).catch((function(e){console.log(e)}))}},roleList:function(e,t){return function(a){return(0,l.default)({url:d,data:e}).then((function(e){1e3!=+e.code?r.default.error("后台".concat(e.subMsg)):(a({type:"ROTE_List",roteList:e}),t&&t())})).catch((function(e){console.log(e)}))}},roleManageList:function(e,t){return function(a){return(0,l.default)({url:c,data:e}).then((function(e){1e3!=+e.code&&r.default.error("后台".concat(e.subMsg)),a({type:"ROLE_MANAGE_LIST",roleMangeList:e}),t&&t()})).catch((function(e){console.log(e)}))}},roleManageEdit:function(e,t){return function(a){return(0,l.default)({url:f,data:{id:e}}).then((function(e){1e3!=+e.code&&r.default.error("后台".concat(e.subMsg)),a({type:"ROLE_MANAGE_EDIT",roteMangeEdit:e}),t({roteMangeEdit:e})})).catch((function(e){console.log(e)}))}},moduleList:function(e){return function(t){return(0,l.default)({url:p}).then((function(t){if(1e3!=+t.code)r.default.error("后台资源模块".concat(t.msg));else{!function e(t){t&&t.map((function(t){0!==t.children.length?e(t.children):delete t.children}))}(t.data),e&&e(t.data)}})).catch((function(e){console.log(e)}))}},groupOptions:function(e){return function(t){return(0,l.default)({url:h}).then((function(t){1e3!=+t.code?r.default.error("后台管辖范围".concat(t.msg)):e&&e(t)})).catch((function(e){console.log(e)}))}},roleGet:function(e,t){return function(a){return(0,l.default)({url:g,data:e}).then((function(e){1e3!=+e.code?r.default.info("后台".concat(e.msg)):t&&t(e)})).catch((function(e){console.log(e)}))}},authAccount:function(e,t){return function(a){return(0,l.default)({url:m,data:e}).then((function(e){1e3!=+e.code?r.default.info("后台".concat(e.msg)):t&&t(e)})).catch((function(e){console.log(e)}))}},roleAccountList:function(e,t){return function(a){return(0,l.default)({url:v,data:{roleId:e}}).then((function(e){e.code,t&&t(e)})).catch((function(e){console.log(e)}))}},siteAdminSet:function(e,t){return function(a){return(0,l.default)({url:y,data:e}).then((function(e){1e3!=+e.code?r.default.info("".concat(e.msg)):t&&t(e)})).catch((function(e){console.log(e)}))}}};t.default=E},1471:function(e,t,a){"use strict";var n=a(4),r=a(0);a(43),a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var l=r(a(535)),o=r(a(29)),i=r(a(30)),u=r(a(59)),s=r(a(32)),d=r(a(33)),c=r(a(31)),f=r(a(2)),p=n(a(1)),h=r(a(624));function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){(0,s.default)(n,e);var t,a=(t=n,function(){var e,a=(0,c.default)(t);if(g()){var n=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,f.default)((0,u.default)(t),"getViewData",(function(e){t.setState({viewRangeData:e})})),(0,f.default)((0,u.default)(t),"handleGetValue",(function(e){t.setState({value:e.target.value})})),(0,f.default)((0,u.default)(t),"handleSubmit",(function(e){e.preventDefault();var a,n=t.state.viewRangeData.map((function(e){return e.id}));(n.length>0||0===n.length)&&(a={accountIds:n,siteId:t.props.roleAccountId}),t.props.siteAdminSet(a,(function(){t.props.hideModal()}))})),t.state={value:"",viewRangeData:[],setFlag:!1},t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){console.log("检测打印变量=this.props.editeData ",this.props.editeData),this.setState({viewRangeData:this.props.editeData})}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(h.default,{getData:this.getViewData,invisible:!1,departmentFlag:!1,initData:this.props.editeData,types:"system",groupTypes:"system"}),p.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},p.default.createElement("div",null,p.default.createElement(l.default,{type:"default",style:{marginRight:"16px"},onClick:this.props.hideModal},"取消"),p.default.createElement(l.default,{type:"primary",onClick:this.handleSubmit},"确定"))))}}]),n}(p.Component);t.default=m},1741:function(e,t,a){"use strict";var n=a(4),r=a(0);a(7),a(3),a(5),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(229),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(146);var l=r(a(150));a(224);var o=r(a(225));a(549);var i=r(a(544)),u=r(a(29)),s=r(a(30)),d=r(a(59)),c=r(a(32)),f=r(a(33)),p=r(a(31)),h=r(a(2)),g=n(a(1)),m=r(a(226)),v=r(a(1467)),y=r(a(1742)),E=r(a(223)),S=a(52),b=a(1469),L=n(a(1470)),A=a(83),O=r(a(1471)),w=r(a(1385));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){(0,c.default)(n,e);var t,a=(t=n,function(){var e,a=(0,p.default)(t);if(U()){var n=(0,p.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,f.default)(this,e)});function n(e){var t;return(0,u.default)(this,n),t=a.call(this,e),(0,h.default)((0,d.default)(t),"onCloseAddModal",(function(){t.setState({visilble:!1})})),(0,h.default)((0,d.default)(t),"onAddSite",(function(e){t.props.addSite(e,(function(){t.props.getSiteList({pageNo:0,pageSize:10})})),t.onCloseAddModal()})),(0,h.default)((0,d.default)(t),"onUpdate",(function(e){t.props.updateAction(e,(function(){t.props.getSiteList({pageNo:0,pageSize:10})})),t.setState({editVisible:0})})),(0,h.default)((0,d.default)(t),"loading",(function(e){t.setState({loading:e})})),(0,h.default)((0,d.default)(t),"changeCondition",(function(e){t.setState(I({},e))})),(0,h.default)((0,d.default)(t),"search",(function(e){var a=e.pageNo,n={pageNo:void 0===a?1:a,pageSize:t.state.pageSize},r=t.state,l=r.keyword,o=r.type;""!==l&&(n.name=l),""!==status&&(n.type=parseInt(o)),console.log("打印行数= vo",n),t.props.getSiteList(n)})),(0,h.default)((0,d.default)(t),"showModal",(function(e){t.setState({visible:!0,type:"edit",title:e,width:"30rem",footer:"打*号必须填",clear:"false",key:Math.random()})})),(0,h.default)((0,d.default)(t),"hideModal",(function(){t.setState({visible:!1})})),(0,h.default)((0,d.default)(t),"view",(function(e){t.setState({editVisible:1,editVo:e})})),(0,h.default)((0,d.default)(t),"update",(function(e){t.setState({editVisible:2,editVo:e})})),(0,h.default)((0,d.default)(t),"etModal",(function(e,a){t.props.roleAccountList(a.id,(function(n){t.setState({powerAccountFlag:!0,title:e,roleAccountId:a.id,editeData:n.data,groupIds:n.groupIds,moduleIds:n.moduleIds}),t.showModal(e)}))})),(0,h.default)((0,d.default)(t),"openModal",(function(e){t.setState({visilble:e})})),t.state={visilble:!1,loading:!1,powerAccountFlag:!1,keyword:"",pageSize:10,status:"",editVisible:0,editVo:{}},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.search({pageNo:0,pageSize:this.state.pageSize})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.editVisible,r=t.visilble,u=[{title:"站点名称",dataIndex:"name",key:"name",ellipsis:!0,align:"left"},{title:"站点编码",dataIndex:"code",key:"code",align:"left"},{title:"LOGO",dataIndex:"logo",align:"left",render:function(e){return g.default.createElement("img",{src:e,alt:"logo",style:{width:"2rem",backgroundColor:"#000"}})},key:"logo"},{title:"状态",dataIndex:"enabled",key:"enabled",align:"left",render:function(e){return g.default.createElement("span",null,e?"上架":"下架")}},{title:"创建时间",dataIndex:"createTime",render:function(e){return g.default.createElement("span",null,(0,E.default)(e).format("YYYY-MM-DD HH:mm"))},key:"createTime",align:"left"},{title:"到期时间",dataIndex:"expiredTime",render:function(e){return g.default.createElement("span",null,(0,E.default)(e).format("YYYY-MM-DD HH:mm"))},key:"expiredTime",align:"left"},{title:"操作",align:"left",render:function(t,a){return g.default.createElement("span",null,g.default.createElement("a",{onClick:function(){e.view(a)}},"查看"),g.default.createElement("span",{className:w.default.pd10}),g.default.createElement("a",{onClick:function(){e.update(a)}},"修改"))}}],s=this.props.data,d=s.records,c=void 0===d?[]:d,f={showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],total:s.pageRecords,showTotal:function(e){return"共计 ".concat(e," 条")},PageSize:s.pageSize,onShowSizeChange:function(t,a){e.setState({pageSize:a}),e.search({pageNo:t,pageSize:a})},onChange:function(t,a){e.search({pageNo:t,pageSize:a})}};return g.default.createElement("div",{className:w.default.singleSite},g.default.createElement(m.default,{title:"站点管理"}),g.default.createElement(l.default,{tip:"Loading...",spinning:a},g.default.createElement(i.default,{align:"left",columns:u,dataSource:c,pagination:f,rowKey:function(e){return e.id}}),r?g.default.createElement(o.default,{title:"新增",visible:r,width:"50%",onCancel:this.onCloseAddModal,footer:!1},g.default.createElement(v.default,{groupOptions:this.props.groupOptions,addSite:this.onAddSite,onCancel:this.onCloseAddModal,roteMange:this.props.roteMange})):null,0!==n?g.default.createElement(o.default,{title:1===n?"查看":"修改",visible:!0,width:"50%",onCancel:function(){return e.setState({editVisible:0})},footer:!1},g.default.createElement(y.default,{groupOptions:this.props.groupOptions,onUpdate:this.onUpdate,editVisible:this.state.editVisible,onCancel:function(){return e.setState({editVisible:0})},roteMange:this.props.roteMange,data:this.state.editVo})):null,g.default.createElement(o.default,{title:this.state.title,visible:this.state.visible,onOk:this.hideModal,onCancel:this.hideModal,footer:!1,width:800},this.state.powerAccountFlag?g.default.createElement("div",null,g.default.createElement(O.default,{hideModal:this.hideModal,roleAccountId:this.state.roleAccountId,editeData:this.state.editeData})):null)))}}]),n}(g.default.Component),D=(0,S.connect)((function(e){return{roteMange:e.roteMange,data:e.singleSite.data}}),(function(e){return I({getSiteList:(0,A.bindActionCreators)(b.getSingleSiteList,e),addSite:(0,A.bindActionCreators)(b.addSite,e),groupOptions:(0,A.bindActionCreators)(L.default.groupOptions,e),roleAccountList:(0,A.bindActionCreators)(L.default.roleAccountList,e),updateAction:(0,A.bindActionCreators)(b.updateAction,e)},L.default)}))(M);t.default=D},1742:function(e,t,a){"use strict";var n=a(4),r=a(0);a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var l=r(a(535)),o=r(a(98)),i=r(a(29)),u=r(a(30)),s=r(a(59)),d=r(a(32)),c=r(a(33)),f=r(a(31)),p=r(a(2));a(592);var h=r(a(566));a(556);var g=r(a(553));a(537);var m=r(a(536));a(540);var v=r(a(539)),y=n(a(1)),E=(r(a(223)),r(a(663))),S=r(a(63)),b=r(a(628)),L=r(a(1385));function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=v.default.Item,w=(m.default.TextArea,g.default.Button,g.default.Group,h.default.RangePicker,function(e){(0,d.default)(n,e);var t,a=(t=n,function(){var e,a=(0,f.default)(t);if(A()){var n=(0,f.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function n(e){var t;return(0,i.default)(this,n),t=a.call(this,e),(0,p.default)((0,s.default)(t),"onChange",(function(e){t.setState({orgId:e})})),(0,p.default)((0,s.default)(t),"getUserGroup",(function(){getUserGroup().then((function(e){var a=e.code,n=e.data;1e3==+a&&t.setState({userGroup:n||[]})}))})),(0,p.default)((0,s.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){e||(a.logo=t.state.logourl,a.id=t.props.data.id,a.userGroupId=t.props.data.userGroupId,t.props.onUpdate(a))}))})),t.state={logourl:t.props.data.logo,groupList:[]},t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.groupOptions((function(t){e.setState({groupList:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.name,n=t.code,r=t.domain,i=t.userGroupId,u=t.userGroupName,s=t.logo,d=(t.records,1===this.props.editVisible),c=this.state,f=(c.previewVisible,c.previewImage,c.fileList,c.openMangerModal,this.props.form.getFieldDecorator),p={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:15},sm:{span:15}}},h={name:"logo",disabled:d,required:!1,layout:{labelCol:{span:6},wrapperCol:{span:14}},defaultUrl:s?[{uid:1,status:"done",reponse:"Server Error 500",url:s}]:[],getUrl:function(t){e.setState({logourl:t})}};this.state.groupList;return y.default.createElement("div",null,y.default.createElement(O,(0,o.default)({},p,{label:"站点名称"}),f("name",{rules:[{required:!0,validator:function(e,t,a){(0,b.default)(e,t,a,"请输入站点名称",20)}}],initialValue:a})(y.default.createElement(m.default,{style:{width:"40%"},disabled:d,maxLength:15}))),0!=+i?y.default.createElement(O,(0,o.default)({},p,{label:"关联管辖区"}),f("userGroupId",{rules:[{required:!1,message:"请选择关联管辖区"}],initialValue:u})(y.default.createElement("div",null,u))):null,y.default.createElement(O,(0,o.default)({},p,{label:"站点编码"}),f("code",{rules:[{required:!1,message:"请输入站点编码"},{pattern:/[^\w]/gim,message:"编码只允许数字、字母和下划线"}],initialValue:location.origin+"/"+location.pathname.split("/")[1]+"/"+n})(y.default.createElement(m.default,{style:{width:"80%"},disabled:!0,maxLength:60}))),y.default.createElement("div",{className:L.default.sitemanagerAddsiteShowurl,style:{}},y.default.createElement("div",null,"管理端地址："," ",S.default.managerDomen+"/"+location.pathname.split("/")[1],"/",n,"/login"),y.default.createElement("div",null,"移动端地址："," ",S.default.wechartDomen+"/"+location.pathname.split("/")[1],"/",n,"/login"),y.default.createElement("div",null,"pc端地址： ",S.default.pcDomen+"/"+location.pathname.split("/")[1],"/",n,"/login")),y.default.createElement(O,p,f("logo",{initialValue:s})(y.default.createElement("div",{style:{marginLeft:"2.5rem"}},y.default.createElement(E.default,(0,o.default)({},h,{extra:"图片最佳尺寸：128*40",ref:function(t){return e.validate=t}}))))),y.default.createElement(O,(0,o.default)({},p,{label:"域名"}),f("domain",{initialValue:r})(y.default.createElement(m.default,{style:{width:"40%"},disabled:!0,maxLength:60}))),!d&&y.default.createElement(O,null,y.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},y.default.createElement("div",null,y.default.createElement(l.default,{type:"default",style:{marginRight:"16px"},onClick:function(){e.props.onCancel(!1)}},"取消"),y.default.createElement(l.default,{type:"primary",onClick:this.handleSubmit},"确定")))))}}]),n}(y.Component)),x=v.default.create()(w);t.default=x},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},539:function(e,t,a){e.exports=a(11)(821)},540:function(e,t,a){"use strict";a.r(t);a(26),a(577),a(584)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},553:function(e,t,a){e.exports=a(11)(206)},558:function(e,t,a){e.exports=a(11)(251)},561:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:i.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,n=!1,r=!1;e?(n=e.needTranscode,r=e.type,a="".concat(s,"/upload/policy?needTranscode=").concat(n,"&type=").concat(r,"&date=").concat(new Date)):a="".concat(s,"/upload/policy?date=").concat(new Date);return function(e){return(0,l.default)({url:a}).then((function(a){if("1000"===a.code){var n=JSON.parse(a.data);e({type:i.GET_UPLOAD_PARAM,data:n}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,l.default)({videoUpload:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:i.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,l.default)({videoPlay:c,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:i.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:i.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:i.CLEARUPLOAD})}};var l=r(a(76)),o=r(a(587)),i=n(a(231)),u=o.default.common,s=u.ossUrl,d=u.videoUpload,c=u.videoPlay},565:function(e,t,a){e.exports=a(11)(170)},566:function(e,t,a){e.exports=a(11)(817)},568:function(e,t,a){e.exports=a(11)(333)},570:function(e,t,a){e.exports=a(11)(99)},571:function(e,t,a){e.exports=a(11)(912)},577:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);a(26),a(625),a(598),a(144)},587:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={common:{ossUrl:"GET ".concat(r.default.ossUrl),videoUpload:"POST ".concat(r.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(r.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(r.default.ossUrl,"/upload/policy")}};t.default=l},596:function(e,t,a){e.exports=a(11)(827)},598:function(e,t,a){"use strict";a.r(t);a(26),a(626)},618:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.exportUsers=t.importUsers=t.getAuditorList=t.getUserList=t.getGroupList=t.getOrgList=void 0;var l=r(a(76)),o=r(a(635)),i=n(a(235)),u=o.default.linkUser,s=u.orgList,d=u.userList,c=u.auditorList,f=u.importUserUrl,p=u.exportUserUrl;t.getOrgList=function(e,t){return function(a){return(0,l.default)({url:s,data:{type:e}}).then((function(e){a({type:i.ORGLIST,data:e.data}),t&&t(e.data)}))}};t.getGroupList=function(e,t,a){return function(t){return(0,l.default)({url:d,data:{type:e,typ:"system"}}).then((function(e){a&&a(e.data)}))}};t.getUserList=function(e,t,a){return function(n){return(0,l.default)({url:d,data:{seachVal:e,type:t}}).then((function(e){1e3==e.code&&a&&a(e.data)}))}};t.getAuditorList=function(e,t){return function(a){return(0,l.default)({url:c,data:e}).then((function(e){t&&t(e.data)}))}};t.importUsers=function(e,t,a){return function(n){return(0,l.default)({url:"".concat(f,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}};t.exportUsers=function(e,t,a){return function(n){return(0,l.default)({url:"".concat(p,"/").concat(e),data:t}).then((function(e){a&&a(e)}))}}},622:function(e,t,a){e.exports=a(11)(854)},624:function(e,t,a){"use strict";var n=a(4),r=a(0);a(44),a(3),a(5),a(51),a(20),a(34),a(35),a(23),a(229),a(6),a(569);var l=r(a(558));a(549);var o=r(a(544));a(146);var i=r(a(150));a(574);var u=r(a(565));a(578);var s=r(a(570));a(634);var d=r(a(596));a(99);var c=r(a(100));a(61);var f=r(a(62)),p=r(a(29)),h=r(a(30)),g=r(a(59)),m=r(a(32)),v=r(a(33)),y=r(a(31)),E=r(a(2));a(575);var S=r(a(568));a(537);var b=r(a(536)),L=n(a(1)),A=a(52),O=r(a(649)),w=r(a(141)),x=a(618);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=b.default.Search;var M=S.default.TabPane,D=function(e){(0,m.default)(n,e);var t,a=(t=n,function(){var e,a=(0,y.default)(t);if(I()){var n=(0,y.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,v.default)(this,e)});function n(){var e;(0,p.default)(this,n);for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return e=a.call.apply(a,[this].concat(r)),(0,E.default)((0,g.default)(e),"search",(function(t,a){var n=e.state.tabKey,r=e.props,l=r.getGroupList,o=r.getUserList,i=r.getAuditorList,u=t.target?t.target.value:t;if(e.setState({value:u}),u){var s=(0,g.default)(e);switch(n){case"3":e.setState({groupLoading:!0}),l(u,(function(e){s.setState({searchGroup:e,groupLoading:!1})}));break;case"2":e.setState({userLoading:!0}),"on"==e.props.onlyUser?i({name:u,pageNo:1,pageSize:10},(function(e){console.log(e,"3444"),s.setState({searchUser:e.records,userLoading:!1,searchData:e})})):o(u,a,(function(e){s.setState({searchUser:e,userLoading:!1})}))}}else f.default.info("请输入关键词")})),(0,E.default)((0,g.default)(e),"closeMode",(function(){e.setState({vsb:!1})})),e.state={selectedItems:[],invisible:!0,departmentFlag:!0,show:!0,orgData:"",searchGroup:[],searchUser:[],tabKey:"2",orgLoading:!1,groupLoading:!1,userLoading:!1,userKeyword:"",groupKeyword:"",value:"",searchData:{records:[],pageRecords:""}},e.tabChange=e.tabChange.bind((0,g.default)(e)),e.removeSelected=e.removeSelected.bind((0,g.default)(e)),e.getSelected=e.getSelected.bind((0,g.default)(e)),e.isExist=e.isExist.bind((0,g.default)(e)),e.search=e.search.bind((0,g.default)(e)),e.onSearchChange=e.onSearchChange.bind((0,g.default)(e)),e}return(0,h.default)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.groupTypes;this.props.getOrgList(t,(function(){e.setState({orgData:e.props.orgList})}))}},{key:"componentDidMount",value:function(){console.log("检测打印变量=this.props.initData ",this.props.initData),"research"===this.props.groupTypes&&this.props.initData&&this.props.initData.forEach((function(e){e.relationId&&(e.id=e.relationId)})),this.setState({selectedItems:this.props.initData?this.props.initData:[],invisible:void 0===this.props.invisible,departmentFlag:void 0===this.props.departmentFlag})}},{key:"onSearchChange",value:function(e,t){var a=e.target.value;a.length>50?f.default.info("输入长度不可超过50"):("user"==t?this.setState({userKeyword:a}):this.setState({groupKeyword:a}),"1"==this.state.tabKey&&(a.length>0?this.setState({show:!1}):this.setState({show:!0})))}},{key:"getSelected",value:function(e){var t=this;if(this.isExist(e.id)){var a=this;w.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},r=this.state.selectedItems;r.push(n),this.setState({selectedItems:r},(function(){t.props.getData(r),f.default.success("选择成功")}))}}},{key:"listSelect",value:function(e){var t=this;if(console.log("检测打印变量=item ",e),this.isExist(e.id)){var a=this;w.default.confirm(e.name+"已存在，是否删除？",(function(){a.removeSelected(e.id)}))}else{console.log("检测打印变量=this.state.tabKey ",this.state.tabKey);var n={name:e.name,type:this.state.tabKey,id:e.id,fullName:e.fullName,workNum:e.workNum},r=this.state.selectedItems;r.push(n),this.setState({selectedItems:r},(function(){t.props.getData(r),f.default.success("选择成功")}))}}},{key:"tabChange",value:function(e){console.log("key",e),this.setState({tabKey:e})}},{key:"isExist",value:function(e){return this.state.selectedItems.filter((function(t){return t.id==e})).length>0}},{key:"removeSelected",value:function(e){if(!this.props.disabled){var t=this.state.selectedItems.filter((function(t){return t.id!=e}));this.setState({selectedItems:t}),this.props.getData(t)}}},{key:"render",value:function(){var e=this,t=[{title:L.default.createElement("p",{style:{minWidth:"60px",marginTop:"0",marginBottom:"0"}},"用户名"),dataIndex:"name",key:"name",render:function(t,a){return L.default.createElement("a",{onClick:function(){return e.listSelect(a)},style:{whiteSpace:"nowrap"}},L.default.createElement(c.default,{type:"contacts"})," ",t)}},{title:L.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"姓名"),dataIndex:"fullName",key:"fullName"},{title:L.default.createElement("p",{style:{minWidth:"50px",marginTop:"0",marginBottom:"0"}},"工号"),dataIndex:"workNum",key:"workNum"}],a=this.props.types;return"look"==this.props.type?L.default.createElement("div",null,L.default.createElement(u.default,null,L.default.createElement(s.default,{span:24,style:{paddingLeft:15,paddingRight:15}},L.default.createElement("h3",null,"已选择的部门、成员",this.state.departmentFlag?"或用户组":""),L.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},L.default.createElement(d.default,{itemLayout:"horizontal",split:!1,dataSource:this.state.selectedItems,renderItem:function(e){return L.default.createElement(d.default.Item,null,L.default.createElement(d.default.Item.Meta,{title:L.default.createElement("a",null,L.default.createElement(c.default,{type:"contacts"}),e.name)}))}}))))):L.default.createElement("div",null,L.default.createElement(u.default,null,L.default.createElement(s.default,{span:12,style:{paddingLeft:15,paddingRight:15}},L.default.createElement(S.default,{defaultActiveKey:this.state.tabKey,onChange:this.tabChange},L.default.createElement(M,{tab:"用户",key:"2"},L.default.createElement(U,{placeholder:"用户名/姓名/工号",style:{marginBottom:"15px"},max:50,onSearch:function(t){return e.search(t,a)},onPressEnter:function(t){return e.search(t,a)},value:this.state.userKeyword,onChange:function(t){return e.onSearchChange(t,"user")}}),L.default.createElement("div",{style:{height:500,overflowY:"auto"}},L.default.createElement(i.default,{spinning:this.state.userLoading}),L.default.createElement(o.default,{columns:t,dataSource:this.state.searchUser,rowKey:function(e){return e.id},pagination:!1}),"on"==this.props.onlyUser?L.default.createElement(l.default,{style:{textAlign:"right",marginRight:"15px",marginTop:"15px"},onChange:function(t){var a={name:e.state.value,pageNo:t,pageSize:10};e.props.getAuditorList(a,(function(t){console.log(t,"3444"),e.setState({searchUser:t.records,searchData:t,userLoading:!1})}))},showTotal:function(e){return"共计 ".concat(e," 条")},total:this.state.searchData.pageRecords}):"")),this.state.departmentFlag?L.default.createElement(M,{tab:"部门",key:"1",disabled:"on"==this.props.onlyUser},L.default.createElement(O.default,{data:this.state.orgData,getSelect:this.getSelected})):null,this.state.invisible?L.default.createElement(M,{tab:"用户组",key:"3",disabled:"on"==this.props.onlyUser},L.default.createElement(U,{placeholder:"搜索",max:50,onPressEnter:this.search,value:this.state.groupKeyword,onChange:function(t){return e.onSearchChange(t,"group")}}),L.default.createElement("div",{style:{height:500,overflowY:"auto"}},L.default.createElement(i.default,{spinning:this.state.groupLoading}),L.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.searchGroup,renderItem:function(t){return L.default.createElement(d.default.Item,null,L.default.createElement(d.default.Item.Meta,{title:L.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.listSelect(t)}},L.default.createElement(c.default,{type:"contacts"}),t.name)}))}}))):null)),L.default.createElement(s.default,{span:12,style:{paddingLeft:15,paddingRight:15}},this.props.tabTitle?L.default.createElement("div",null,this.props.tabTitle):L.default.createElement("h3",null,"已选择的部门、成员",this.state.invisible?"或用户组":""),L.default.createElement("div",{style:{maxHeight:650,overflowY:"scroll"}},L.default.createElement(d.default,{itemLayout:"horizontal",split:!1,"data-locale":{emptyText:""},dataSource:this.state.selectedItems,renderItem:function(t){return L.default.createElement(d.default.Item,{actions:[L.default.createElement("a",{onClick:function(){return e.removeSelected(t.id)}},L.default.createElement(c.default,{type:"close"}))]},L.default.createElement(d.default.Item.Meta,{title:1==t.type?L.default.createElement("a",null,L.default.createElement(c.default,{type:"team"})," ",t.name):L.default.createElement("a",null,L.default.createElement("div",null,console.log(t,"item")),L.default.createElement(c.default,{type:"contacts"})," ",t.name," ",t.fullName," ",t.workNum)}))}})))))}}]),n}(L.Component);e.exports=(0,A.connect)((function(e,t){var a=e.linkUserReducer;return{fetching:a.fetching,orgList:a.orgList}}),(function(e){return{getOrgList:function(t,a){return e((0,x.getOrgList)(t,a))},getGroupList:function(t,a){return e((0,x.getGroupList)(t,a))},getUserList:function(t,a,n){return e((0,x.getUserList)(t,a,n))},getAuditorList:function(t,a){return e((0,x.getAuditorList)(t,a))}}}))(D)},625:function(e,t,a){},626:function(e,t,a){},628:function(e,t,a){"use strict";a(156),a(35),a(23),a(228),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,r){var l=[];new RegExp(/^\s+/,"i");t||(t="");""===t.trim()&&t.length>0&&l.push(new Error(n,e.field));0==t.length&&e.required&&l.push(new Error(n,e.field));t.length>r&&l.push(new Error("最多支持输入"+r+"个字符以内",e.field));a(l)}},635:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(63)),l={linkUser:{orgList:"GET ".concat(r.default.systemManage,"/org/userGroup/list"),userList:"GET ".concat(r.default.systemManage,"/account/name/search"),auditorList:"GET ".concat(r.default.webManage,"/assignment/get/all/auditor"),importUserUrl:"POST ".concat(r.default.webManage,"/range/import"),exportUserUrl:"GET ".concat(r.default.webManage,"/range/export")}};t.default=l},649:function(e,t,a){"use strict";var n=a(4),r=a(0);a(101),a(43),a(51),a(20),a(34),a(35),a(23),a(53),a(61);var l=r(a(62)),o=r(a(29)),i=r(a(30)),u=r(a(59)),s=r(a(32)),d=r(a(33)),c=r(a(31)),f=r(a(2));a(537);var p=r(a(536));a(719);var h=r(a(622)),g=n(a(1));function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=h.default.TreeNode,y=p.default.Search,E=function(e){(0,s.default)(n,e);var t,a=(t=n,function(){var e,a=(0,c.default)(t);if(m()){var n=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,d.default)(this,e)});function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,f.default)((0,u.default)(t),"onExpand",(function(e){t.setState({expandedKeys:e,autoExpandParent:!1})})),(0,f.default)((0,u.default)(t),"onChange",(function(e){var a=e.target.value;if(a.length>50)l.default.info("关键词长度最大为50");else{var n=(0,u.default)(t);a?t.setState({searchValue:a,expandedKeys:[]},(function(){for(var e=0;e<t.props.data.trees.length;e++)n.getExpandedKeys(t.props.data.trees[e].children,a,""+e)})):(t.setState({searchValue:a}),t.setDefaultExpandKeys())}})),t.state={expandedKeys:[],searchValue:"",autoExpandParent:!0},t.loop=t.loop.bind((0,u.default)(t)),t.onSelect=t.onSelect.bind((0,u.default)(t)),t.getExpandedKeys=t.getExpandedKeys.bind((0,u.default)(t)),t.renderTree=t.renderTree.bind((0,u.default)(t)),t.setDefaultExpandKeys=t.setDefaultExpandKeys.bind((0,u.default)(t)),t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.setDefaultExpandKeys()}},{key:"setDefaultExpandKeys",value:function(){var e=this.props.data.trees.map((function(e,t){return""+t}));this.setState({expandedKeys:e})}},{key:"onSelect",value:function(e,t){this.props.getSelect(t.node.props.dataRef)}},{key:"getExpandedKeys",value:function(e,t,a){var n=this,r=this.state.expandedKeys;e.map((function(e){if(e.name.indexOf(t)>=0){for(var l=a.split("&&&"),o=0;o<l.length;o++)-1==r.indexOf(l[o])&&l[o]&&r.push(l[o]);r.push(e.id)}if(e.children.length>0){var i="";i+=a?a+"&&&"+e.id:e.id,n.getExpandedKeys(e.children,t,i)}})),this.setState({expandedKeys:r})}},{key:"loop",value:function(e){var t=this,a=this.state.searchValue,n=[];return e.length>0&&(n=e.map((function(e){var n=e.name.indexOf(a),r=e.name.substr(0,n),l=e.name.substr(n+a.length),o=n>-1?g.default.createElement("span",null,r,g.default.createElement("span",{style:{color:"#f50"}},a),l):g.default.createElement("span",null,e.name);return g.default.createElement(v,{key:e.id,title:o,dataRef:e},t.loop(e.children))}))),n}},{key:"renderTree",value:function(e){var t=this,a=[],n=this.state.expandedKeys;return e&&(a=e.trees.map((function(e,a){return g.default.createElement(h.default,{onSelect:t.onSelect,onExpand:t.onExpand,expandedKeys:n,autoExpandParent:!1,key:a},g.default.createElement(v,{key:a,title:e.name,dataRef:e},t.loop(e.children)))}))),a}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(y,{placeholder:"部门名称",max:50,style:{marginBottom:8},value:this.state.searchValue,onChange:this.onChange}),g.default.createElement("div",{style:{height:500,overflowY:"auto"}},this.renderTree(this.props.data)))}}]),n}(g.Component);e.exports=E},663:function(e,t,a){"use strict";var n=a(4),r=a(0);a(101),a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(98));a(580);var o=r(a(571));a(140);var i=r(a(535));a(99);var u=r(a(100));a(61);var s=r(a(62)),d=r(a(29)),c=r(a(30)),f=r(a(59)),p=r(a(32)),h=r(a(33)),g=r(a(31)),m=r(a(2));a(540);var v=r(a(539)),y=n(a(1)),E=a(52),S=a(561),b=r(a(671));function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=v.default.Item,O=function(e){(0,p.default)(n,e);var t,a=(t=n,function(){var e,a=(0,g.default)(t);if(L()){var n=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function n(e){var t;return(0,d.default)(this,n),t=a.call(this,e),(0,m.default)((0,f.default)(t),"testCourseBeforeUpload",(function(e,a){var n=(new Date).getTime();if(e.size>3145728)return s.default.error("上传图片过大（不能大于3M）"),!1;if(-1===e.type.indexOf("image"))return s.default.info("请上传图片文件"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var r=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(r))return t.setState({fileList:[]}),s.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var l=t.props.param,o=e.name.split(".").length;t.setState({uploadParams:{Filename:l.dir+"/"+n+"."+e.name.split(".")[o-1],key:l.dir+"/"+n+"."+e.name.split(".")[o-1],policy:l.policy,OSSAccessKeyId:l.accessid,success_action_status:"200",signature:l.signature},uploadAction:l.host})})),(0,m.default)((0,f.default)(t),"onRemove",(function(){t.props.resetImgList&&t.props.resetImgList(),t.props.clearUpload()})),(0,m.default)((0,f.default)(t),"onPreview",(function(e){var a=t.state.cacheUrl,n=a||e.url;window.open(n)})),t.state={uploadParams:{},uploadAction:"",cacheUrl:""},console.log(t.props.defaultUrl),t.props.defaultUrl&&t.props.gupList(t.props.defaultUrl),t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,f.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,f.default)(t)),t}return(0,c.default)(n,[{key:"beforeUpload",value:function(e,t){var a=(new Date).getTime();if(e.size>1048576)return s.default.error("上传文件过大（不能大于1M）"),!1;if(-1===e.type.indexOf("image"))return s.default.info("请上传图片文件"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;if("banner"==this.props.bannerType){if(e.size>=1048576)return s.default.error("上传文件过大（不能大于1M）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1}else{if(e.size>=512e3)return s.default.error("上传文件过大（不能大于500KB）"),!1;this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([])}var n=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(n))return this.setState({fileList:[]}),s.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;var r=this.props.param,l=e.name.split(".").length;this.setState({uploadParams:{Filename:r.dir+"/"+a+"."+e.name.split(".")[l-1],key:r.dir+"/"+a+"."+e.name.split(".")[l-1],policy:r.policy,OSSAccessKeyId:r.accessid,success_action_status:"200",signature:r.signature},uploadAction:r.host,cacheUrl:r.host+"/"+r.dir+"/"+a+"."+e.name.split(".")[l-1]})}},{key:"handleUploadChange",value:function(e){var t=e.file,a=e.fileList,n=this.props.param,r=this.state.uploadParams.Filename;t.name.split(".").length;if("uploading"===t.status){var l=[];l.push(a.pop()),this.props.gupList(l)}if("done"===t.status){var o=[];o.push(a.pop()),this.props.gupList(o),this.props.getUrl&&this.props.getUrl(n.host+"/"+r)}}},{key:"componentWillUnmount",value:function(){this.props=null}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.uploadParams,r=a.uploadAction,s=this.props,d=s.required,c=s.fileList,f=(s.listType,this.props.layout?this.props.layout:{labelCol:{span:6},wrapperCol:{span:14}}),p="";p=0===c.length?"newState":"editState";return y.default.createElement(v.default,null,y.default.createElement(A,(0,l.default)({},f,{extra:this.props.extra,label:this.props.name?this.props.name:"播放展示图："})," ",t("logourl",{rules:[{required:!!d,message:"请上传缩略图"}]})(y.default.createElement("div",{className:b.default.credEditLogo,"data-status":p},y.default.createElement(o.default,{headers:{"X-Requested-With":null},accept:"image",listType:"picture-card",fileList:c,action:r,data:n,beforeUpload:this.props.testCourse?this.testCourseBeforeUpload:this.beforeUpload,onChange:this.handleUploadChange,onRemove:this.onRemove,onPreview:this.onPreview},this.props.disabled?null:0===c.length?y.default.createElement("div",null,y.default.createElement(u.default,{type:"plus"}),y.default.createElement("div",{className:"ant-upload-text"},"上传图片")):y.default.createElement("div",{className:"upload-btn"},y.default.createElement(i.default,{disabled:!!e.props.usable&&e.props.usable},"更换图片")))))))}}]),n}(y.Component);var w=v.default.create()((0,E.connect)((function(e,t){return{param:e.uploadParam.param,fileList:e.uploadParam.fileList}}),(function(e){return{gupfetch:function(){return e((0,S.gupfetch)())},gupList:function(t){return e((0,S.gupList)(t))},clearUpload:function(){return e((0,S.clearUpload)())}}}))(O));t.default=w},671:function(e,t,a){e.exports={credEditLogo:"credEditLogo__1fhCq","ant-upload-list-item-info":"ant-upload-list-item-info__1Pp8a","ant-upload-select-picture-card":"ant-upload-select-picture-card__2cZDS","ant-upload-list-item-actions":"ant-upload-list-item-actions__2odMN","anticon-delete":"anticon-delete__1uwBf","anticon-eye-o":"anticon-eye-o__2631W"}}}]);