(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{1015:function(e,t,a){},1016:function(e,t,a){},1021:function(e,t,a){},1764:function(e,t,a){"use strict";var l=a(4),r=a(0);a(7),a(3),a(5),a(51),a(9),a(10),a(8),a(20),a(34),a(156),a(35),a(23),a(228),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(140);var n=r(a(535));a(616);var d=r(a(617));a(764);var u=r(a(765)),o=r(a(98));a(61);var i=r(a(62)),f=r(a(29)),s=r(a(30)),c=r(a(59)),m=r(a(32)),p=r(a(33)),h=r(a(31)),g=r(a(2));a(592);var y=r(a(566));a(556);var w=r(a(553));a(537);var E=r(a(536));a(540);var v=r(a(539)),b=l(a(1)),x=a(65),k=r(a(226)),C=r(a(223)),O=l(a(1319)),D=r(a(628)),N=a(52),P=r(a(1534));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=v.default.Item,_=(E.default.TextArea,w.default.Button,w.default.Group),R=(y.default.RangePicker,function(e){(0,m.default)(l,e);var t,a=(t=l,function(){var e,a=(0,h.default)(t);if(I()){var l=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,p.default)(this,e)});function l(e){var t;return(0,f.default)(this,l),t=a.call(this,e),(0,g.default)((0,c.default)(t),"onChange",(function(e,a,l){var r=l.triggerNode.props.orgId?l.triggerNode.props.orgId:"";t.setState({orgId:r})})),(0,g.default)((0,c.default)(t),"handleSubmit",(function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){if(!e){var l,r=a.time;a.name=a.name.trim(),2==a.expiredType&&(l=new Date((0,C.default)(r._d).format("YYYY-MM-DD HH:mm:ss")).getTime());var n=t.state.orgId?t.state.orgId:window.orgId,d=j({},{startTime:void 0,email:a.email,endTime:l,expiredType:a.expiredType,fullName:a.fullName,name:a.name,orgId:a.orgId,password:a.password,position:a.position,mobile:a.mobile,validDays:a.validDays,remarkFirst:a.remarkFirst,remarkSecond:a.remarkSecond,remarkThird:a.remarkThird,workNum:a.workNum},{orgId:n});console.log("用户信息说明================="+d);var u=(0,c.default)(t);t.props.insertUser(d,(function(e){i.default.success("新增用户成功"),u.props.history.push({pathname:"/"+t.state.companyCode+"/"+t.state.siteCode+"/index/manager/system/organization",state:{flag:!0}})}))}}))})),(0,g.default)((0,c.default)(t),"handleCancelAddUser",(function(){t.props.history.push({pathname:"/"+t.state.companyCode+"/"+t.state.siteCode+"/index/manager/system/organization",state:{flag:!0}})})),t.state={companyCode:"",siteCode:""},t}return(0,s.default)(l,[{key:"render",value:function(){var e=this.props.location.state.departmentTree.trees;this.state.companyCode=this.props.location.state.companyCode,this.state.siteCode=this.props.location.state.siteCode,function e(t){for(var a=0;a<t.length;a++)t[a].title=t[a].name,t[a].key=t[a].id,t[a].value=t[a].name,t[a].orgId=t[a].id,null!=t[a].children&&t[a].children.length>0&&e(t[a].children)}(e);e.id;var t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}};return b.default.createElement("div",{className:"plusUser"},b.default.createElement(k.default,{title:"修改用户"}),b.default.createElement(v.default,{className:"login-form",id:"login-form"},b.default.createElement("h3",{style:{padding:"30px 30px 10px 40px"}},"用户信息"),b.default.createElement(S,(0,o.default)({},a,{label:"用户名:"}),t("name",{rules:[{required:!0,validator:function(e,t,a){var l=[];t||(t=""),new RegExp(/[\u4e00-\u9fa5]/,"img").test(t)&&l.push(new Error("不能用中文作为用户名",e.field)),a(l),(0,D.default)(e,t,a,"请输入有效用户名称",50)}}]})(b.default.createElement(E.default,{placeholder:"请输入有效用户名称",maxLength:51}))),b.default.createElement(E.default,{placeholder:"密码",type:"password",style:{display:"none"},name:"password"}),b.default.createElement(S,(0,o.default)({},a,{label:"密码:"}),t("password",{rules:[{required:!0,pattern:/^\w+$/,message:"只能输入大小英文字母和数字"}]})(b.default.createElement(E.default,{placeholder:"密码",type:"password"}))),b.default.createElement(S,(0,o.default)({},a,{label:"工号:"}),t("workNum",{})(b.default.createElement(E.default,{placeholder:"请输入工号"}))),b.default.createElement(S,(0,o.default)({},a,{label:"姓名:"}),t("fullName",{})(b.default.createElement(E.default,{placeholder:"请输入姓名"}))),b.default.createElement(S,(0,o.default)({},a,{label:"部门"}),t("orgId",{initialValue:window._orgName})(b.default.createElement(u.default,{showSearch:!0,style:{width:300},dropdownStyle:{width:300,maxHeight:300,overflow:"auto"},treeData:e,searchPlaceholder:"请输入部门名称",placeholder:"选择部门",onChange:this.onChange,getPopupContainer:function(){return document.getElementById("login-form")}}))),b.default.createElement(S,(0,o.default)({},a,{label:"职务:"}),t("position",{})(b.default.createElement(E.default,{placeholder:"请输入职务"}))),b.default.createElement(S,(0,o.default)({},a,{label:"手机号:"}),t("mobile",{rules:[{required:!1,pattern:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,message:"请正确输入手机号"}]})(b.default.createElement(E.default,{maxLength:11,placeholder:"请输入手机号"}))),b.default.createElement(S,(0,o.default)({},a,{label:"邮箱:"}),t("email",{rules:[{required:!1,pattern:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,message:"请正确输入正确邮箱"}]})(b.default.createElement(E.default,{placeholder:"请输入邮箱",maxLength:50}))),b.default.createElement(S,(0,o.default)({},a,{label:"备注1:"}),t("remarkFirst",{rules:[{required:!1,pattern:/^\w?(\w?[\u4e00-\u9fa5\w\.\：\- \_\:\、])+$/gim,message:"仅支持数字、字母及汉字输入，最多支持50字符长度"}]})(b.default.createElement(E.default,{placeholder:"支持数字、字母、汉字及四个特殊符号,:-_、输入，最多50个字符",maxLength:50}))),b.default.createElement(S,(0,o.default)({},a,{label:"备注2:"}),t("remarkSecond",{rules:[{required:!1,pattern:/^\w?(\w?[\u4e00-\u9fa5\w\.\：\- \_\:\、])+$/gim,message:"仅支持数字、字母及汉字输入，最多支持50字符长度"}]})(b.default.createElement(E.default,{placeholder:"支持数字、字母、汉字及四个特殊符号,:-_、输入，最多50个字符",maxLength:50}))),b.default.createElement(S,(0,o.default)({},a,{label:"备注3:"}),t("remarkThird",{rules:[{required:!1,pattern:/^\w?(\w?[\u4e00-\u9fa5\w\.\：\- \_\:\、])+$/gim,message:"仅支持数字、字母及汉字输入，最多支持50字符长度"}]})(b.default.createElement(E.default,{placeholder:"支持数字、字母、汉字及四个特殊符号,:-_、输入，最多50个字符",maxLength:50}))),b.default.createElement(S,(0,o.default)({},a,{label:"有效期:"}),t("expiredType",{initialValue:"1",rules:[{required:!0,message:"请选择有效期"}]})(b.default.createElement(_,null,b.default.createElement("div",{style:{marginTop:"10px"}},b.default.createElement(w.default,{value:"1",checked:!0},"永不过期")),b.default.createElement("div",{className:P.default.setDayView,style:{marginTop:"20px"}},b.default.createElement(w.default,{value:"3"},b.default.createElement(S,null,b.default.createElement("span",null,"设置周期:"),t("validDays",{initialValue:1})(b.default.createElement(d.default,{min:1,style:{marginLeft:"10px"}})),b.default.createElement("span",{className:"ant-form-text"}," 天")))),b.default.createElement("div",null,b.default.createElement(w.default,{value:"2"},"固定失效日期:",b.default.createElement("div",{style:{position:"absolute",left:"116px",top:"-8px",width:"330px"}},b.default.createElement(S,(0,o.default)({label:""},a),t("time",{})(b.default.createElement(y.default,{className:"cred-edit-radio-datePicker",size:"small",placeholder:"请选择日期"}))))))))),b.default.createElement(S,null,b.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},b.default.createElement("div",null,b.default.createElement(n.default,{type:"default",style:{marginRight:"16px"},onClick:this.handleCancelAddUser},"取消"),b.default.createElement(n.default,{type:"primary",onClick:this.handleSubmit},"确定"))))))}}]),l}(b.Component)),q=v.default.create()(R),L=(0,N.connect)((function(e){return j({},e)}),j({},O.default))((0,x.withRouter)(q));t.default=L},554:function(e,t,a){"use strict";a.r(t);a(26),a(1021),a(655)},556:function(e,t,a){"use strict";a.r(t);a(26),a(1016)},655:function(e,t,a){"use strict";a(26),a(1015)}}]);