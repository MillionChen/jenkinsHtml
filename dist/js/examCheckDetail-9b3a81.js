(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{2032:function(e,t,a){"use strict";var r=a(4),n=a(0);a(7),a(44),a(3),a(5),a(43),a(51),a(9),a(10),a(8),a(20),a(34),a(35),a(23),a(229),a(6),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(224);var i=n(a(225));a(549);var s=n(a(544));a(140);var l=n(a(535));a(537);var u=n(a(536));a(61);var o=n(a(62));a(616);var c=n(a(617)),p=n(a(29)),d=n(a(30)),f=n(a(59)),m=n(a(32)),h=n(a(33)),g=n(a(31)),y=n(a(2));a(1006);var v=n(a(1007)),S=r(a(1)),b=n(a(141)),k=n(a(1559)),D=a(52),E=a(1560);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=v.default.Grid,O={width:"100%",textAlign:"left"},C={width:"100%",textAlign:"left",background:"#ccc"},Q={width:"100%",textAlign:"center"},N=function(e){(0,m.default)(r,e);var t,a=(t=r,function(){var e,a=(0,g.default)(t);if(j()){var r=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function r(){var e;(0,p.default)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=a.call.apply(a,[this].concat(n)),(0,y.default)((0,f.default)(e),"paperPageChange",(function(t,a){var r=b.default.getUrlParam(location.search,"id");e.props.getPaperList({id:r,username:e.state.username,name:e.state.name,dept:e.state.depart,pageindex:t,pagesize:a}),a!=e.state.paperPagesize&&e.setState({paperPagesize:a})})),self=(0,f.default)(e),e.state={paperPagesize:20,username:"",name:"",depart:"",paperVisible:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},scoreData:[],questionLen:0,paperDetail:{examName:"",name:"",username:"",subjectivity:-1,impersonality:-1,sum:-1,isQualified:0},randoms:Math.random()},e.paperColumns=[{title:"用户名",dataIndex:"username",key:"username"},{title:"姓名",dataIndex:"name",key:"name"},{title:"部门",dataIndex:"department",key:"department"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return S.default.createElement("span",null,"2"==e?"已阅卷":"待阅卷")}},{title:"总分",dataIndex:"sum",key:"sum"},{title:"客观题得分",dataIndex:"impersonality",key:"impersonality"},{title:"主观题得分",dataIndex:"subjectivity",key:"subjectivity"},{title:"操作",key:"action",dataIndex:"action",render:function(e,t){return S.default.createElement("div",{className:k.default.operation},S.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return self.paperDetail(e)}},1==e.state?"阅卷":3==e.state?"待阅卷":"查看"))}}],e.close=e.close.bind((0,f.default)(e)),e.paperDetail=e.paperDetail.bind((0,f.default)(e)),e.getScore=e.getScore.bind((0,f.default)(e)),e.getUsername=e.getUsername.bind((0,f.default)(e)),e.getName=e.getName.bind((0,f.default)(e)),e.getDepart=e.getDepart.bind((0,f.default)(e)),e.searchPaper=e.searchPaper.bind((0,f.default)(e)),e.getSubjectivityQuestions=e.getSubjectivityQuestions.bind((0,f.default)(e)),e.submitScore=e.submitScore.bind((0,f.default)(e)),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.getPaperList,t=this.state.paperPagesize;e({id:b.default.getUrlParam(location.search,"id"),pageindex:1,pagesize:t})}},{key:"getUsername",value:function(e){this.setState({username:e.target.value})}},{key:"getName",value:function(e){this.setState({name:e.target.value})}},{key:"getDepart",value:function(e){this.setState({depart:e.target.value})}},{key:"getSubjectivityQuestions",value:function(){var e=this,t=this.props.info,a=[];if(t.markStudentQuestionVOS)a=t.markStudentQuestionVOS.map((function(e,t){return{id:e.questionId,topic:e.stem,response:e.answer,analysis:e.analysis,score:e.score,questionScore:e.questionScore}})).map((function(t,a){return S.default.createElement(v.default,{key:e.state.randoms+a,title:t.topic},S.default.createElement(w,{style:O},"考生作答：",t.response),S.default.createElement(w,{style:x({},C,{display:"flex"})},S.default.createElement("div",{style:{width:"120px"}},"题目解析："),S.default.createElement("div",{style:{whiteSpace:"pre-wrap"}},t.analysis)),S.default.createElement(w,{style:Q},"总分",t.questionScore?t.questionScore:0,"分，请打分",S.default.createElement("br",null),S.default.createElement(c.default,{min:0,max:t.questionScore?t.questionScore:0,defaultValue:t.score,onChange:function(a){return e.getScore(a,t.id)},style:{width:100}})))}));return a}},{key:"getScore",value:function(e,t){var a=this.state.scoreData,r={id:t,score:e};if(a.filter((function(e,a){return e.id==t})).length>0){var n=a.filter((function(e,a){return e.id!=t}));n.push(r),this.setState({scoreData:n})}else a.push(r),this.setState({scoreData:a})}},{key:"submitScore",value:function(e){var t=this.props.info,a=this,r=this.state.scoreData.filter((function(e){return isNaN(parseInt(e.score))})).length;if(r>0)o.default.info("还有"+r+"道题目未批阅");else{var n={examAnswerId:t.examAnswerId,objectiveScore:t.objectiveScore,type:e,markStudentQuestionVOS:this.state.scoreData.map((function(e,t){return{questionId:e.id,score:e.score}}))};this.props.checkExamPaper(n,(function(){a.close("paperDetail")}))}}},{key:"searchPaper",value:function(){var e=this.props.getPaperList,t=this.state,a=t.paperPagesize,r=t.username,n=t.name,i=t.depart,s=/[#\$%\^&\*{}|\\]+/g.test(r),l=/[#\$%\^&\*{}|\\]+/g.test(n),u=/[#\$%\^&\*{}|\\]+/g.test(i);if(s||l||u)return o.default.warning("不能输入特殊字符！");e({id:b.default.getUrlParam(location.search,"id"),userName:this.state.username,name:this.state.name,dept:this.state.depart,pageindex:1,pagesize:a})}},{key:"close",value:function(e){this.props.getPaperList,this.state.paperPagesize;switch(e){case"paperDetail":this.setState({paperVisible:!1,paperDetail:{examName:"",name:"",username:"",subjectivity:-1,impersonality:-1,sum:-1,isQualified:0},scoreData:[],questionLen:0}),this.searchPaper()}}},{key:"paperDetail",value:function(e){var t=this.props.getPaperDetail,a=this;this.setState({randoms:Math.random()}),t({id:e.readOverId},(function(){var e={examName:a.props.info.examName,name:a.props.info.name,username:a.props.info.accountName,subjectivity:a.props.info.subjectiveScore,impersonality:a.props.info.objectiveScore,sum:a.props.info.sumScore,isQualified:a.props.info.isQualified,finalScoring:a.props.info.subjectiveScore+a.props.info.objectiveScore};a.setState({paperVisible:!0,paperDetail:e,scoreData:a.props.info.markStudentQuestionVOS&&a.props.info.markStudentQuestionVOS.map((function(e){return{id:e.questionId,score:e.score}}))}),a.props.info.markStudentQuestionVOS&&a.setState({questionLen:a.props.info.markStudentQuestionVOS.length})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.paperList,r=t.paperTotal,n=t.paperFetching,o=t.info,c=b.default.paginationConfig(this.paperPageChange),p=[];c.total=r,c.showTotal=function(e){return"总共：".concat(e," 条")};for(var d=0;d<a.length;d++)p.push({key:d,username:a[d].username,name:a[d].name,department:a[d].depart,status:a[d].state,sum:a[d].sumScore,impersonality:a[d].objectiveScore,subjectivity:a[d].subjectiveScore>=0?a[d].subjectiveScore:"",action:a[d]});var f={width:"20%",textAlign:"center"};return S.default.createElement("div",{className:k.default.list,style:{padding:"20px"}},S.default.createElement("div",null,S.default.createElement(u.default,{addonBefore:"用户名",style:{width:300,marginRight:16,marginBottom:16},maxLength:50,onChange:this.getUsername}),S.default.createElement(u.default,{addonBefore:"姓名",style:{width:300,marginRight:16,marginBottom:16},maxLength:50,onChange:this.getName}),S.default.createElement(u.default,{addonBefore:"部门",style:{width:300,marginRight:16,marginBottom:16},maxLength:50,onChange:this.getDepart}),S.default.createElement(l.default,{type:"primary",onClick:this.searchPaper},"查询")),S.default.createElement(s.default,{style:{background:"white"},columns:this.paperColumns,dataSource:p,loading:n,pagination:c}),S.default.createElement(i.default,{wrapClassName:k.default.check_modal_container_check,width:1200,title:this.state.paperDetail.examName?this.state.paperDetail.examName:"未知",visible:this.state.paperVisible,onCancel:function(){return e.close("paperDetail")},footer:null},S.default.createElement(v.default,{title:"答题人："+this.state.paperDetail.name},S.default.createElement(w,{style:f},"用户名"),S.default.createElement(w,{style:f},"客观题得分"),S.default.createElement(w,{style:f},"主观题得分"),S.default.createElement(w,{style:f},"总分"),S.default.createElement(w,{style:f},"考试结果"),S.default.createElement(w,{style:f},this.state.paperDetail.username?this.state.paperDetail.username:"未知"),S.default.createElement(w,{style:f},this.state.paperDetail.impersonality),S.default.createElement(w,{style:f},this.state.paperDetail.subjectivity),S.default.createElement(w,{style:f},this.state.paperDetail.impersonality+this.state.paperDetail.subjectivity),S.default.createElement(w,{style:f},1==this.state.paperDetail.isQualified?"合格":"不合格")),S.default.createElement("h3",null,"主观题"),S.default.createElement("div",{className:k.default.subjectivityQuestion},this.getSubjectivityQuestions()),S.default.createElement("div",{className:k.default.subjectivityQuestionBtnGroup,style:{textAlign:"center"}},S.default.createElement(l.default,{onClick:function(){return e.close("paperDetail")}},"取消"),o.markStudentQuestionVOS&&o.markStudentQuestionVOS.length>0&&S.default.createElement("div",{style:{display:"inline"}},S.default.createElement(l.default,{type:"primary",onClick:function(){return e.submitScore(0)}},"保存"),S.default.createElement(l.default,{type:"primary",onClick:function(){return e.submitScore(1)}},"完成阅卷")))))}}]),r}(S.Component);var I=(0,D.connect)((function(e,t){var a=e.examCheck;return{paperList:a.paperList,paperTotal:a.paperTotal,paperFetching:a.paperFetching,info:a.paperInfo}}),(function(e){return{getPaperList:function(t,a){return e((0,E.getPaperList)(t,a))},getPaperDetail:function(t,a){return e((0,E.getPaperDetail)(t,a))},checkExamPaper:function(t,a){return e((0,E.checkExamPaper)(t,a))}}}))(N);t.default=I},616:function(e,t,a){"use strict";a.r(t);a(26),a(652)},617:function(e,t,a){e.exports=a(11)(824)},652:function(e,t,a){}}]);