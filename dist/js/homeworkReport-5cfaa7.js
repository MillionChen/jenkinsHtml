(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{1013:function(e,t,a){"use strict";var r=a(4),n=a(0);a(44),a(3),a(101),a(40),a(51),a(20),a(34),a(35),a(23),a(53),a(634);var o=n(a(596));a(61);var i=n(a(62)),l=n(a(29)),s=n(a(30)),u=n(a(59)),d=n(a(32)),f=n(a(33)),c=n(a(31)),p=r(a(1)),m=n(a(663)),h=n(a(78)),g=a(587);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=null,w=function(e){(0,d.default)(r,e);var t,a=(t=r,function(){var e,a=(0,c.default)(t);if(v()){var r=(0,c.default)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,f.default)(this,e)});function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).state={typeRight:!1,fileList:[],uploadPercent:0,uploadProgress:!1,notUpload:!0,host:"",dir:""},t.beginUpload=t.beginUpload.bind((0,u.default)(t)),t.beforeUpload=t.beforeUpload.bind((0,u.default)(t)),t.uploadProgress=t.uploadProgress.bind((0,u.default)(t)),t.completeUpload=t.completeUpload.bind((0,u.default)(t)),t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){m.default.init("selectfiles","container",this.beforeUpload,this.uploadProgress.bind(this),this.completeUpload.bind(this))}},{key:"beforeUpload",value:function(e){var t=this.props.fileLimit;if(t&&e.filter((function(e){return-1==t.indexOf(e.type.split("/")[1])})).length>0){for(var a=m.default.uploader.files.length,r=0;r<a;r++)m.default.uploader.removeFile(m.default.uploader.files[0].id);return void i.default.error("请上传正确格式的文件")}var n=[];if(this.props.multi)n=e.map((function(e,t){return{name:e.name,id:e.id,size:e.size,percent:0,suffix:"."+e.type.split("/")[1]}}));else{if(e.length>1){i.default.error("一次只能导入一个文件");a=m.default.uploader.files.length;for(var o=0;o<a;o++)m.default.uploader.removeFile(m.default.uploader.files[0].id);return void this.setState({fileList:[]})}n.push({name:e[0].name,id:e[0].id,size:e[0].size,suffix:"."+e[0].type.split("/")[1]})}this.setState({fileList:n,notUpload:!1})}},{key:"beginUpload",value:function(){var e=this;(0,h.default)({url:g.common.ossPolicy}).then((function(t){y=JSON.parse(t.data),m.default.uploadFile(y),e.setState({notUpload:!0}),0==e.state.host.length&&e.setState({host:y.host,dir:y.dir})}))}},{key:"uploadProgress",value:function(e){var t=this.state.fileList.filter((function(t){return t.id==e.id}));t[0].percent=e.percent;var a=this.state.fileList.filter((function(t){return t.id!=e.id}));this.setState({fileList:a.concat(t)})}},{key:"completeUpload",value:function(e,t,a){var r=this.props.getUrl;if(200==e.status){var n=this.state.fileList.filter((function(e){return e.id==a.id}));n[0].percent=100,n[0].ossUrl=this.state.host+"/"+this.state.dir+n[0].id+n[0].suffix;var o=this.state.fileList.filter((function(e){return e.id!=a.id})),i=this;this.setState({fileList:o.concat(n)},(function(){r(i.state.fileList),i.state.fileList.filter((function(e){return 100==e.percent})).length==i.state.fileList.length&&i.props.complete()}))}}},{key:"render",value:function(){return p.default.createElement("div",{className:"oss-uplaod"},p.default.createElement(o.default,{size:"small",style:{display:this.state.fileList.length>0?"inline":"none"},dataSource:this.state.fileList,renderItem:function(e){return p.default.createElement(o.default.Item,null,e.name," ",e.percent,"%")}}),p.default.createElement("div",{id:"container"},p.default.createElement("a",{id:"selectfiles",href:"javascript:void(0);",className:"btn"},"选择文件"),p.default.createElement("a",{disabled:this.state.notUpload,style:{marginLeft:10},id:"postfiles",href:"javascript:void(0);",onClick:this.beginUpload,className:"btn"},"开始上传")))}}]),r}(p.Component);e.exports=w},1290:function(e,t,a){},1313:function(e,t,a){"use strict";var r=a(4),n=a(0);a(51),Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeworkList=function(e){var t=l.default.getHomeworkList,a=function(e){var t={};e?(t.pageNo=e.pageindex,t.pageSize=e.pagesize,e.name&&(t.name=e.name)):(t.pageNo=1,t.pageSize=20);return t}(e);return function(e){return e({type:s.FETCHING}),(0,u.default)({url:t,data:a}).then((function(t){e({type:s.HOMEWORKLIST,data:t})}))}},t.getId=function(){var e=l.default.getId;return function(t){return(0,u.default)({url:e}).then((function(e){t({type:s.ID,data:e})}))}},t.addHomework=function(e,t){var a=l.default.addHomework;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){r({type:s.NEWHOMEWORK,data:e}),t&&t()}))}},t.upOrDown=function(e,t){var a=l.default.upOrDown,r={id:e.id,status:e.status};return function(e){return e({type:s.FETCHING}),(0,u.default)({url:a,data:r}).then((function(e){t&&t()}))}},t.getHomeworkInfo=function(e,t){var a=l.default.getHomeworkInfo,r={assignmentId:e};return function(e){return e({type:s.FETCHING}),(0,u.default)({url:a,data:r}).then((function(a){e({type:s.HOMEWORKINFO,data:a}),t&&t()}))}},t.deleteHomework=function(e,t){var a=l.default.deleteHomework,r={assignmentId:e.id};return function(e){return e({type:s.FETCHING}),(0,u.default)({url:a,data:r}).then((function(a){1e3==parseInt(a.code)?(o.default.success("删除成功"),t&&t()):(o.default.error("删除失败"),e({type:s.STOPFETCHING}))}))}},t.exportNoHomework=function(e,t){var a=l.default.exportNoHomework,r={assignmentId:e};return function(e){return(0,u.default)({url:a,data:r}).then((function(e){t&&t(e.data)}))}},t.exportReadoverResult=function(e,t){var a=l.default.exportReadoverResult;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){t&&t(e.data)}))}},t.getSingleHomeworkList=function(e){var t=l.default.getSingleHomeworkList,a=function(e){var t={};e?(t.pageNo=e.pageindex,t.pageSize=e.pagesize,e.id&&(t.assignmentId=e.id),e.status&&(t.state=e.status),e.name&&(t.name=e.name),e.department&&(t.department=e.department),e.type&&(t.type=e.type)):(t.pageNo=1,t.pageSize=20);return t}(e);return function(e){return e({type:s.FETCHING,single:!0}),(0,u.default)({url:t,data:a}).then((function(t){e({type:s.SINGLEHOMEWORKLIST,data:t})}))}},t.getSingleHomeworkInfo=function(e,t){var a=l.default.getSingleHomeworkInfo;return function(r){return(0,u.default)({url:a,data:e}).then((function(a){r({type:s.SINGLEHOMEWORKINFO,data:{single:a,readoverIndex:e.readoverIndex,page:e.page}}),t&&t()}))}},t.saveReadover=function(e,t){var a=l.default.saveReadover;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){r({type:s.SAVEREADOVER,data:e}),t&&t()}))}},t.getHomeworkDetail=function(e,t){var a=l.default.getHomeworkDetail,r={id:e};return function(e){return(0,u.default)({url:a,data:r}).then((function(t){e({type:s.HOMEWORKDETAIL,data:t})}))}},t.setHomeworkViewRange=function(e,t){var a=l.default.setHomeworkViewRange;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){r({type:s.HOMEWORKVIEWRANGE,data:e}),t&&t()}))}},t.getHomeworkViewRange=function(e,t){var a=l.default.getHomeworkViewRange,r={assignmentId:e};return function(e){return(0,u.default)({url:a,data:r}).then((function(a){e({type:s.GETHOMEWORKVIEWRANGE,data:a}),t&&t(a.data)}))}},t.setHomeworkAuditor=function(e,t){var a=l.default.setHomeworkAuditor;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){r({type:s.HOMEWORKAUDITOR,data:e}),t&&t()}))}},t.getHomeworkAuditor=function(e,t){var a=l.default.getHomeworkAuditor,r={assignmentId:e};return function(e){return(0,u.default)({url:a,data:r}).then((function(a){e({type:s.GETHOMEWORKAUDITOR,data:a}),t&&t()}))}},t.downloadHomework=function(e,t){var a=l.default.downloadHomework;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){r({type:s.DOWNLOADHOMEWORK,data:e}),t&&t(e.data)}))}},t.getHomeworkListReport=function(e,t){var a=l.default.getHomeworkListReport;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?(r({type:"REPORT_HOMEWORK_LIST",data:e}),t&&t()):o.default.error("请求失败...")}))}},t.getReportList=function(e,t){var a=l.default.getReportList;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?(r({type:"REPORT_LIST",data:e}),t&&t(e)):o.default.error("请求失败...")}))}},t.reportRemove=function(e,t){var a=l.default.reportRemove;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.homeworkUpOrDown=function(e,t){var a=l.default.homeworkUpOrDown;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.homeworkDelete=function(e,t){var a=l.default.homeworkDelete;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.getCommentList=function(e,t){var a=l.default.getCommentList;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?(r({type:"COMMENT_LIST",data:e}),t&&t()):o.default.error("请求失败...")}))}},t.commentUpOrDown=function(e,t){var a=l.default.commentUpOrDown;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.commentDelete=function(e,t){var a=l.default.commentDelete;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.commentExport=function(e,t){var a=l.default.commentExport;return function(r){return(0,u.default)({url:a,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.hvr=t.saveRo=t.singleHomeworkInfo=t.newHomework=t.homeworkInfo=t.id=t.singleHomeworkList=t.homeworkDetail=t.stopFetching=t.fetching=t.homeworkList=void 0,a(61);var o=n(a(62)),i=a(233),l=(a(84),n(a(264)),a(261),n(a(1428)),n(a(1429))),s=r(a(266)),u=n(a(78)),d=(a(903),(0,i.createAction)(s.HOMEWORKLIST));t.homeworkList=d;var f=(0,i.createAction)(s.SINGLEHOMEWORKLIST);t.singleHomeworkList=f;var c=(0,i.createAction)(s.FETCHING);t.fetching=c;var p=(0,i.createAction)(s.STOPFETCHING);t.stopFetching=p;var m=(0,i.createAction)(s.HOMEWORKDETAIL);t.homeworkDetail=m;var h=(0,i.createAction)(s.ID);t.id=h;var g=(0,i.createAction)(s.NEWHOMEWORK);t.newHomework=g;var v=(0,i.createAction)(s.HOMEWORKINFO);t.homeworkInfo=v;t.singleHomeworkInfo="SINGLEHOMEWORKINFO";t.saveRo="SAVEREADOVER";t.hvr="HOMEWORKVIEWRANGE"},1345:function(e,t,a){a(1370),e.exports=self.fetch.bind(self)},1370:function(e,t,a){"use strict";a.r(t),a.d(t,"Headers",(function(){return p})),a.d(t,"Request",(function(){return b})),a.d(t,"Response",(function(){return E})),a.d(t,"DOMException",(function(){return L})),a.d(t,"fetch",(function(){return I}));var r="URLSearchParams"in self,n="Symbol"in self&&"iterator"in Symbol,o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in self,l="ArrayBuffer"in self;if(l)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,a){e.onload=function(){t(e.result)},e.onerror=function(){a(e.error)}}))}function g(e){var t=new FileReader,a=h(t);return t.readAsArrayBuffer(e),a}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():l&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,a,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,a=h(t),t.readAsText(e),a;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),a=new Array(t.length),r=0;r<t.length;r++)a[r]=String.fromCharCode(t[r]);return a.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=f(t);var a=this.map[e];this.map[e]=a?a+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=f(t)},p.prototype.forEach=function(e,t){for(var a in this.map)this.map.hasOwnProperty(a)&&e.call(t,this.map[a],a,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,a){e.push(a)})),c(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,a){e.push([a,t])})),c(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var a,r,n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(a=t.method||this.method||"GET",r=a.toUpperCase(),w.indexOf(r)>-1?r:a),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var a=e.split("="),r=a.shift().replace(/\+/g," "),n=a.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(n))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var L=self.DOMException;try{new L}catch(e){(L=function(e,t){this.message=e,this.name=t;var a=Error(e);this.stack=a.stack}).prototype=Object.create(Error.prototype),L.prototype.constructor=L}function I(e,t){return new Promise((function(a,r){var n=new b(e,t);if(n.signal&&n.signal.aborted)return r(new L("Aborted","AbortError"));var i=new XMLHttpRequest;function l(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var a=e.split(":"),r=a.shift().trim();if(r){var n=a.join(":").trim();t.append(r,n)}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var n="response"in i?i.response:i.responseText;a(new E(n,r))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.onabort=function(){r(new L("Aborted","AbortError"))},i.open(n.method,n.url,!0),"include"===n.credentials?i.withCredentials=!0:"omit"===n.credentials&&(i.withCredentials=!1),"responseType"in i&&o&&(i.responseType="blob"),n.headers.forEach((function(e,t){i.setRequestHeader(t,e)})),n.signal&&(n.signal.addEventListener("abort",l),i.onreadystatechange=function(){4===i.readyState&&n.signal.removeEventListener("abort",l)}),i.send(void 0===n._bodyInit?null:n._bodyInit)}))}I.polyfill=!0,self.fetch||(self.fetch=I,self.Headers=p,self.Request=b,self.Response=E)},1374:function(e,t,a){e.exports={list:"list__1-6Wp",listBtn:"listBtn__21du7",toolContent:"toolContent__1MQqC",toolCont:"toolCont__1bSwb",formBtn:"formBtn__21vtN",operation:"operation__2fom2","ant-transfer":"ant-transfer__2R7b8","ant-transfer-list":"ant-transfer-list__W5xM5"}},1428:function(e,t,a){"use strict";var r=a(0);a(44),a(13),a(35),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=i.default.load("token"),u="&companyCode=".concat(l,"&siteCode=").concat(s),d="?companyCode=".concat(l,"&siteCode=").concat(s);a=r?{method:t.type||"GET",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:r}}:{method:t.type||"GET",headers:{"Content-Type":"application/json; charset=UTF-8"}};var f=Object.assign({},a,t);if(f.type){if(f.data){var c=function e(t,a,r){if(null==t)return"";var o="",i=(0,n.default)(t);if("string"==i||"number"==i||"boolean"==i)o+="&".concat(a,"=").concat(null==r||r?encodeURIComponent(t):t);else for(var l in t){var s=null==a?l:a+"[".concat(l,"]");o+=e(t[l],s,r)}return o}(f.data);switch(c=c.substr(1,c.length),f.method.toLowerCase()){case"post":e+=d,f.body=JSON.stringify(f.data);break;case"get":e="".concat(e,"?").concat(c).concat(u),delete f.body}}else e="".concat(e,"?").concat(u);f.data&&delete f.data,f.type&&delete f.type}return(0,o.default)(e,f).then((function(e){return e.json()}))};var n=r(a(110)),o=r(a(1345)),i=r(a(118)),l=location.pathname.split("/")[1],s=location.pathname.split("/")[2]},1429:function(e,t,a){"use strict";var r=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(63)),o={getHomeworkList:"GET ".concat(n.default.webManage,"/assignment/list"),getId:"GET ".concat(n.default.webManage,"/assignment/setid"),addHomework:"POST ".concat(n.default.webManage,"/assignment/save"),upOrDown:"POST ".concat(n.default.webManage,"/assignment/status/update"),getHomeworkInfo:"GET ".concat(n.default.webManage,"/assignment/content/find"),deleteHomework:"POST ".concat(n.default.webManage,"/assignment/delete"),exportNoHomework:"GET ".concat(n.default.webManage,"/assignment/export/unsubmit/get"),exportReadoverResult:"POST ".concat(n.default.webManage,"/assignment/export/suggetion/get"),getSingleHomeworkList:"GET ".concat(n.default.webManage,"/assignment/answer/list"),getSingleHomeworkInfo:"POST ".concat(n.default.webManage,"/assignment/marking/select"),saveReadover:"POST ".concat(n.default.webManage,"/assignment/marking/save"),getHomeworkDetail:"GET ".concat(n.default.webManage,"/assignment/api/find"),setHomeworkViewRange:"POST ".concat(n.default.webManage,"/assignment/student/add"),getHomeworkViewRange:"GET ".concat(n.default.webManage,"/assignment/student/relation"),setHomeworkAuditor:"POST ".concat(n.default.webManage,"/assignment/set/auditor"),getHomeworkAuditor:"GET ".concat(n.default.webManage,"/assignment/get/auditor"),downloadHomework:"POST ".concat(n.default.webManage,"/assignment/export/downloadAnswer/get"),getReportList:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/tipoff/page"),getHomeworkListReport:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/tipoff/answer/page"),reportRemove:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/tipoff/remove"),homeworkUpOrDown:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/answer/down"),homeworkDelete:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/answer/delete"),getCommentList:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/comment/page"),commentUpOrDown:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/comment/audit"),commentDelete:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/comment/delete"),commentExport:"GET ".concat(n.default.webManage,"/assignment/exerciseBook/comment/export")};t.default=o},1430:function(e,t,a){"use strict";var r=a(4),n=a(0);a(3),a(101),a(40),a(51),a(20),a(86),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2));a(580);var i=n(a(571));a(99);var l=n(a(100));a(616);var s=n(a(617));a(224);var u=n(a(225));a(564);var d=n(a(563));a(140);var f=n(a(535)),c=n(a(98));a(61);var p=n(a(62)),m=n(a(29)),h=n(a(30)),g=n(a(59)),v=n(a(32)),y=n(a(33)),w=n(a(31));a(537);var b=n(a(536));a(540);var k=n(a(539));a(554);var E=n(a(550)),S=r(a(1)),L=n(a(1013));a(1374);var I=a(1313),U=a(52),R=a(561);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=E.default.Option,x=k.default.Item,A=b.default.TextArea,H={labelCol:{span:4},wrapperCol:{span:20}},C={labelCol:{span:0},wrapperCol:{span:24}};var _=function(e){(0,v.default)(r,e);var t,a=(t=r,function(){var e,a=(0,w.default)(t);if(O()){var r=(0,w.default)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,y.default)(this,e)});function r(e){var t;return(0,m.default)(this,r),(t=a.call(this,e)).state={currentId:"",importVisible:!1,done:!1,fileList:[],uploadFile:"",uploadFileUrl:"",listAssignmentAnswerFile:[],preview:!1,url:"",uploadAction:"",uploadParams:{},responseList:[]},t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,g.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,g.default)(t)),t.closeImport=t.closeImport.bind((0,g.default)(t)),t.importFile=t.importFile.bind((0,g.default)(t)),t.getUrl=t.getUrl.bind((0,g.default)(t)),t.readoverSubmit=t.readoverSubmit.bind((0,g.default)(t)),t.readoverNext=t.readoverNext.bind((0,g.default)(t)),t}return(0,h.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.info;void 0!==e&&e.listAssignmentAnswerBackFile&&this.setState({fileList:e.listAssignmentAnswerBackFile.map((function(e){return{name:e.fileName,fileUrl:e.fileUrl,uid:e.id,size:e.size}})),responseList:e.listAssignmentAnswerBackFile,done:!0})}},{key:"getlistGrade",value:function(e){return e.map((function(e,t){return S.default.createElement(T,{key:t,value:e.id},e.name)}))}},{key:"getUrl",value:function(e){console.log(1111,e),this.setState({fileList:e})}},{key:"readoverNext",value:function(e,t){var a=this,r=this.props,n=r.getSingleHomeworkInfo,o=(r.getSingleHomeworkList,r.currtentHomeworkId,r.departmentKeyword),i=r.readoverStatus,l=r.usernameKeyword,s=r.sortValue,u=(r.page,r.pageSize),d=(r.hasMore,r.readoverIndex),f=this;this.state.done?this.props.form.validateFields((function(r,c){if(!r){console.log("Received values of form: ",c);var p={answerId:f.state.currentId?f.state.currentId:f.props.id,comment:c.comment,listFeedBackFiles:a.state.responseList};p.score=c.grade,f.props.saveReadover(p,(function(){a.props.form.resetFields();var r=0;r="1"===i?d:"next"===t?d+1:d-1,n({state:i,name:l,department:o,type:s,assignmentId:a.props.whyid,assignmentAnswerId:e,readoverIndex:r,page:"next"===t?Math.floor((d+1)/u+1):Math.floor((d-1)/u+1)},(function(t){console.log(t),f.setState({currentId:e,fileList:[]},(function(){var e=f.props.info;f.setState({fileList:e.listAssignmentAnswerBackFile.map((function(e){return{name:e.fileName,fileUrl:e.fileUrl,uid:e.id,size:e.size}})),responseList:e.listAssignmentAnswerBackFile}),f.props.success(1)}))}))}))}})):p.default.error("上传资源过大，上传中...")}},{key:"importFile",value:function(){this.setState({importVisible:!0,fileList:[]})}},{key:"closeImport",value:function(){this.setState({importVisible:!1})}},{key:"readoverSubmit",value:function(e){var t=this;e.preventDefault();var a=this;this.state.done?this.props.form.validateFields((function(e,r){if(!e){console.log("Received values of form: ",r);var n={answerId:a.state.currentId?a.state.currentId:a.props.id,comment:r.comment,listFeedBackFiles:t.state.responseList};n.score=r.grade,a.props.saveReadover(n,(function(){console.log("log"),a.props.success()}))}})):p.default.error("上传资源过大，上传中...")}},{key:"closepreview",value:function(){this.setState({preview:!1})}},{key:"preview",value:function(e){this.setState({preview:!0,url:e.fileUrl})}},{key:"beforeUpload",value:function(e,t){var a=this.props.param,r=this;return new Promise((function(t,n){e.size>10485760&&-1!=e.type.indexOf("image")?(p.default.error("请上传小于10M的图片"),n()):e.size>10485760&&-1!=e.type.indexOf("audio")?(p.default.error("请上传小于10M的音频"),n()):e.size>52428800&&-1!=e.type.indexOf("video")?(p.default.error("请上传小于50M的视频"),n()):null!==a?(r.setState({uploadParams:{Filename:a.dir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],key:a.dir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],policy:a.policy,OSSAccessKeyId:a.accessid,success_action_status:"200",signature:a.signature},uploadAction:a.host}),r.setState({hostAndDir:a.host+"/"+a.dir}),t(e)):n()}))}},{key:"handleUploadChange",value:function(e){var t=this,a=e.file,r=e.fileList;if(("image/jpeg"==a.type||"image/jpg"==a.type||"image/png"==a.type)&&a.size>20971520)p.default.error("图片文件不能超过20M");else if("video/mp4"==a.type&&a.size>209715200)p.default.error("视频文件不能超过200M");else{var n=this.state.fileList;"done"==a.status&&(n.push(r.pop()),this.setState({done:!0,fileList:n.map((function(e){return{uid:e.uid,name:e.name,size:e.size,fileUrl:e.fileUrl}}))}),this.setState({responseList:n.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))})),"uploading"==a.status&&this.setState({done:!1}),"removed"==a.status?(n=n.filter((function(e){return e.uid!=a.uid})),this.setState({fileList:n,responseList:n.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))})):(n.push(r.pop()),this.setState({fileList:n.map((function(e){return{uid:e.uid,name:e.name,size:e.size,fileUrl:e.fileUrl}}))}),this.setState({responseList:n.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))}))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.info,r=t.type,n=t.mode,p=(t.usernameKeyword,this.props.form.getFieldDecorator);1!=r&&this.getlistGrade(this.props.info.grades);var m="";return m=0===this.state.fileList.length?"newState":"editState","look"==n?S.default.createElement("div",null,S.default.createElement(x,(0,c.default)({label:"作业清单"},H),p("homelist",{initialValue:this.state.homelist})(S.default.createElement("div",{id:"homelist"},S.default.createElement("p",null,a.content)))),S.default.createElement(k.default,{layout:"horizontal",style:{marginTop:15},onSubmit:this.readoverSubmit},S.default.createElement(x,(0,c.default)({label:"作业附件"},H),p("no",{})(S.default.createElement("div",null,S.default.createElement("p",null,"(图片/音频/视频格式的文件可在线预览，其余附件需下载查看)"),a.listAssignmentAnswerFile&&a.listAssignmentAnswerFile.map((function(e,t){return S.default.createElement("div",{key:t},S.default.createElement("a",{target:"_blank",href:e.fileUrl,download:e.fileName,style:{marginRight:"10px"}},e.fileName))}))))),S.default.createElement(x,(0,c.default)({label:""},C),S.default.createElement("div",{style:{width:"100%",textAlign:"center"}},S.default.createElement(f.default,{style:{marginRight:15},onClick:this.props.cancelModal},"取消"),S.default.createElement(d.default,{title:"确定执行此操作？",onConfirm:this.props.toggleShelf},S.default.createElement(f.default,{type:"primary"},"下架"))))),S.default.createElement(u.default,{onCancel:function(){return e.closepreview()},visible:this.state.preview,footer:null,title:"预览文件",destroyOnClose:1},S.default.createElement("div",{id:"dpreview"},this.state.url&&"mp4"===this.state.url.substring(this.state.url.length-3)||this.state.url&&"MP4"===this.state.url.substring(this.state.url.length-3)?S.default.createElement("video",{src:this.state.url,controls:"controls",preload:!0}):S.default.createElement("img",{src:this.state.url})))):S.default.createElement("div",null,S.default.createElement("h3",null,"批阅作业"),S.default.createElement(x,(0,c.default)({label:"作业清单"},H),p("homelist",{initialValue:this.state.homelist})(S.default.createElement("div",{id:"homelist"},S.default.createElement("p",null,a.content)))),S.default.createElement(k.default,{layout:"horizontal",style:{marginTop:15},onSubmit:this.readoverSubmit},S.default.createElement(x,(0,c.default)({label:"作业附件"},H),p("no",{})(S.default.createElement("div",null,S.default.createElement("p",null,"(图片/音频/视频格式的文件可在线预览，其余附件需下载查看)"),a.listAssignmentAnswerFile&&a.listAssignmentAnswerFile.map((function(e,t){return S.default.createElement("div",{key:t},S.default.createElement("a",{target:"_blank",href:e.fileUrl,download:e.fileName,style:{marginRight:"10px"}},e.fileName))}))))),S.default.createElement(x,(0,c.default)({label:"成绩"},H),p("grade",{rules:[{required:!0,message:"请输入成绩"}],initialValue:a.score})(S.default.createElement(s.default,{name:"grade",style:{width:"150px"},min:0,max:100,placeholder:"请输入作业分数"})),S.default.createElement("span",null,"满分100",0==a.passScore?null:"合格分".concat(a.passScore))),S.default.createElement(x,(0,c.default)({label:"评语"},H),p("comment",{initialValue:a.suggestion})(S.default.createElement(A,{placeholder:"请输入作业评语"}))),S.default.createElement(x,(0,c.default)({label:"反馈文件"},H),p("file")(S.default.createElement("div",{className:"cred-edit-logo","data-status":m},S.default.createElement(i.default,{headers:{"X-Requested-With":null},accept:"image/jpg,image/jpeg,image/png,video/mp4,image/gif,audio/mp3",fileList:this.state.fileList,action:this.state.uploadAction,data:this.state.uploadParams,beforeUpload:this.beforeUpload,onChange:this.handleUploadChange},S.default.createElement(f.default,null,S.default.createElement(l.default,{type:"upload"})," 上传图片/音/视频")))),S.default.createElement("span",null,"请上传资源附件（附件格式：mp4，mp3，png，jpg，jpeg，gif）")),S.default.createElement(x,(0,c.default)({label:""},C),S.default.createElement(f.default,{type:"primary",style:{display:a.prevAnswerId?"inline":"none",marginLeft:""==a.nextAnswerId?120:30},onClick:function(){return e.readoverNext(a.prevAnswerId,"pre")}},"批阅上一份"),S.default.createElement(f.default,{type:"primary",style:{marginLeft:""==a.nextAnswerId&&""==a.prevAnswerId?220:100},htmlType:"submit"},"完成批阅"),S.default.createElement(f.default,{type:"primary",style:(0,o.default)({marginLeft:100,display:a.nextAnswerId?"inline":"none"},"marginLeft",""==a.prevAnswerId?150:100),onClick:function(){return e.readoverNext(a.nextAnswerId,"next")}},"批阅下一份"))),S.default.createElement(u.default,{onCancel:this.closeImport,visible:this.state.importVisible,footer:null,title:"上传反馈文件",destroyOnClose:1},S.default.createElement(L.default,{getUrl:this.getUrl,fileLimit:["png","jpeg","jpg","mp4"],multi:"on",complete:this.closeImport})),S.default.createElement(u.default,{onCancel:function(){return e.closepreview()},visible:this.state.preview,footer:null,title:"预览文件",destroyOnClose:1},S.default.createElement("div",{id:"dpreview"},this.state.url&&"mp4"===this.state.url.substring(this.state.url.length-3)||this.state.url&&"MP4"===this.state.url.substring(this.state.url.length-3)?S.default.createElement("video",{src:this.state.url,controls:"controls",preload:!0}):S.default.createElement("img",{src:this.state.url}))))}}]),r}(S.Component),P=k.default.create()(_),N=(0,U.connect)((function(e,t){return{singleHomeworkInfo:e.homework.singleHomeworkInfo,param:e.uploadParam.param,page:e.homework.page,pageSize:e.homework.pageSize,hasMore:e.homework.hasMore,readoverIndex:e.homework.readoverIndex}}),(function(e){return{getSingleHomeworkInfo:function(t,a){return e((0,I.getSingleHomeworkInfo)(t,a))},gupfetch:function(){return e((0,R.gupfetch)())}}}))(P);t.default=N},2110:function(e,t,a){"use strict";var r=a(4),n=a(0);a(20),a(34),a(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(549);var o=n(a(544));a(140);var i=n(a(535));a(537);var l=n(a(536));a(224);var s=n(a(225));a(564);var u=n(a(563));a(61);var d=n(a(62)),f=n(a(29)),c=n(a(30)),p=n(a(59)),m=n(a(32)),h=n(a(33)),g=n(a(31)),v=n(a(2)),y=r(a(1));a(2111);var w=n(a(141)),b=n(a(226)),k=n(a(1430)),E=a(52),S=n(a(223)),L=a(1313);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=function(e){(0,m.default)(r,e);var t,a=(t=r,function(){var e,a=(0,g.default)(t);if(I()){var r=(0,g.default)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,h.default)(this,e)});function r(e){var t;return(0,f.default)(this,r),t=a.call(this,e),(0,v.default)((0,p.default)(t),"reGetHomeworkListReport",(function(e,a){var r=t.state,n=r.pageNo,o=r.pageSize,i=r.keyword,l=(0,p.default)(t),s={pageNo:n,pageSize:o,assignmentName:i};"search"==e&&(s.pageNo=1,s.pageSize=20,t.setState({pageNo:1,pageSize:20})),"pageChange"==e&&(s.pageNo=a,t.setState({pageNo:a})),"pageSizeChange"==e&&(s.pageSize=a,s.pageNo=1,t.setState({pageNo:1,pageSize:a})),console.log("param==",s),t.props.getHomeworkListReport(s,(function(){l.setState({reportHomeworkList:l.props.reportHomeworkList.data,HomeworkPage:l.props.reportHomeworkList.page})}))})),(0,v.default)((0,p.default)(t),"searchHomeworkListReport",(function(){t.reGetHomeworkListReport("search")})),(0,v.default)((0,p.default)(t),"pageChange",(function(e,a){t.reGetHomeworkListReport("pageChange",e)})),(0,v.default)((0,p.default)(t),"pageSizeChange",(function(e,a){t.reGetHomeworkListReport("pageSizeChange",a)})),(0,v.default)((0,p.default)(t),"homeworkUpOrDown",(function(e){var a=(0,p.default)(t);t.props.homeworkUpOrDown({answerId:e,isDown:1},(function(e){d.default.success("下架成功"),a.reGetHomeworkListReport(),a.setState({lookModalVisible:!1,reportDetailV:!1})}))})),(0,v.default)((0,p.default)(t),"reGetReportList",(function(e,a){var r=(0,p.default)(t),n=t.state,o={answerId:n.answerId,pageNo:n.detailPageNo,pageSize:n.detailPageSize};"pageChange"==e&&(o.pageNo=a,t.setState({detailPageNo:a})),"pageSizeChange"==e&&(o.pageSize=a,o.pageNo=1,t.setState({detailPageNo:1,detailPageSize:a})),console.log("param=",o),t.props.getReportList(o,(function(e){r.setState({reportList:r.props.reportList.data,detailPageTotal:r.props.reportList.page.pageTotal})}))})),(0,v.default)((0,p.default)(t),"reportDetail",(function(e){t.setState({answerId:e,reportDetailV:!0},(function(){t.reGetReportList()}))})),(0,v.default)((0,p.default)(t),"detailPageChange",(function(e,a){t.reGetReportList("pageChange",e)})),(0,v.default)((0,p.default)(t),"detailPageSizeChange",(function(e,a){t.reGetReportList("pageSizeChange",a)})),(0,v.default)((0,p.default)(t),"closeDetail",(function(){t.setState({reportDetailV:!1}),t.reGetHomeworkListReport()})),(0,v.default)((0,p.default)(t),"clickImg",(function(e){t.setState({reportImg:t.state.reportImg==e?"":e})})),(0,v.default)((0,p.default)(t),"reportRemove",(function(e){t.props.reportRemove({tipoffId:e},(function(){t.reGetReportList()}))})),(0,v.default)((0,p.default)(t),"keywordInput",(function(e){t.setState({keyword:e.target.value})})),(0,v.default)((0,p.default)(t),"userNameInput",(function(e){t.setState({userName:e.target.value})})),t.state={lookModalVisible:!1,reportDetailV:!1,reportImg:!1,userName:"",keyword:"",reportHomeworkList:[],reportList:[],pageNo:1,pageSize:20,HomeworkPage:{pageNo:0,pageSize:0,pageTotal:0},record:{},answerId:"",detailPageNo:1,detailPageSize:20,detailPageTotal:0,homeworkReportColumns:[{title:"作业名称",key:"assignmentName",dataIndex:"assignmentName",ellipsis:!0},{title:"用户名",key:"username",dataIndex:"username",ellipsis:!0},{title:"姓名",key:"fullName",dataIndex:"fullName",ellipsis:!0},{title:"作业提交时间",key:"commitTime",dataIndex:"commitTime",render:function(e,t){return y.default.createElement("span",null,(0,S.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"举报数",key:"tipoffTimes",dataIndex:"tipoffTimes",ellipsis:!0,render:function(e,a){return y.default.createElement("span",null,y.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.reportDetail(a.answerId)}},e),y.default.createElement("span",{style:{backgroundColor:"red",display:a.hasNew?"inline-block":"none",height:"4px",width:"4px",position:"absolute",margin:"5px 2px"}}))}},{title:"举报时间",key:"tipoffTime",dataIndex:"tipoffTime",render:function(e,t){return y.default.createElement("span",null,(0,S.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"action",dataIndex:"action",width:"70px",render:function(e,a){return y.default.createElement("div",{className:"operation"},y.default.createElement(u.default,{title:"确定执行此操作？",onConfirm:function(){return t.homeworkUpOrDown(a.answerId)}},y.default.createElement("a",{href:"javascript:void(0)",style:{marginRight:5}},"下架")),y.default.createElement("a",{href:"javascript:void(0)",onClick:function(){t.showLook(a)}},"查看"))}}],reportDetailColumns:[{title:"举报人",key:"createByName",dataIndex:"createByName"},{title:"举报时间",key:"createTime",dataIndex:"createTime",render:function(e,t){return y.default.createElement("span",null,(0,S.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"举报理由",key:"content",dataIndex:"content",render:function(e,t){return y.default.createElement("span",{title:e,style:{width:300,display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"pointer"}},e)}},{title:"附件",key:"imgUrl",dataIndex:"imgUrl",render:function(e,a){return y.default.createElement("div",null,y.default.createElement("img",{src:e,alt:"",style:{width:"40px"},onClick:function(){return t.clickImg(a.id)}}),y.default.createElement(s.default,{wrapClassName:"report-img",visible:t.state.reportImg==a.id,onCancel:function(){return t.clickImg(a.id)},footer:null,style:{backgroundColor:"transparent"},closable:!1},y.default.createElement("img",{src:e,alt:"",onClick:function(){return t.clickImg(a.id)},style:{width:"100%"}})))}},{title:"操作",key:"opration",dataIndex:"opration",render:function(e,a){return y.default.createElement(u.default,{title:"确定要移除吗？",onConfirm:function(){return t.reportRemove(a.id)}},y.default.createElement("a",{href:"javascript:void(0)"},"移除"))}}]},t.showLook=t.showLook.bind((0,p.default)(t)),t.closeLook=t.closeLook.bind((0,p.default)(t)),t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.reGetHomeworkListReport()}},{key:"showLook",value:function(e){var t=this;this.props.getSingleHomeworkInfo({assignmentAnswerId:e.answerId,assignmentId:""},(function(){t.setState({lookModalVisible:!0,record:e})}))}},{key:"closeLook",value:function(){this.setState({lookModalVisible:!1})}},{key:"homeworkPageChange",value:function(e){}},{key:"toggleShelf",value:function(e){}},{key:"render",value:function(){var e=this;console.log("this.state-report==",this.state),console.log("this.props-report==",this.props);var t=this.state,a=t.reportHomeworkList,r=t.reportList,n=t.HomeworkPage,d=t.record,f=w.default.paginationConfig(this.homeworkPageChange);return f.total=n.pageTotal,f.showTotal=function(){return"总共：".concat(n.pageTotal," ")},y.default.createElement("div",{className:"homework-report-container"},y.default.createElement(b.default,{title:"举报记录"}),y.default.createElement("div",{className:"report-btn-area",style:{margin:16}},y.default.createElement(l.default,{addonBefore:"作业关键字",placeholder:"请输入作业名称",style:{width:300,marginRight:15},onChange:this.keywordInput,value:this.state.keyword}),y.default.createElement(i.default,{onClick:this.searchHomeworkListReport,type:"primary"},"查询")),y.default.createElement("div",{className:"report-table"},y.default.createElement(o.default,{style:{background:"white"},rowKey:function(e){return e.id},dataSource:a,columns:this.state.homeworkReportColumns,pagination:{total:n.pageTotal,showTotal:function(){return"共计 "+n.pageTotal+"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:this.state.pageNo,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,showQuickJumper:!0}})),y.default.createElement(s.default,{title:"举报记录",visible:this.state.reportDetailV,onCancel:this.closeDetail,width:800,footer:y.default.createElement("div",{style:{marginRight:"290px"}},y.default.createElement(i.default,{onClick:this.closeDetail},"取消"),y.default.createElement(u.default,{title:"确定执行此操作？",onConfirm:function(){return e.homeworkUpOrDown(e.state.answerId)}},y.default.createElement(i.default,{type:"primary"},"下架")))},y.default.createElement("div",{className:"report-detail-table"},y.default.createElement(o.default,{rowKey:function(e){return e.id},dataSource:r,columns:this.state.reportDetailColumns,pagination:{total:this.state.detailPageTotal,showTotal:function(){return"共计 "+e.state.detailPageTotal+"条"},pageSize:this.state.detailPageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:this.state.detailPageNo,onChange:this.detailPageChange,onShowSizeChange:this.detailPageSizeChange,showQuickJumper:!0}}))),y.default.createElement(s.default,{title:"提交人:"+d.fullName,visible:this.state.lookModalVisible,onCancel:this.closeLook,footer:null,width:600,destroyOnClose:1},y.default.createElement(k.default,{type:1,mode:"look",id:"",listGrade:[1,2],info:this.props.singleHomeworkInfo,toggleShelf:function(){return e.homeworkUpOrDown(d.answerId)},cancelModal:this.closeLook,whyid:""})))}}]),r}(y.Component);var R=(0,E.connect)((function(e,t){return{singleHomeworkInfo:e.homework.singleHomeworkInfo,reportHomeworkList:e.homework.reportHomeworkList,reportList:e.homework.reportList}}),(function(e){return{getSingleHomeworkInfo:function(t,a){return e((0,L.getSingleHomeworkInfo)(t,a))},getHomeworkListReport:function(t,a){return e((0,L.getHomeworkListReport)(t,a))},getReportList:function(t,a){return e((0,L.getReportList)(t,a))},homeworkUpOrDown:function(t,a){return e((0,L.homeworkUpOrDown)(t,a))},reportRemove:function(t,a){return e((0,L.reportRemove)(t,a))}}}))(U);t.default=R},2111:function(e,t,a){e.exports={"homework-report-container":"homework-report-container__3g00j","report-btn-area":"report-btn-area__7chz1","report-table":"report-table__1mtcz","report-img":"report-img__MAotV","ant-modal-content":"ant-modal-content__1fTzO"}},535:function(e,t,a){e.exports=a(11)(70)},536:function(e,t,a){e.exports=a(11)(166)},537:function(e,t,a){"use strict";a.r(t);a(26),a(586),a(140)},539:function(e,t,a){e.exports=a(11)(821)},544:function(e,t,a){e.exports=a(11)(846)},550:function(e,t,a){e.exports=a(11)(94)},561:function(e,t,a){"use strict";var r=a(4),n=a(0);a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:l.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var a,r=!1,n=!1;e?(r=e.needTranscode,n=e.type,a="".concat(u,"/upload/policy?needTranscode=").concat(r,"&type=").concat(n,"&date=").concat(new Date)):a="".concat(u,"/upload/policy?date=").concat(new Date);return function(e){return(0,o.default)({url:a}).then((function(a){if("1000"===a.code){var r=JSON.parse(a.data);e({type:l.GET_UPLOAD_PARAM,data:r}),t&&t()}return a}))}},t.upvideo=function(e,t,a){return function(a){return(0,o.default)({videoUpload:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:l.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(a){return(0,o.default)({videoPlay:f,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(a({type:l.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:l.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:l.CLEARUPLOAD})}};var o=n(a(78)),i=n(a(587)),l=r(a(231)),s=i.default.common,u=s.ossUrl,d=s.videoUpload,f=s.videoPlay},563:function(e,t,a){e.exports=a(11)(837)},564:function(e,t,a){"use strict";a.r(t);a(26),a(581),a(140)},571:function(e,t,a){e.exports=a(11)(912)},581:function(e,t,a){"use strict";a.r(t);a(26),a(585)},585:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){"use strict";var r=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(63)),o={common:{ossUrl:"GET ".concat(n.default.ossUrl),videoUpload:"POST ".concat(n.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(n.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(n.default.ossUrl,"/upload/policy")}};t.default=o},596:function(e,t,a){e.exports=a(11)(827)},616:function(e,t,a){"use strict";a.r(t);a(26),a(652)},617:function(e,t,a){e.exports=a(11)(824)},634:function(e,t,a){"use strict";a.r(t);a(26),a(1290),a(655),a(146),a(569),a(584)},652:function(e,t,a){},663:function(e,t,a){"use strict";var r=a(4),n=a(0);a(101),a(51),a(20),a(34),a(35),a(23),a(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(98));a(580);var i=n(a(571));a(140);var l=n(a(535));a(99);var s=n(a(100));a(61);var u=n(a(62)),d=n(a(29)),f=n(a(30)),c=n(a(59)),p=n(a(32)),m=n(a(33)),h=n(a(31)),g=n(a(2));a(540);var v=n(a(539)),y=r(a(1)),w=a(52),b=a(561),k=n(a(671));function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=v.default.Item,L=function(e){(0,p.default)(r,e);var t,a=(t=r,function(){var e,a=(0,h.default)(t);if(E()){var r=(0,h.default)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,m.default)(this,e)});function r(e){var t;return(0,d.default)(this,r),t=a.call(this,e),(0,g.default)((0,c.default)(t),"testCourseBeforeUpload",(function(e,a){var r=(new Date).getTime();if(e.size>3145728)return u.default.error("上传图片过大（不能大于3M）"),!1;if(-1===e.type.indexOf("image"))return u.default.info("请上传图片文件"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var n=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(n))return t.setState({fileList:[]}),u.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var o=t.props.param,i=e.name.split(".").length;t.setState({uploadParams:{Filename:o.dir+"/"+r+"."+e.name.split(".")[i-1],key:o.dir+"/"+r+"."+e.name.split(".")[i-1],policy:o.policy,OSSAccessKeyId:o.accessid,success_action_status:"200",signature:o.signature},uploadAction:o.host})})),(0,g.default)((0,c.default)(t),"onRemove",(function(){t.props.resetImgList&&t.props.resetImgList(),t.props.clearUpload()})),(0,g.default)((0,c.default)(t),"onPreview",(function(e){var a=t.state.cacheUrl,r=a||e.url;window.open(r)})),t.state={uploadParams:{},uploadAction:"",cacheUrl:""},console.log(t.props.defaultUrl),t.props.defaultUrl&&t.props.gupList(t.props.defaultUrl),t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,c.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,c.default)(t)),t}return(0,f.default)(r,[{key:"beforeUpload",value:function(e,t){var a=(new Date).getTime();if(e.size>1048576)return u.default.error("上传文件过大（不能大于1M）"),!1;if(-1===e.type.indexOf("image"))return u.default.info("请上传图片文件"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;if("banner"==this.props.bannerType){if(e.size>=1048576)return u.default.error("上传文件过大（不能大于1M）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1}else{if(e.size>=512e3)return u.default.error("上传文件过大（不能大于500KB）"),!1;this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([])}var r=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(r))return this.setState({fileList:[]}),u.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;var n=this.props.param,o=e.name.split(".").length;this.setState({uploadParams:{Filename:n.dir+"/"+a+"."+e.name.split(".")[o-1],key:n.dir+"/"+a+"."+e.name.split(".")[o-1],policy:n.policy,OSSAccessKeyId:n.accessid,success_action_status:"200",signature:n.signature},uploadAction:n.host,cacheUrl:n.host+"/"+n.dir+"/"+a+"."+e.name.split(".")[o-1]})}},{key:"handleUploadChange",value:function(e){var t=e.file,a=e.fileList,r=this.props.param,n=this.state.uploadParams.Filename;t.name.split(".").length;if("uploading"===t.status){var o=[];o.push(a.pop()),this.props.gupList(o)}if("done"===t.status){var i=[];i.push(a.pop()),this.props.gupList(i),this.props.getUrl&&this.props.getUrl(r.host+"/"+n)}}},{key:"componentWillUnmount",value:function(){this.props=null}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,r=a.uploadParams,n=a.uploadAction,u=this.props,d=u.required,f=u.fileList,c=(u.listType,this.props.layout?this.props.layout:{labelCol:{span:6},wrapperCol:{span:14}}),p="";p=0===f.length?"newState":"editState";return y.default.createElement(v.default,null,y.default.createElement(S,(0,o.default)({},c,{extra:this.props.extra,label:this.props.name?this.props.name:"播放展示图："})," ",t("logourl",{rules:[{required:!!d,message:"请上传缩略图"}]})(y.default.createElement("div",{className:k.default.credEditLogo,"data-status":p},y.default.createElement(i.default,{headers:{"X-Requested-With":null},accept:"image",listType:"picture-card",fileList:f,action:n,data:r,beforeUpload:this.props.testCourse?this.testCourseBeforeUpload:this.beforeUpload,onChange:this.handleUploadChange,onRemove:this.onRemove,onPreview:this.onPreview},this.props.disabled?null:0===f.length?y.default.createElement("div",null,y.default.createElement(s.default,{type:"plus"}),y.default.createElement("div",{className:"ant-upload-text"},"上传图片")):y.default.createElement("div",{className:"upload-btn"},y.default.createElement(l.default,{disabled:!!e.props.usable&&e.props.usable},"更换图片")))))))}}]),r}(y.Component);var I=v.default.create()((0,w.connect)((function(e,t){return{param:e.uploadParam.param,fileList:e.uploadParam.fileList}}),(function(e){return{gupfetch:function(){return e((0,b.gupfetch)())},gupList:function(t){return e((0,b.gupList)(t))},clearUpload:function(){return e((0,b.clearUpload)())}}}))(L));t.default=I},671:function(e,t,a){e.exports={credEditLogo:"credEditLogo__1fhCq","ant-upload-list-item-info":"ant-upload-list-item-info__1Pp8a","ant-upload-select-picture-card":"ant-upload-select-picture-card__2cZDS","ant-upload-list-item-actions":"ant-upload-list-item-actions__2odMN","anticon-delete":"anticon-delete__1uwBf","anticon-eye-o":"anticon-eye-o__2631W"}}}]);