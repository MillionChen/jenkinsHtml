(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{1013:function(e,t,n){"use strict";var r=n(4),a=n(0);n(44),n(3),n(101),n(43),n(51),n(20),n(34),n(35),n(23),n(53),n(634);var o=a(n(596));n(61);var i=a(n(62)),s=a(n(29)),l=a(n(30)),u=a(n(59)),d=a(n(32)),f=a(n(33)),c=a(n(31)),p=r(n(1)),m=a(n(663)),h=a(n(76)),g=n(587);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=null,w=function(e){(0,d.default)(r,e);var t,n=(t=r,function(){var e,n=(0,c.default)(t);if(v()){var r=(0,c.default)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,f.default)(this,e)});function r(e){var t;return(0,s.default)(this,r),(t=n.call(this,e)).state={typeRight:!1,fileList:[],uploadPercent:0,uploadProgress:!1,notUpload:!0,host:"",dir:""},t.beginUpload=t.beginUpload.bind((0,u.default)(t)),t.beforeUpload=t.beforeUpload.bind((0,u.default)(t)),t.uploadProgress=t.uploadProgress.bind((0,u.default)(t)),t.completeUpload=t.completeUpload.bind((0,u.default)(t)),t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){m.default.init("selectfiles","container",this.beforeUpload,this.uploadProgress.bind(this),this.completeUpload.bind(this))}},{key:"beforeUpload",value:function(e){var t=this.props.fileLimit;if(t&&e.filter((function(e){return-1==t.indexOf(e.type.split("/")[1])})).length>0){for(var n=m.default.uploader.files.length,r=0;r<n;r++)m.default.uploader.removeFile(m.default.uploader.files[0].id);return void i.default.error("请上传正确格式的文件")}var a=[];if(this.props.multi)a=e.map((function(e,t){return{name:e.name,id:e.id,size:e.size,percent:0,suffix:"."+e.type.split("/")[1]}}));else{if(e.length>1){i.default.error("一次只能导入一个文件");n=m.default.uploader.files.length;for(var o=0;o<n;o++)m.default.uploader.removeFile(m.default.uploader.files[0].id);return void this.setState({fileList:[]})}a.push({name:e[0].name,id:e[0].id,size:e[0].size,suffix:"."+e[0].type.split("/")[1]})}this.setState({fileList:a,notUpload:!1})}},{key:"beginUpload",value:function(){var e=this;(0,h.default)({url:g.common.ossPolicy}).then((function(t){y=JSON.parse(t.data),m.default.uploadFile(y),e.setState({notUpload:!0}),0==e.state.host.length&&e.setState({host:y.host,dir:y.dir})}))}},{key:"uploadProgress",value:function(e){var t=this.state.fileList.filter((function(t){return t.id==e.id}));t[0].percent=e.percent;var n=this.state.fileList.filter((function(t){return t.id!=e.id}));this.setState({fileList:n.concat(t)})}},{key:"completeUpload",value:function(e,t,n){var r=this.props.getUrl;if(200==e.status){var a=this.state.fileList.filter((function(e){return e.id==n.id}));a[0].percent=100,a[0].ossUrl=this.state.host+"/"+this.state.dir+a[0].id+a[0].suffix;var o=this.state.fileList.filter((function(e){return e.id!=n.id})),i=this;this.setState({fileList:o.concat(a)},(function(){r(i.state.fileList),i.state.fileList.filter((function(e){return 100==e.percent})).length==i.state.fileList.length&&i.props.complete()}))}}},{key:"render",value:function(){return p.default.createElement("div",{className:"oss-uplaod"},p.default.createElement(o.default,{size:"small",style:{display:this.state.fileList.length>0?"inline":"none"},dataSource:this.state.fileList,renderItem:function(e){return p.default.createElement(o.default.Item,null,e.name," ",e.percent,"%")}}),p.default.createElement("div",{id:"container"},p.default.createElement("a",{id:"selectfiles",href:"javascript:void(0);",className:"btn"},"选择文件"),p.default.createElement("a",{disabled:this.state.notUpload,style:{marginLeft:10},id:"postfiles",href:"javascript:void(0);",onClick:this.beginUpload,className:"btn"},"开始上传")))}}]),r}(p.Component);e.exports=w},1290:function(e,t,n){},1313:function(e,t,n){"use strict";var r=n(4),a=n(0);n(51),Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeworkList=function(e){var t=s.default.getHomeworkList,n=function(e){var t={};e?(t.pageNo=e.pageindex,t.pageSize=e.pagesize,e.name&&(t.name=e.name)):(t.pageNo=1,t.pageSize=20);return t}(e);return function(e){return e({type:l.FETCHING}),(0,u.default)({url:t,data:n}).then((function(t){e({type:l.HOMEWORKLIST,data:t})}))}},t.getId=function(){var e=s.default.getId;return function(t){return(0,u.default)({url:e}).then((function(e){t({type:l.ID,data:e})}))}},t.addHomework=function(e,t){var n=s.default.addHomework;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){r({type:l.NEWHOMEWORK,data:e}),t&&t()}))}},t.upOrDown=function(e,t){var n=s.default.upOrDown,r={id:e.id,status:e.status};return function(e){return e({type:l.FETCHING}),(0,u.default)({url:n,data:r}).then((function(e){t&&t()}))}},t.getHomeworkInfo=function(e,t){var n=s.default.getHomeworkInfo,r={assignmentId:e};return function(e){return e({type:l.FETCHING}),(0,u.default)({url:n,data:r}).then((function(n){e({type:l.HOMEWORKINFO,data:n}),t&&t()}))}},t.deleteHomework=function(e,t){var n=s.default.deleteHomework,r={assignmentId:e.id};return function(e){return e({type:l.FETCHING}),(0,u.default)({url:n,data:r}).then((function(n){1e3==parseInt(n.code)?(o.default.success("删除成功"),t&&t()):(o.default.error("删除失败"),e({type:l.STOPFETCHING}))}))}},t.exportNoHomework=function(e,t){var n=s.default.exportNoHomework,r={assignmentId:e};return function(e){return(0,u.default)({url:n,data:r}).then((function(e){t&&t(e.data)}))}},t.exportReadoverResult=function(e,t){var n=s.default.exportReadoverResult;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){t&&t(e.data)}))}},t.getSingleHomeworkList=function(e){var t=s.default.getSingleHomeworkList,n=function(e){var t={};e?(t.pageNo=e.pageindex,t.pageSize=e.pagesize,e.id&&(t.assignmentId=e.id),e.status&&(t.state=e.status),e.name&&(t.name=e.name),e.department&&(t.department=e.department),e.type&&(t.type=e.type)):(t.pageNo=1,t.pageSize=20);return t}(e);return function(e){return e({type:l.FETCHING,single:!0}),(0,u.default)({url:t,data:n}).then((function(t){e({type:l.SINGLEHOMEWORKLIST,data:t})}))}},t.getSingleHomeworkInfo=function(e,t){var n=s.default.getSingleHomeworkInfo;return function(r){return(0,u.default)({url:n,data:e}).then((function(n){r({type:l.SINGLEHOMEWORKINFO,data:{single:n,readoverIndex:e.readoverIndex,page:e.page}}),t&&t()}))}},t.saveReadover=function(e,t){var n=s.default.saveReadover;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){r({type:l.SAVEREADOVER,data:e}),t&&t()}))}},t.getHomeworkDetail=function(e,t){var n=s.default.getHomeworkDetail,r={id:e};return function(e){return(0,u.default)({url:n,data:r}).then((function(t){e({type:l.HOMEWORKDETAIL,data:t})}))}},t.setHomeworkViewRange=function(e,t){var n=s.default.setHomeworkViewRange;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){r({type:l.HOMEWORKVIEWRANGE,data:e}),t&&t()}))}},t.getHomeworkViewRange=function(e,t){var n=s.default.getHomeworkViewRange,r={assignmentId:e};return function(e){return(0,u.default)({url:n,data:r}).then((function(n){e({type:l.GETHOMEWORKVIEWRANGE,data:n}),t&&t(n.data)}))}},t.setHomeworkAuditor=function(e,t){var n=s.default.setHomeworkAuditor;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){r({type:l.HOMEWORKAUDITOR,data:e}),t&&t()}))}},t.getHomeworkAuditor=function(e,t){var n=s.default.getHomeworkAuditor,r={assignmentId:e};return function(e){return(0,u.default)({url:n,data:r}).then((function(n){e({type:l.GETHOMEWORKAUDITOR,data:n}),t&&t()}))}},t.downloadHomework=function(e,t){var n=s.default.downloadHomework;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){r({type:l.DOWNLOADHOMEWORK,data:e}),t&&t(e.data)}))}},t.getHomeworkListReport=function(e,t){var n=s.default.getHomeworkListReport;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?(r({type:"REPORT_HOMEWORK_LIST",data:e}),t&&t()):o.default.error("请求失败...")}))}},t.getReportList=function(e,t){var n=s.default.getReportList;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?(r({type:"REPORT_LIST",data:e}),t&&t(e)):o.default.error("请求失败...")}))}},t.reportRemove=function(e,t){var n=s.default.reportRemove;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.homeworkUpOrDown=function(e,t){var n=s.default.homeworkUpOrDown;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.homeworkDelete=function(e,t){var n=s.default.homeworkDelete;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.getCommentList=function(e,t){var n=s.default.getCommentList;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?(r({type:"COMMENT_LIST",data:e}),t&&t()):o.default.error("请求失败...")}))}},t.commentUpOrDown=function(e,t){var n=s.default.commentUpOrDown;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.commentDelete=function(e,t){var n=s.default.commentDelete;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.commentExport=function(e,t){var n=s.default.commentExport;return function(r){return(0,u.default)({url:n,data:e}).then((function(e){"1000"==e.code?t&&t(e):o.default.error("请求失败...")}))}},t.hvr=t.saveRo=t.singleHomeworkInfo=t.newHomework=t.homeworkInfo=t.id=t.singleHomeworkList=t.homeworkDetail=t.stopFetching=t.fetching=t.homeworkList=void 0,n(61);var o=a(n(62)),i=n(233),s=(n(83),a(n(264)),n(261),a(n(1428)),a(n(1429))),l=r(n(266)),u=a(n(76)),d=(n(903),(0,i.createAction)(l.HOMEWORKLIST));t.homeworkList=d;var f=(0,i.createAction)(l.SINGLEHOMEWORKLIST);t.singleHomeworkList=f;var c=(0,i.createAction)(l.FETCHING);t.fetching=c;var p=(0,i.createAction)(l.STOPFETCHING);t.stopFetching=p;var m=(0,i.createAction)(l.HOMEWORKDETAIL);t.homeworkDetail=m;var h=(0,i.createAction)(l.ID);t.id=h;var g=(0,i.createAction)(l.NEWHOMEWORK);t.newHomework=g;var v=(0,i.createAction)(l.HOMEWORKINFO);t.homeworkInfo=v;t.singleHomeworkInfo="SINGLEHOMEWORKINFO";t.saveRo="SAVEREADOVER";t.hvr="HOMEWORKVIEWRANGE"},1345:function(e,t,n){n(1370),e.exports=self.fetch.bind(self)},1370:function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return p})),n.d(t,"Request",(function(){return k})),n.d(t,"Response",(function(){return E})),n.d(t,"DOMException",(function(){return I})),n.d(t,"fetch",(function(){return R}));var r="URLSearchParams"in self,a="Symbol"in self&&"iterator"in Symbol,o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in self,s="ArrayBuffer"in self;if(s)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=h(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=f(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},a&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(e,t){var n,r,a=(t=t||{}).body;if(e instanceof k){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},y.call(k.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var I=self.DOMException;try{new I}catch(e){(I=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),I.prototype.constructor=I}function R(e,t){return new Promise((function(n,r){var a=new k(e,t);if(a.signal&&a.signal.aborted)return r(new I("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var a="response"in i?i.response:i.responseText;n(new E(a,r))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.onabort=function(){r(new I("Aborted","AbortError"))},i.open(a.method,a.url,!0),"include"===a.credentials?i.withCredentials=!0:"omit"===a.credentials&&(i.withCredentials=!1),"responseType"in i&&o&&(i.responseType="blob"),a.headers.forEach((function(e,t){i.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&a.signal.removeEventListener("abort",s)}),i.send(void 0===a._bodyInit?null:a._bodyInit)}))}R.polyfill=!0,self.fetch||(self.fetch=R,self.Headers=p,self.Request=k,self.Response=E)},1374:function(e,t,n){e.exports={list:"list__1-6Wp",listBtn:"listBtn__21du7",toolContent:"toolContent__1MQqC",toolCont:"toolCont__1bSwb",formBtn:"formBtn__21vtN",operation:"operation__2fom2","ant-transfer":"ant-transfer__2R7b8","ant-transfer-list":"ant-transfer-list__W5xM5"}},1428:function(e,t,n){"use strict";var r=n(0);n(44),n(13),n(35),n(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=i.default.load("token"),u="&companyCode=".concat(s,"&siteCode=").concat(l),d="?companyCode=".concat(s,"&siteCode=").concat(l);n=r?{method:t.type||"GET",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:r}}:{method:t.type||"GET",headers:{"Content-Type":"application/json; charset=UTF-8"}};var f=Object.assign({},n,t);if(f.type){if(f.data){var c=function e(t,n,r){if(null==t)return"";var o="",i=(0,a.default)(t);if("string"==i||"number"==i||"boolean"==i)o+="&".concat(n,"=").concat(null==r||r?encodeURIComponent(t):t);else for(var s in t){var l=null==n?s:n+"[".concat(s,"]");o+=e(t[s],l,r)}return o}(f.data);switch(c=c.substr(1,c.length),f.method.toLowerCase()){case"post":e+=d,f.body=JSON.stringify(f.data);break;case"get":e="".concat(e,"?").concat(c).concat(u),delete f.body}}else e="".concat(e,"?").concat(u);f.data&&delete f.data,f.type&&delete f.type}return(0,o.default)(e,f).then((function(e){return e.json()}))};var a=r(n(110)),o=r(n(1345)),i=r(n(118)),s=location.pathname.split("/")[1],l=location.pathname.split("/")[2]},1429:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63)),o={getHomeworkList:"GET ".concat(a.default.webManage,"/assignment/list"),getId:"GET ".concat(a.default.webManage,"/assignment/setid"),addHomework:"POST ".concat(a.default.webManage,"/assignment/save"),upOrDown:"POST ".concat(a.default.webManage,"/assignment/status/update"),getHomeworkInfo:"GET ".concat(a.default.webManage,"/assignment/content/find"),deleteHomework:"POST ".concat(a.default.webManage,"/assignment/delete"),exportNoHomework:"GET ".concat(a.default.webManage,"/assignment/export/unsubmit/get"),exportReadoverResult:"POST ".concat(a.default.webManage,"/assignment/export/suggetion/get"),getSingleHomeworkList:"GET ".concat(a.default.webManage,"/assignment/answer/list"),getSingleHomeworkInfo:"POST ".concat(a.default.webManage,"/assignment/marking/select"),saveReadover:"POST ".concat(a.default.webManage,"/assignment/marking/save"),getHomeworkDetail:"GET ".concat(a.default.webManage,"/assignment/api/find"),setHomeworkViewRange:"POST ".concat(a.default.webManage,"/assignment/student/add"),getHomeworkViewRange:"GET ".concat(a.default.webManage,"/assignment/student/relation"),setHomeworkAuditor:"POST ".concat(a.default.webManage,"/assignment/set/auditor"),getHomeworkAuditor:"GET ".concat(a.default.webManage,"/assignment/get/auditor"),downloadHomework:"POST ".concat(a.default.webManage,"/assignment/export/downloadAnswer/get"),getReportList:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/tipoff/page"),getHomeworkListReport:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/tipoff/answer/page"),reportRemove:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/tipoff/remove"),homeworkUpOrDown:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/answer/down"),homeworkDelete:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/answer/delete"),getCommentList:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/comment/page"),commentUpOrDown:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/comment/audit"),commentDelete:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/comment/delete"),commentExport:"GET ".concat(a.default.webManage,"/assignment/exerciseBook/comment/export")};t.default=o},1430:function(e,t,n){"use strict";var r=n(4),a=n(0);n(3),n(101),n(43),n(51),n(20),n(86),n(34),n(35),n(23),n(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(2));n(580);var i=a(n(571));n(99);var s=a(n(100));n(616);var l=a(n(617));n(224);var u=a(n(225));n(564);var d=a(n(563));n(140);var f=a(n(535)),c=a(n(98));n(61);var p=a(n(62)),m=a(n(29)),h=a(n(30)),g=a(n(59)),v=a(n(32)),y=a(n(33)),w=a(n(31));n(537);var k=a(n(536));n(540);var b=a(n(539));n(554);var E=a(n(550)),S=r(n(1)),I=a(n(1013));n(1374);var R=n(1313),x=n(52),L=n(561);function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=E.default.Option,O=b.default.Item,C=k.default.TextArea,T={labelCol:{span:4},wrapperCol:{span:20}},A={labelCol:{span:0},wrapperCol:{span:24}};var N=function(e){(0,v.default)(r,e);var t,n=(t=r,function(){var e,n=(0,w.default)(t);if(H()){var r=(0,w.default)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,y.default)(this,e)});function r(e){var t;return(0,m.default)(this,r),(t=n.call(this,e)).state={currentId:"",importVisible:!1,done:!1,fileList:[],uploadFile:"",uploadFileUrl:"",listAssignmentAnswerFile:[],preview:!1,url:"",uploadAction:"",uploadParams:{},responseList:[]},t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,g.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,g.default)(t)),t.closeImport=t.closeImport.bind((0,g.default)(t)),t.importFile=t.importFile.bind((0,g.default)(t)),t.getUrl=t.getUrl.bind((0,g.default)(t)),t.readoverSubmit=t.readoverSubmit.bind((0,g.default)(t)),t.readoverNext=t.readoverNext.bind((0,g.default)(t)),t}return(0,h.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.info;void 0!==e&&e.listAssignmentAnswerBackFile&&this.setState({fileList:e.listAssignmentAnswerBackFile.map((function(e){return{name:e.fileName,fileUrl:e.fileUrl,uid:e.id,size:e.size}})),responseList:e.listAssignmentAnswerBackFile,done:!0})}},{key:"getlistGrade",value:function(e){return e.map((function(e,t){return S.default.createElement(U,{key:t,value:e.id},e.name)}))}},{key:"getUrl",value:function(e){console.log(1111,e),this.setState({fileList:e})}},{key:"readoverNext",value:function(e,t){var n=this,r=this.props,a=r.getSingleHomeworkInfo,o=(r.getSingleHomeworkList,r.currtentHomeworkId,r.departmentKeyword),i=r.readoverStatus,s=r.usernameKeyword,l=r.sortValue,u=(r.page,r.pageSize),d=(r.hasMore,r.readoverIndex),f=this;this.state.done?this.props.form.validateFields((function(r,c){if(!r){console.log("Received values of form: ",c);var p={answerId:f.state.currentId?f.state.currentId:f.props.id,comment:c.comment,listFeedBackFiles:n.state.responseList};p.score=c.grade,f.props.saveReadover(p,(function(){n.props.form.resetFields();var r=0;r="1"===i?d:"next"===t?d+1:d-1,a({state:i,name:s,department:o,type:l,assignmentId:n.props.whyid,assignmentAnswerId:e,readoverIndex:r,page:"next"===t?Math.floor((d+1)/u+1):Math.floor((d-1)/u+1)},(function(t){console.log(t),f.setState({currentId:e,fileList:[]},(function(){var e=f.props.info;f.setState({fileList:e.listAssignmentAnswerBackFile.map((function(e){return{name:e.fileName,fileUrl:e.fileUrl,uid:e.id,size:e.size}})),responseList:e.listAssignmentAnswerBackFile}),f.props.success(1)}))}))}))}})):p.default.error("上传资源过大，上传中...")}},{key:"importFile",value:function(){this.setState({importVisible:!0,fileList:[]})}},{key:"closeImport",value:function(){this.setState({importVisible:!1})}},{key:"readoverSubmit",value:function(e){var t=this;e.preventDefault();var n=this;this.state.done?this.props.form.validateFields((function(e,r){if(!e){console.log("Received values of form: ",r);var a={answerId:n.state.currentId?n.state.currentId:n.props.id,comment:r.comment,listFeedBackFiles:t.state.responseList};a.score=r.grade,n.props.saveReadover(a,(function(){console.log("log"),n.props.success()}))}})):p.default.error("上传资源过大，上传中...")}},{key:"closepreview",value:function(){this.setState({preview:!1})}},{key:"preview",value:function(e){this.setState({preview:!0,url:e.fileUrl})}},{key:"beforeUpload",value:function(e,t){var n=this.props.param,r=this;return new Promise((function(t,a){e.size>10485760&&-1!=e.type.indexOf("image")?(p.default.error("请上传小于10M的图片"),a()):e.size>10485760&&-1!=e.type.indexOf("audio")?(p.default.error("请上传小于10M的音频"),a()):e.size>52428800&&-1!=e.type.indexOf("video")?(p.default.error("请上传小于50M的视频"),a()):null!==n?(r.setState({uploadParams:{Filename:n.dir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],key:n.dir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],policy:n.policy,OSSAccessKeyId:n.accessid,success_action_status:"200",signature:n.signature},uploadAction:n.host}),r.setState({hostAndDir:n.host+"/"+n.dir}),t(e)):a()}))}},{key:"handleUploadChange",value:function(e){var t=this,n=e.file,r=e.fileList;if(("image/jpeg"==n.type||"image/jpg"==n.type||"image/png"==n.type)&&n.size>20971520)p.default.error("图片文件不能超过20M");else if("video/mp4"==n.type&&n.size>209715200)p.default.error("视频文件不能超过200M");else{var a=this.state.fileList;"done"==n.status&&(a.push(r.pop()),this.setState({done:!0,fileList:a.map((function(e){return{uid:e.uid,name:e.name,size:e.size,fileUrl:e.fileUrl}}))}),this.setState({responseList:a.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))})),"uploading"==n.status&&this.setState({done:!1}),"removed"==n.status?(a=a.filter((function(e){return e.uid!=n.uid})),this.setState({fileList:a,responseList:a.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))})):(a.push(r.pop()),this.setState({fileList:a.map((function(e){return{uid:e.uid,name:e.name,size:e.size,fileUrl:e.fileUrl}}))}),this.setState({responseList:a.map((function(e){return{fileName:e.name,fileUrl:e.fileUrl?e.fileUrl:t.state.hostAndDir+"/"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1],size:e.size+"",suffix:"."+e.name.split(".")[e.name.split(".").length-1]}}))}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.info,r=t.type,a=t.mode,p=(t.usernameKeyword,this.props.form.getFieldDecorator);1!=r&&this.getlistGrade(this.props.info.grades);var m="";return m=0===this.state.fileList.length?"newState":"editState","look"==a?S.default.createElement("div",null,S.default.createElement(O,(0,c.default)({label:"作业清单"},T),p("homelist",{initialValue:this.state.homelist})(S.default.createElement("div",{id:"homelist"},S.default.createElement("p",null,n.content)))),S.default.createElement(b.default,{layout:"horizontal",style:{marginTop:15},onSubmit:this.readoverSubmit},S.default.createElement(O,(0,c.default)({label:"作业附件"},T),p("no",{})(S.default.createElement("div",null,S.default.createElement("p",null,"(图片/音频/视频格式的文件可在线预览，其余附件需下载查看)"),n.listAssignmentAnswerFile&&n.listAssignmentAnswerFile.map((function(e,t){return S.default.createElement("div",{key:t},S.default.createElement("a",{target:"_blank",href:e.fileUrl,download:e.fileName,style:{marginRight:"10px"}},e.fileName))}))))),S.default.createElement(O,(0,c.default)({label:""},A),S.default.createElement("div",{style:{width:"100%",textAlign:"center"}},S.default.createElement(f.default,{style:{marginRight:15},onClick:this.props.cancelModal},"取消"),S.default.createElement(d.default,{title:"确定执行此操作？",onConfirm:this.props.toggleShelf},S.default.createElement(f.default,{type:"primary"},"下架"))))),S.default.createElement(u.default,{onCancel:function(){return e.closepreview()},visible:this.state.preview,footer:null,title:"预览文件",destroyOnClose:1},S.default.createElement("div",{id:"dpreview"},this.state.url&&"mp4"===this.state.url.substring(this.state.url.length-3)||this.state.url&&"MP4"===this.state.url.substring(this.state.url.length-3)?S.default.createElement("video",{src:this.state.url,controls:"controls",preload:!0}):S.default.createElement("img",{src:this.state.url})))):S.default.createElement("div",null,S.default.createElement("h3",null,"批阅作业"),S.default.createElement(O,(0,c.default)({label:"作业清单"},T),p("homelist",{initialValue:this.state.homelist})(S.default.createElement("div",{id:"homelist"},S.default.createElement("p",null,n.content)))),S.default.createElement(b.default,{layout:"horizontal",style:{marginTop:15},onSubmit:this.readoverSubmit},S.default.createElement(O,(0,c.default)({label:"作业附件"},T),p("no",{})(S.default.createElement("div",null,S.default.createElement("p",null,"(图片/音频/视频格式的文件可在线预览，其余附件需下载查看)"),n.listAssignmentAnswerFile&&n.listAssignmentAnswerFile.map((function(e,t){return S.default.createElement("div",{key:t},S.default.createElement("a",{target:"_blank",href:e.fileUrl,download:e.fileName,style:{marginRight:"10px"}},e.fileName))}))))),S.default.createElement(O,(0,c.default)({label:"成绩"},T),p("grade",{rules:[{required:!0,message:"请输入成绩"}],initialValue:n.score})(S.default.createElement(l.default,{name:"grade",style:{width:"150px"},min:0,max:100,placeholder:"请输入作业分数"})),S.default.createElement("span",null,"满分100",0==n.passScore?null:"合格分".concat(n.passScore))),S.default.createElement(O,(0,c.default)({label:"评语"},T),p("comment",{initialValue:n.suggestion})(S.default.createElement(C,{placeholder:"请输入作业评语"}))),S.default.createElement(O,(0,c.default)({label:"反馈文件"},T),p("file")(S.default.createElement("div",{className:"cred-edit-logo","data-status":m},S.default.createElement(i.default,{headers:{"X-Requested-With":null},accept:"image/jpg,image/jpeg,image/png,video/mp4,image/gif,audio/mp3",fileList:this.state.fileList,action:this.state.uploadAction,data:this.state.uploadParams,beforeUpload:this.beforeUpload,onChange:this.handleUploadChange},S.default.createElement(f.default,null,S.default.createElement(s.default,{type:"upload"})," 上传图片/音/视频")))),S.default.createElement("span",null,"请上传资源附件（附件格式：mp4，mp3，png，jpg，jpeg，gif）")),S.default.createElement(O,(0,c.default)({label:""},A),S.default.createElement(f.default,{type:"primary",style:{display:n.prevAnswerId?"inline":"none",marginLeft:""==n.nextAnswerId?120:30},onClick:function(){return e.readoverNext(n.prevAnswerId,"pre")}},"批阅上一份"),S.default.createElement(f.default,{type:"primary",style:{marginLeft:""==n.nextAnswerId&&""==n.prevAnswerId?220:100},htmlType:"submit"},"完成批阅"),S.default.createElement(f.default,{type:"primary",style:(0,o.default)({marginLeft:100,display:n.nextAnswerId?"inline":"none"},"marginLeft",""==n.prevAnswerId?150:100),onClick:function(){return e.readoverNext(n.nextAnswerId,"next")}},"批阅下一份"))),S.default.createElement(u.default,{onCancel:this.closeImport,visible:this.state.importVisible,footer:null,title:"上传反馈文件",destroyOnClose:1},S.default.createElement(I.default,{getUrl:this.getUrl,fileLimit:["png","jpeg","jpg","mp4"],multi:"on",complete:this.closeImport})),S.default.createElement(u.default,{onCancel:function(){return e.closepreview()},visible:this.state.preview,footer:null,title:"预览文件",destroyOnClose:1},S.default.createElement("div",{id:"dpreview"},this.state.url&&"mp4"===this.state.url.substring(this.state.url.length-3)||this.state.url&&"MP4"===this.state.url.substring(this.state.url.length-3)?S.default.createElement("video",{src:this.state.url,controls:"controls",preload:!0}):S.default.createElement("img",{src:this.state.url}))))}}]),r}(S.Component),_=b.default.create()(N),D=(0,x.connect)((function(e,t){return{singleHomeworkInfo:e.homework.singleHomeworkInfo,param:e.uploadParam.param,page:e.homework.page,pageSize:e.homework.pageSize,hasMore:e.homework.hasMore,readoverIndex:e.homework.readoverIndex}}),(function(e){return{getSingleHomeworkInfo:function(t,n){return e((0,R.getSingleHomeworkInfo)(t,n))},gupfetch:function(){return e((0,L.gupfetch)())}}}))(_);t.default=D},2112:function(e,t,n){"use strict";var r=n(4),a=n(0);n(620),n(20),n(34),n(35),n(23),n(229),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(224);var o=a(n(225));n(549);var i=a(n(544));n(140);var s=a(n(535));n(61);var l=a(n(62));n(564);var u=a(n(563));n(99);var d=a(n(100)),f=a(n(29)),c=a(n(30)),p=a(n(59)),m=a(n(32)),h=a(n(33)),g=a(n(31)),v=a(n(2));n(556);var y=a(n(553));n(537);var w=a(n(536));n(540);var k=a(n(539));n(575);var b=a(n(568));n(554);var E=a(n(550)),S=r(n(1)),I=a(n(226)),R=a(n(1430)),x=a(n(2113)),L=a(n(141)),H=a(n(1374)),U=a(n(223)),O=n(52),C=n(1313);function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=E.default.Option;b.default.TabPane,k.default.Item,w.default.TextArea,y.default.Group;var N=function(e){(0,m.default)(r,e);var t,n=(t=r,function(){var e,n=(0,g.default)(t);if(T()){var r=(0,g.default)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,h.default)(this,e)});function r(e){var t;return(0,f.default)(this,r),t=n.call(this,e),(0,v.default)((0,p.default)(t),"reGetSingleHomeworkList",(function(){var e=t.props.getSingleHomeworkList,n=t.state,r=n.currtentHomeworkId,a=n.departmentKeyword,o=n.readoverStatus,i=n.usernameKeyword,s=n.singlePagesize;e({id:r,status:o,name:i,department:a,type:n.sortValue,pageindex:1,pagesize:s})})),(0,v.default)((0,p.default)(t),"homeworkUpOrDown",(function(e){t.props.homeworkUpOrDown({answerId:e.id,isDown:0==e.down?1:0},(function(){t.reGetSingleHomeworkList()}))})),(0,v.default)((0,p.default)(t),"homeworkDelete",(function(e){t.props.homeworkDelete({answerId:e.id},(function(){t.reGetSingleHomeworkList()}))})),self=(0,p.default)(t),t.state={whyid:"",singlePagesize:20,homeworkType:1,sortValue:1,currtentHomeworkId:"",currentReadoverId:"",searchHomework:"",departmentKeyword:"",usernameKeyword:"",readoverStatus:"",readoverVisible:!1,singleReadoverVisible:!1,commentVisible:!1,selectedRowKeys:[],selectedStudent:[],submitStudent:"",listGrade:[],formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},record:{},homeworkColumns:[{title:"用户名",key:"accountName",dataIndex:"accountName"},{title:"姓名",key:"realName",dataIndex:"realName",ellipsis:!0},{title:"作业提交时间",key:"createTime",dataIndex:"createTime",render:function(e,t){return S.default.createElement("span",null,(0,U.default)(e).format("YYYY-MM-DD HH:mm"))}},{title:"作业批阅结果",key:"result",dataIndex:"result",render:function(e,n){return S.default.createElement("div",null,S.default.createElement("p",{style:{display:""!==n.score&&1==t.state.homeworkType?"inline":"none"}},n.score,"分"),S.default.createElement("p",{style:{display:n.gradeName&&2==t.state.homeworkType?"inline":"none"}},n.gradeName))}},{title:"批阅状态",key:"status",dataIndex:"status",render:function(e,t){return S.default.createElement("span",null,1==e?"待评阅":"已阅")}},{title:"点赞数",key:"thumbupTimes",dataIndex:"thumbupTimes",render:function(e,t){return S.default.createElement("span",null,e," 个 ",S.default.createElement(d.default,{type:"like"}))}},{title:"评论数",key:"commentTimes",dataIndex:"commentTimes"},{title:"作业状态",key:"down",dataIndex:"down",render:function(e,t){return S.default.createElement("span",null,0==t.down?"已上架":"已下架"," ")}},{title:"操作",key:"action",dataIndex:"action",width:300,render:function(e,n,r){return S.default.createElement("div",{className:"operation"},S.default.createElement(u.default,{title:"确定执行此操作？",onConfirm:function(){return t.homeworkUpOrDown(n)}},S.default.createElement("a",{href:"javascript:void(0)",style:{marginRight:10}},0==n.down?"下架":"上架")),S.default.createElement("a",{href:"javascript:void(0)",style:{marginRight:10},onClick:function(){return self.downloadHomework(n)}},"下载作业"),0!==n.down?S.default.createElement(u.default,{title:"是否删除？",onConfirm:function(){return t.homeworkDelete(n)}},S.default.createElement("a",{href:"javascript:void(0)",style:{marginRight:10}},"删除")):S.default.createElement("span",{style:{color:"gray",marginRight:"10px"}},"删除"),S.default.createElement("a",{href:"javascript:void(0)",style:{margin:"0 10px"},onClick:function(){return self.singleReadover(n,r)}},"批阅"),S.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.showCommentModal(n)}},"评论管理"))}}]},t.onBatchExportHomework=t.batchExportHomework.bind((0,p.default)(t)),t.close=t.close.bind((0,p.default)(t)),t.search=t.search.bind((0,p.default)(t)),t.onSearch=t.onSearch.bind((0,p.default)(t)),t.onOnSelectChange=t.onSelectChange.bind((0,p.default)(t)),t.homeworkPageChange=t.homeworkPageChange.bind((0,p.default)(t)),t.getDepartment=t.getDepartment.bind((0,p.default)(t)),t.getUsername=t.getUsername.bind((0,p.default)(t)),t.getReadoverState=t.getReadoverState.bind((0,p.default)(t)),t.setSort=t.setSort.bind((0,p.default)(t)),t.exportNoHomework=t.exportNoHomework.bind((0,p.default)(t)),t.exportReadoverResult=t.exportReadoverResult.bind((0,p.default)(t)),t.readoverSuccess=t.readoverSuccess.bind((0,p.default)(t)),t.downloadHomework=t.downloadHomework.bind((0,p.default)(t)),t.showCommentModal=t.showCommentModal.bind((0,p.default)(t)),t.closeCommentModal=t.closeCommentModal.bind((0,p.default)(t)),t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getSingleHomeworkList,n=e.getHomeworkInfo,r=this;n(L.default.getUrlParam(location.search,"id"),(function(){console.log(132123123123,r.props.homeworkInfo),r.setState({homeworkType:r.props.homeworkInfo.type,listGrade:r.props.homeworkInfo.listGrade})})),t({id:L.default.getUrlParam(location.search,"id"),pageindex:1,pagesize:this.state.singlePagesize}),this.setState({currtentHomeworkId:L.default.getUrlParam(location.search,"id")})}},{key:"onSelectChange",value:function(e,t){this.setState({selectedRowKeys:e,selectedStudent:e})}},{key:"getDepartment",value:function(e){var t=e.target.value;t.length>20?l.default.info("关键词长度最大值为20"):this.setState({departmentKeyword:t})}},{key:"getUsername",value:function(e){var t=e.target.value;t.length>20?l.default.info("关键词长度最大值为20"):this.setState({usernameKeyword:t})}},{key:"getReadoverState",value:function(e){this.setState({readoverStatus:e})}},{key:"setSort",value:function(e){this.setState({sortValue:Number(e)})}},{key:"readoverSuccess",value:function(e){1==e||this.close("singleReadover"),this.search()}},{key:"search",value:function(){var e=this.props,t=e.getSingleHomeworkList,n=e.page,r=e.pageSize,a=this.state,o=a.currtentHomeworkId,i=a.departmentKeyword,s=a.readoverStatus,l=a.usernameKeyword;a.singlePagesize;t({id:o,status:s,name:l,department:i,type:a.sortValue,pageindex:n,pagesize:r})}},{key:"onSearch",value:function(){var e=this.props,t=e.getSingleHomeworkList,n=e.pageSize,r=this.state,a=r.currtentHomeworkId,o=r.departmentKeyword,i=r.readoverStatus,s=r.usernameKeyword;r.singlePagesize;t({id:a,status:i,name:s,department:o,type:r.sortValue,pageindex:1,pagesize:n})}},{key:"close",value:function(e){switch(e){case"singleReadover":this.setState({singleReadoverVisible:!1})}}},{key:"exportNoHomework",value:function(){this.props.exportNoHomework(this.state.currtentHomeworkId,(function(e){l.default.success(e)}))}},{key:"exportReadoverResult",value:function(){var e=this.state,t=e.selectedRowKeys,n=e.currtentHomeworkId,r=this;return t.length>0?void this.props.exportReadoverResult({assignmentId:n,answerIds:t},(function(e){l.default.success(e)}),(function(){r.setState({selectedRowKeys:[],selectedStudent:[]})})):void l.default.warning("请选择要导出的用户")}},{key:"singleReadover",value:function(e,t){var n=this.props,r=(n.getSingleHomeworkList,n.getSingleHomeworkInfo),a=n.page,o=n.pageSize,i=this.state,s=(i.currtentHomeworkId,i.departmentKeyword),l=i.readoverStatus,u=i.usernameKeyword,d=(i.singlePagesize,i.sortValue),f=this;this.setState({whyid:this.state.currtentHomeworkId}),r({state:l,name:u,department:s,type:d,assignmentId:this.state.currtentHomeworkId,assignmentAnswerId:e.id,readoverIndex:1===a?t:(a-1)*o+t,page:a},(function(){f.setState({singleReadoverVisible:!0,currentReadoverId:e.id,submitStudent:e.realName})}))}},{key:"homeworkPageChange",value:function(e,t){var n=this.props.getSingleHomeworkList,r=this.state,a=r.currtentHomeworkId,o=r.departmentKeyword;n({id:a,status:r.readoverStatus,name:r.usernameKeyword,department:o,type:r.sortValue,pageindex:e,pagesize:t}),t!=this.state.singlePagesize&&this.setState({singlePagesize:t})}},{key:"downloadHomework",value:function(e){this.props.downloadHomework({assignmentId:this.state.currtentHomeworkId,answerIds:[e.id]},(function(e){l.default.success(e)}))}},{key:"readoverHomework",value:function(e){}},{key:"batchExportHomework",value:function(){var e=this.state,t=e.currtentHomeworkId,n=e.selectedStudent,r=this;return n.length>0?void this.props.downloadHomework({assignmentId:t,answerIds:n},(function(e){l.default.success(e),r.setState({selectedRowKeys:[],selectedStudent:[]})})):void l.default.warning("请选择要下载作业的用户")}},{key:"showCommentModal",value:function(e){this.setState({commentVisible:!0,record:e})}},{key:"closeCommentModal",value:function(){this.setState({commentVisible:!1})}},{key:"render",value:function(){var e=this;console.log("props==",this.props),console.log("state==",this.state);var t=this.state,n=(t.currtentHomeworkId,t.departmentKeyword,t.readoverStatus,t.usernameKeyword,t.sortValue,this.props),r=n.singleFetching,a=n.singleHomeworkList,l=n.singleHomeworkTotal,u=(n.homeworkInfo,n.pageSize),d=n.page,f=L.default.paginationConfig(this.homeworkPageChange);a.length>0&&(f.current=d,f.pageSize=u,f.total=l,f.showTotal=function(e){return"总共：".concat(e," ")});var c=this.state,p=c.selectedRowKeys,m=c.record,h={selectedRowKeys:p,onChange:this.onOnSelectChange};return S.default.createElement("div",{className:H.default.list},S.default.createElement(I.default,{title:"作业管理"}),S.default.createElement("div",{style:{lineHeight:"40px"}},S.default.createElement(w.default,{addonBefore:"部门",value:this.state.departmentKeyword,placeholder:"部门关键字",style:{width:200,marginRight:10,marginTop:4},onChange:this.getDepartment}),S.default.createElement(w.default,{addonBefore:"用户名",value:this.state.usernameKeyword,placeholder:"请输入用户名，姓名，标签",style:{width:200,marginRight:10,marginTop:4},onChange:this.getUsername}),S.default.createElement(E.default,{placeholder:"批阅状态",style:{width:120,marginRight:10},onChange:this.getReadoverState},S.default.createElement(A,{value:""},"全部"),S.default.createElement(A,{value:"1"},"待评阅"),S.default.createElement(A,{value:"2"},"已阅")),S.default.createElement(E.default,{placeholder:"排序",defaultValue:"1",style:{width:120,marginRight:10},onChange:this.setSort},S.default.createElement(A,{value:"1"},"提交时间"),S.default.createElement(A,{value:"2"},"用户名")),S.default.createElement(s.default,{type:"primary",onClick:this.onSearch},"查询"),S.default.createElement(s.default,{type:"primary",className:H.default.formBtn,onClick:this.exportNoHomework},"导出未提交作业名单"),S.default.createElement(s.default,{type:"primary",className:H.default.formBtn,onClick:this.onBatchExportHomework},"批量下载作业"),S.default.createElement(s.default,{type:"primary",className:H.default.formBtn,onClick:this.exportReadoverResult},"导出作业批阅结果")),S.default.createElement(i.default,{rowKey:function(e){return e.id},rowSelection:h,loading:r,style:{marginTop:15},columns:this.state.homeworkColumns,dataSource:a,pagination:f}),S.default.createElement(o.default,{visible:this.state.singleReadoverVisible,title:this.props.singleHomeworkInfo.realName,onCancel:function(){return e.close("singleReadover")},footer:null,width:600,destroyOnClose:1},S.default.createElement(R.default,{currtentHomeworkId:!0,departmentKeyword:this.state.departmentKeyword,readoverStatus:this.state.readoverStatus,usernameKeyword:this.state.usernameKeyword,sortValue:this.state.sortValue,type:this.state.homeworkType,id:this.state.currentReadoverId,listGrade:this.state.listGrade,info:this.props.singleHomeworkInfo,saveReadover:this.props.saveReadover,success:this.readoverSuccess,whyid:this.state.whyid})),S.default.createElement(o.default,{visible:this.state.commentVisible,title:m.realName+"的作业",footer:null,destroyOnClose:1,width:1e3,onCancel:this.closeCommentModal},S.default.createElement(x.default,{getSingleHomeworkList:this.props.getSingleHomeworkList,homeworkId:this.state.currtentHomeworkId,record:m})))}}]),r}(S.Component),_=k.default.create()(N),D=(0,O.connect)((function(e,t){var n=e.homework,r=n.page,a=n.pageSize,o=n.hasMore,i=n.answerIds,s=n.singleHomeworkList,l=n.readoverIndex,u=e.homework.singleHomeworkInfo;if(i&&i.length>1){var d=l,f=i[d+1]?i[d+1]:null,c=i[d-1]?i[d-1]:null;(u=e.homework.singleHomeworkInfo).nextAnswerId=f,u.prevAnswerId=c}return{singleFetching:e.homework.singleFetching,singleHomeworkList:s,singleHomeworkTotal:e.homework.singleHomeworkTotal,homeworkInfo:e.homework.homeworkInfo,singleHomeworkInfo:u,commentList:e.homework.commentList,page:r,pageSize:a,hasMore:o}}),(function(e){return{getSingleHomeworkList:function(t){return e((0,C.getSingleHomeworkList)(t))},exportNoHomework:function(t,n){return e((0,C.exportNoHomework)(t,n))},exportReadoverResult:function(t,n){return e((0,C.exportReadoverResult)(t,n))},getHomeworkInfo:function(t,n){return e((0,C.getHomeworkInfo)(t,n))},getSingleHomeworkInfo:function(t,n){return e((0,C.getSingleHomeworkInfo)(t,n))},saveReadover:function(t,n){return e((0,C.saveReadover)(t,n))},downloadHomework:function(t,n){return e((0,C.downloadHomework)(t,n))},homeworkUpOrDown:function(t,n){return e((0,C.homeworkUpOrDown)(t,n))},homeworkDelete:function(t,n){return e((0,C.homeworkDelete)(t,n))},getCommentList:function(t,n){return e((0,C.getCommentList)(t,n))}}}))(_);t.default=D},2113:function(e,t,n){"use strict";var r=n(4),a=n(0);n(20),n(34),n(23),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(549);var o=a(n(544));n(140);var i=a(n(535));n(564);var s=a(n(563));n(61);var l=a(n(62)),u=a(n(29)),d=a(n(30)),f=a(n(59)),c=a(n(32)),p=a(n(33)),m=a(n(31)),h=a(n(2)),g=r(n(1)),v=a(n(223)),y=n(1313),w=n(52);function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){(0,c.default)(r,e);var t,n=(t=r,function(){var e,n=(0,m.default)(t);if(k()){var r=(0,m.default)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,p.default)(this,e)});function r(e){var t;return(0,u.default)(this,r),t=n.call(this,e),(0,h.default)((0,f.default)(t),"reGetCommentList",(function(e,n){var r=t.props.record,a=t.state,o=a.pageNo,i=a.pageSize,s=(0,f.default)(t),l={assignmentAnswerId:r.id,pageNo:o,pageSize:i};"pageChange"==e&&(l.pageNo=n,t.setState({pageNo:n})),"pageSizeChange"==e&&(l.pageNo=1,l.pageSize=n,t.setState({pageNo:1,pageSize:n})),console.log("param===",l),t.props.getCommentList(l,(function(){var e=s.props.commentList.data;if(e.length>0)for(var t=0;t<e.length;t++)e[t].No=t+1;s.setState({commentVisible:!0,record:r,commentList:e,pageTotal:s.props.commentList.page.pageTotal})}))})),(0,h.default)((0,f.default)(t),"pageChange",(function(e,n){t.reGetCommentList("pageChange",e)})),(0,h.default)((0,f.default)(t),"pageSizeChange",(function(e,n){t.reGetCommentList("pageSizeChange",n)})),(0,h.default)((0,f.default)(t),"commentUpOrDown",(function(e){t.props.commentUpOrDown({commentId:e.commentId,auditStatus:0==e.auditStatus?1:0},(function(){t.reGetCommentList()}))})),(0,h.default)((0,f.default)(t),"commentDelete",(function(e){t.props.commentDelete({commentId:e},(function(){l.default.success("评论删除成功"),t.reGetCommentList(),t.props.getSingleHomeworkList({id:t.props.homeworkId,pageindex:1,pagesize:10})}))})),(0,h.default)((0,f.default)(t),"commentExport",(function(e){t.props.commentExport({answerId:e},(function(e){l.default.success("任务编号：导出评论信息-"+e.data)}))})),t.state={pageNo:1,pageSize:20,pageTotal:0,record:{},commentList:[],homeworkCommentColumns:[{title:"序号",key:"No",dataIndex:"No",ellipsis:!0},{title:"评论人",key:"manageCommentator",dataIndex:"manageCommentator",ellipsis:!0},{title:"姓名",key:"manageCommentatorFullName",dataIndex:"manageCommentatorFullName",ellipsis:!0},{title:"评论对象",key:"parentCreateByName",dataIndex:"parentCreateByName",ellipsis:!0,render:function(e,t){return g.default.createElement("span",null,e.length>0?e:"--")}},{title:"评论内容",key:"content",dataIndex:"content",ellipsis:!0,render:function(e,t){return g.default.createElement("span",{title:e,style:{width:"150px",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"pointer"}},e)}},{title:"评论时间",key:"createTime",dataIndex:"createTime",ellipsis:!0,render:function(e,t){return g.default.createElement("span",null,(0,v.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"状态",key:"auditStatus",dataIndex:"auditStatus",ellipsis:!0,render:function(e,t){return g.default.createElement("span",null,0==e?"已上架":"已下架")}},{title:"操作",key:"action",dataIndex:"action",width:"80px",render:function(e,n){return g.default.createElement("div",{className:"operation"},g.default.createElement(s.default,{title:"确定执行此操作？",onConfirm:function(){return t.commentUpOrDown(n)}},g.default.createElement("a",{href:"javascript:void(0)",style:{marginRight:16}},0==n.auditStatus?"下架":"上架")),g.default.createElement(s.default,{title:"确定删除？",onConfirm:function(){return t.commentDelete(n.commentId)}},g.default.createElement("a",{href:"javascript:void(0)"},"删除")))}}]},t}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.reGetCommentList()}},{key:"render",value:function(){var e=this,t=this.state.commentList;return console.log("props==",this.props),console.log("state==",this.state),g.default.createElement("div",null,g.default.createElement("div",{style:{textAlign:"right",paddingBottom:10}},g.default.createElement(s.default,{title:"确认下载？",onConfirm:function(){return e.commentExport(e.state.record.id)}},g.default.createElement(i.default,{type:"primary"},"下载评论信息"))),g.default.createElement(o.default,{rowKey:function(e){return e.commentId},dataSource:t,columns:this.state.homeworkCommentColumns,pagination:{total:this.state.pageTotal,showTotal:function(){return"共计 "+e.state.pageTotal+"条"},pageSize:this.state.pageSize,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],current:this.state.pageNo,onChange:this.pageChange,onShowSizeChange:this.pageSizeChange,showQuickJumper:!0}}))}}]),r}(g.Component),E=(0,w.connect)((function(e,t){return{commentList:e.homework.commentList}}),(function(e){return{commentUpOrDown:function(t,n){return e((0,y.commentUpOrDown)(t,n))},getCommentList:function(t,n){return e((0,y.getCommentList)(t,n))},commentDelete:function(t,n){return e((0,y.commentDelete)(t,n))},commentExport:function(t,n){return e((0,y.commentExport)(t,n))}}}))(b);t.default=E},535:function(e,t,n){e.exports=n(11)(70)},536:function(e,t,n){e.exports=n(11)(166)},537:function(e,t,n){"use strict";n.r(t);n(26),n(586),n(140)},539:function(e,t,n){e.exports=n(11)(821)},544:function(e,t,n){e.exports=n(11)(846)},550:function(e,t,n){e.exports=n(11)(94)},553:function(e,t,n){e.exports=n(11)(206)},561:function(e,t,n){"use strict";var r=n(4),a=n(0);n(44),Object.defineProperty(t,"__esModule",{value:!0}),t.gupList=function(e){return function(t){t({type:s.GET_UPLOAD_LIST,data:e})}},t.gupfetch=function(e,t){var n,r=!1,a=!1;e?(r=e.needTranscode,a=e.type,n="".concat(u,"/upload/policy?needTranscode=").concat(r,"&type=").concat(a,"&date=").concat(new Date)):n="".concat(u,"/upload/policy?date=").concat(new Date);return function(e){return(0,o.default)({url:n}).then((function(n){if("1000"===n.code){var r=JSON.parse(n.data);e({type:s.GET_UPLOAD_PARAM,data:r}),t&&t()}return n}))}},t.upvideo=function(e,t,n){return function(n){return(0,o.default)({videoUpload:d,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(n({type:s.UP_INFO,data:JSON.parse(e.data)}),t&&t())}))}},t.videoInfo=function(e,t){return function(n){return(0,o.default)({videoPlay:f,data:e}).then((function(e){console.log(e.data),"1000"===e.code&&(n({type:s.VIDEO_INFO,data:e.data}),t&&t())}))}},t.UploadUtilFile=function(e){return{type:s.GET_FILE_NAME_ADDRESS,fileAddress:e}},t.clearUpload=function(){return function(e){e({type:s.CLEARUPLOAD})}};var o=a(n(76)),i=a(n(587)),s=r(n(231)),l=i.default.common,u=l.ossUrl,d=l.videoUpload,f=l.videoPlay},563:function(e,t,n){e.exports=n(11)(837)},564:function(e,t,n){"use strict";n.r(t);n(26),n(581),n(140)},568:function(e,t,n){e.exports=n(11)(333)},571:function(e,t,n){e.exports=n(11)(912)},575:function(e,t,n){"use strict";n.r(t);n(26),n(623)},581:function(e,t,n){"use strict";n.r(t);n(26),n(585)},585:function(e,t,n){},586:function(e,t,n){},587:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63)),o={common:{ossUrl:"GET ".concat(a.default.ossUrl),videoUpload:"POST ".concat(a.default.ossUrl,"/video/upload"),videoPlay:"GET ".concat(a.default.ossUrl,"/video/play"),ossPolicy:"GET ".concat(a.default.ossUrl,"/upload/policy")}};t.default=o},596:function(e,t,n){e.exports=n(11)(827)},616:function(e,t,n){"use strict";n.r(t);n(26),n(652)},617:function(e,t,n){e.exports=n(11)(824)},620:function(e,t,n){"use strict";var r=n(19),a=n(16),o=n(85),i=n(36),s=n(21),l=n(45),u=n(153),d=n(81),f=n(14),c=n(66),p=n(78).f,m=n(49).f,h=n(22).f,g=n(236).trim,v=a.Number,y=v.prototype,w="Number"==l(c(y)),k=function(e){var t,n,r,a,o,i,s,l,u=d(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=g(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=(o=u.slice(2)).length,s=0;s<i;s++)if((l=o.charCodeAt(s))<48||l>a)return NaN;return parseInt(o,r)}return+u};if(o("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var b,E=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof E&&(w?f((function(){y.valueOf.call(n)})):"Number"!=l(n))?u(new v(k(t)),n,E):k(t)},S=r?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;S.length>I;I++)s(v,b=S[I])&&!s(E,b)&&h(E,b,m(v,b));E.prototype=y,y.constructor=E,i(a,"Number",E)}},623:function(e,t,n){},634:function(e,t,n){"use strict";n.r(t);n(26),n(1290),n(655),n(146),n(569),n(584)},652:function(e,t,n){},663:function(e,t,n){"use strict";var r=n(4),a=n(0);n(101),n(51),n(20),n(34),n(35),n(23),n(53),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(98));n(580);var i=a(n(571));n(140);var s=a(n(535));n(99);var l=a(n(100));n(61);var u=a(n(62)),d=a(n(29)),f=a(n(30)),c=a(n(59)),p=a(n(32)),m=a(n(33)),h=a(n(31)),g=a(n(2));n(540);var v=a(n(539)),y=r(n(1)),w=n(52),k=n(561),b=a(n(671));function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=v.default.Item,I=function(e){(0,p.default)(r,e);var t,n=(t=r,function(){var e,n=(0,h.default)(t);if(E()){var r=(0,h.default)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,m.default)(this,e)});function r(e){var t;return(0,d.default)(this,r),t=n.call(this,e),(0,g.default)((0,c.default)(t),"testCourseBeforeUpload",(function(e,n){var r=(new Date).getTime();if(e.size>3145728)return u.default.error("上传图片过大（不能大于3M）"),!1;if(-1===e.type.indexOf("image"))return u.default.info("请上传图片文件"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var a=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(a))return t.setState({fileList:[]}),u.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),t.props.defaultUrl?t.props.gupList(t.props.defaultUrl):t.props.gupList([]),!1;var o=t.props.param,i=e.name.split(".").length;t.setState({uploadParams:{Filename:o.dir+"/"+r+"."+e.name.split(".")[i-1],key:o.dir+"/"+r+"."+e.name.split(".")[i-1],policy:o.policy,OSSAccessKeyId:o.accessid,success_action_status:"200",signature:o.signature},uploadAction:o.host})})),(0,g.default)((0,c.default)(t),"onRemove",(function(){t.props.resetImgList&&t.props.resetImgList(),t.props.clearUpload()})),(0,g.default)((0,c.default)(t),"onPreview",(function(e){var n=t.state.cacheUrl,r=n||e.url;window.open(r)})),t.state={uploadParams:{},uploadAction:"",cacheUrl:""},console.log(t.props.defaultUrl),t.props.defaultUrl&&t.props.gupList(t.props.defaultUrl),t.props.gupfetch(),t.beforeUpload=t.beforeUpload.bind((0,c.default)(t)),t.handleUploadChange=t.handleUploadChange.bind((0,c.default)(t)),t}return(0,f.default)(r,[{key:"beforeUpload",value:function(e,t){var n=(new Date).getTime();if(e.size>1048576)return u.default.error("上传文件过大（不能大于1M）"),!1;if(-1===e.type.indexOf("image"))return u.default.info("请上传图片文件"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;if("banner"==this.props.bannerType){if(e.size>=1048576)return u.default.error("上传文件过大（不能大于1M）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1}else{if(e.size>=512e3)return u.default.error("上传文件过大（不能大于500KB）"),!1;this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([])}var r=e.type.split("/")[1];if(-1===["jpg","jpeg","png"].indexOf(r))return this.setState({fileList:[]}),u.default.error("该图片文件格式不支持（支持jpg、jpeg、png）"),this.props.defaultUrl?this.props.gupList(this.props.defaultUrl):this.props.gupList([]),!1;var a=this.props.param,o=e.name.split(".").length;this.setState({uploadParams:{Filename:a.dir+"/"+n+"."+e.name.split(".")[o-1],key:a.dir+"/"+n+"."+e.name.split(".")[o-1],policy:a.policy,OSSAccessKeyId:a.accessid,success_action_status:"200",signature:a.signature},uploadAction:a.host,cacheUrl:a.host+"/"+a.dir+"/"+n+"."+e.name.split(".")[o-1]})}},{key:"handleUploadChange",value:function(e){var t=e.file,n=e.fileList,r=this.props.param,a=this.state.uploadParams.Filename;t.name.split(".").length;if("uploading"===t.status){var o=[];o.push(n.pop()),this.props.gupList(o)}if("done"===t.status){var i=[];i.push(n.pop()),this.props.gupList(i),this.props.getUrl&&this.props.getUrl(r.host+"/"+a)}}},{key:"componentWillUnmount",value:function(){this.props=null}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.state,r=n.uploadParams,a=n.uploadAction,u=this.props,d=u.required,f=u.fileList,c=(u.listType,this.props.layout?this.props.layout:{labelCol:{span:6},wrapperCol:{span:14}}),p="";p=0===f.length?"newState":"editState";return y.default.createElement(v.default,null,y.default.createElement(S,(0,o.default)({},c,{extra:this.props.extra,label:this.props.name?this.props.name:"播放展示图："})," ",t("logourl",{rules:[{required:!!d,message:"请上传缩略图"}]})(y.default.createElement("div",{className:b.default.credEditLogo,"data-status":p},y.default.createElement(i.default,{headers:{"X-Requested-With":null},accept:"image",listType:"picture-card",fileList:f,action:a,data:r,beforeUpload:this.props.testCourse?this.testCourseBeforeUpload:this.beforeUpload,onChange:this.handleUploadChange,onRemove:this.onRemove,onPreview:this.onPreview},this.props.disabled?null:0===f.length?y.default.createElement("div",null,y.default.createElement(l.default,{type:"plus"}),y.default.createElement("div",{className:"ant-upload-text"},"上传图片")):y.default.createElement("div",{className:"upload-btn"},y.default.createElement(s.default,{disabled:!!e.props.usable&&e.props.usable},"更换图片")))))))}}]),r}(y.Component);var R=v.default.create()((0,w.connect)((function(e,t){return{param:e.uploadParam.param,fileList:e.uploadParam.fileList}}),(function(e){return{gupfetch:function(){return e((0,k.gupfetch)())},gupList:function(t){return e((0,k.gupList)(t))},clearUpload:function(){return e((0,k.clearUpload)())}}}))(I));t.default=R},671:function(e,t,n){e.exports={credEditLogo:"credEditLogo__1fhCq","ant-upload-list-item-info":"ant-upload-list-item-info__1Pp8a","ant-upload-select-picture-card":"ant-upload-select-picture-card__2cZDS","ant-upload-list-item-actions":"ant-upload-list-item-actions__2odMN","anticon-delete":"anticon-delete__1uwBf","anticon-eye-o":"anticon-eye-o__2631W"}}}]);