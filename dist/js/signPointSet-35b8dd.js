(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{1015:function(t,e,a){},1016:function(t,e,a){},1021:function(t,e,a){},2140:function(t,e,a){"use strict";var n=a(4),l=a(0);a(3),a(101),a(40),a(620),a(20),a(34),a(23),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a(140);var r=l(a(535));a(556);var u=l(a(553));a(144);var i=l(a(230));a(99);var o=l(a(100));a(574);var c=l(a(565));a(616);var s=l(a(617));a(578);var d=l(a(570));a(755);var f=l(a(756));a(61);var m=l(a(62)),p=l(a(29)),g=l(a(30)),h=l(a(59)),v=l(a(32)),E=l(a(33)),y=l(a(31)),b=l(a(2));a(554);var S=l(a(550));a(537);var C=l(a(536)),x=n(a(1)),w=l(a(226)),I=a(52),L=a(84),N=a(2141);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}a(2143);var D=C.default.Group,T=S.default.Option,_=function(t){(0,v.default)(n,t);var e,a=(e=n,function(){var t,a=(0,y.default)(e);if(M()){var n=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,E.default)(this,t)});function n(t){var e;return(0,p.default)(this,n),e=a.call(this,t),(0,b.default)((0,h.default)(e),"reGetsigncardGet",(function(){var t=(0,h.default)(e);e.props.signcardGet({},(function(){var e=t.props.initData,a={},n=[];if(1==e.setType)a.point=e.sets[0].point;else if(2==e.setType)for(var l=0;l<e.sets.length;l++)n.push({minDate:e.sets[l].minDate,point:e.sets[l].point});a.point||(a.point=1),n.length>0||n.push({minDate:1,point:1}),t.setState({increase:a,initData:t.props.initData,customList:n,increaseOrCustom:2!=e.setType?1:e.setType,firstSignInput:e.firstPoint>0||0==e.firstPoint?e.firstPoint:1,cycleValue:e.cycle>0?e.cycle:7,isEnable:e.state})}))})),(0,b.default)((0,h.default)(e),"signcardSave",(function(t){var a=e.state,n=a.firstSignInput,l=a.increaseOrCustom,r=a.increase,u=a.customList,i=a.cycleValue,o={firstPoint:n,setType:l,calendarPointSets:1==l?[r]:u,cycle:i,state:a.isEnable?1:0};console.log("param=",o),2==l&&u[u.length-1].minDate>=i?m.default.warn("最长连续签到时间须大于积分策略设置的最大时间"):r.point<=0&&1==l?m.default.warn("连续递增积分须大于0"):e.props.signcardSave(o,(function(){e.reGetsigncardGet(),m.default.success("设置成功")}))})),(0,b.default)((0,h.default)(e),"firstSignInput",(function(t){e.setState({firstSignInput:Math.round(t)})})),(0,b.default)((0,h.default)(e),"increaseOrCustom",(function(t){e.setState({increaseOrCustom:t.target.value})})),(0,b.default)((0,h.default)(e),"increaseChange",(function(t){e.setState({increase:{point:Math.round(t)}})})),(0,b.default)((0,h.default)(e),"deleteCustom",(function(t){var a=e.state.customList;if(a.length>1){var n=a.filter((function(e,a){return a!=t}));e.setState({customList:n,tooSmall:!1,tooLarge:!1})}else m.default.warn("至少保留一条")})),(0,b.default)((0,h.default)(e),"addCustom",(function(){var t=e.state,a=t.customList,n=t.cycleValue,l=Number(a[a.length-1].minDate)+1;n<=l?m.default.warn("最长连续签到时间须大于积分策略设置的最大时间"):(a.push({minDate:l,point:1}),e.setState({customList:a}))})),(0,b.default)((0,h.default)(e),"customDayhange",(function(t,a){var n=e.state,l=n.customList,r=n.cycleValue,u=Math.round(t);r<=u?m.default.warn("最长连续签到时间须大于积分策略设置的最大时间"):(a>0&&(u<=l[a-1].minDate?e.setState({tooSmall:!0,exValue:l[a-1].minDate}):e.setState({tooSmall:!1})),a<l.length-1&&(u>=l[a+1].minDate?e.setState({tooLarge:!0,nextValue:l[a+1].minDate}):e.setState({tooLarge:!1})),l[a].minDate=u,e.setState({customList:l,currentIndex:a}))})),(0,b.default)((0,h.default)(e),"customScoreChange",(function(t,a){var n=e.state.customList;n[a].point=Math.round(t),e.setState({customList:n})})),(0,b.default)((0,h.default)(e),"cycleChange",(function(t,a){console.log(t,a);var n=e.state,l=n.customList,r=n.increaseOrCustom;if("zidingyiFlag"==t)e.setState({zidingyiFlag:!0,cycleValue:1});else{if(2==r&&Math.round(t)<=l[l.length-1].minDate)return void m.default.warn("最长连续签到时间须大于积分策略设置的最大时间");e.setState({cycleValue:Math.round(t),zidingyiFlag:!1})}})),(0,b.default)((0,h.default)(e),"cycleChange2",(function(t,a){console.log(t,a);var n=e.state,l=n.customList;2==n.increaseOrCustom&&Math.round(t)<=l[l.length-1].minDate&&m.default.warn("最长连续签到时间须大于积分策略设置的最大时间"),e.setState({cycleValue:Math.round(t)})})),(0,b.default)((0,h.default)(e),"isEnableChange",(function(t,a){var n=(0,h.default)(e);console.log("checked,event==",t,a),e.setState({isEnable:t},(function(){t||n.signcardSave("close")}))})),e.state={visible:!1,firstSignInput:1,increaseOrCustom:1,cycleValue:7,increase:{point:1},customList:[{minDate:1,point:1}],tooSmall:!1,tooLarge:!1,nextValue:"",exValue:"",currentIndex:"",initData:{},isEnable:!1,zidingyiFlag:!1},e}return(0,g.default)(n,[{key:"componentWillMount",value:function(){console.log("guaizai=====wanbi")}},{key:"componentDidMount",value:function(){this.reGetsigncardGet(),console.log("guaizaiwanbi")}},{key:"render",value:function(){var t=this;console.log("props==",this.props),console.log("state==",this.state);var e=this.state,a=e.customList,n=e.increaseOrCustom;e.initData;return x.default.createElement("div",{style:{padding:20}},x.default.createElement(w.default,{title:"签到打卡"}),x.default.createElement("div",{className:"set-point",style:{border:" 1px solid #9999",height:100,padding:" 20px 20px",backgroundColor:"#f5f5f5"}},x.default.createElement("div",{style:{display:"inline-block"}},x.default.createElement("div",{style:{fontSize:26}},"签到打卡"),x.default.createElement("span",{style:{color:"darkorange"}},"说明：开启后，配置签到积分，用户登录可以签到打卡获得积分，您需要在【显示配置】或者【门户管理】中配置签到打卡入口！")," "),x.default.createElement(f.default,{checkedChildren:"ON",unCheckedChildren:"OFF",checked:Boolean(this.state.isEnable),style:{width:80,float:" right",marginTop:10},onChange:this.isEnableChange})),Boolean(this.state.isEnable)?x.default.createElement("div",{style:{width:700}},x.default.createElement(c.default,{align:"middle",style:{marginTop:20}},x.default.createElement(d.default,{span:7,style:{textAlign:"right"}},"首次签到获取积分："),x.default.createElement(d.default,{span:5},x.default.createElement(s.default,{onChange:this.firstSignInput,value:this.state.firstSignInput,min:0}))),x.default.createElement(c.default,{style:{marginTop:20}},x.default.createElement(d.default,{span:7,style:{textAlign:"right"}},x.default.createElement(i.default,{placement:"left",title:"策略包括：连续递增和自定义，同时只能选择一种 1）连续递增：连续签到每次较上次增加相同积分值，比如：1,2,3,4...或者1,3,5,7...2）自定义：支持连续签到n天后，每次签到获得相同积分，比如：1,2,3,4,5,6,7,7,7,7..."},x.default.createElement(o.default,{type:"question-circle",style:{fontSize:14,color:"#999",marginRight:5}})),x.default.createElement("span",null,"积分策略：")),x.default.createElement(d.default,{span:17},x.default.createElement(u.default.Group,{value:n,buttonStyle:"solid",onChange:this.increaseOrCustom},x.default.createElement(u.default.Button,{value:1},"连续递增"),x.default.createElement(u.default.Button,{value:2},"自定义")),x.default.createElement("div",null,1==this.state.increaseOrCustom?x.default.createElement(D,{compact:!0,style:{marginTop:10}},x.default.createElement(C.default,{style:{width:140,color:"black",pointerEvents:"none"},value:"连续签到每日递增",disabled:!0}),x.default.createElement(s.default,{style:{width:80},value:this.state.increase.point,onChange:this.increaseChange,min:1,defaultValue:1}),x.default.createElement(C.default,{style:{width:60,color:"black",pointerEvents:"none"},value:"积分",disabled:!0})):x.default.createElement("div",null,a.map((function(e,n){return x.default.createElement("div",{key:n},x.default.createElement(D,{compact:!0,style:{marginTop:10,display:"inline-block",width:"max-content"}},x.default.createElement(C.default,{style:{width:80,color:"black",pointerEvents:"none"},value:"连续签到",disabled:!0}),x.default.createElement(s.default,{style:{width:70},min:1,value:e.minDate,onChange:function(e){return t.customDayhange(e,n)},disabled:Boolean((t.state.tooLarge||t.state.tooSmall)&!(t.state.currentIndex==n))}),x.default.createElement(C.default,{style:{width:120,color:"black",pointerEvents:"none"},value:"天后,每日获得",disabled:!0}),x.default.createElement(s.default,{style:{width:80},min:1,value:e.point,onChange:function(e){return t.customScoreChange(e,n)}}),x.default.createElement(C.default,{style:{width:50,color:"black",pointerEvents:"none"},value:"积分",disabled:!0})),a.length>1?(t.state.tooLarge||t.state.tooSmall)&!(t.state.currentIndex==n)?"":x.default.createElement("a",{href:"javascript:void(0)",style:{marginLeft:20},onClick:function(){return t.deleteCustom(n)}},"删除"):"",t.state.tooLarge&t.state.currentIndex==n?x.default.createElement("div",{style:{color:"red"}},"请输入一个小于",t.state.nextValue,"的数"):"",t.state.tooSmall&t.state.currentIndex==n?x.default.createElement("div",{style:{color:"red"}},"请输入一个大于",t.state.exValue,"的数"):"")})),this.state.tooLarge||this.state.tooSmall?"":x.default.createElement("div",null,x.default.createElement("a",{href:"javascript:void(0)",onClick:this.addCustom}," ","+ 新增一级签到积分")))))),x.default.createElement(c.default,{style:{marginTop:"20px"}},x.default.createElement(d.default,{span:7,style:{textAlign:"right"}},x.default.createElement(i.default,{placement:"bottomLeft",title:"当连续签到时间达到最长时间，则从头开始计算积分"},x.default.createElement(o.default,{type:"question-circle",style:{fontSize:14,color:"#999",marginRight:5}})),x.default.createElement("span",null,"最长连续签到时间(天)：")),x.default.createElement(d.default,{span:12},x.default.createElement(S.default,{value:[7,30,9999].indexOf(Number(this.state.cycleValue))>-1?Number(this.state.cycleValue):"zidingyiFlag",style:{width:136},onChange:this.cycleChange},x.default.createElement(T,{value:7},"7天"),x.default.createElement(T,{value:30},"30天"),x.default.createElement(T,{value:9999},"不限制"),x.default.createElement(T,{value:"zidingyiFlag"},"自定义")),-1==[7,30,9999].indexOf(Number(this.state.cycleValue))||this.state.zidingyiFlag?x.default.createElement(s.default,{style:{width:80,marginLeft:20},type:"number",min:1,value:this.state.cycleValue,onChange:this.cycleChange2}):"")),x.default.createElement(r.default,{type:"primary",style:{margin:"80px 210px"},onClick:this.signcardSave,disabled:this.state.tooLarge||this.state.tooSmall},"保存")):"")}}]),n}(x.Component),k=(0,I.connect)((function(t){return{initData:t.signplaycardRedux.signcardSet}}),(function(t){return{signcardSave:(0,L.bindActionCreators)(N.signcardSave,t),signcardGet:(0,L.bindActionCreators)(N.signcardGet,t)}}))(_);e.default=k},2141:function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:!0}),e.signcardSave=function(t,e){console.log(t);var a=r.default.signcardSave;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?e&&e():l.default.error(t.subMsg)}))}},e.signcardGet=function(t,e){var a=r.default.signcardGet;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?(n({type:"SIGN_CARD_SET",data:t.data}),e&&e(t)):l.default.error(t.subMsg)}))}},e.getChart=function(t,e){return function(a){return(0,u.default)({url:url,data:t}).then((function(t){"1000"===t.code?(a({type:"SIGN_CARD_CHART",data:t.data}),e&&e()):l.default.error(t.subMsg)}))}},e.getReportList=function(t,e){var a=r.default.getReportList;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?(n({type:"SIGN_CARD_LIST",data:t}),e&&e(t)):l.default.error(t.subMsg)}))}},e.accountExport=function(t,e){var a=r.default.accountExport;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?e&&e(t):l.default.error(t.subMsg)}))}},e.detailExport=function(t,e){var a=r.default.detailExport;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?e&&e(t):l.default.error(t.subMsg)}))}},e.listExport=function(t,e){var a=r.default.listExport;return function(n){return(0,u.default)({url:a,data:t}).then((function(t){"1000"===t.code?e&&e(t):l.default.error(t.subMsg)}))}},a(61);var l=n(a(62)),r=n(a(2142)),u=n(a(78))},2142:function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=n(a(63)),r={signcardSave:"POST ".concat(l.default.webManage,"/calendar/save"),signcardGet:"GET ".concat(l.default.webManage,"/calendar/get"),getChart:"GET ".concat(l.default.webManage,"/report/calendar/chart"),getReportList:"GET ".concat(l.default.webManage,"/report/calendar/list"),accountExport:"GET ".concat(l.default.webManage,"/report/calendar/account/export"),detailExport:"GET ".concat(l.default.webManage,"/report/calendar/detail/export"),listExport:"GET ".concat(l.default.webManage,"/report/calendar/list/export")};e.default=r},2143:function(t,e,a){t.exports={"set-point":"set-point__S8uS8","ant-switch-inner":"ant-switch-inner__JttND","ant-switch-checked":"ant-switch-checked__1j1Kl","ant-switch":"ant-switch__3TUi6"}},535:function(t,e,a){t.exports=a(11)(70)},536:function(t,e,a){t.exports=a(11)(166)},537:function(t,e,a){"use strict";a.r(e);a(26),a(586),a(140)},550:function(t,e,a){t.exports=a(11)(94)},553:function(t,e,a){t.exports=a(11)(206)},554:function(t,e,a){"use strict";a.r(e);a(26),a(1021),a(655)},556:function(t,e,a){"use strict";a.r(e);a(26),a(1016)},565:function(t,e,a){t.exports=a(11)(170)},570:function(t,e,a){t.exports=a(11)(99)},574:function(t,e,a){"use strict";a.r(e);a(26),a(584)},578:function(t,e,a){"use strict";a.r(e);a(26),a(584)},586:function(t,e,a){},616:function(t,e,a){"use strict";a.r(e);a(26),a(652)},617:function(t,e,a){t.exports=a(11)(824)},620:function(t,e,a){"use strict";var n=a(19),l=a(16),r=a(85),u=a(36),i=a(21),o=a(45),c=a(153),s=a(83),d=a(14),f=a(66),m=a(80).f,p=a(49).f,g=a(22).f,h=a(236).trim,v=l.Number,E=v.prototype,y="Number"==o(f(E)),b=function(t){var e,a,n,l,r,u,i,o,c=s(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=h(c)).charCodeAt(0))||45===e){if(88===(a=c.charCodeAt(2))||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,l=49;break;case 79:case 111:n=8,l=55;break;default:return+c}for(u=(r=c.slice(2)).length,i=0;i<u;i++)if((o=r.charCodeAt(i))<48||o>l)return NaN;return parseInt(r,n)}return+c};if(r("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,C=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof C&&(y?d((function(){E.valueOf.call(a)})):"Number"!=o(a))?c(new v(b(e)),a,C):b(e)},x=n?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(v,S=x[w])&&!i(C,S)&&g(C,S,p(v,S));C.prototype=E,E.constructor=C,u(l,"Number",C)}},652:function(t,e,a){},655:function(t,e,a){"use strict";a(26),a(1015)},755:function(t,e,a){"use strict";a.r(e);a(26),a(901)},756:function(t,e,a){t.exports=a(11)(845)},901:function(t,e,a){}}]);